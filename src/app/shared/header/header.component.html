<header class="main-header" [class.scrolled]="isScrolled">
  <div class="container header-flex">
    <div class="header-row header-top">
      <!-- Logo principal + branding -->
      <a routerLink="/" class="logo" aria-label="Ir a inicio">
        <span class="logo-badge" aria-hidden="true">
          <img [src]="logoUrl || 'assets/logo.png'" alt="Logo" class="logo-image">
        </span>
        <span class="brand">
          <span class="brand-tagline">Catálogo premium • Envíos y atención rápida</span>
        </span>
      </a>

      <!-- Botón menú hamburguesa para móviles -->
      <button 
        class="menu-toggle" 
        [class.active]="isMenuOpen"
        (click)="toggleMenu()"
        aria-label="Abrir o cerrar menú de navegación"
        [attr.aria-expanded]="isMenuOpen">
        <i class="fas" [class.fa-bars]="!isMenuOpen" [class.fa-times]="isMenuOpen"></i>
      </button>
    </div>

    <div class="header-row header-bottom">
      <!-- Navegación principal -->
      <nav [class.open]="isMenuOpen" class="main-nav" role="navigation" aria-label="Menú principal">
      <ul class="nav-links" role="menubar">
        <li role="none">
          <a routerLink="/" 
             routerLinkActive="active" 
             [routerLinkActiveOptions]="{exact: true}"
             class="nav-link"
             (click)="closeMenu()"
             role="menuitem">
            <i class="fas fa-home"></i> <span>Inicio</span>
          </a>
        </li>
        <li role="none">
          <a routerLink="/productos" 
             routerLinkActive="active" 
             class="nav-link"
             (click)="closeMenu()"
             role="menuitem">
            <i class="fas fa-store"></i> <span>Productos</span>
          </a>
        </li>
        <li role="none">
          <a routerLink="/contacto" 
             routerLinkActive="active" 
             class="nav-link"
             (click)="closeMenu()"
             role="menuitem">
            <i class="fas fa-envelope"></i> <span>Contacto</span>
          </a>
        </li>

        <!-- Menú de administración solo visible para administradores -->
        <li role="none" *ngIf="isAdmin$ | async" class="admin-menu" [class.open]="isAdminMenuOpen">
          <button class="nav-link admin-toggle" (click)="toggleAdminMenu($event)" aria-haspopup="true" [attr.aria-expanded]="isAdminMenuOpen">
            <i class="fas fa-cog"></i> <span>Administración</span>
            <i class="fas fa-chevron-down chevron"></i>
          </button>
          <ul class="admin-submenu" role="menu" [class.open]="isAdminMenuOpen">
            <li role="none">
              <a routerLink="/gestionar-productos" 
                 routerLinkActive="active" 
                 class="nav-link"
                 (click)="closeMenu()"
                 role="menuitem">
                <i class="fas fa-box"></i> <span>Gestionar Productos</span>
              </a>
            </li>
            <li role="none">
              <a routerLink="/gestionar-categorias" 
                 routerLinkActive="active" 
                 class="nav-link"
                 (click)="closeMenu()"
                 role="menuitem">
                <i class="fas fa-tags"></i> <span>Gestionar Categorías</span>
              </a>
            </li>
            <li role="none">
              <a routerLink="/ventas" 
                 routerLinkActive="active" 
                 class="nav-link"
                 (click)="closeMenu()"
                 role="menuitem">
                <i class="fas fa-cash-register"></i> <span>Ventas</span>
              </a>
            </li>
            <li role="none">
              <a routerLink="/caja" 
                 routerLinkActive="active" 
                 class="nav-link"
                 (click)="closeMenu()"
                 role="menuitem">
                <i class="fas fa-money-bill-wave"></i> <span>Caja</span>
              </a>
            </li>
            <li role="none">
              <a routerLink="/metodos-pago" 
                 routerLinkActive="active" 
                 class="nav-link"
                 (click)="closeMenu()"
                 role="menuitem">
                <i class="fas fa-credit-card"></i> <span>Métodos de Pago</span>
              </a>
            </li>
            <li role="none">
              <a routerLink="/lista-precios-mayorista" 
                 routerLinkActive="active" 
                 class="nav-link"
                 (click)="closeMenu()"
                 role="menuitem">
                <i class="fas fa-file-invoice-dollar"></i> <span>Lista de Precios Mayorista</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <!-- Acciones de usuario -->
      <div class="user-actions">
        <a routerLink="/carrito" 
           class="cart-button" 
           (click)="closeMenu()"
           aria-label="Carrito de compras">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-label">Carrito</span>
          <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
        </a>
        
        <button *ngIf="!(isLoggedIn$ | async)" 
                (click)="login()" 
                class="auth-button auth-login"
                aria-label="Iniciar sesión">
          <i class="fas fa-sign-in-alt"></i> <span>Iniciar Sesión</span>
        </button>
        
        <button *ngIf="isLoggedIn$ | async" 
                (click)="logout()" 
                class="auth-button auth-logout"
                aria-label="Cerrar sesión">
          <i class="fas fa-sign-out-alt"></i> <span>Cerrar Sesión</span>
        </button>
      </div>
    </nav>
    </div>
  </div>
</header>