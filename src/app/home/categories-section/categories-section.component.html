<section class="categories-section">
  <div class="container">
    <div class="categories-header">
      <div class="section-meta">
        <span class="eyebrow">Colecciones por categoría</span>
        <h2>Explorá por ritual</h2>
        <p>Elegí una categoría y entrá directo a su colección con producto insignia y una vista rápida del resto.</p>
      </div>

      <div class="categories-cta" data-aos="fade-left">
        <div class="cta-card">
          <div class="cta-copy">
            <span class="cta-kicker">Acceso rápido</span>
            <h3>Ver todo el catálogo</h3>
            <p>Filtrá por categoría, precio y stock. Compra rápida desde el listado.</p>
          </div>
          <a class="cta-pill" routerLink="/productos">
            Ir a productos
            <i class="fas fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="state-card" *ngIf="isLoading">
      <i class="fas fa-spinner fa-spin"></i>
      <span>Estamos preparando las colecciones…</span>
    </div>

    <div class="state-card error" *ngIf="!isLoading && errorMessage">
      <i class="fas fa-exclamation-circle"></i>
      <span>{{ errorMessage }}</span>
    </div>

    <div class="categories-mosaic" *ngIf="!isLoading && !errorMessage">
      <article
        class="mosaic-card featured-only"
        *ngFor="let showcase of showcases; index as i"
        data-aos="fade-up"
        [attr.data-aos-delay]="80 * i">
        <a
          class="featured-link"
          [routerLink]="['/productos']"
          [queryParams]="{categoria: showcase.category.slug}"
          [attr.aria-label]="'Ver productos de ' + showcase.category.name">
          <div class="mosaic-featured" *ngIf="showcase.featuredProduct as featured">
            <div class="featured-left">
              <span class="featured-tag">{{ showcase.category.name }}</span>
              <span class="featured-name">{{ featured.name }}</span>
              <span class="featured-price" *ngIf="featured.price">{{ featured.price | currency:'ARS':'symbol-narrow' }}</span>
            </div>
            <div class="featured-thumb">
              <img
                [src]="featured.image"
                [alt]="featured.name"
                loading="lazy"
                (error)="handleImageError($event, '')">
            </div>
          </div>
        </a>
      </article>
    </div>
  </div>
</section>
