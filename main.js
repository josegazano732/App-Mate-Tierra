(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[179],{6962:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{r:()=>we});var A=Z(2076),s=Z(2843),te=Z(4004),me=Z(262),ie=Z(8256),re=Z(3387);let we=(()=>{const Se=class{constructor(Ce){this.supabase=Ce}getSettings(){return(0,A.D)(this.supabase.client.from("discount_settings").select("*").single()).pipe((0,te.U)(({data:Ce,error:ve})=>{if(ve)throw ve;return Ce}),(0,me.K)(Ce=>(console.error("Error fetching discount settings:",Ce),(0,s._)(()=>new Error("Error loading discount settings")))))}updateSettings(Ce){return(0,A.D)(this.supabase.client.from("discount_settings").update(Ce).eq("id","00000000-0000-0000-0000-000000000000").select().single()).pipe((0,te.U)(({data:ve,error:Oe})=>{if(Oe)throw Oe;return ve}),(0,me.K)(ve=>(console.error("Error updating discount settings:",ve),(0,s._)(()=>new Error("Error updating discount settings")))))}};let Ie=Se;return Se.\u0275fac=function(ve){return new(ve||Se)(ie.LFG(re.T))},Se.\u0275prov=ie.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Ie})()},6082:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{M:()=>Ie});var A=Z(2076),s=Z(2843),te=Z(5625),me=Z(4004),ie=Z(262),re=Z(8256),we=Z(3387);let Ie=(()=>{const Ue=class{constructor(ve){this.supabase=ve}getProducts(){return(0,A.D)(this.supabase.client.from("product_details").select("*").order("created_at",{ascending:!1})).pipe((0,te.X)(3),(0,me.U)(({data:ve,error:Oe})=>{if(Oe)throw Oe;return(ve||[]).map(nt=>this.normalizeProductRow(nt))}),(0,ie.K)(ve=>(console.error("Error loading products:",ve),(0,s._)(()=>new Error("Error loading products. Please try again later.")))))}getSeasonalProducts(ve=5){return(0,A.D)(this.supabase.client.from("product_details").select("*").eq("seasonal",!0).limit(ve)).pipe((0,te.X)(3),(0,me.U)(({data:Oe,error:Pe})=>{if(Pe)throw Pe;return(Oe||[]).map(gt=>this.normalizeProductRow(gt))}),(0,ie.K)(Oe=>(console.error("Error loading seasonal products:",Oe),(0,s._)(()=>new Error("Error loading seasonal products")))))}getProductById(ve){return(0,A.D)(this.supabase.client.from("product_details").select("*").eq("id",ve).single()).pipe((0,te.X)(3),(0,me.U)(({data:Oe,error:Pe})=>{if(Pe)throw Pe;return Oe?this.normalizeProductRow(Oe):null}),(0,ie.K)(Oe=>(console.error("Error loading product:",Oe),(0,s._)(()=>new Error("Error loading product. Please try again later.")))))}addProduct(ve){const Oe=this.sanitizeImageUrls(ve.image,ve.image_urls);return(0,A.D)(this.supabase.client.from("products").insert([{name:ve.name,description:ve.description,price:ve.price,image:Oe[0]??("string"==typeof ve.image?ve.image.trim():""),image_urls:Oe,category_id:ve.category_id,stock:ve.stock,seasonal:ve.seasonal,cost:ve.cost,markup_percentage:ve.markup_percentage}]).select().single()).pipe((0,me.U)(({data:Pe,error:nt})=>{if(nt)throw nt;if(!Pe)throw new Error("No data returned");return this.normalizeProductRow(Pe)}),(0,ie.K)(Pe=>(console.error("Error adding product:",Pe),(0,s._)(()=>new Error("Error adding product")))))}updateProduct(ve,Oe){const Pe=this.sanitizeImageUrls(Oe.image,Oe.image_urls),nt={name:Oe.name,description:Oe.description,price:Oe.price,image:Pe[0]??("string"==typeof Oe.image?Oe.image.trim():""),image_urls:Pe,category_id:Oe.category_id,stock:Oe.stock,seasonal:Oe.seasonal,cost:Oe.cost,markup_percentage:Oe.markup_percentage};return(0,A.D)(this.supabase.client.from("products").update(nt).eq("id",ve).select().single()).pipe((0,me.U)(({data:gt,error:Ft})=>{if(Ft)throw Ft;if(!gt)throw new Error("Product not found");return this.normalizeProductRow(gt)}),(0,ie.K)(gt=>(console.error("Error updating product:",gt),(0,s._)(()=>new Error("Error updating product")))))}deleteProduct(ve){return(0,A.D)(this.supabase.client.from("products").delete().eq("id",ve)).pipe((0,me.U)(({error:Oe})=>{if(Oe)throw Oe}),(0,ie.K)(Oe=>(console.error("Error deleting product:",Oe),(0,s._)(()=>new Error("Error deleting product")))))}searchProducts(ve){return(0,A.D)(this.supabase.client.from("product_details").select("*").ilike("name",`%${ve}%`).limit(10)).pipe((0,te.X)(3),(0,me.U)(({data:Oe,error:Pe})=>{if(Pe)throw Pe;return(Oe||[]).map(gt=>this.normalizeProductRow(gt))}),(0,ie.K)(Oe=>(console.error("Error searching products:",Oe),(0,s._)(()=>new Error("Error searching products")))))}sanitizeImageUrls(ve,Oe){const gt=(Array.isArray(Oe)?Oe:[]).map(Ft=>"string"==typeof Ft?Ft.trim():"").filter(Ft=>Ft.length>0).filter((Ft,ln,Wt)=>Wt.indexOf(Ft)===ln);return 0===gt.length&&"string"==typeof ve&&ve.trim().length>0&&gt.push(ve.trim()),gt.slice(0,3)}normalizeProductRow(ve){const Oe=this.sanitizeImageUrls(ve?.image,ve?.image_urls),Pe=Oe[0]??("string"==typeof ve?.image?ve.image:"");return{...ve,image:Pe,image_urls:Oe}}};let Se=Ue;return Ue.\u0275fac=function(Oe){return new(Oe||Ue)(re.LFG(we.T))},Ue.\u0275prov=re.Yz7({token:Ue,factory:Ue.\u0275fac,providedIn:"root"}),Se})()},3387:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{T:()=>vi});var A=Z(5861);class te extends Error{constructor(k,b="FunctionsError",E){super(k),this.name=b,this.context=E}}class me extends te{constructor(k){super("Failed to send a request to the Edge Function","FunctionsFetchError",k)}}class ie extends te{constructor(k){super("Relay Error invoking the Edge Function","FunctionsRelayError",k)}}class re extends te{constructor(k){super("Edge Function returned a non-2xx status code","FunctionsHttpError",k)}}var we=(()=>{return(q=we||(we={})).Any="any",q.ApNortheast1="ap-northeast-1",q.ApNortheast2="ap-northeast-2",q.ApSouth1="ap-south-1",q.ApSoutheast1="ap-southeast-1",q.ApSoutheast2="ap-southeast-2",q.CaCentral1="ca-central-1",q.EuCentral1="eu-central-1",q.EuWest1="eu-west-1",q.EuWest2="eu-west-2",q.EuWest3="eu-west-3",q.SaEast1="sa-east-1",q.UsEast1="us-east-1",q.UsWest1="us-west-1",q.UsWest2="us-west-2",we;var q})();class Se{constructor(k,{headers:b={},customFetch:E,region:N=we.Any}={}){this.url=k,this.headers=b,this.region=N,this.fetch=(q=>{let k;return k=q||(typeof fetch>"u"?(...b)=>Promise.resolve().then(Z.bind(Z,6397)).then(({default:E})=>E(...b)):fetch),(...b)=>k(...b)})(E)}setAuth(k){this.headers.Authorization=`Bearer ${k}`}invoke(k,b={}){var E;return function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})}(this,void 0,void 0,function*(){try{const{headers:N,method:j,body:H}=b;let Me,X={},{region:ge}=b;ge||(ge=this.region),ge&&"any"!==ge&&(X["x-region"]=ge),H&&(N&&!Object.prototype.hasOwnProperty.call(N,"Content-Type")||!N)&&(typeof Blob<"u"&&H instanceof Blob||H instanceof ArrayBuffer?(X["Content-Type"]="application/octet-stream",Me=H):"string"==typeof H?(X["Content-Type"]="text/plain",Me=H):typeof FormData<"u"&&H instanceof FormData?Me=H:(X["Content-Type"]="application/json",Me=JSON.stringify(H)));const _e=yield this.fetch(`${this.url}/${k}`,{method:j||"POST",headers:Object.assign(Object.assign(Object.assign({},X),this.headers),N),body:Me}).catch(Cn=>{throw new me(Cn)}),xt=_e.headers.get("x-relay-error");if(xt&&"true"===xt)throw new ie(_e);if(!_e.ok)throw new re(_e);let Sn,vn=(null!==(E=_e.headers.get("Content-Type"))&&void 0!==E?E:"text/plain").split(";")[0].trim();return Sn="application/json"===vn?yield _e.json():"application/octet-stream"===vn?yield _e.blob():"text/event-stream"===vn?_e:"multipart/form-data"===vn?yield _e.formData():yield _e.text(),{data:Sn,error:null}}catch(N){return{data:null,error:N}}})}}var Ue=Z(8358);const{PostgrestClient:Ce}=Ue,Wt={"X-Client-Info":"realtime-js/2.11.2"};var qt=(()=>{return(q=qt||(qt={}))[q.connecting=0]="connecting",q[q.open=1]="open",q[q.closing=2]="closing",q[q.closed=3]="closed",qt;var q})(),Mt=(()=>{return(q=Mt||(Mt={})).closed="closed",q.errored="errored",q.joined="joined",q.joining="joining",q.leaving="leaving",Mt;var q})(),Fe=(()=>{return(q=Fe||(Fe={})).close="phx_close",q.error="phx_error",q.join="phx_join",q.reply="phx_reply",q.leave="phx_leave",q.access_token="access_token",Fe;var q})(),_t=(()=>((_t||(_t={})).websocket="websocket",_t))(),He=(()=>{return(q=He||(He={})).Connecting="connecting",q.Open="open",q.Closing="closing",q.Closed="closed",He;var q})();class kt{constructor(){this.HEADER_LENGTH=1}decode(k,b){return k.constructor===ArrayBuffer?b(this._binaryDecode(k)):b("string"==typeof k?JSON.parse(k):{})}_binaryDecode(k){const b=new DataView(k),E=new TextDecoder;return this._decodeBroadcast(k,b,E)}_decodeBroadcast(k,b,E){const N=b.getUint8(1),j=b.getUint8(2);let H=this.HEADER_LENGTH+2;const X=E.decode(k.slice(H,H+N));H+=N;const ge=E.decode(k.slice(H,H+j));return H+=j,{ref:null,topic:X,event:ge,payload:JSON.parse(E.decode(k.slice(H,k.byteLength)))}}}class pn{constructor(k,b){this.callback=k,this.timerCalc=b,this.timer=void 0,this.tries=0,this.callback=k,this.timerCalc=b}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mn=(()=>{return(q=mn||(mn={})).abstime="abstime",q.bool="bool",q.date="date",q.daterange="daterange",q.float4="float4",q.float8="float8",q.int2="int2",q.int4="int4",q.int4range="int4range",q.int8="int8",q.int8range="int8range",q.json="json",q.jsonb="jsonb",q.money="money",q.numeric="numeric",q.oid="oid",q.reltime="reltime",q.text="text",q.time="time",q.timestamp="timestamp",q.timestamptz="timestamptz",q.timetz="timetz",q.tsrange="tsrange",q.tstzrange="tstzrange",mn;var q})();const nn=(q,k,b={})=>{var E;const N=null!==(E=b.skipTypes)&&void 0!==E?E:[];return Object.keys(k).reduce((j,H)=>(j[H]=Or(H,q,k,N),j),{})},Or=(q,k,b,E)=>{const j=k.find(X=>X.name===q)?.type,H=b[q];return j&&!E.includes(j)?Ur(j,H):gi(H)},Ur=(q,k)=>{if("_"===q.charAt(0)){const b=q.slice(1,q.length);return it(k,b)}switch(q){case mn.bool:return Tr(k);case mn.float4:case mn.float8:case mn.int2:case mn.int4:case mn.int8:case mn.numeric:case mn.oid:return qe(k);case mn.json:case mn.jsonb:return $e(k);case mn.timestamp:return st(k);default:return gi(k)}},gi=q=>q,Tr=q=>{switch(q){case"t":return!0;case"f":return!1;default:return q}},qe=q=>{if("string"==typeof q){const k=parseFloat(q);if(!Number.isNaN(k))return k}return q},$e=q=>{if("string"==typeof q)try{return JSON.parse(q)}catch(k){return console.log(`JSON parse error: ${k}`),q}return q},it=(q,k)=>{if("string"!=typeof q)return q;const b=q.length-1;if("{"===q[0]&&"}"===q[b]){let j;const H=q.slice(1,b);try{j=JSON.parse("["+H+"]")}catch{j=H?H.split(","):[]}return j.map(X=>Ur(k,X))}return q},st=q=>"string"==typeof q?q.replace(" ","T"):q,vt=q=>{let k=q;return k=k.replace(/^ws/i,"http"),k=k.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),k.replace(/\/+$/,"")};class pt{constructor(k,b,E={},N=1e4){this.channel=k,this.event=b,this.payload=E,this.timeout=N,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(k){this.timeout=k,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(k){this.payload=Object.assign(Object.assign({},this.payload),k)}receive(k,b){var E;return this._hasReceived(k)&&b(null===(E=this.receivedResp)||void 0===E?void 0:E.response),this.recHooks.push({status:k,callback:b}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},b=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=b,this._matchReceive(b)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(k,b){this.refEvent&&this.channel._trigger(this.refEvent,{status:k,response:b})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:k,response:b}){this.recHooks.filter(E=>E.status===k).forEach(E=>E.callback(b))}_hasReceived(k){return this.receivedResp&&this.receivedResp.status===k}}class En{constructor(k,b){this.channel=k,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const E=b?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(E.state,{},N=>{const{onJoin:j,onLeave:H,onSync:X}=this.caller;this.joinRef=this.channel._joinRef(),this.state=En.syncState(this.state,N,j,H),this.pendingDiffs.forEach(ge=>{this.state=En.syncDiff(this.state,ge,j,H)}),this.pendingDiffs=[],X()}),this.channel._on(E.diff,{},N=>{const{onJoin:j,onLeave:H,onSync:X}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(N):(this.state=En.syncDiff(this.state,N,j,H),X())}),this.onJoin((N,j,H)=>{this.channel._trigger("presence",{event:"join",key:N,currentPresences:j,newPresences:H})}),this.onLeave((N,j,H)=>{this.channel._trigger("presence",{event:"leave",key:N,currentPresences:j,leftPresences:H})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(k,b,E,N){const j=this.cloneDeep(k),H=this.transformState(b),X={},ge={};return this.map(j,(Me,_e)=>{H[Me]||(ge[Me]=_e)}),this.map(H,(Me,_e)=>{const xt=j[Me];if(xt){const vn=_e.map(yn=>yn.presence_ref),Sn=xt.map(yn=>yn.presence_ref),Cn=_e.filter(yn=>Sn.indexOf(yn.presence_ref)<0),ot=xt.filter(yn=>vn.indexOf(yn.presence_ref)<0);Cn.length>0&&(X[Me]=Cn),ot.length>0&&(ge[Me]=ot)}else X[Me]=_e}),this.syncDiff(j,{joins:X,leaves:ge},E,N)}static syncDiff(k,b,E,N){const{joins:j,leaves:H}={joins:this.transformState(b.joins),leaves:this.transformState(b.leaves)};return E||(E=()=>{}),N||(N=()=>{}),this.map(j,(X,ge)=>{var Me;const _e=null!==(Me=k[X])&&void 0!==Me?Me:[];if(k[X]=this.cloneDeep(ge),_e.length>0){const xt=k[X].map(Sn=>Sn.presence_ref),vn=_e.filter(Sn=>xt.indexOf(Sn.presence_ref)<0);k[X].unshift(...vn)}E(X,_e,ge)}),this.map(H,(X,ge)=>{let Me=k[X];if(!Me)return;const _e=ge.map(xt=>xt.presence_ref);Me=Me.filter(xt=>_e.indexOf(xt.presence_ref)<0),k[X]=Me,N(X,Me,ge),0===Me.length&&delete k[X]}),k}static map(k,b){return Object.getOwnPropertyNames(k).map(E=>b(E,k[E]))}static transformState(k){return k=this.cloneDeep(k),Object.getOwnPropertyNames(k).reduce((b,E)=>{const N=k[E];return b[E]="metas"in N?N.metas.map(j=>(j.presence_ref=j.phx_ref,delete j.phx_ref,delete j.phx_ref_prev,j)):N,b},{})}static cloneDeep(k){return JSON.parse(JSON.stringify(k))}onJoin(k){this.caller.onJoin=k}onLeave(k){this.caller.onLeave=k}onSync(k){this.caller.onSync=k}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yt=(()=>{return(q=yt||(yt={})).SUBSCRIBED="SUBSCRIBED",q.TIMED_OUT="TIMED_OUT",q.CLOSED="CLOSED",q.CHANNEL_ERROR="CHANNEL_ERROR",yt;var q})();class Fr{constructor(k,b={config:{}},E){this.topic=k,this.params=b,this.socket=E,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=k.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},b.config),this.timeout=this.socket.timeout,this.joinPush=new pt(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new pn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(N=>N.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(N=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,N),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(N,j)=>{this._trigger(this._replyEventName(j),N)}),this.presence=new En(this),this.broadcastEndpointURL=vt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(k,b=this.timeout){var N,j,E=this;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:H,presence:X,private:ge}}=this.params;this._onError(xt=>k?.(yt.CHANNEL_ERROR,xt)),this._onClose(()=>k?.(yt.CLOSED));const Me={},_e={broadcast:H,presence:X,postgres_changes:null!==(j=null===(N=this.bindings.postgres_changes)||void 0===N?void 0:N.map(xt=>xt.filter))&&void 0!==j?j:[],private:ge};this.socket.accessTokenValue&&(Me.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:_e},Me)),this.joinedOnce=!0,this._rejoin(b),this.joinPush.receive("ok",function(){var xt=(0,A.Z)(function*({postgres_changes:vn}){var Sn;if(E.socket.setAuth(),void 0!==vn){const Cn=E.bindings.postgres_changes,ot=null!==(Sn=Cn?.length)&&void 0!==Sn?Sn:0,yn=[];for(let us=0;us<ot;us++){const ds=Cn[us],{filter:{event:_r,schema:js,table:Ci,filter:Zi}}=ds,ia=vn&&vn[us];if(!ia||ia.event!==_r||ia.schema!==js||ia.table!==Ci||ia.filter!==Zi)return E.unsubscribe(),void k?.(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));yn.push(Object.assign(Object.assign({},ds),{id:ia.id}))}return E.bindings.postgres_changes=yn,void(k&&k(yt.SUBSCRIBED))}k?.(yt.SUBSCRIBED)});return function(vn){return xt.apply(this,arguments)}}()).receive("error",xt=>{k?.(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(xt).join(", ")||"error")))}).receive("timeout",()=>{k?.(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(k,b={}){var E=this;return(0,A.Z)(function*(){return yield E.send({type:"presence",event:"track",payload:k},b.timeout||E.timeout)})()}untrack(k={}){var b=this;return(0,A.Z)(function*(){return yield b.send({type:"presence",event:"untrack"},k)})()}on(k,b,E){return this._on(k,b,E)}send(k,b={}){var E=this;return(0,A.Z)(function*(){var N,j;if(E._canPush()||"broadcast"!==k.type)return new Promise(H=>{var X,ge,Me;const _e=E._push(k.type,k,b.timeout||E.timeout);"broadcast"===k.type&&!(null!==(Me=null===(ge=null===(X=E.params)||void 0===X?void 0:X.config)||void 0===ge?void 0:ge.broadcast)&&void 0!==Me&&Me.ack)&&H("ok"),_e.receive("ok",()=>H("ok")),_e.receive("error",()=>H("error")),_e.receive("timeout",()=>H("timed out"))});{const{event:H,payload:X}=k,Me={method:"POST",headers:{Authorization:E.socket.accessTokenValue?`Bearer ${E.socket.accessTokenValue}`:"",apikey:E.socket.apiKey?E.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:E.subTopic,event:H,payload:X,private:E.private}]})};try{const _e=yield E._fetchWithTimeout(E.broadcastEndpointURL,Me,null!==(N=b.timeout)&&void 0!==N?N:E.timeout);return yield null===(j=_e.body)||void 0===j?void 0:j.cancel(),_e.ok?"ok":"error"}catch(_e){return"AbortError"===_e.name?"timed out":"error"}}})()}updateJoinPayload(k){this.joinPush.updatePayload(k)}unsubscribe(k=this.timeout){this.state=Mt.leaving;const b=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(E=>{const N=new pt(this,Fe.leave,{},k);N.receive("ok",()=>{b(),E("ok")}).receive("timeout",()=>{b(),E("timed out")}).receive("error",()=>{E("error")}),N.send(),this._canPush()||N.trigger("ok",{})})}_fetchWithTimeout(k,b,E){var N=this;return(0,A.Z)(function*(){const j=new AbortController,H=setTimeout(()=>j.abort(),E),X=yield N.socket.fetch(k,Object.assign(Object.assign({},b),{signal:j.signal}));return clearTimeout(H),X})()}_push(k,b,E=this.timeout){if(!this.joinedOnce)throw`tried to push '${k}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let N=new pt(this,k,b,E);return this._canPush()?N.send():(N.startTimeout(),this.pushBuffer.push(N)),N}_onMessage(k,b,E){return b}_isMember(k){return this.topic===k}_joinRef(){return this.joinPush.ref}_trigger(k,b,E){var N,j;const H=k.toLocaleLowerCase(),{close:X,error:ge,leave:Me,join:_e}=Fe;if(E&&[X,ge,Me,_e].indexOf(H)>=0&&E!==this._joinRef())return;let vn=this._onMessage(H,b,E);if(b&&!vn)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(H)?null===(N=this.bindings.postgres_changes)||void 0===N||N.filter(Sn=>{var Cn,ot,yn;return"*"===(null===(Cn=Sn.filter)||void 0===Cn?void 0:Cn.event)||(null===(yn=null===(ot=Sn.filter)||void 0===ot?void 0:ot.event)||void 0===yn?void 0:yn.toLocaleLowerCase())===H}).map(Sn=>Sn.callback(vn,E)):null===(j=this.bindings[H])||void 0===j||j.filter(Sn=>{var Cn,ot,yn,us,ds,_r;if(["broadcast","presence","postgres_changes"].includes(H)){if("id"in Sn){const js=Sn.id,Ci=null===(Cn=Sn.filter)||void 0===Cn?void 0:Cn.event;return js&&(null===(ot=b.ids)||void 0===ot?void 0:ot.includes(js))&&("*"===Ci||Ci?.toLocaleLowerCase()===(null===(yn=b.data)||void 0===yn?void 0:yn.type.toLocaleLowerCase()))}{const js=null===(ds=null===(us=Sn?.filter)||void 0===us?void 0:us.event)||void 0===ds?void 0:ds.toLocaleLowerCase();return"*"===js||js===(null===(_r=b?.event)||void 0===_r?void 0:_r.toLocaleLowerCase())}}return Sn.type.toLocaleLowerCase()===H}).map(Sn=>{if("object"==typeof vn&&"ids"in vn){const Cn=vn.data,{schema:ot,table:yn,commit_timestamp:us,type:ds,errors:_r}=Cn;vn=Object.assign(Object.assign({},{schema:ot,table:yn,commit_timestamp:us,eventType:ds,new:{},old:{},errors:_r}),this._getPayloadRecords(Cn))}Sn.callback(vn,E)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(k){return`chan_reply_${k}`}_on(k,b,E){const N=k.toLocaleLowerCase(),j={type:N,filter:b,callback:E};return this.bindings[N]?this.bindings[N].push(j):this.bindings[N]=[j],this}_off(k,b){const E=k.toLocaleLowerCase();return this.bindings[E]=this.bindings[E].filter(N=>{var j;return!((null===(j=N.type)||void 0===j?void 0:j.toLocaleLowerCase())===E&&Fr.isEqual(N.filter,b))}),this}static isEqual(k,b){if(Object.keys(k).length!==Object.keys(b).length)return!1;for(const E in k)if(k[E]!==b[E])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(k){this._on(Fe.close,{},k)}_onError(k){this._on(Fe.error,{},b=>k(b))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(k=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(k))}_getPayloadRecords(k){const b={new:{},old:{}};return("INSERT"===k.type||"UPDATE"===k.type)&&(b.new=nn(k.columns,k.record)),("UPDATE"===k.type||"DELETE"===k.type)&&(b.old=nn(k.columns,k.old_record)),b}}const Bn=()=>{},rr=typeof WebSocket<"u";class Zr{constructor(k,b){var N,E=this;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Wt,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Bn,this.conn=null,this.sendBuffer=[],this.serializer=new kt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=H=>{let X;return X=H||(typeof fetch>"u"?(...ge)=>Promise.resolve().then(Z.bind(Z,6397)).then(({default:Me})=>Me(...ge)):fetch),(...ge)=>X(...ge)},this.endPoint=`${k}/${_t.websocket}`,this.httpEndpoint=vt(k),this.transport=b?.transport?b.transport:null,b?.params&&(this.params=b.params),b?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),b.headers)),b?.timeout&&(this.timeout=b.timeout),b?.logger&&(this.logger=b.logger),b?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=b.heartbeatIntervalMs);const j=null===(N=b?.params)||void 0===N?void 0:N.apikey;if(j&&(this.accessTokenValue=j,this.apiKey=j),this.reconnectAfterMs=b?.reconnectAfterMs?b.reconnectAfterMs:H=>[1e3,2e3,5e3,1e4][H-1]||1e4,this.encode=b?.encode?b.encode:(H,X)=>X(JSON.stringify(H)),this.decode=b?.decode?b.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new pn((0,A.Z)(function*(){E.disconnect(),E.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(b?.fetch),b?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=b?.worker||!1,this.workerUrl=b?.workerUrl}this.accessToken=b?.accessToken||null}connect(){if(!this.conn){if(this.transport)return void(this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}));if(rr)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new Ts(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Z.e(67).then(Z.t.bind(Z,3067,23)).then(({default:k})=>{this.conn=new k(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(k,b){this.conn&&(this.conn.onclose=function(){},k?this.conn.close(k,b??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(k){var b=this;return(0,A.Z)(function*(){const E=yield k.unsubscribe();return 0===b.channels.length&&b.disconnect(),E})()}removeAllChannels(){var k=this;return(0,A.Z)(function*(){const b=yield Promise.all(k.channels.map(E=>E.unsubscribe()));return k.disconnect(),b})()}log(k,b,E){this.logger(k,b,E)}connectionState(){switch(this.conn&&this.conn.readyState){case qt.connecting:return He.Connecting;case qt.open:return He.Open;case qt.closing:return He.Closing;default:return He.Closed}}isConnected(){return this.connectionState()===He.Open}channel(k,b={config:{}}){const E=new Fr(`realtime:${k}`,b,this);return this.channels.push(E),E}push(k){const{topic:b,event:E,payload:N,ref:j}=k,H=()=>{this.encode(k,X=>{var ge;null===(ge=this.conn)||void 0===ge||ge.send(X)})};this.log("push",`${b} ${E} (${j})`,N),this.isConnected()?H():this.sendBuffer.push(H)}setAuth(k=null){var b=this;return(0,A.Z)(function*(){let E=k||b.accessToken&&(yield b.accessToken())||b.accessTokenValue;if(E){let N=null;try{N=JSON.parse(atob(E.split(".")[1]))}catch{}if(N&&N.exp&&!(Math.floor(Date.now()/1e3)-N.exp<0))return b.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${N.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${N.exp}`);b.accessTokenValue=E,b.channels.forEach(j=>{E&&j.updateJoinPayload({access_token:E}),j.joinedOnce&&j._isJoined()&&j._push(Fe.access_token,{access_token:E})})}})()}sendHeartbeat(){var k=this;return(0,A.Z)(function*(){var b;if(k.isConnected()){if(k.pendingHeartbeatRef)return k.pendingHeartbeatRef=null,k.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(b=k.conn)||void 0===b||b.close(1e3,"hearbeat timeout"));k.pendingHeartbeatRef=k._makeRef(),k.push({topic:"phoenix",event:"heartbeat",payload:{},ref:k.pendingHeartbeatRef}),k.setAuth()}})()}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(k=>k()),this.sendBuffer=[])}_makeRef(){let k=this.ref+1;return this.ref=k===this.ref?0:k,this.ref.toString()}_leaveOpenTopic(k){let b=this.channels.find(E=>E.topic===k&&(E._isJoined()||E._isJoining()));b&&(this.log("transport",`leaving duplicate topic "${k}"`),b.unsubscribe())}_remove(k){this.channels=this.channels.filter(b=>b._joinRef()!==k._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=k=>this._onConnError(k),this.conn.onmessage=k=>this._onConnMessage(k),this.conn.onclose=k=>this._onConnClose(k))}_onConnMessage(k){this.decode(k.data,b=>{let{topic:E,event:N,payload:j,ref:H}=b;H&&H===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${j.status||""} ${E} ${N} ${H&&"("+H+")"||""}`,j),this.channels.filter(X=>X._isMember(E)).forEach(X=>X._trigger(N,j,H)),this.stateChangeCallbacks.message.forEach(X=>X(b))})}_onConnOpen(){var k=this;return(0,A.Z)(function*(){if(k.log("transport",`connected to ${k.endpointURL()}`),k.flushSendBuffer(),k.reconnectTimer.reset(),k.worker){k.log("worker",k.workerUrl?`starting worker for from ${k.workerUrl}`:"starting default worker");const b=k._workerObjectUrl(k.workerUrl);k.workerRef=new Worker(b),k.workerRef.onerror=E=>{k.log("worker","worker error",E.message),k.workerRef.terminate()},k.workerRef.onmessage=E=>{"keepAlive"===E.data.event&&k.sendHeartbeat()},k.workerRef.postMessage({event:"start",interval:k.heartbeatIntervalMs})}else k.heartbeatTimer&&clearInterval(k.heartbeatTimer),k.heartbeatTimer=setInterval(()=>k.sendHeartbeat(),k.heartbeatIntervalMs);k.stateChangeCallbacks.open.forEach(b=>b())})()}_onConnClose(k){this.log("transport","close",k),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(b=>b(k))}_onConnError(k){this.log("transport",k.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(b=>b(k))}_triggerChanError(){this.channels.forEach(k=>k._trigger(Fe.error))}_appendParams(k,b){if(0===Object.keys(b).length)return k;const E=k.match(/\?/)?"&":"?";return`${k}${E}${new URLSearchParams(b)}`}_workerObjectUrl(k){let b;if(k)b=k;else{const E=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});b=URL.createObjectURL(E)}return b}}class Ts{constructor(k,b,E){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=qt.connecting,this.send=()=>{},this.url=null,this.url=k,this.close=E.close}}class ti extends Error{constructor(k){super(k),this.__isStorageError=!0,this.name="StorageError"}}function or(q){return"object"==typeof q&&null!==q&&"__isStorageError"in q}class to extends ti{constructor(k,b){super(k),this.name="StorageApiError",this.status=b}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class jr extends ti{constructor(k,b){super(k),this.name="StorageUnknownError",this.originalError=b}}const lo=q=>{let k;return k=q||(typeof fetch>"u"?(...b)=>Promise.resolve().then(Z.bind(Z,6397)).then(({default:E})=>E(...b)):fetch),(...b)=>k(...b)},Ea=q=>{if(Array.isArray(q))return q.map(b=>Ea(b));if("function"==typeof q||q!==Object(q))return q;const k={};return Object.entries(q).forEach(([b,E])=>{const N=b.replace(/([-_][a-z])/gi,j=>j.toUpperCase().replace(/[-_]/g,""));k[N]=Ea(E)}),k};var wr=function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})};const Pt=q=>q.msg||q.message||q.error_description||q.error||JSON.stringify(q),Dn=(q,k,b)=>wr(void 0,void 0,void 0,function*(){const E=yield function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(Z.bind(Z,6397))).Response:Response});q instanceof E&&!b?.noResolveJson?q.json().then(N=>{k(new to(Pt(N),q.status||500))}).catch(N=>{k(new jr(Pt(N),N))}):k(new jr(Pt(q),q))}),du=(q,k,b,E)=>{const N={method:q,headers:k?.headers||{}};return"GET"===q?N:(N.headers=Object.assign({"Content-Type":"application/json"},k?.headers),E&&(N.body=JSON.stringify(E)),Object.assign(Object.assign({},N),b))};function Wr(q,k,b,E,N,j){return wr(this,void 0,void 0,function*(){return new Promise((H,X)=>{q(b,du(k,E,N,j)).then(ge=>{if(!ge.ok)throw ge;return E?.noResolveJson?ge:ge.json()}).then(ge=>H(ge)).catch(ge=>Dn(ge,X,E))})})}function bi(q,k,b,E){return wr(this,void 0,void 0,function*(){return Wr(q,"GET",k,b,E)})}function Gi(q,k,b,E,N){return wr(this,void 0,void 0,function*(){return Wr(q,"POST",k,E,N,b)})}function Kn(q,k,b,E,N){return wr(this,void 0,void 0,function*(){return Wr(q,"PUT",k,E,N,b)})}function Rr(q,k,b,E,N){return wr(this,void 0,void 0,function*(){return Wr(q,"DELETE",k,E,N,b)})}var Wi=function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})};const Yn={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ta={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fi{constructor(k,b={},E,N){this.url=k,this.headers=b,this.bucketId=E,this.fetch=lo(N)}uploadOrUpdate(k,b,E,N){return Wi(this,void 0,void 0,function*(){try{let j;const H=Object.assign(Object.assign({},Ta),N);let X=Object.assign(Object.assign({},this.headers),"POST"===k&&{"x-upsert":String(H.upsert)});const ge=H.metadata;typeof Blob<"u"&&E instanceof Blob?(j=new FormData,j.append("cacheControl",H.cacheControl),ge&&j.append("metadata",this.encodeMetadata(ge)),j.append("",E)):typeof FormData<"u"&&E instanceof FormData?(j=E,j.append("cacheControl",H.cacheControl),ge&&j.append("metadata",this.encodeMetadata(ge))):(j=E,X["cache-control"]=`max-age=${H.cacheControl}`,X["content-type"]=H.contentType,ge&&(X["x-metadata"]=this.toBase64(this.encodeMetadata(ge)))),N?.headers&&(X=Object.assign(Object.assign({},X),N.headers));const Me=this._removeEmptyFolders(b),_e=this._getFinalPath(Me),xt=yield this.fetch(`${this.url}/object/${_e}`,Object.assign({method:k,body:j,headers:X},H?.duplex?{duplex:H.duplex}:{})),vn=yield xt.json();return xt.ok?{data:{path:Me,id:vn.Id,fullPath:vn.Key},error:null}:{data:null,error:vn}}catch(j){if(or(j))return{data:null,error:j};throw j}})}upload(k,b,E){return Wi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",k,b,E)})}uploadToSignedUrl(k,b,E,N){return Wi(this,void 0,void 0,function*(){const j=this._removeEmptyFolders(k),H=this._getFinalPath(j),X=new URL(this.url+`/object/upload/sign/${H}`);X.searchParams.set("token",b);try{let ge;const Me=Object.assign({upsert:Ta.upsert},N),_e=Object.assign(Object.assign({},this.headers),{"x-upsert":String(Me.upsert)});typeof Blob<"u"&&E instanceof Blob?(ge=new FormData,ge.append("cacheControl",Me.cacheControl),ge.append("",E)):typeof FormData<"u"&&E instanceof FormData?(ge=E,ge.append("cacheControl",Me.cacheControl)):(ge=E,_e["cache-control"]=`max-age=${Me.cacheControl}`,_e["content-type"]=Me.contentType);const xt=yield this.fetch(X.toString(),{method:"PUT",body:ge,headers:_e}),vn=yield xt.json();return xt.ok?{data:{path:j,fullPath:vn.Key},error:null}:{data:null,error:vn}}catch(ge){if(or(ge))return{data:null,error:ge};throw ge}})}createSignedUploadUrl(k,b){return Wi(this,void 0,void 0,function*(){try{let E=this._getFinalPath(k);const N=Object.assign({},this.headers);b?.upsert&&(N["x-upsert"]="true");const j=yield Gi(this.fetch,`${this.url}/object/upload/sign/${E}`,{},{headers:N}),H=new URL(this.url+j.url),X=H.searchParams.get("token");if(!X)throw new ti("No token returned by API");return{data:{signedUrl:H.toString(),path:k,token:X},error:null}}catch(E){if(or(E))return{data:null,error:E};throw E}})}update(k,b,E){return Wi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",k,b,E)})}move(k,b,E){return Wi(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:k,destinationKey:b,destinationBucket:E?.destinationBucket},{headers:this.headers}),error:null}}catch(N){if(or(N))return{data:null,error:N};throw N}})}copy(k,b,E){return Wi(this,void 0,void 0,function*(){try{return{data:{path:(yield Gi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:k,destinationKey:b,destinationBucket:E?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(N){if(or(N))return{data:null,error:N};throw N}})}createSignedUrl(k,b,E){return Wi(this,void 0,void 0,function*(){try{let N=this._getFinalPath(k),j=yield Gi(this.fetch,`${this.url}/object/sign/${N}`,Object.assign({expiresIn:b},E?.transform?{transform:E.transform}:{}),{headers:this.headers});const H=E?.download?`&download=${!0===E.download?"":E.download}`:"";return j={signedUrl:encodeURI(`${this.url}${j.signedURL}${H}`)},{data:j,error:null}}catch(N){if(or(N))return{data:null,error:N};throw N}})}createSignedUrls(k,b,E){return Wi(this,void 0,void 0,function*(){try{const N=yield Gi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:b,paths:k},{headers:this.headers}),j=E?.download?`&download=${!0===E.download?"":E.download}`:"";return{data:N.map(H=>Object.assign(Object.assign({},H),{signedUrl:H.signedURL?encodeURI(`${this.url}${H.signedURL}${j}`):null})),error:null}}catch(N){if(or(N))return{data:null,error:N};throw N}})}download(k,b){return Wi(this,void 0,void 0,function*(){const N=typeof b?.transform<"u"?"render/image/authenticated":"object",j=this.transformOptsToQueryString(b?.transform||{}),H=j?`?${j}`:"";try{const X=this._getFinalPath(k);return{data:yield(yield bi(this.fetch,`${this.url}/${N}/${X}${H}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(X){if(or(X))return{data:null,error:X};throw X}})}info(k){return Wi(this,void 0,void 0,function*(){const b=this._getFinalPath(k);try{const E=yield bi(this.fetch,`${this.url}/object/info/${b}`,{headers:this.headers});return{data:Ea(E),error:null}}catch(E){if(or(E))return{data:null,error:E};throw E}})}exists(k){return Wi(this,void 0,void 0,function*(){const b=this._getFinalPath(k);try{return yield function jn(q,k,b,E){return wr(this,void 0,void 0,function*(){return Wr(q,"HEAD",k,Object.assign(Object.assign({},b),{noResolveJson:!0}),E)})}(this.fetch,`${this.url}/object/${b}`,{headers:this.headers}),{data:!0,error:null}}catch(E){if(or(E)&&E instanceof jr&&[400,404].includes(E.originalError?.status))return{data:!1,error:E};throw E}})}getPublicUrl(k,b){const E=this._getFinalPath(k),N=[],j=b?.download?`download=${!0===b.download?"":b.download}`:"";""!==j&&N.push(j);const X=typeof b?.transform<"u"?"render/image":"object",ge=this.transformOptsToQueryString(b?.transform||{});""!==ge&&N.push(ge);let Me=N.join("&");return""!==Me&&(Me=`?${Me}`),{data:{publicUrl:encodeURI(`${this.url}/${X}/public/${E}${Me}`)}}}remove(k){return Wi(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:k},{headers:this.headers}),error:null}}catch(b){if(or(b))return{data:null,error:b};throw b}})}list(k,b,E){return Wi(this,void 0,void 0,function*(){try{const N=Object.assign(Object.assign(Object.assign({},Yn),b),{prefix:k||""});return{data:yield Gi(this.fetch,`${this.url}/object/list/${this.bucketId}`,N,{headers:this.headers},E),error:null}}catch(N){if(or(N))return{data:null,error:N};throw N}})}encodeMetadata(k){return JSON.stringify(k)}toBase64(k){return typeof Buffer<"u"?Buffer.from(k).toString("base64"):btoa(k)}_getFinalPath(k){return`${this.bucketId}/${k}`}_removeEmptyFolders(k){return k.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(k){const b=[];return k.width&&b.push(`width=${k.width}`),k.height&&b.push(`height=${k.height}`),k.resize&&b.push(`resize=${k.resize}`),k.format&&b.push(`format=${k.format}`),k.quality&&b.push(`quality=${k.quality}`),b.join("&")}}const fo={"X-Client-Info":"storage-js/2.7.1"};var Ki=function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})};class ho{constructor(k,b={},E){this.url=k,this.headers=Object.assign(Object.assign({},fo),b),this.fetch=lo(E)}listBuckets(){return Ki(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(k){if(or(k))return{data:null,error:k};throw k}})}getBucket(k){return Ki(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket/${k}`,{headers:this.headers}),error:null}}catch(b){if(or(b))return{data:null,error:b};throw b}})}createBucket(k,b={public:!1}){return Ki(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket`,{id:k,name:k,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(E){if(or(E))return{data:null,error:E};throw E}})}updateBucket(k,b){return Ki(this,void 0,void 0,function*(){try{return{data:yield Kn(this.fetch,`${this.url}/bucket/${k}`,{id:k,name:k,public:b.public,file_size_limit:b.fileSizeLimit,allowed_mime_types:b.allowedMimeTypes},{headers:this.headers}),error:null}}catch(E){if(or(E))return{data:null,error:E};throw E}})}emptyBucket(k){return Ki(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket/${k}/empty`,{},{headers:this.headers}),error:null}}catch(b){if(or(b))return{data:null,error:b};throw b}})}deleteBucket(k){return Ki(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${k}`,{},{headers:this.headers}),error:null}}catch(b){if(or(b))return{data:null,error:b};throw b}})}}class Ro extends ho{constructor(k,b={},E){super(k,b,E)}from(k){return new Fi(this.url,this.headers,k,this.fetch)}}let Wo="";Wo=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const Ko={headers:{"X-Client-Info":`supabase-js-${Wo}/2.48.0`}},yc={schema:"public"},Sa={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Aa={};var Wa=Z(6397);const je=(q,k,b)=>{const E=(q=>{let k;return k=q||(typeof fetch>"u"?Wa.default:fetch),(...b)=>k(...b)})(b),N=typeof Headers>"u"?Wa.Headers:Headers;return(j,H)=>function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})}(void 0,void 0,void 0,function*(){var X;const ge=null!==(X=yield k())&&void 0!==X?X:q;let Me=new N(H?.headers);return Me.has("apikey")||Me.set("apikey",q),Me.has("Authorization")||Me.set("Authorization",`Bearer ${ge}`),E(j,Object.assign(Object.assign({},H),{headers:Me}))})};const Yo="X-Supabase-Api-Version",Ja={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},os=()=>typeof window<"u"&&typeof document<"u",Jo={tested:!1,writable:!1},No=()=>{if(!os())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(Jo.tested)return Jo.writable;const q=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(q,q),globalThis.localStorage.removeItem(q),Jo.tested=!0,Jo.writable=!0}catch{Jo.tested=!0,Jo.writable=!1}return Jo.writable},ar=q=>{let k;return k=q||(typeof fetch>"u"?(...b)=>Promise.resolve().then(Z.bind(Z,6397)).then(({default:E})=>E(...b)):fetch),(...b)=>k(...b)},si=q=>"object"==typeof q&&null!==q&&"status"in q&&"ok"in q&&"json"in q&&"function"==typeof q.json,mi=function(){var q=(0,A.Z)(function*(k,b,E){yield k.setItem(b,JSON.stringify(E))});return function(b,E,N){return q.apply(this,arguments)}}(),no=function(){var q=(0,A.Z)(function*(k,b){const E=yield k.getItem(b);if(!E)return null;try{return JSON.parse(E)}catch{return E}});return function(b,E){return q.apply(this,arguments)}}(),Kr=function(){var q=(0,A.Z)(function*(k,b){yield k.removeItem(b)});return function(b,E){return q.apply(this,arguments)}}();class ro{constructor(){this.promise=new ro.promiseConstructor((k,b)=>{this.resolve=k,this.reject=b})}}function Ji(q){const b=q.split(".");if(3!==b.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(b[1]))throw new Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function Rl(q){const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let E,N,j,H,X,ge,Me,b="",_e=0;for(q=q.replace("-","+").replace("_","/");_e<q.length;)H=k.indexOf(q.charAt(_e++)),X=k.indexOf(q.charAt(_e++)),ge=k.indexOf(q.charAt(_e++)),Me=k.indexOf(q.charAt(_e++)),E=H<<2|X>>4,N=(15&X)<<4|ge>>2,j=(3&ge)<<6|Me,b+=String.fromCharCode(E),64!=ge&&0!=N&&(b+=String.fromCharCode(N)),64!=Me&&0!=j&&(b+=String.fromCharCode(j));return b}(b[1]))}function an(){return(an=(0,A.Z)(function*(q){return yield new Promise(k=>{setTimeout(()=>k(null),q)})})).apply(this,arguments)}function fr(q){return("0"+q.toString(16)).substr(-2)}function Hr(){return(Hr=(0,A.Z)(function*(q){const b=(new TextEncoder).encode(q),E=yield crypto.subtle.digest("SHA-256",b),N=new Uint8Array(E);return Array.from(N).map(j=>String.fromCharCode(j)).join("")})).apply(this,arguments)}function Yc(){return Yc=(0,A.Z)(function*(q){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),q;const b=yield function Ni(q){return Hr.apply(this,arguments)}(q);return function Qo(q){return btoa(q).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(b)}),Yc.apply(this,arguments)}function po(q,k){return Vn.apply(this,arguments)}function Vn(){return Vn=(0,A.Z)(function*(q,k,b=!1){const E=function as(){const k=new Uint32Array(56);if(typeof crypto>"u"){const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",E=b.length;let N="";for(let j=0;j<56;j++)N+=b.charAt(Math.floor(Math.random()*E));return N}return crypto.getRandomValues(k),Array.from(k,fr).join("")}();let N=E;b&&(N+="/PASSWORD_RECOVERY"),yield mi(q,`${k}-code-verifier`,N);const j=yield function $r(q){return Yc.apply(this,arguments)}(E);return[j,E===j?"plain":"s256"]}),Vn.apply(this,arguments)}ro.promiseConstructor=Promise;const fu=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class As extends Error{constructor(k,b,E){super(k),this.__isAuthError=!0,this.name="AuthError",this.status=b,this.code=E}}function xn(q){return"object"==typeof q&&null!==q&&"__isAuthError"in q}class Li extends As{constructor(k,b,E){super(k,b,E),this.name="AuthApiError",this.status=b,this.code=E}}class ka extends As{constructor(k,b){super(k),this.name="AuthUnknownError",this.originalError=b}}class Qi extends As{constructor(k,b,E,N){super(k,E,N),this.name=b,this.status=E}}class Xi extends Qi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class br extends Qi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nl extends Qi{constructor(k){super(k,"AuthInvalidCredentialsError",400,void 0)}}class Xo extends Qi{constructor(k,b=null){super(k,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xa extends Qi{constructor(k,b=null){super(k,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=b}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lo extends Qi{constructor(k,b){super(k,"AuthRetryableFetchError",b,void 0)}}function io(q){return xn(q)&&"AuthRetryableFetchError"===q.name}class Ir extends Qi{constructor(k,b,E){super(k,"AuthWeakPasswordError",b,"weak_password"),this.reasons=E}}var Ui=function(q,k){var b={};for(var E in q)Object.prototype.hasOwnProperty.call(q,E)&&k.indexOf(E)<0&&(b[E]=q[E]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(q);N<E.length;N++)k.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(q,E[N])&&(b[E[N]]=q[E[N]])}return b};const _i=q=>q.msg||q.message||q.error_description||q.error||JSON.stringify(q),wc=[502,503,504];function Ms(q){return ea.apply(this,arguments)}function ea(){return(ea=(0,A.Z)(function*(q){var k;if(!si(q))throw new Lo(_i(q),0);if(wc.includes(q.status))throw new Lo(_i(q),q.status);let b,E;try{b=yield q.json()}catch(j){throw new ka(_i(j),j)}const N=function xc(q){const k=q.headers.get(Yo);if(!k||!k.match(fu))return null;try{return new Date(`${k}T00:00:00.0Z`)}catch{return null}}(q);if(N&&N.getTime()>=Ja["2024-01-01"].timestamp&&"object"==typeof b&&b&&"string"==typeof b.code?E=b.code:"object"==typeof b&&b&&"string"==typeof b.error_code&&(E=b.error_code),E){if("weak_password"===E)throw new Ir(_i(b),q.status,(null===(k=b.weak_password)||void 0===k?void 0:k.reasons)||[]);if("session_not_found"===E)throw new Xi}else if("object"==typeof b&&b&&"object"==typeof b.weak_password&&b.weak_password&&Array.isArray(b.weak_password.reasons)&&b.weak_password.reasons.length&&b.weak_password.reasons.reduce((j,H)=>j&&"string"==typeof H,!0))throw new Ir(_i(b),q.status,b.weak_password.reasons);throw new Li(_i(b),q.status||500,E)})).apply(this,arguments)}const Is=(q,k,b,E)=>{const N={method:q,headers:k?.headers||{}};return"GET"===q?N:(N.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},k?.headers),N.body=JSON.stringify(E),Object.assign(Object.assign({},N),b))};function $n(q,k,b,E){return bc.apply(this,arguments)}function bc(){return bc=(0,A.Z)(function*(q,k,b,E){var N;const j=Object.assign({},E?.headers);j[Yo]||(j[Yo]=Ja["2024-01-01"].name),E?.jwt&&(j.Authorization=`Bearer ${E.jwt}`);const H=null!==(N=E?.query)&&void 0!==N?N:{};E?.redirectTo&&(H.redirect_to=E.redirectTo);const X=Object.keys(H).length?"?"+new URLSearchParams(H).toString():"",ge=yield function Cc(q,k,b,E,N,j){return cs.apply(this,arguments)}(q,k,b+X,{headers:j,noResolveJson:E?.noResolveJson},{},E?.body);return E?.xform?E?.xform(ge):{data:Object.assign({},ge),error:null}}),bc.apply(this,arguments)}function cs(){return(cs=(0,A.Z)(function*(q,k,b,E,N,j){const H=Is(k,E,N,j);let X;try{X=yield q(b,Object.assign({},H))}catch(ge){throw console.error(ge),new Lo(_i(ge),0)}if(X.ok||(yield Ms(X)),E?.noResolveJson)return X;try{return yield X.json()}catch(ge){yield Ms(ge)}})).apply(this,arguments)}function Bi(q){var k;let b=null;return function na(q){return q.access_token&&q.refresh_token&&q.expires_in}(q)&&(b=Object.assign({},q),q.expires_at||(b.expires_at=function Da(q){return Math.round(Date.now()/1e3)+q}(q.expires_in))),{data:{session:b,user:null!==(k=q.user)&&void 0!==k?k:q},error:null}}function pu(q){const k=Bi(q);return!k.error&&q.weak_password&&"object"==typeof q.weak_password&&Array.isArray(q.weak_password.reasons)&&q.weak_password.reasons.length&&q.weak_password.message&&"string"==typeof q.weak_password.message&&q.weak_password.reasons.reduce((b,E)=>b&&"string"==typeof E,!0)&&(k.data.weak_password=q.weak_password),k}function ta(q){var k;return{data:{user:null!==(k=q.user)&&void 0!==k?k:q},error:null}}function Ec(q){return{data:q,error:null}}function Op(q){const{action_link:k,email_otp:b,hashed_token:E,redirect_to:N,verification_type:j}=q,H=Ui(q,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:k,email_otp:b,hashed_token:E,redirect_to:N,verification_type:j},user:Object.assign({},H)},error:null}}function gu(q){return q}class vd{constructor({url:k="",headers:b={},fetch:E}){this.url=k,this.headers=b,this.fetch=ar(E),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(k,b="global"){var E=this;return(0,A.Z)(function*(){try{return yield $n(E.fetch,"POST",`${E.url}/logout?scope=${b}`,{headers:E.headers,jwt:k,noResolveJson:!0}),{data:null,error:null}}catch(N){if(xn(N))return{data:null,error:N};throw N}})()}inviteUserByEmail(k,b={}){var E=this;return(0,A.Z)(function*(){try{return yield $n(E.fetch,"POST",`${E.url}/invite`,{body:{email:k,data:b.data},headers:E.headers,redirectTo:b.redirectTo,xform:ta})}catch(N){if(xn(N))return{data:{user:null},error:N};throw N}})()}generateLink(k){var b=this;return(0,A.Z)(function*(){try{const{options:E}=k,N=function(q,k){var b={};for(var E in q)Object.prototype.hasOwnProperty.call(q,E)&&k.indexOf(E)<0&&(b[E]=q[E]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(E=Object.getOwnPropertySymbols(q);N<E.length;N++)k.indexOf(E[N])<0&&Object.prototype.propertyIsEnumerable.call(q,E[N])&&(b[E[N]]=q[E[N]])}return b}(k,["options"]),j=Object.assign(Object.assign({},N),E);return"newEmail"in N&&(j.new_email=N?.newEmail,delete j.newEmail),yield $n(b.fetch,"POST",`${b.url}/admin/generate_link`,{body:j,headers:b.headers,xform:Op,redirectTo:E?.redirectTo})}catch(E){if(xn(E))return{data:{properties:null,user:null},error:E};throw E}})()}createUser(k){var b=this;return(0,A.Z)(function*(){try{return yield $n(b.fetch,"POST",`${b.url}/admin/users`,{body:k,headers:b.headers,xform:ta})}catch(E){if(xn(E))return{data:{user:null},error:E};throw E}})()}listUsers(k){var b=this;return(0,A.Z)(function*(){var E,N,j,H,X,ge,Me;try{const _e={nextPage:null,lastPage:0,total:0},xt=yield $n(b.fetch,"GET",`${b.url}/admin/users`,{headers:b.headers,noResolveJson:!0,query:{page:null!==(N=null===(E=k?.page)||void 0===E?void 0:E.toString())&&void 0!==N?N:"",per_page:null!==(H=null===(j=k?.perPage)||void 0===j?void 0:j.toString())&&void 0!==H?H:""},xform:gu});if(xt.error)throw xt.error;const vn=yield xt.json(),Sn=null!==(X=xt.headers.get("x-total-count"))&&void 0!==X?X:0,Cn=null!==(Me=null===(ge=xt.headers.get("link"))||void 0===ge?void 0:ge.split(","))&&void 0!==Me?Me:[];return Cn.length>0&&(Cn.forEach(ot=>{const yn=parseInt(ot.split(";")[0].split("=")[1].substring(0,1)),us=JSON.parse(ot.split(";")[1].split("=")[1]);_e[`${us}Page`]=yn}),_e.total=parseInt(Sn)),{data:Object.assign(Object.assign({},vn),_e),error:null}}catch(_e){if(xn(_e))return{data:{users:[]},error:_e};throw _e}})()}getUserById(k){var b=this;return(0,A.Z)(function*(){try{return yield $n(b.fetch,"GET",`${b.url}/admin/users/${k}`,{headers:b.headers,xform:ta})}catch(E){if(xn(E))return{data:{user:null},error:E};throw E}})()}updateUserById(k,b){var E=this;return(0,A.Z)(function*(){try{return yield $n(E.fetch,"PUT",`${E.url}/admin/users/${k}`,{body:b,headers:E.headers,xform:ta})}catch(N){if(xn(N))return{data:{user:null},error:N};throw N}})()}deleteUser(k,b=!1){var E=this;return(0,A.Z)(function*(){try{return yield $n(E.fetch,"DELETE",`${E.url}/admin/users/${k}`,{headers:E.headers,body:{should_soft_delete:b},xform:ta})}catch(N){if(xn(N))return{data:{user:null},error:N};throw N}})()}_listFactors(k){var b=this;return(0,A.Z)(function*(){try{const{data:E,error:N}=yield $n(b.fetch,"GET",`${b.url}/admin/users/${k.userId}/factors`,{headers:b.headers,xform:j=>({data:{factors:j},error:null})});return{data:E,error:N}}catch(E){if(xn(E))return{data:null,error:E};throw E}})()}_deleteFactor(k){var b=this;return(0,A.Z)(function*(){try{return{data:yield $n(b.fetch,"DELETE",`${b.url}/admin/users/${k.userId}/factors/${k.id}`,{headers:b.headers}),error:null}}catch(E){if(xn(E))return{data:null,error:E};throw E}})()}}const ec={getItem:q=>No()?globalThis.localStorage.getItem(q):null,setItem:(q,k)=>{No()&&globalThis.localStorage.setItem(q,k)},removeItem:q=>{No()&&globalThis.localStorage.removeItem(q)}};function yd(q={}){return{getItem:k=>q[k]||null,setItem:(k,b)=>{q[k]=b},removeItem:k=>{delete q[k]}}}const so={debug:!!(globalThis&&No()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class mo extends Error{constructor(k){super(k),this.isAcquireTimeout=!0}}class Ul extends mo{}function ra(q,k,b){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,A.Z)(function*(q,k,b){so.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",q,k);const E=new globalThis.AbortController;return k>0&&setTimeout(()=>{E.abort(),so.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",q)},k),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(q,0===k?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:E.signal},function(){var N=(0,A.Z)(function*(j){if(!j){if(0===k)throw so.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",q),new Ul(`Acquiring an exclusive Navigator LockManager lock "${q}" immediately failed`);if(so.debug)try{const H=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(H,null,"  "))}catch(H){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",H)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield b()}so.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",q,j.name);try{return yield b()}finally{so.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",q,j.name)}});return function(j){return N.apply(this,arguments)}}()))}),Zs.apply(this,arguments)}!function mu(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const xd={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/2.67.3"},flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Xc=3e4;function nc(q,k,b){return el.apply(this,arguments)}function el(){return(el=(0,A.Z)(function*(q,k,b){return yield b()})).apply(this,arguments)}const rc=(()=>{class q{constructor(b){var N,j,E=this;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=q.nextInstanceID,q.nextInstanceID+=1,this.instanceID>0&&os()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const H=Object.assign(Object.assign({},xd),b);if(this.logDebugMessages=!!H.debug,"function"==typeof H.debug&&(this.logger=H.debug),this.persistSession=H.persistSession,this.storageKey=H.storageKey,this.autoRefreshToken=H.autoRefreshToken,this.admin=new vd({url:H.url,headers:H.headers,fetch:H.fetch}),this.url=H.url,this.headers=H.headers,this.fetch=ar(H.fetch),this.lock=H.lock||nc,this.detectSessionInUrl=H.detectSessionInUrl,this.flowType=H.flowType,this.hasCustomAuthorizationHeader=H.hasCustomAuthorizationHeader,this.lock=H.lock?H.lock:os()&&null!==(N=globalThis?.navigator)&&void 0!==N&&N.locks?ra:nc,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?H.storage?this.storage=H.storage:No()?this.storage=ec:(this.memoryStorage={},this.storage=yd(this.memoryStorage)):(this.memoryStorage={},this.storage=yd(this.memoryStorage)),os()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(X){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",X)}null===(j=this.broadcastChannel)||void 0===j||j.addEventListener("message",function(){var X=(0,A.Z)(function*(ge){E._debug("received broadcast notification from other tab or client",ge),yield E._notifyAllSubscribers(ge.data.event,ge.data.session,!1)});return function(ge){return X.apply(this,arguments)}}())}this.initialize()}_debug(...b){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (2.67.3) ${(new Date).toISOString()}`,...b),this}initialize(){var b=this;return(0,A.Z)(function*(){return b.initializePromise||(b.initializePromise=(0,A.Z)(function*(){return yield b._acquireLock(-1,(0,A.Z)(function*(){return yield b._initialize()}))})()),yield b.initializePromise})()}_initialize(){var b=this;return(0,A.Z)(function*(){var E;try{const N=function Kc(q){const k={},b=new URL(q);if(b.hash&&"#"===b.hash[0])try{new URLSearchParams(b.hash.substring(1)).forEach((N,j)=>{k[j]=N})}catch{}return b.searchParams.forEach((E,N)=>{k[N]=E}),k}(window.location.href);let j="none";if(b._isImplicitGrantCallback(N)?j="implicit":(yield b._isPKCECallback(N))&&(j="pkce"),os()&&b.detectSessionInUrl&&"none"!==j){const{data:H,error:X}=yield b._getSessionFromURL(N,j);if(X){if(b._debug("#_initialize()","error detecting session from URL",X),function Ll(q){return xn(q)&&"AuthImplicitGrantRedirectError"===q.name}(X)){const _e=null===(E=X.details)||void 0===E?void 0:E.code;if("identity_already_exists"===_e||"identity_not_found"===_e||"single_identity_not_deletable"===_e)return{error:X}}return yield b._removeSession(),{error:X}}const{session:ge,redirectType:Me}=H;return b._debug("#_initialize()","detected session in URL",ge,"redirect type",Me),yield b._saveSession(ge),setTimeout((0,A.Z)(function*(){"recovery"===Me?yield b._notifyAllSubscribers("PASSWORD_RECOVERY",ge):yield b._notifyAllSubscribers("SIGNED_IN",ge)}),0),{error:null}}return yield b._recoverAndRefresh(),{error:null}}catch(N){return xn(N)?{error:N}:{error:new ka("Unexpected error during initialization",N)}}finally{yield b._handleVisibilityChange(),b._debug("#_initialize()","end")}})()}signInAnonymously(b){var E=this;return(0,A.Z)(function*(){var N,j,H;try{const X=yield $n(E.fetch,"POST",`${E.url}/signup`,{headers:E.headers,body:{data:null!==(j=null===(N=b?.options)||void 0===N?void 0:N.data)&&void 0!==j?j:{},gotrue_meta_security:{captcha_token:null===(H=b?.options)||void 0===H?void 0:H.captchaToken}},xform:Bi}),{data:ge,error:Me}=X;if(Me||!ge)return{data:{user:null,session:null},error:Me};const _e=ge.session,xt=ge.user;return ge.session&&(yield E._saveSession(ge.session),yield E._notifyAllSubscribers("SIGNED_IN",_e)),{data:{user:xt,session:_e},error:null}}catch(X){if(xn(X))return{data:{user:null,session:null},error:X};throw X}})()}signUp(b){var E=this;return(0,A.Z)(function*(){var N,j,H;try{let X;if("email"in b){const{email:vn,password:Sn,options:Cn}=b;let ot=null,yn=null;"pkce"===E.flowType&&([ot,yn]=yield po(E.storage,E.storageKey)),X=yield $n(E.fetch,"POST",`${E.url}/signup`,{headers:E.headers,redirectTo:Cn?.emailRedirectTo,body:{email:vn,password:Sn,data:null!==(N=Cn?.data)&&void 0!==N?N:{},gotrue_meta_security:{captcha_token:Cn?.captchaToken},code_challenge:ot,code_challenge_method:yn},xform:Bi})}else{if(!("phone"in b))throw new Nl("You must provide either an email or phone number and a password");{const{phone:vn,password:Sn,options:Cn}=b;X=yield $n(E.fetch,"POST",`${E.url}/signup`,{headers:E.headers,body:{phone:vn,password:Sn,data:null!==(j=Cn?.data)&&void 0!==j?j:{},channel:null!==(H=Cn?.channel)&&void 0!==H?H:"sms",gotrue_meta_security:{captcha_token:Cn?.captchaToken}},xform:Bi})}}const{data:ge,error:Me}=X;if(Me||!ge)return{data:{user:null,session:null},error:Me};const _e=ge.session,xt=ge.user;return ge.session&&(yield E._saveSession(ge.session),yield E._notifyAllSubscribers("SIGNED_IN",_e)),{data:{user:xt,session:_e},error:null}}catch(X){if(xn(X))return{data:{user:null,session:null},error:X};throw X}})()}signInWithPassword(b){var E=this;return(0,A.Z)(function*(){try{let N;if("email"in b){const{email:X,password:ge,options:Me}=b;N=yield $n(E.fetch,"POST",`${E.url}/token?grant_type=password`,{headers:E.headers,body:{email:X,password:ge,gotrue_meta_security:{captcha_token:Me?.captchaToken}},xform:pu})}else{if(!("phone"in b))throw new Nl("You must provide either an email or phone number and a password");{const{phone:X,password:ge,options:Me}=b;N=yield $n(E.fetch,"POST",`${E.url}/token?grant_type=password`,{headers:E.headers,body:{phone:X,password:ge,gotrue_meta_security:{captcha_token:Me?.captchaToken}},xform:pu})}}const{data:j,error:H}=N;return H?{data:{user:null,session:null},error:H}:j&&j.session&&j.user?(j.session&&(yield E._saveSession(j.session),yield E._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({user:j.user,session:j.session},j.weak_password?{weakPassword:j.weak_password}:null),error:H}):{data:{user:null,session:null},error:new br}}catch(N){if(xn(N))return{data:{user:null,session:null},error:N};throw N}})()}signInWithOAuth(b){var E=this;return(0,A.Z)(function*(){var N,j,H,X;return yield E._handleProviderSignIn(b.provider,{redirectTo:null===(N=b.options)||void 0===N?void 0:N.redirectTo,scopes:null===(j=b.options)||void 0===j?void 0:j.scopes,queryParams:null===(H=b.options)||void 0===H?void 0:H.queryParams,skipBrowserRedirect:null===(X=b.options)||void 0===X?void 0:X.skipBrowserRedirect})})()}exchangeCodeForSession(b){var E=this;return(0,A.Z)(function*(){return yield E.initializePromise,E._acquireLock(-1,(0,A.Z)(function*(){return E._exchangeCodeForSession(b)}))})()}_exchangeCodeForSession(b){var E=this;return(0,A.Z)(function*(){const N=yield no(E.storage,`${E.storageKey}-code-verifier`),[j,H]=(N??"").split("/");try{const{data:X,error:ge}=yield $n(E.fetch,"POST",`${E.url}/token?grant_type=pkce`,{headers:E.headers,body:{auth_code:b,code_verifier:j},xform:Bi});if(yield Kr(E.storage,`${E.storageKey}-code-verifier`),ge)throw ge;return X&&X.session&&X.user?(X.session&&(yield E._saveSession(X.session),yield E._notifyAllSubscribers("SIGNED_IN",X.session)),{data:Object.assign(Object.assign({},X),{redirectType:H??null}),error:ge}):{data:{user:null,session:null,redirectType:null},error:new br}}catch(X){if(xn(X))return{data:{user:null,session:null,redirectType:null},error:X};throw X}})()}signInWithIdToken(b){var E=this;return(0,A.Z)(function*(){try{const{options:N,provider:j,token:H,access_token:X,nonce:ge}=b,Me=yield $n(E.fetch,"POST",`${E.url}/token?grant_type=id_token`,{headers:E.headers,body:{provider:j,id_token:H,access_token:X,nonce:ge,gotrue_meta_security:{captcha_token:N?.captchaToken}},xform:Bi}),{data:_e,error:xt}=Me;return xt?{data:{user:null,session:null},error:xt}:_e&&_e.session&&_e.user?(_e.session&&(yield E._saveSession(_e.session),yield E._notifyAllSubscribers("SIGNED_IN",_e.session)),{data:_e,error:xt}):{data:{user:null,session:null},error:new br}}catch(N){if(xn(N))return{data:{user:null,session:null},error:N};throw N}})()}signInWithOtp(b){var E=this;return(0,A.Z)(function*(){var N,j,H,X,ge;try{if("email"in b){const{email:Me,options:_e}=b;let xt=null,vn=null;"pkce"===E.flowType&&([xt,vn]=yield po(E.storage,E.storageKey));const{error:Sn}=yield $n(E.fetch,"POST",`${E.url}/otp`,{headers:E.headers,body:{email:Me,data:null!==(N=_e?.data)&&void 0!==N?N:{},create_user:null===(j=_e?.shouldCreateUser)||void 0===j||j,gotrue_meta_security:{captcha_token:_e?.captchaToken},code_challenge:xt,code_challenge_method:vn},redirectTo:_e?.emailRedirectTo});return{data:{user:null,session:null},error:Sn}}if("phone"in b){const{phone:Me,options:_e}=b,{data:xt,error:vn}=yield $n(E.fetch,"POST",`${E.url}/otp`,{headers:E.headers,body:{phone:Me,data:null!==(H=_e?.data)&&void 0!==H?H:{},create_user:null===(X=_e?.shouldCreateUser)||void 0===X||X,gotrue_meta_security:{captcha_token:_e?.captchaToken},channel:null!==(ge=_e?.channel)&&void 0!==ge?ge:"sms"}});return{data:{user:null,session:null,messageId:xt?.message_id},error:vn}}throw new Nl("You must provide either an email or phone number.")}catch(Me){if(xn(Me))return{data:{user:null,session:null},error:Me};throw Me}})()}verifyOtp(b){var E=this;return(0,A.Z)(function*(){var N,j;try{let H,X;"options"in b&&(H=null===(N=b.options)||void 0===N?void 0:N.redirectTo,X=null===(j=b.options)||void 0===j?void 0:j.captchaToken);const{data:ge,error:Me}=yield $n(E.fetch,"POST",`${E.url}/verify`,{headers:E.headers,body:Object.assign(Object.assign({},b),{gotrue_meta_security:{captcha_token:X}}),redirectTo:H,xform:Bi});if(Me)throw Me;if(!ge)throw new Error("An error occurred on token verification.");const _e=ge.session,xt=ge.user;return _e?.access_token&&(yield E._saveSession(_e),yield E._notifyAllSubscribers("recovery"==b.type?"PASSWORD_RECOVERY":"SIGNED_IN",_e)),{data:{user:xt,session:_e},error:null}}catch(H){if(xn(H))return{data:{user:null,session:null},error:H};throw H}})()}signInWithSSO(b){var E=this;return(0,A.Z)(function*(){var N,j,H;try{let X=null,ge=null;return"pkce"===E.flowType&&([X,ge]=yield po(E.storage,E.storageKey)),yield $n(E.fetch,"POST",`${E.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in b?{provider_id:b.providerId}:null),"domain"in b?{domain:b.domain}:null),{redirect_to:null!==(j=null===(N=b.options)||void 0===N?void 0:N.redirectTo)&&void 0!==j?j:void 0}),null!==(H=b?.options)&&void 0!==H&&H.captchaToken?{gotrue_meta_security:{captcha_token:b.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:X,code_challenge_method:ge}),headers:E.headers,xform:Ec})}catch(X){if(xn(X))return{data:null,error:X};throw X}})()}reauthenticate(){var b=this;return(0,A.Z)(function*(){return yield b.initializePromise,yield b._acquireLock(-1,(0,A.Z)(function*(){return yield b._reauthenticate()}))})()}_reauthenticate(){var b=this;return(0,A.Z)(function*(){try{return yield b._useSession(function(){var E=(0,A.Z)(function*(N){const{data:{session:j},error:H}=N;if(H)throw H;if(!j)throw new Xi;const{error:X}=yield $n(b.fetch,"GET",`${b.url}/reauthenticate`,{headers:b.headers,jwt:j.access_token});return{data:{user:null,session:null},error:X}});return function(N){return E.apply(this,arguments)}}())}catch(E){if(xn(E))return{data:{user:null,session:null},error:E};throw E}})()}resend(b){var E=this;return(0,A.Z)(function*(){try{const N=`${E.url}/resend`;if("email"in b){const{email:j,type:H,options:X}=b,{error:ge}=yield $n(E.fetch,"POST",N,{headers:E.headers,body:{email:j,type:H,gotrue_meta_security:{captcha_token:X?.captchaToken}},redirectTo:X?.emailRedirectTo});return{data:{user:null,session:null},error:ge}}if("phone"in b){const{phone:j,type:H,options:X}=b,{data:ge,error:Me}=yield $n(E.fetch,"POST",N,{headers:E.headers,body:{phone:j,type:H,gotrue_meta_security:{captcha_token:X?.captchaToken}}});return{data:{user:null,session:null,messageId:ge?.message_id},error:Me}}throw new Nl("You must provide either an email or phone number and a type")}catch(N){if(xn(N))return{data:{user:null,session:null},error:N};throw N}})()}getSession(){var b=this;return(0,A.Z)(function*(){return yield b.initializePromise,yield b._acquireLock(-1,(0,A.Z)(function*(){return b._useSession(function(){var N=(0,A.Z)(function*(j){return j});return function(j){return N.apply(this,arguments)}}())}))})()}_acquireLock(b,E){var N=this;return(0,A.Z)(function*(){N._debug("#_acquireLock","begin",b);try{if(N.lockAcquired){const j=N.pendingInLock.length?N.pendingInLock[N.pendingInLock.length-1]:Promise.resolve(),H=(0,A.Z)(function*(){return yield j,yield E()})();return N.pendingInLock.push((0,A.Z)(function*(){try{yield H}catch{}})()),H}return yield N.lock(`lock:${N.storageKey}`,b,(0,A.Z)(function*(){N._debug("#_acquireLock","lock acquired for storage key",N.storageKey);try{N.lockAcquired=!0;const j=E();for(N.pendingInLock.push((0,A.Z)(function*(){try{yield j}catch{}})()),yield j;N.pendingInLock.length;){const H=[...N.pendingInLock];yield Promise.all(H),N.pendingInLock.splice(0,H.length)}return yield j}finally{N._debug("#_acquireLock","lock released for storage key",N.storageKey),N.lockAcquired=!1}}))}finally{N._debug("#_acquireLock","end")}})()}_useSession(b){var E=this;return(0,A.Z)(function*(){E._debug("#_useSession","begin");try{const N=yield E.__loadSession();return yield b(N)}finally{E._debug("#_useSession","end")}})()}__loadSession(){var b=this;return(0,A.Z)(function*(){b._debug("#__loadSession()","begin"),b.lockAcquired||b._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let E=null;const N=yield no(b.storage,b.storageKey);if(b._debug("#getSession()","session from storage",N),null!==N&&(b._isValidSession(N)?E=N:(b._debug("#getSession()","session from storage is not valid"),yield b._removeSession())),!E)return{data:{session:null},error:null};const j=!!E.expires_at&&E.expires_at<=Date.now()/1e3;if(b._debug("#__loadSession()",`session has${j?"":" not"} expired`,"expires_at",E.expires_at),!j){if(b.storage.isServer){let ge=b.suppressGetSessionWarning;E=new Proxy(E,{get:(_e,xt,vn)=>(!ge&&"user"===xt&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),ge=!0,b.suppressGetSessionWarning=!0),Reflect.get(_e,xt,vn))})}return{data:{session:E},error:null}}const{session:H,error:X}=yield b._callRefreshToken(E.refresh_token);return X?{data:{session:null},error:X}:{data:{session:H},error:null}}finally{b._debug("#__loadSession()","end")}})()}getUser(b){var E=this;return(0,A.Z)(function*(){return b?yield E._getUser(b):(yield E.initializePromise,yield E._acquireLock(-1,(0,A.Z)(function*(){return yield E._getUser()})))})()}_getUser(b){var E=this;return(0,A.Z)(function*(){try{return b?yield $n(E.fetch,"GET",`${E.url}/user`,{headers:E.headers,jwt:b,xform:ta}):yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H,X,ge;const{data:Me,error:_e}=j;if(_e)throw _e;return null!==(H=Me.session)&&void 0!==H&&H.access_token||E.hasCustomAuthorizationHeader?yield $n(E.fetch,"GET",`${E.url}/user`,{headers:E.headers,jwt:null!==(ge=null===(X=Me.session)||void 0===X?void 0:X.access_token)&&void 0!==ge?ge:void 0,xform:ta}):{data:{user:null},error:new Xi}});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return function hu(q){return xn(q)&&"AuthSessionMissingError"===q.name}(N)&&(yield E._removeSession(),yield Kr(E.storage,`${E.storageKey}-code-verifier`)),{data:{user:null},error:N};throw N}})()}updateUser(b,E={}){var N=this;return(0,A.Z)(function*(){return yield N.initializePromise,yield N._acquireLock(-1,(0,A.Z)(function*(){return yield N._updateUser(b,E)}))})()}_updateUser(b,E={}){var N=this;return(0,A.Z)(function*(){try{return yield N._useSession(function(){var j=(0,A.Z)(function*(H){const{data:X,error:ge}=H;if(ge)throw ge;if(!X.session)throw new Xi;const Me=X.session;let _e=null,xt=null;"pkce"===N.flowType&&null!=b.email&&([_e,xt]=yield po(N.storage,N.storageKey));const{data:vn,error:Sn}=yield $n(N.fetch,"PUT",`${N.url}/user`,{headers:N.headers,redirectTo:E?.emailRedirectTo,body:Object.assign(Object.assign({},b),{code_challenge:_e,code_challenge_method:xt}),jwt:Me.access_token,xform:ta});if(Sn)throw Sn;return Me.user=vn.user,yield N._saveSession(Me),yield N._notifyAllSubscribers("USER_UPDATED",Me),{data:{user:Me.user},error:null}});return function(H){return j.apply(this,arguments)}}())}catch(j){if(xn(j))return{data:{user:null},error:j};throw j}})()}_decodeJWT(b){return Ji(b)}setSession(b){var E=this;return(0,A.Z)(function*(){return yield E.initializePromise,yield E._acquireLock(-1,(0,A.Z)(function*(){return yield E._setSession(b)}))})()}_setSession(b){var E=this;return(0,A.Z)(function*(){try{if(!b.access_token||!b.refresh_token)throw new Xi;const N=Date.now()/1e3;let j=N,H=!0,X=null;const ge=Ji(b.access_token);if(ge.exp&&(j=ge.exp,H=j<=N),H){const{session:Me,error:_e}=yield E._callRefreshToken(b.refresh_token);if(_e)return{data:{user:null,session:null},error:_e};if(!Me)return{data:{user:null,session:null},error:null};X=Me}else{const{data:Me,error:_e}=yield E._getUser(b.access_token);if(_e)throw _e;X={access_token:b.access_token,refresh_token:b.refresh_token,user:Me.user,token_type:"bearer",expires_in:j-N,expires_at:j},yield E._saveSession(X),yield E._notifyAllSubscribers("SIGNED_IN",X)}return{data:{user:X.user,session:X},error:null}}catch(N){if(xn(N))return{data:{session:null,user:null},error:N};throw N}})()}refreshSession(b){var E=this;return(0,A.Z)(function*(){return yield E.initializePromise,yield E._acquireLock(-1,(0,A.Z)(function*(){return yield E._refreshSession(b)}))})()}_refreshSession(b){var E=this;return(0,A.Z)(function*(){try{return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H;if(!b){const{data:Me,error:_e}=j;if(_e)throw _e;b=null!==(H=Me.session)&&void 0!==H?H:void 0}if(!b?.refresh_token)throw new Xi;const{session:X,error:ge}=yield E._callRefreshToken(b.refresh_token);return ge?{data:{user:null,session:null},error:ge}:X?{data:{user:X.user,session:X},error:null}:{data:{user:null,session:null},error:null}});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return{data:{user:null,session:null},error:N};throw N}})()}_getSessionFromURL(b,E){var N=this;return(0,A.Z)(function*(){try{if(!os())throw new Xo("No browser detected.");if(b.error||b.error_description||b.error_code)throw new Xo(b.error_description||"Error in URL with unspecified error_description",{error:b.error||"unspecified_error",code:b.error_code||"unspecified_code"});switch(E){case"implicit":if("pkce"===N.flowType)throw new Xa("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===N.flowType)throw new Xo("Not a valid implicit grant flow url.")}if("pkce"===E){if(N._debug("#_initialize()","begin","is PKCE flow",!0),!b.code)throw new Xa("No code detected.");const{data:js,error:Ci}=yield N._exchangeCodeForSession(b.code);if(Ci)throw Ci;const Zi=new URL(window.location.href);return Zi.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Zi.toString()),{data:{session:js.session,redirectType:null},error:null}}const{provider_token:j,provider_refresh_token:H,access_token:X,refresh_token:ge,expires_in:Me,expires_at:_e,token_type:xt}=b;if(!(X&&Me&&ge&&xt))throw new Xo("No session defined in URL");const vn=Math.round(Date.now()/1e3),Sn=parseInt(Me);let Cn=vn+Sn;_e&&(Cn=parseInt(_e));const ot=Cn-vn;1e3*ot<=Xc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${ot}s, should have been closer to ${Sn}s`);const yn=Cn-Sn;vn-yn>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",yn,Cn,vn):vn-yn<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",yn,Cn,vn);const{data:us,error:ds}=yield N._getUser(X);if(ds)throw ds;const _r={provider_token:j,provider_refresh_token:H,access_token:X,expires_in:Sn,expires_at:Cn,refresh_token:ge,token_type:xt,user:us.user};return window.location.hash="",N._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_r,redirectType:b.type},error:null}}catch(j){if(xn(j))return{data:{session:null,redirectType:null},error:j};throw j}})()}_isImplicitGrantCallback(b){return Boolean(b.access_token||b.error_description)}_isPKCECallback(b){var E=this;return(0,A.Z)(function*(){const N=yield no(E.storage,`${E.storageKey}-code-verifier`);return!(!b.code||!N)})()}signOut(b={scope:"global"}){var E=this;return(0,A.Z)(function*(){return yield E.initializePromise,yield E._acquireLock(-1,(0,A.Z)(function*(){return yield E._signOut(b)}))})()}_signOut({scope:b}={scope:"global"}){var E=this;return(0,A.Z)(function*(){return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H;const{data:X,error:ge}=j;if(ge)return{error:ge};const Me=null===(H=X.session)||void 0===H?void 0:H.access_token;if(Me){const{error:_e}=yield E.admin.signOut(Me,b);if(_e&&(!function go(q){return xn(q)&&"AuthApiError"===q.name}(_e)||404!==_e.status&&401!==_e.status&&403!==_e.status))return{error:_e}}return"others"!==b&&(yield E._removeSession(),yield Kr(E.storage,`${E.storageKey}-code-verifier`)),{error:null}});return function(j){return N.apply(this,arguments)}}())})()}onAuthStateChange(b){var E=this;const N=function Qa(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){const k=16*Math.random()|0;return("x"==q?k:3&k|8).toString(16)})}(),j={id:N,callback:b,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",N),this.stateChangeEmitters.delete(N)}};return this._debug("#onAuthStateChange()","registered callback with id",N),this.stateChangeEmitters.set(N,j),(0,A.Z)(function*(){yield E.initializePromise,yield E._acquireLock(-1,(0,A.Z)(function*(){E._emitInitialSession(N)}))})(),{data:{subscription:j}}}_emitInitialSession(b){var E=this;return(0,A.Z)(function*(){return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H,X;try{const{data:{session:ge},error:Me}=j;if(Me)throw Me;yield null===(H=E.stateChangeEmitters.get(b))||void 0===H?void 0:H.callback("INITIAL_SESSION",ge),E._debug("INITIAL_SESSION","callback id",b,"session",ge)}catch(ge){yield null===(X=E.stateChangeEmitters.get(b))||void 0===X?void 0:X.callback("INITIAL_SESSION",null),E._debug("INITIAL_SESSION","callback id",b,"error",ge),console.error(ge)}});return function(j){return N.apply(this,arguments)}}())})()}resetPasswordForEmail(b,E={}){var N=this;return(0,A.Z)(function*(){let j=null,H=null;"pkce"===N.flowType&&([j,H]=yield po(N.storage,N.storageKey,!0));try{return yield $n(N.fetch,"POST",`${N.url}/recover`,{body:{email:b,code_challenge:j,code_challenge_method:H,gotrue_meta_security:{captcha_token:E.captchaToken}},headers:N.headers,redirectTo:E.redirectTo})}catch(X){if(xn(X))return{data:null,error:X};throw X}})()}getUserIdentities(){var b=this;return(0,A.Z)(function*(){var E;try{const{data:N,error:j}=yield b.getUser();if(j)throw j;return{data:{identities:null!==(E=N.user.identities)&&void 0!==E?E:[]},error:null}}catch(N){if(xn(N))return{data:null,error:N};throw N}})()}linkIdentity(b){var E=this;return(0,A.Z)(function*(){var N;try{const{data:j,error:H}=yield E._useSession(function(){var X=(0,A.Z)(function*(ge){var Me,_e,xt,vn,Sn;const{data:Cn,error:ot}=ge;if(ot)throw ot;const yn=yield E._getUrlForProvider(`${E.url}/user/identities/authorize`,b.provider,{redirectTo:null===(Me=b.options)||void 0===Me?void 0:Me.redirectTo,scopes:null===(_e=b.options)||void 0===_e?void 0:_e.scopes,queryParams:null===(xt=b.options)||void 0===xt?void 0:xt.queryParams,skipBrowserRedirect:!0});return yield $n(E.fetch,"GET",yn,{headers:E.headers,jwt:null!==(Sn=null===(vn=Cn.session)||void 0===vn?void 0:vn.access_token)&&void 0!==Sn?Sn:void 0})});return function(ge){return X.apply(this,arguments)}}());if(H)throw H;return os()&&!(null!==(N=b.options)&&void 0!==N&&N.skipBrowserRedirect)&&window.location.assign(j?.url),{data:{provider:b.provider,url:j?.url},error:null}}catch(j){if(xn(j))return{data:{provider:b.provider,url:null},error:j};throw j}})()}unlinkIdentity(b){var E=this;return(0,A.Z)(function*(){try{return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H,X;const{data:ge,error:Me}=j;if(Me)throw Me;return yield $n(E.fetch,"DELETE",`${E.url}/user/identities/${b.identity_id}`,{headers:E.headers,jwt:null!==(X=null===(H=ge.session)||void 0===H?void 0:H.access_token)&&void 0!==X?X:void 0})});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return{data:null,error:N};throw N}})()}_refreshAccessToken(b){var E=this;return(0,A.Z)(function*(){const N=`#_refreshAccessToken(${b.substring(0,5)}...)`;E._debug(N,"begin");try{const j=Date.now();return yield function Fn(q,k){return new Promise((E,N)=>{(0,A.Z)(function*(){for(let j=0;j<1/0;j++)try{const H=yield q(j);if(!k(j,null,H))return void E(H)}catch(H){if(!k(j,H))return void N(H)}})()})}(function(){var H=(0,A.Z)(function*(X){return X>0&&(yield function Vs(q){return an.apply(this,arguments)}(200*Math.pow(2,X-1))),E._debug(N,"refreshing attempt",X),yield $n(E.fetch,"POST",`${E.url}/token?grant_type=refresh_token`,{body:{refresh_token:b},headers:E.headers,xform:Bi})});return function(X){return H.apply(this,arguments)}}(),(H,X)=>{const ge=200*Math.pow(2,H);return X&&io(X)&&Date.now()+ge-j<Xc})}catch(j){if(E._debug(N,"error",j),xn(j))return{data:{session:null,user:null},error:j};throw j}finally{E._debug(N,"end")}})()}_isValidSession(b){return"object"==typeof b&&null!==b&&"access_token"in b&&"refresh_token"in b&&"expires_at"in b}_handleProviderSignIn(b,E){var N=this;return(0,A.Z)(function*(){const j=yield N._getUrlForProvider(`${N.url}/authorize`,b,{redirectTo:E.redirectTo,scopes:E.scopes,queryParams:E.queryParams});return N._debug("#_handleProviderSignIn()","provider",b,"options",E,"url",j),os()&&!E.skipBrowserRedirect&&window.location.assign(j),{data:{provider:b,url:j},error:null}})()}_recoverAndRefresh(){var b=this;return(0,A.Z)(function*(){var E;const N="#_recoverAndRefresh()";b._debug(N,"begin");try{const j=yield no(b.storage,b.storageKey);if(b._debug(N,"session from storage",j),!b._isValidSession(j))return b._debug(N,"session is not valid"),void(null!==j&&(yield b._removeSession()));const H=Math.round(Date.now()/1e3),X=(null!==(E=j.expires_at)&&void 0!==E?E:1/0)<H+10;if(b._debug(N,`session has${X?"":" not"} expired with margin of 10s`),X){if(b.autoRefreshToken&&j.refresh_token){const{error:ge}=yield b._callRefreshToken(j.refresh_token);ge&&(console.error(ge),io(ge)||(b._debug(N,"refresh failed with a non-retryable error, removing the session",ge),yield b._removeSession()))}}else yield b._notifyAllSubscribers("SIGNED_IN",j)}catch(j){return b._debug(N,"error",j),void console.error(j)}finally{b._debug(N,"end")}})()}_callRefreshToken(b){var E=this;return(0,A.Z)(function*(){var N,j;if(!b)throw new Xi;if(E.refreshingDeferred)return E.refreshingDeferred.promise;const H=`#_callRefreshToken(${b.substring(0,5)}...)`;E._debug(H,"begin");try{E.refreshingDeferred=new ro;const{data:X,error:ge}=yield E._refreshAccessToken(b);if(ge)throw ge;if(!X.session)throw new Xi;yield E._saveSession(X.session),yield E._notifyAllSubscribers("TOKEN_REFRESHED",X.session);const Me={session:X.session,error:null};return E.refreshingDeferred.resolve(Me),Me}catch(X){if(E._debug(H,"error",X),xn(X)){const ge={session:null,error:X};return io(X)||(yield E._removeSession()),null===(N=E.refreshingDeferred)||void 0===N||N.resolve(ge),ge}throw null===(j=E.refreshingDeferred)||void 0===j||j.reject(X),X}finally{E.refreshingDeferred=null,E._debug(H,"end")}})()}_notifyAllSubscribers(b,E,N=!0){var j=this;return(0,A.Z)(function*(){const H=`#_notifyAllSubscribers(${b})`;j._debug(H,"begin",E,`broadcast = ${N}`);try{j.broadcastChannel&&N&&j.broadcastChannel.postMessage({event:b,session:E});const X=[],ge=Array.from(j.stateChangeEmitters.values()).map(function(){var Me=(0,A.Z)(function*(_e){try{yield _e.callback(b,E)}catch(xt){X.push(xt)}});return function(_e){return Me.apply(this,arguments)}}());if(yield Promise.all(ge),X.length>0){for(let Me=0;Me<X.length;Me+=1)console.error(X[Me]);throw X[0]}}finally{j._debug(H,"end")}})()}_saveSession(b){var E=this;return(0,A.Z)(function*(){E._debug("#_saveSession()",b),E.suppressGetSessionWarning=!0,yield mi(E.storage,E.storageKey,b)})()}_removeSession(){var b=this;return(0,A.Z)(function*(){b._debug("#_removeSession()"),yield Kr(b.storage,b.storageKey),yield b._notifyAllSubscribers("SIGNED_OUT",null)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const b=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{b&&os()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",b)}catch(E){console.error("removing visibilitychange callback failed",E)}}_startAutoRefresh(){var b=this;return(0,A.Z)(function*(){yield b._stopAutoRefresh(),b._debug("#_startAutoRefresh()");const E=setInterval(()=>b._autoRefreshTokenTick(),Xc);b.autoRefreshTicker=E,E&&"object"==typeof E&&"function"==typeof E.unref?E.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(E),setTimeout((0,A.Z)(function*(){yield b.initializePromise,yield b._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var b=this;return(0,A.Z)(function*(){b._debug("#_stopAutoRefresh()");const E=b.autoRefreshTicker;b.autoRefreshTicker=null,E&&clearInterval(E)})()}startAutoRefresh(){var b=this;return(0,A.Z)(function*(){b._removeVisibilityChangedCallback(),yield b._startAutoRefresh()})()}stopAutoRefresh(){var b=this;return(0,A.Z)(function*(){b._removeVisibilityChangedCallback(),yield b._stopAutoRefresh()})()}_autoRefreshTokenTick(){var b=this;return(0,A.Z)(function*(){b._debug("#_autoRefreshTokenTick()","begin");try{yield b._acquireLock(0,(0,A.Z)(function*(){try{const E=Date.now();try{return yield b._useSession(function(){var N=(0,A.Z)(function*(j){const{data:{session:H}}=j;if(!H||!H.refresh_token||!H.expires_at)return void b._debug("#_autoRefreshTokenTick()","no session");const X=Math.floor((1e3*H.expires_at-E)/Xc);b._debug("#_autoRefreshTokenTick()",`access token expires in ${X} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),X<=3&&(yield b._callRefreshToken(H.refresh_token))});return function(j){return N.apply(this,arguments)}}())}catch(N){console.error("Auto refresh tick failed with error. This is likely a transient error.",N)}}finally{b._debug("#_autoRefreshTokenTick()","end")}}))}catch(E){if(!(E.isAcquireTimeout||E instanceof mo))throw E;b._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var b=this;return(0,A.Z)(function*(){if(b._debug("#_handleVisibilityChange()"),!os()||!window?.addEventListener)return b.autoRefreshToken&&b.startAutoRefresh(),!1;try{b.visibilityChangedCallback=(0,A.Z)(function*(){return yield b._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",b.visibilityChangedCallback),yield b._onVisibilityChanged(!0)}catch(E){console.error("_handleVisibilityChange",E)}})()}_onVisibilityChanged(b){var E=this;return(0,A.Z)(function*(){const N=`#_onVisibilityChanged(${b})`;E._debug(N,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(E.autoRefreshToken&&E._startAutoRefresh(),b||(yield E.initializePromise,yield E._acquireLock(-1,(0,A.Z)(function*(){"visible"===document.visibilityState?yield E._recoverAndRefresh():E._debug(N,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&E.autoRefreshToken&&E._stopAutoRefresh()})()}_getUrlForProvider(b,E,N){var j=this;return(0,A.Z)(function*(){const H=[`provider=${encodeURIComponent(E)}`];if(N?.redirectTo&&H.push(`redirect_to=${encodeURIComponent(N.redirectTo)}`),N?.scopes&&H.push(`scopes=${encodeURIComponent(N.scopes)}`),"pkce"===j.flowType){const[X,ge]=yield po(j.storage,j.storageKey),Me=new URLSearchParams({code_challenge:`${encodeURIComponent(X)}`,code_challenge_method:`${encodeURIComponent(ge)}`});H.push(Me.toString())}if(N?.queryParams){const X=new URLSearchParams(N.queryParams);H.push(X.toString())}return N?.skipBrowserRedirect&&H.push(`skip_http_redirect=${N.skipBrowserRedirect}`),`${b}?${H.join("&")}`})()}_unenroll(b){var E=this;return(0,A.Z)(function*(){try{return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H;const{data:X,error:ge}=j;return ge?{data:null,error:ge}:yield $n(E.fetch,"DELETE",`${E.url}/factors/${b.factorId}`,{headers:E.headers,jwt:null===(H=X?.session)||void 0===H?void 0:H.access_token})});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return{data:null,error:N};throw N}})()}_enroll(b){var E=this;return(0,A.Z)(function*(){try{return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H,X;const{data:ge,error:Me}=j;if(Me)return{data:null,error:Me};const _e=Object.assign({friendly_name:b.friendlyName,factor_type:b.factorType},"phone"===b.factorType?{phone:b.phone}:{issuer:b.issuer}),{data:xt,error:vn}=yield $n(E.fetch,"POST",`${E.url}/factors`,{body:_e,headers:E.headers,jwt:null===(H=ge?.session)||void 0===H?void 0:H.access_token});return vn?{data:null,error:vn}:("totp"===b.factorType&&!(null===(X=xt?.totp)||void 0===X)&&X.qr_code&&(xt.totp.qr_code=`data:image/svg+xml;utf-8,${xt.totp.qr_code}`),{data:xt,error:null})});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return{data:null,error:N};throw N}})()}_verify(b){var E=this;return(0,A.Z)(function*(){return E._acquireLock(-1,(0,A.Z)(function*(){try{return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H;const{data:X,error:ge}=j;if(ge)return{data:null,error:ge};const{data:Me,error:_e}=yield $n(E.fetch,"POST",`${E.url}/factors/${b.factorId}/verify`,{body:{code:b.code,challenge_id:b.challengeId},headers:E.headers,jwt:null===(H=X?.session)||void 0===H?void 0:H.access_token});return _e?{data:null,error:_e}:(yield E._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+Me.expires_in},Me)),yield E._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",Me),{data:Me,error:_e})});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return{data:null,error:N};throw N}}))})()}_challenge(b){var E=this;return(0,A.Z)(function*(){return E._acquireLock(-1,(0,A.Z)(function*(){try{return yield E._useSession(function(){var N=(0,A.Z)(function*(j){var H;const{data:X,error:ge}=j;return ge?{data:null,error:ge}:yield $n(E.fetch,"POST",`${E.url}/factors/${b.factorId}/challenge`,{body:{channel:b.channel},headers:E.headers,jwt:null===(H=X?.session)||void 0===H?void 0:H.access_token})});return function(j){return N.apply(this,arguments)}}())}catch(N){if(xn(N))return{data:null,error:N};throw N}}))})()}_challengeAndVerify(b){var E=this;return(0,A.Z)(function*(){const{data:N,error:j}=yield E._challenge({factorId:b.factorId});return j?{data:null,error:j}:yield E._verify({factorId:b.factorId,challengeId:N.id,code:b.code})})()}_listFactors(){var b=this;return(0,A.Z)(function*(){const{data:{user:E},error:N}=yield b.getUser();if(N)return{data:null,error:N};const j=E?.factors||[],H=j.filter(ge=>"totp"===ge.factor_type&&"verified"===ge.status),X=j.filter(ge=>"phone"===ge.factor_type&&"verified"===ge.status);return{data:{all:j,totp:H,phone:X},error:null}})()}_getAuthenticatorAssuranceLevel(){var b=this;return(0,A.Z)(function*(){return b._acquireLock(-1,(0,A.Z)(function*(){return yield b._useSession(function(){var E=(0,A.Z)(function*(N){var j,H;const{data:{session:X},error:ge}=N;if(ge)return{data:null,error:ge};if(!X)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const Me=b._decodeJWT(X.access_token);let _e=null;Me.aal&&(_e=Me.aal);let xt=_e;return(null!==(H=null===(j=X.user.factors)||void 0===j?void 0:j.filter(Cn=>"verified"===Cn.status))&&void 0!==H?H:[]).length>0&&(xt="aal2"),{data:{currentLevel:_e,nextLevel:xt,currentAuthenticationMethods:Me.amr||[]},error:null}});return function(N){return E.apply(this,arguments)}}())}))})()}}return q.nextInstanceID=0,q})();class Vi extends rc{constructor(k){super(k)}}class tl{constructor(k,b,E){var N,j,H;if(this.supabaseUrl=k,this.supabaseKey=b,!k)throw new Error("supabaseUrl is required.");if(!b)throw new Error("supabaseKey is required.");const X=function kn(q){return q.replace(/\/$/,"")}(k);this.realtimeUrl=`${X}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${X}/auth/v1`,this.storageUrl=`${X}/storage/v1`,this.functionsUrl=`${X}/functions/v1`;const ge=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,_e=function Sr(q,k){const{db:b,auth:E,realtime:N,global:j}=q,{db:H,auth:X,realtime:ge,global:Me}=k,_e={db:Object.assign(Object.assign({},H),b),auth:Object.assign(Object.assign({},X),E),realtime:Object.assign(Object.assign({},ge),N),global:Object.assign(Object.assign({},Me),j),accessToken:()=>function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})}(this,void 0,void 0,function*(){return""})};return q.accessToken?_e.accessToken=q.accessToken:delete _e.accessToken,_e}(E??{},{db:yc,realtime:Aa,auth:Object.assign(Object.assign({},Sa),{storageKey:ge}),global:Ko});this.storageKey=null!==(N=_e.auth.storageKey)&&void 0!==N?N:"",this.headers=null!==(j=_e.global.headers)&&void 0!==j?j:{},_e.accessToken?(this.accessToken=_e.accessToken,this.auth=new Proxy({},{get:(xt,vn)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(vn)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(H=_e.auth)&&void 0!==H?H:{},this.headers,_e.global.fetch),this.fetch=je(b,this._getAccessToken.bind(this),_e.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_e.realtime)),this.rest=new Ce(`${X}/rest/v1`,{headers:this.headers,schema:_e.db.schema,fetch:this.fetch}),_e.accessToken||this._listenForAuthEvents()}get functions(){return new Se(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ro(this.storageUrl,this.headers,this.fetch)}from(k){return this.rest.from(k)}schema(k){return this.rest.schema(k)}rpc(k,b={},E={}){return this.rest.rpc(k,b,E)}channel(k,b={config:{}}){return this.realtime.channel(k,b)}getChannels(){return this.realtime.getChannels()}removeChannel(k){return this.realtime.removeChannel(k)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var k,b;return function(q,k,b,E){return new(b||(b=Promise))(function(j,H){function X(_e){try{Me(E.next(_e))}catch(xt){H(xt)}}function ge(_e){try{Me(E.throw(_e))}catch(xt){H(xt)}}function Me(_e){_e.done?j(_e.value):function N(j){return j instanceof b?j:new b(function(H){H(j)})}(_e.value).then(X,ge)}Me((E=E.apply(q,k||[])).next())})}(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:E}=yield this.auth.getSession();return null!==(b=null===(k=E.session)||void 0===k?void 0:k.access_token)&&void 0!==b?b:null})}_initSupabaseAuthClient({autoRefreshToken:k,persistSession:b,detectSessionInUrl:E,storage:N,storageKey:j,flowType:H,lock:X,debug:ge},Me,_e){return new Vi({url:this.authUrl,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),Me),storageKey:j,autoRefreshToken:k,persistSession:b,detectSessionInUrl:E,storage:N,flowType:H,lock:X,debug:ge,fetch:_e,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(k){return new Zr(this.realtimeUrl,Object.assign(Object.assign({},k),{params:Object.assign({apikey:this.supabaseKey},k?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((b,E)=>{this._handleTokenChanged(b,"CLIENT",E?.access_token)})}_handleTokenChanged(k,b,E){"TOKEN_REFRESHED"!==k&&"SIGNED_IN"!==k||this.changedAccessToken===E?"SIGNED_OUT"===k&&(this.realtime.setAuth(),"STORAGE"==b&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=E}}const Cd_supabase_url="https://vsfyedgeotrypgyhczcg.supabase.co",Cd_supabase_anonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzZnllZGdlb3RyeXBneWhjemNnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc1OTM4MjcsImV4cCI6MjA1MzE2OTgyN30.wGuS2RCeGBbc7eHyclj4P4rCaHOkvPvPH41m3nWvlbc";var Ed=Z(1135),_o=Z(8256);let vi=(()=>{const k=class{constructor(){this.connectionError=new Ed.X(null),this.maxRetries=5,this.initialRetryDelay=100,this.initializeSupabase()}initializeSupabase(){var E=this;return(0,A.Z)(function*(){try{const N=E.retryOperation.bind(E);E.supabase=((q,k,b)=>new tl(q,k,b))(Cd_supabase_url,Cd_supabase_anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,storage:{getItem:j=>(0,A.Z)(function*(){return N((0,A.Z)(function*(){try{return localStorage.getItem(j)}catch(H){throw console.warn("LocalStorage getItem failed, retrying...",H),H}}))})(),setItem:(j,H)=>(0,A.Z)(function*(){return N((0,A.Z)(function*(){try{return localStorage.setItem(j,H),Promise.resolve()}catch(X){throw console.warn("LocalStorage setItem failed, retrying...",X),X}}))})(),removeItem:j=>(0,A.Z)(function*(){return N((0,A.Z)(function*(){try{return localStorage.removeItem(j),Promise.resolve()}catch(H){throw console.warn("LocalStorage removeItem failed, retrying...",H),H}}))})()}}})}catch(N){E.handleError("Failed to initialize Supabase client",N)}})()}retryOperation(E){var N=this;return(0,A.Z)(function*(){let H,j=0;for(;j<N.maxRetries;)try{return yield E()}catch(X){if(H=X,j++,j===N.maxRetries)throw console.error(`Operation failed after ${N.maxRetries} attempts`,X),X;const ge=5e3,Me=N.initialRetryDelay*Math.pow(2,j),_e=200*Math.random(),xt=Math.min(Me+_e,ge);yield new Promise(vn=>setTimeout(vn,xt))}throw H})()}handleError(E,N){const j=`${E}: ${N?.message||"Unknown error"}`;this.connectionError.next(j),console.error(j,N)}get client(){return this.supabase}get error$(){return this.connectionError.asObservable()}setError(E){this.connectionError.next(E)}};let q=k;return k.\u0275fac=function(N){return new(N||k)},k.\u0275prov=_o.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),q})()},2053:(Jt,Ne,Z)=>{"use strict";var A=Z(1481),s=Z(8256),te=Z(6895),me=Z(2076),ie=Z(4128),re=Z(4004);let we=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Qsj),s.Y36(s.SBq))},n.\u0275dir=s.lG2({type:n}),n})(),Ie=(()=>{class n extends we{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,features:[s.qOj]}),n})();const Se=new s.OlP("NgValueAccessor"),Ue={provide:Se,useExisting:(0,s.Gpc)(()=>Ce),multi:!0};let Ce=(()=>{class n extends Ie{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&s.NdJ("change",function(o){return r.onChange(o.target.checked)})("blur",function(){return r.onTouched()})},features:[s._Bn([Ue]),s.qOj]}),n})();const ve={provide:Se,useExisting:(0,s.Gpc)(()=>nt),multi:!0},Pe=new s.OlP("CompositionEventMode");let nt=(()=>{class n extends we{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oe(){const n=(0,te.q)()?(0,te.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(Pe,8))},n.\u0275dir=s.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&s.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[s._Bn([ve]),s.qOj]}),n})();const gt=!1;function Ft(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Wt=new s.OlP("NgValidators"),Tt=new s.OlP("NgAsyncValidators");function Fe(n){return Ft(n.value)?{required:!0}:null}function nn(n){return null}function Or(n){return null!=n}function Ur(n){const e=(0,s.QGY)(n)?(0,me.D)(n):n;if(gt&&!(0,s.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new s.vHH(-1101,t)}return e}function gi(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Tr(n,e){return e.map(t=>t(n))}function $e(n){return n.map(e=>function qe(n){return!n.validate}(e)?e:t=>e.validate(t))}function st(n){return null!=n?function it(n){if(!n)return null;const e=n.filter(Or);return 0==e.length?null:function(t){return gi(Tr(t,e))}}($e(n)):null}function pt(n){return null!=n?function vt(n){if(!n)return null;const e=n.filter(Or);return 0==e.length?null:function(t){const r=Tr(t,e).map(Ur);return(0,ie.D)(r).pipe((0,re.U)(gi))}}($e(n)):null}function fn(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function In(n){return n?Array.isArray(n)?n:[n]:[]}function yt(n,e){return Array.isArray(n)?n.includes(e):n===e}function jt(n,e){const t=In(e);return In(n).forEach(i=>{yt(t,i)||t.push(i)}),t}function Fr(n,e){return In(e).filter(t=>!yt(n,t))}class Bn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=st(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rr extends Bn{get formDirective(){return null}get path(){return null}}class Wn extends Bn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Zr{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let or=(()=>{class n extends Zr{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Wn,2))},n.\u0275dir=s.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[s.qOj]}),n})(),to=(()=>{class n extends Zr{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(rr,10))},n.\u0275dir=s.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&s.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[s.qOj]}),n})();function jn(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Ta=!1,Fi="VALID",Ga="INVALID",fo="PENDING",Ki="DISABLED";function ho(n){return(Nr(n)?n.validators:n)||null}function Yi(n,e){return(Nr(e)?e.asyncValidators:n)||null}function Nr(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Sa{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fi}get invalid(){return this.status===Ga}get pending(){return this.status==fo}get disabled(){return this.status===Ki}get enabled(){return this.status!==Ki}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Fr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Fr(e,this._rawAsyncValidators))}hasValidator(e){return yt(this._rawValidators,e)}hasAsyncValidator(e){return yt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=fo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ki,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fi,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fi||this.status===fo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ki:Fi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=fo,this._hasOwnPendingAsyncValidator=!0;const t=Ur(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new s.vpe,this.statusChanges=new s.vpe}_calculateStatus(){return this._allControlsDisabled()?Ki:this.errors?Ga:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fo)?fo:this._anyControlsHaveStatus(Ga)?Ga:Fi}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nr(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ro(n){return Array.isArray(n)?st(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Wo(n){return Array.isArray(n)?pt(n):n||null}(this._rawAsyncValidators)}}class Aa extends Sa{constructor(e,t,r){super(ho(t),Yi(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function yc(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new s.vHH(1002,Ta?function Yn(n,e){return`Must supply a value for form control ${jn(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Ko(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new s.vHH(1e3,Ta?function Rr(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new s.vHH(1001,Ta?function Wi(n,e){return`Cannot find form control ${jn(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const je=new s.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>lt}),lt="always";function kn(n,e,t=lt){Ri(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Pa(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ya(n,e)})}(n,e),function md(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ka(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ya(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ma(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Sr(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ri(n,e){const t=function En(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(fn(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function er(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(fn(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Sr(e._rawValidators,i),Sr(e._rawAsyncValidators,i)}function Ya(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Rl={provide:rr,useExisting:(0,s.Gpc)(()=>Ji)},ro=(()=>Promise.resolve())();let Ji=(()=>{class n extends rr{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new s.vpe,this.form=new Aa({},st(t),pt(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ro.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),kn(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ro.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ro.then(()=>{const r=this._findContainer(t.path),i=new Aa({});(function Yo(n,e){Ri(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ro.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ro.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function si(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(Wt,10),s.Y36(Tt,10),s.Y36(je,8))},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&s.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[s._Bn([Rl]),s.qOj]}),n})();function Vs(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function an(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Fn=class extends Sa{constructor(e=null,t,r){super(ho(t),Yi(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nr(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=an(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vs(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vs(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){an(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},fu={provide:Wn,useExisting:(0,s.Gpc)(()=>As)},xc=(()=>Promise.resolve())();let As=(()=>{class n extends Wn{constructor(t,r,i,o,a,d){super(),this._changeDetectorRef=a,this.callSetDisabledState=d,this.control=new Fn,this._registered=!1,this.update=new s.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function mi(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===nt?t=o:function ar(n){return Object.getPrototypeOf(n.constructor)===Ie}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Kc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xc.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,s.D6c)(r);xc.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Kt(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(rr,9),s.Y36(Wt,10),s.Y36(Tt,10),s.Y36(Se,10),s.Y36(s.sBO,8),s.Y36(je,8))},n.\u0275dir=s.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[s._Bn([fu]),s.qOj,s.TTD]}),n})(),xn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Li={provide:Se,useExisting:(0,s.Gpc)(()=>go),multi:!0};let go=(()=>{class n extends Ie{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&s.NdJ("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[s._Bn([Li]),s.qOj]}),n})(),Xi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({}),n})();const $n={provide:Se,useExisting:(0,s.Gpc)(()=>cs),multi:!0};function bc(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let cs=(()=>{class n extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=bc(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function Cc(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&s.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([$n]),s.qOj]}),n})(),Bi=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(bc(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(cs,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const pu={provide:Se,useExisting:(0,s.Gpc)(()=>gu),multi:!0};function ta(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let gu=(()=>{class n extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(i.indexOf(a.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const a=o;for(let d=0;d<a.length;d++){const p=this._getOptionValue(a[d].value);i.push(p)}}else{const a=r.options;for(let d=0;d<a.length;d++){const h=a[d];if(h.selected){const p=this._getOptionValue(h.value);i.push(p)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Ec(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&s.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[s._Bn([pu]),s.qOj]}),n})(),na=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ta(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ta(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.SBq),s.Y36(s.Qsj),s.Y36(gu,9))},n.\u0275dir=s.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();function vd(n){return"number"==typeof n?n:parseFloat(n)}let ec=(()=>{class n{constructor(){this._validator=nn}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):nn,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,features:[s.TTD]}),n})();const yd={provide:Wt,useExisting:(0,s.Gpc)(()=>mu),multi:!0};let mu=(()=>{class n extends ec{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>vd(t),this.createValidator=t=>function Mt(n){return e=>{if(Ft(e.value)||Ft(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&s.uIk("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[s._Bn([yd]),s.qOj]}),n})();const so={provide:Wt,useExisting:(0,s.Gpc)(()=>mo),multi:!0};let mo=(()=>{class n extends ec{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>vd(t),this.createValidator=t=>function qt(n){return e=>{if(Ft(e.value)||Ft(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&s.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[s._Bn([so]),s.qOj]}),n})();const Ul={provide:Wt,useExisting:(0,s.Gpc)(()=>ra),multi:!0};let ra=(()=>{class n extends ec{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=s.D6c,this.createValidator=t=>Fe}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=s.n5z(n)))(r||n)}}(),n.\u0275dir=s.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&s.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[s._Bn([Ul]),s.qOj]}),n})(),bd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[Xi]}),n})(),vi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:je,useValue:t.callSetDisabledState??lt}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[bd]}),n})();var k=Z(6785);class b{}class E{}const N="*";function j(n,e){return{type:7,name:n,definitions:e,options:{}}}function H(n,e=null){return{type:4,styles:e,timings:n}}function ge(n,e=null){return{type:2,steps:n,options:e}}function Me(n){return{type:6,styles:n,offset:null}}function vn(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function yn(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function us(n,e){return{type:12,timings:n,animation:e}}function ds(n){Promise.resolve().then(n)}class _r{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ds(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class js{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?ds(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==o&&this._onFinish()}),a.onDestroy(()=>{++r==o&&this._onDestroy()}),a.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((a,d)=>Math.max(a,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Ci="!";function ia(n){return new s.vHH(3e3,!1)}function We(){return typeof window<"u"&&typeof window.document<"u"}function ct(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function hn(n){switch(n.length){case 0:return new _r;case 1:return n[0];default:return new js(n)}}function Cr(n,e,t,r,i=new Map,o=new Map){const a=[],d=[];let h=-1,p=null;if(r.forEach(m=>{const y=m.get("offset"),T=y==h,M=T&&p||new Map;m.forEach((R,D)=>{let U=D,J=R;if("offset"!==D)switch(U=e.normalizePropertyName(U,a),J){case Ci:J=i.get(D);break;case N:J=o.get(D);break;default:J=e.normalizeStyleValue(D,U,J,a)}M.set(U,J)}),T||d.push(M),p=M,h=y}),a.length)throw function th(n){return new s.vHH(3502,!1)}();return d}function Er(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&hr(t,"start",n)));break;case"done":n.onDone(()=>r(t&&hr(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&hr(t,"destroy",n)))}}function hr(n,e,t){const o=Ln(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(o._data=a),o}function Ln(n,e,t,r,i="",o=0,a){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!a}}function tr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function Pr(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let oi=(n,e)=>!1,yo=(n,e,t)=>[],Hs=null;function sa(n){const e=n.parentNode||n.host;return e===Hs?null:e}(ct()||typeof Element<"u")&&(We()?(Hs=(()=>document.documentElement)(),oi=(n,e)=>{for(;e;){if(e===n)return!0;e=sa(e)}return!1}):oi=(n,e)=>n.contains(e),yo=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ps=null,xo=!1;const Vp=oi,Zp=yo;let q0=(()=>{class n{validateStyleProperty(t){return function Bp(n){Ps||(Ps=function Pd(){return typeof document<"u"?document.body:null}()||{},xo=!!Ps.style&&"WebkitAppearance"in Ps.style);let e=!0;return Ps.style&&!function Sc(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ps.style,!e&&xo&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ps.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Vp(t,r)}getParentElement(t){return sa(t)}query(t,r,i){return Zp(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,a,d=[],h){return new _r(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})(),Ac=(()=>{class n{}return n.NOOP=new q0,n})();const qp=1e3,rh="ng-enter",kd="ng-leave",ih="ng-trigger",Uo=".ng-trigger",oo="ng-animating",yu=".ng-animating";function wo(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Od(parseFloat(e[1]),e[2])}function Od(n,e){return"s"===e?n*qp:n}function xu(n,e,t){return n.hasOwnProperty("duration")?n:function sh(n,e,t){let i,o=0,a="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(ia()),{duration:0,delay:0,easing:""};i=Od(parseFloat(d[1]),d[2]);const h=d[3];null!=h&&(o=Od(parseFloat(h),d[4]));const p=d[5];p&&(a=p)}else i=n;if(!t){let d=!1,h=e.length;i<0&&(e.push(function Td(){return new s.vHH(3100,!1)}()),d=!0),o<0&&(e.push(function Yf(){return new s.vHH(3101,!1)}()),d=!0),d&&e.splice(h,0,ia())}return{duration:i,delay:o,easing:a}}(n,e,t)}function oh(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function $0(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function sc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function bo(n,e,t){return t?e+":"+t+";":""}function Rd(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=bo(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=bo(0,Bd(t),n.style[t]));n.setAttribute("style",e)}function Ei(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Ud(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),ct()&&Rd(n))}function wu(n,e){n.style&&(e.forEach((t,r)=>{const i=Ud(r);n.style[i]=""}),ct()&&Rd(n))}function jl(n){return Array.isArray(n)?1==n.length?n[0]:ge(n):n}const oc=new RegExp("{{\\s*(.+?)\\s*}}","g");function G0(n){let e=[];if("string"==typeof n){let t;for(;t=oc.exec(n);)e.push(t[1]);oc.lastIndex=0}return e}function Nd(n,e,t){const r=n.toString(),i=r.replace(oc,(o,a)=>{let d=e[a];return null==d&&(t.push(function Jf(n){return new s.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function Ld(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const W0=/-+([a-z0-9])/g;function Ud(n){return n.replace(W0,(...e)=>e[1].toUpperCase())}function Bd(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function hs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function fs(n){return new s.vHH(3004,!1)}()}}function ah(n,e){return window.getComputedStyle(n)[e]}const Hp="*";function gw(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function mw(n,e,t){if(":"==n[0]){const h=function _w(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Id(n){return new s.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof h)return void e.push(h);n=h}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Np(n){return new s.vHH(3015,!1)}()),e;const i=r[1],o=r[2],a=r[3];e.push(b1(i,a));"<"==o[0]&&!(i==Hp&&a==Hp)&&e.push(b1(a,i))}(r,t,e)):t.push(n),t}const $p=new Set(["true","1"]),sl=new Set(["false","0"]);function b1(n,e){const t=$p.has(n)||sl.has(n),r=$p.has(e)||sl.has(e);return(i,o)=>{let a=n==Hp||n==i,d=e==Hp||e==o;return!a&&t&&"boolean"==typeof i&&(a=i?$p.has(n):sl.has(n)),!d&&r&&"boolean"==typeof o&&(d=o?$p.has(e):sl.has(e)),a&&d}}const ji=new RegExp("s*:selfs*,?","g");function Vd(n,e,t,r){return new w(n).build(e,t,r)}class w{constructor(e){this._driver=e}build(e,t,r){const i=new I(t);return this._resetContextStyleTimingState(i),hs(this,jl(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function Ad(){return new s.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const h=d,p=h.name;p.toString().split(/\s*,\s*/).forEach(m=>{h.name=m,o.push(this.visitState(h,t))}),h.name=p}else if(1==d.type){const h=this.visitTransition(d,t);r+=h.queryCount,i+=h.depCount,a.push(h)}else t.errors.push(function Bl(){return new s.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:a,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,a=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(h=>{G0(h).forEach(p=>{a.hasOwnProperty(p)||o.add(p)})})}),o.size&&(Ld(o.values()),t.errors.push(function ic(n,e){return new s.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=hs(this,jl(e.animation),t);return{type:1,matchers:gw(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Q(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>hs(this,r,t)),options:Q(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(a=>{t.currentTime=r;const d=hs(this,a,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:o,options:Q(e.options)}}visitAnimate(e,t){const r=function z(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Le(xu(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Le(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=xu(t,e);return Le(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Me({});if(5==o.type)i=this.visitKeyframes(o,t);else{let a=e.styles,d=!1;if(!a){d=!0;const p={};r.easing&&(p.easing=r.easing),a=Me(p)}t.currentTime+=r.duration+r.delay;const h=this.visitStyle(a,t);h.isEmptyStep=d,i=h}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===N?r.push(d):t.errors.push(new s.vHH(3002,!1)):r.push($0(d));let o=!1,a=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(a=d.get("easing"),d.delete("easing")),!o))for(let h of d.values())if(h.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((d,h)=>{const p=t.collectedStyles.get(t.currentQuerySelector),m=p.get(h);let y=!0;m&&(o!=i&&o>=m.startTime&&i<=m.endTime&&(t.errors.push(function Fp(n,e,t,r,i){return new s.vHH(3010,!1)}()),y=!1),o=m.startTime),y&&p.set(h,{startTime:o,endTime:i}),t.options&&function Mc(n,e,t){const r=e.params||{},i=G0(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Sd(n){return new s.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Rp(){return new s.vHH(3011,!1)}()),r;let o=0;const a=[];let d=!1,h=!1,p=0;const m=e.steps.map(J=>{const ee=this._makeStyleAst(J,t);let W=null!=ee.offset?ee.offset:function L(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ee.styles),pe=0;return null!=W&&(o++,pe=ee.offset=W),h=h||pe<0||pe>1,d=d||pe<p,p=pe,a.push(pe),ee});h&&t.errors.push(function Vl(){return new s.vHH(3012,!1)}()),d&&t.errors.push(function Zl(){return new s.vHH(3200,!1)}());const y=e.steps.length;let T=0;o>0&&o<y?t.errors.push(function Qf(){return new s.vHH(3202,!1)}()):0==o&&(T=1/(y-1));const M=y-1,R=t.currentTime,D=t.currentAnimateTimings,U=D.duration;return m.forEach((J,ee)=>{const W=T>0?ee==M?1:T*ee:a[ee],pe=W*U;t.currentTime=R+D.delay+pe,D.duration=pe,this._validateStyleAst(J,t),J.offset=W,r.styles.push(J)}),r}visitReference(e,t){return{type:8,animation:hs(this,jl(e.animation),t),options:Q(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Q(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Q(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,a]=function C(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(ji,"")),n=n.replace(/@\*/g,Uo).replace(/@\w+/g,t=>Uo+"-"+t.slice(1)).replace(/:animating/g,yu),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,tr(t.collectedStyles,t.currentQuerySelector,new Map);const d=hs(this,jl(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:d,originalSelector:e.selector,options:Q(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function nl(){return new s.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:xu(e.timings,t.errors,!0);return{type:12,animation:hs(this,jl(e.animation),t),timings:r,options:null}}}class I{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Q(n){return n?(n=oh(n)).params&&(n.params=function v(n){return n?oh(n):null}(n.params)):n={},n}function Le(n,e,t){return{duration:n,delay:e,easing:t}}function ft(n,e,t,r,i,o,a=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:a,subTimeline:d}}class rn{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ai=new RegExp(":enter","g"),ac=new RegExp(":leave","g");function Ic(n,e,t,r,i,o=new Map,a=new Map,d,h,p=[]){return(new Oa).buildKeyframes(n,e,t,r,i,o,a,d,h,p)}class Oa{buildKeyframes(e,t,r,i,o,a,d,h,p,m=[]){p=p||new rn;const y=new jd(e,t,p,i,o,m,[]);y.options=h;const T=h.delay?wo(h.delay):0;y.currentTimeline.delayNextStep(T),y.currentTimeline.setStyles([a],null,y.errors,h),hs(this,r,y);const M=y.timelines.filter(R=>R.containsAnimation());if(M.length&&d.size){let R;for(let D=M.length-1;D>=0;D--){const U=M[D];if(U.element===t){R=U;break}}R&&!R.allowOnlyTimelineStyles()&&R.setStyles([d],null,y.errors,h)}return M.length?M.map(R=>R.buildKeyframes()):[ft(t,[],[],[],0,T,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);o!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const a="number"==typeof o?o:wo(Nd(o,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const a=null!=r.duration?wo(r.duration):null,d=null!=r.delay?wo(r.delay):null;return 0!==a&&e.forEach(h=>{const p=t.appendInstructionToTimeline(h,a,d);o=Math.max(o,p.duration+p.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),hs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zp);const a=wo(o.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>hs(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?wo(e.options.delay):0;e.steps.forEach(a=>{const d=t.createSubContext(e.options);o&&d.delayNextStep(o),hs(this,a,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return xu(t.params?Nd(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(h=>{d.forwardTime((h.offset||0)*o),d.setStyles(h.styles,h.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?wo(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zp);let a=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let h=null;d.forEach((p,m)=>{t.currentQueryIndex=m;const y=t.createSubContext(e.options,p);o&&y.delayNextStep(o),p===t.element&&(h=y.currentTimeline),hs(this,e.animation,y),y.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,y.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),h&&(t.currentTimeline.mergeTimelineCollectedStyles(h),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,a=Math.abs(o.duration),d=a*(t.currentQueryTotal-1);let h=a*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":h=d-h;break;case"full":h=r.currentStaggerTime}const m=t.currentTimeline;h&&m.delayNextStep(h);const y=m.currentTime;hs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-y+(i.startTime-r.currentTimeline.startTime)}}const zp={};class jd{constructor(e,t,r,i,o,a,d,h){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=a,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new ch(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=wo(r.duration)),null!=r.delay&&(i.delay=wo(r.delay));const o=r.params;if(o){let a=i.params;a||(a=this.options.params={}),Object.keys(o).forEach(d=>{(!t||!a.hasOwnProperty(d))&&(a[d]=Nd(o[d],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new jd(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=zp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new IT(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,a){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(ai,"."+this._enterClassName)).replace(ac,"."+this._leaveClassName);let p=this._driver.query(this.element,e,1!=r);0!==r&&(p=r<0?p.slice(p.length+r,p.length):p.slice(0,r)),d.push(...p)}return!o&&0==d.length&&a.push(function Xf(n){return new s.vHH(3014,!1)}()),d}}class ch{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ch(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||N),this._currentKeyframe.set(t,N);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},a=function Y0(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,N)}else sc(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,h]of a){const p=Nd(h,o,r);this._pendingStyles.set(d,p),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??N),this._updateStyle(d,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,h)=>{const p=sc(d,new Map,this._backFill);p.forEach((m,y)=>{m===Ci?e.add(y):m===N&&t.add(y)}),r||p.set("offset",h/this.duration),i.push(p)});const o=e.size?Ld(e.values()):[],a=t.size?Ld(t.values()):[];if(r){const d=i[0],h=new Map(d);d.set("offset",0),h.set("offset",1),i=[d,h]}return ft(this.element,i,o,a,this.duration,this.startTime,this.easing,!1)}}class IT extends ch{constructor(e,t,r,i,o,a,d=!1){super(e,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=d,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],a=r+t,d=t/a,h=sc(e[0]);h.set("offset",0),o.push(h);const p=sc(e[0]);p.set("offset",K0(d)),o.push(p);const m=e.length-1;for(let y=1;y<=m;y++){let T=sc(e[y]);const M=T.get("offset");T.set("offset",K0((t+M*r)/a)),o.push(T)}r=a,t=0,i="",e=o}return ft(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function K0(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class qd{}const Gp=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class DT extends qd{normalizePropertyName(e,t){return Ud(e)}normalizeStyleValue(e,t,r,i){let o="";const a=r.toString().trim();if(Gp.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function vo(n,e){return new s.vHH(3005,!1)}())}return a+o}}function E1(n,e,t,r,i,o,a,d,h,p,m,y,T){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:a,timelines:d,queriedElements:h,preStyleProps:p,postStyleProps:m,totalTime:y,errors:T}}const Hd={};class Wp{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function OT(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,a,d,h,p,m){const y=[],T=this.ast.options&&this.ast.options.params||Hd,R=this.buildStyles(r,d&&d.params||Hd,y),D=h&&h.params||Hd,U=this.buildStyles(i,D,y),J=new Set,ee=new Map,W=new Map,pe="void"===i,Ae={params:FT(D,T),delay:this.ast.options?.delay},Ve=m?[]:Ic(e,t,this.ast.animation,o,a,R,U,Ae,p,y);let ae=0;if(Ve.forEach(ke=>{ae=Math.max(ke.duration+ke.delay,ae)}),y.length)return E1(t,this._triggerName,r,i,pe,R,U,[],[],ee,W,ae,y);Ve.forEach(ke=>{const Je=ke.element,at=tr(ee,Je,new Set);ke.preStyleProps.forEach(Ut=>at.add(Ut));const Be=tr(W,Je,new Set);ke.postStyleProps.forEach(Ut=>Be.add(Ut)),Je!==t&&J.add(Je)});const Re=Ld(J.values());return E1(t,this._triggerName,r,i,pe,R,U,Ve,Re,ee,W,ae)}}function FT(n,e){const t=oh(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class lh{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=oh(this.defaultParams);return Object.keys(e).forEach(o=>{const a=e[o];null!==a&&(i[o]=a)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,d)=>{a&&(a=Nd(a,i,t));const h=this.normalizer.normalizePropertyName(d,t);a=this.normalizer.normalizeStyleValue(d,h,a,t),r.set(d,a)})}),r}}class RT{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new lh(i.style,i.options&&i.options.params||{},r))}),T1(this.states,"true","1"),T1(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Wp(e,i,this.states))}),this.fallbackTransition=function c3(n,e,t){return new Wp(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(a=>a.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function T1(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const NT=new rn;class l3{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],o=Vd(this._driver,t,r,i);if(r.length)throw function nh(n){return new s.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=Cr(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let a;const d=new Map;if(o?(a=Ic(this._driver,t,o,rh,kd,new Map,new Map,r,NT,i),a.forEach(m=>{const y=tr(d,m.element,new Map);m.postStyleProps.forEach(T=>y.set(T,null))})):(i.push(function B0(){return new s.vHH(3300,!1)}()),a=[]),i.length)throw function V0(n){return new s.vHH(3504,!1)}();d.forEach((m,y)=>{m.forEach((T,M)=>{m.set(M,this._driver.computeStyle(y,M,N))})});const p=hn(a.map(m=>{const y=d.get(m.element);return this._buildPlayer(m,new Map,y)}));return this._playersById.set(e,p),p.onDestroy(()=>this.destroy(e)),this.players.push(p),p}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function qs(n){return new s.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=Ln(t,"","","");return Er(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const yw="ng-animate-queued",S1="ng-animate-disabled",ww=[],BT={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bw={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pc="__ng_removed";class A1{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function h3(n){return n??null}(r?e.value:e),r){const o=oh(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Yp="void",Jp=new A1(Yp);class u3{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,aa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function rl(n,e){return new s.vHH(3302,!1)}();if(null==r||0==r.length)throw function ni(n){return new s.vHH(3303,!1)}();if(!function p3(n){return"start"==n||"done"==n}(r))throw function Z0(n,e){return new s.vHH(3400,!1)}();const o=tr(this._elementListeners,e,[]),a={name:t,phase:r,callback:i};o.push(a);const d=tr(this._engine.statesByElement,e,new Map);return d.has(t)||(aa(e,ih),aa(e,ih+"-"+t),d.set(t,Jp)),()=>{this._engine.afterFlush(()=>{const h=o.indexOf(a);h>=0&&o.splice(h,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function P(n){return new s.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),a=new Qp(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(aa(e,ih),aa(e,ih+"-"+t),this._engine.statesByElement.set(e,d=new Map));let h=d.get(t);const p=new A1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&h&&p.absorbOptions(h.options),d.set(t,p),h||(h=Jp),p.value!==Yp&&h.value===p.value){if(!function ZT(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(h.params,p.params)){const D=[],U=o.matchStyles(h.value,h.params,D),J=o.matchStyles(p.value,p.params,D);D.length?this._engine.reportError(D):this._engine.afterFlush(()=>{wu(e,U),Ei(e,J)})}return}const T=tr(this._engine.playersByElement,e,[]);T.forEach(D=>{D.namespaceId==this.id&&D.triggerName==t&&D.queued&&D.destroy()});let M=o.matchTransition(h.value,p.value,e,p.params),R=!1;if(!M){if(!i)return;M=o.fallbackTransition,R=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:M,fromState:h,toState:p,player:a,isFallbackTransition:R}),R||(aa(e,yw),a.onStart(()=>{$d(e,yw)})),a.onDone(()=>{let D=this.players.indexOf(a);D>=0&&this.players.splice(D,1);const U=this._engine.playersByElement.get(e);if(U){let J=U.indexOf(a);J>=0&&U.splice(J,1)}}),this.players.push(a),T.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Uo,!0);r.forEach(i=>{if(i[Pc])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),a=new Map;if(o){const d=[];if(o.forEach((h,p)=>{if(a.set(p,h.value),this._triggers.has(p)){const m=this.trigger(e,p,Yp,i);m&&d.push(m)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),r&&hn(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const a=o.name;if(i.has(a))return;i.add(a);const h=this._triggers.get(a).fallbackTransition,p=r.get(a)||Jp,m=new A1(Yp),y=new Qp(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:h,fromState:p,toState:m,player:y,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let a=e;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Pc];(!o||o===BT)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){aa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,a=this._elementListeners.get(o);a&&a.forEach(d=>{if(d.name==r.triggerName){const h=Ln(o,r.triggerName,r.fromState.value,r.toState.value);h._data=e,Er(r.player,d.phase,h,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==o||0==a?o-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class d3{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new u3(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,d=this.driver.getParentElement(t);for(;d;){const h=i.get(d);if(h){const p=r.indexOf(h);r.splice(p+1,0,e),a=!0;break}d=this.driver.getParentElement(d)}a||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(M1(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!M1(t))return;const o=t[Pc];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),aa(e,S1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$d(e,S1))}removeNode(e,t,r,i){if(M1(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Pc]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return M1(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Uo,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,yu,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return hn(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Pc];if(t&&t.setForRemoval){if(e[Pc]=BT,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(S1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)aa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?hn(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function V(n){return new s.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new rn,i=[],o=new Map,a=[],d=new Map,h=new Map,p=new Map,m=new Set;this.disabledNodes.forEach(wt=>{m.add(wt);const Ct=this.driver.query(wt,".ng-animate-queued",!0);for(let Gt=0;Gt<Ct.length;Gt++)m.add(Ct[Gt])});const y=this.bodyNode,T=Array.from(this.statesByElement.keys()),M=I1(T,this.collectedEnterElements),R=new Map;let D=0;M.forEach((wt,Ct)=>{const Gt=rh+D++;R.set(Ct,Gt),wt.forEach(Dt=>aa(Dt,Gt))});const U=[],J=new Set,ee=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Ct=this.collectedLeaveElements[wt],Gt=Ct[Pc];Gt&&Gt.setForRemoval&&(U.push(Ct),J.add(Ct),Gt.hasAnimation?this.driver.query(Ct,".ng-star-inserted",!0).forEach(Dt=>J.add(Dt)):ee.add(Ct))}const W=new Map,pe=I1(T,Array.from(J));pe.forEach((wt,Ct)=>{const Gt=kd+D++;W.set(Ct,Gt),wt.forEach(Dt=>aa(Dt,Gt))}),e.push(()=>{M.forEach((wt,Ct)=>{const Gt=R.get(Ct);wt.forEach(Dt=>$d(Dt,Gt))}),pe.forEach((wt,Ct)=>{const Gt=W.get(Ct);wt.forEach(Dt=>$d(Dt,Gt))}),U.forEach(wt=>{this.processLeaveNode(wt)})});const Ae=[],Ve=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach(Gt=>{const Dt=Gt.player,bn=Gt.element;if(Ae.push(Dt),this.collectedEnterElements.length){const Bt=bn[Pc];if(Bt&&Bt.setForMove){if(Bt.previousTriggersValues&&Bt.previousTriggersValues.has(Gt.triggerName)){const Vt=Bt.previousTriggersValues.get(Gt.triggerName),Lt=this.statesByElement.get(Gt.element);if(Lt&&Lt.has(Gt.triggerName)){const St=Lt.get(Gt.triggerName);St.value=Vt,Lt.set(Gt.triggerName,St)}}return void Dt.destroy()}}const bt=!y||!this.driver.containsElement(y,bn),he=W.get(bn),Ge=R.get(bn),xe=this._buildInstruction(Gt,r,Ge,he,bt);if(xe.errors&&xe.errors.length)return void Ve.push(xe);if(bt)return Dt.onStart(()=>wu(bn,xe.fromStyles)),Dt.onDestroy(()=>Ei(bn,xe.toStyles)),void i.push(Dt);if(Gt.isFallbackTransition)return Dt.onStart(()=>wu(bn,xe.fromStyles)),Dt.onDestroy(()=>Ei(bn,xe.toStyles)),void i.push(Dt);const Ee=[];xe.timelines.forEach(Bt=>{Bt.stretchStartingKeyframe=!0,this.disabledNodes.has(Bt.element)||Ee.push(Bt)}),xe.timelines=Ee,r.append(bn,xe.timelines),a.push({instruction:xe,player:Dt,element:bn}),xe.queriedElements.forEach(Bt=>tr(d,Bt,[]).push(Dt)),xe.preStyleProps.forEach((Bt,Vt)=>{if(Bt.size){let Lt=h.get(Vt);Lt||h.set(Vt,Lt=new Set),Bt.forEach((St,Qn)=>Lt.add(Qn))}}),xe.postStyleProps.forEach((Bt,Vt)=>{let Lt=p.get(Vt);Lt||p.set(Vt,Lt=new Set),Bt.forEach((St,Qn)=>Lt.add(Qn))})});if(Ve.length){const wt=[];Ve.forEach(Ct=>{wt.push(function K(n,e){return new s.vHH(3505,!1)}())}),Ae.forEach(Ct=>Ct.destroy()),this.reportError(wt)}const ae=new Map,Re=new Map;a.forEach(wt=>{const Ct=wt.element;r.has(Ct)&&(Re.set(Ct,Ct),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,ae))}),i.forEach(wt=>{const Ct=wt.element;this._getPreviousPlayers(Ct,!1,wt.namespaceId,wt.triggerName,null).forEach(Dt=>{tr(ae,Ct,[]).push(Dt),Dt.destroy()})});const ke=U.filter(wt=>Sw(wt,h,p)),Je=new Map;Cw(Je,this.driver,ee,p,N).forEach(wt=>{Sw(wt,h,p)&&ke.push(wt)});const Be=new Map;M.forEach((wt,Ct)=>{Cw(Be,this.driver,new Set(wt),h,Ci)}),ke.forEach(wt=>{const Ct=Je.get(wt),Gt=Be.get(wt);Je.set(wt,new Map([...Array.from(Ct?.entries()??[]),...Array.from(Gt?.entries()??[])]))});const Ut=[],tn=[],$t={};a.forEach(wt=>{const{element:Ct,player:Gt,instruction:Dt}=wt;if(r.has(Ct)){if(m.has(Ct))return Gt.onDestroy(()=>Ei(Ct,Dt.toStyles)),Gt.disabled=!0,Gt.overrideTotalTime(Dt.totalTime),void i.push(Gt);let bn=$t;if(Re.size>1){let he=Ct;const Ge=[];for(;he=he.parentNode;){const xe=Re.get(he);if(xe){bn=xe;break}Ge.push(he)}Ge.forEach(xe=>Re.set(xe,bn))}const bt=this._buildAnimation(Gt.namespaceId,Dt,ae,o,Be,Je);if(Gt.setRealPlayer(bt),bn===$t)Ut.push(Gt);else{const he=this.playersByElement.get(bn);he&&he.length&&(Gt.parentPlayer=hn(he)),i.push(Gt)}}else wu(Ct,Dt.fromStyles),Gt.onDestroy(()=>Ei(Ct,Dt.toStyles)),tn.push(Gt),m.has(Ct)&&i.push(Gt)}),tn.forEach(wt=>{const Ct=o.get(wt.element);if(Ct&&Ct.length){const Gt=hn(Ct);wt.setRealPlayer(Gt)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<U.length;wt++){const Ct=U[wt],Gt=Ct[Pc];if($d(Ct,kd),Gt&&Gt.hasAnimation)continue;let Dt=[];if(d.size){let bt=d.get(Ct);bt&&bt.length&&Dt.push(...bt);let he=this.driver.query(Ct,yu,!0);for(let Ge=0;Ge<he.length;Ge++){let xe=d.get(he[Ge]);xe&&xe.length&&Dt.push(...xe)}}const bn=Dt.filter(bt=>!bt.destroyed);bn.length?Ew(this,Ct,bn):this.processLeaveNode(Ct)}return U.length=0,Ut.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Ct=this.players.indexOf(wt);this.players.splice(Ct,1)}),wt.play()}),Ut}elementContainsData(e,t){let r=!1;const i=t[Pc];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let a=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(a=d)}else{const d=this.playersByElement.get(e);if(d){const h=!o||o==Yp;d.forEach(p=>{p.queued||!h&&p.triggerName!=i||a.push(p)})}}return(r||i)&&(a=a.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),a}_beforeAnimationBuild(e,t,r){const o=t.element,a=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const h of t.timelines){const p=h.element,m=p!==o,y=tr(r,p,[]);this._getPreviousPlayers(p,m,a,d,t.toState).forEach(M=>{const R=M.getRealPlayer();R.beforeDestroy&&R.beforeDestroy(),M.destroy(),y.push(M)})}wu(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,a){const d=t.triggerName,h=t.element,p=[],m=new Set,y=new Set,T=t.timelines.map(R=>{const D=R.element;m.add(D);const U=D[Pc];if(U&&U.removedBeforeQueried)return new _r(R.duration,R.delay);const J=D!==h,ee=function Tw(n){const e=[];return Dc(n,e),e}((r.get(D)||ww).map(ae=>ae.getRealPlayer())).filter(ae=>!!ae.element&&ae.element===D),W=o.get(D),pe=a.get(D),Ae=Cr(0,this._normalizer,0,R.keyframes,W,pe),Ve=this._buildPlayer(R,Ae,ee);if(R.subTimeline&&i&&y.add(D),J){const ae=new Qp(e,d,D);ae.setRealPlayer(Ve),p.push(ae)}return Ve});p.forEach(R=>{tr(this.playersByQueriedElement,R.element,[]).push(R),R.onDone(()=>function f3(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,R.element,R))}),m.forEach(R=>aa(R,oo));const M=hn(T);return M.onDestroy(()=>{m.forEach(R=>$d(R,oo)),Ei(h,t.toStyles)}),y.forEach(R=>{tr(i,R,[]).push(M)}),M}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new _r(e.duration,e.delay)}}class Qp{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new _r,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Er(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){tr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function M1(n){return n&&1===n.nodeType}function VT(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Cw(n,e,t,r,i){const o=[];t.forEach(h=>o.push(VT(h)));const a=[];r.forEach((h,p)=>{const m=new Map;h.forEach(y=>{const T=e.computeStyle(p,y,i);m.set(y,T),(!T||0==T.length)&&(p[Pc]=bw,a.push(p))}),n.set(p,m)});let d=0;return t.forEach(h=>VT(h,o[d++])),a}function I1(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=1,i=new Set(e),o=new Map;function a(d){if(!d)return r;let h=o.get(d);if(h)return h;const p=d.parentNode;return h=t.has(p)?p:i.has(p)?r:a(p),o.set(d,h),h}return e.forEach(d=>{const h=a(d);h!==r&&t.get(h).push(d)}),t}function aa(n,e){n.classList?.add(e)}function $d(n,e){n.classList?.remove(e)}function Ew(n,e,t){hn(t).onDone(()=>n.processLeaveNode(e))}function Dc(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof js?Dc(r.players,e):e.push(r)}}function Sw(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Q0{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new d3(e,t,r),this._timelineEngine=new l3(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const a=e+"-"+i;let d=this._triggerCache[a];if(!d){const h=[],p=[],m=Vd(this._driver,o,h,p);if(h.length)throw function Up(n,e){return new s.vHH(3404,!1)}();d=function Kp(n,e,t){return new RT(n,e,t)}(i,m,this._normalizer),this._triggerCache[a]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,a]=Pr(r);this._timelineEngine.command(o,t,a,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[a,d]=Pr(r);return this._timelineEngine.listen(a,t,d,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let P1=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ei(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ei(this._element,this._initialStyles),this._endStyles&&(Ei(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(wu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wu(this._element,this._endStyles),this._endStyles=null),Ei(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function D1(n){let e=null;return n.forEach((t,r)=>{(function jT(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Mw{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:ah(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Iw{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Vp(e,t)}getParentElement(e){return sa(e)}query(e,t,r){return Zp(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,a=[]){const h={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(h.easing=o);const p=new Map,m=a.filter(M=>M instanceof Mw);(function bu(n,e){return 0===n||0===e})(r,i)&&m.forEach(M=>{M.currentSnapshot.forEach((R,D)=>p.set(D,R))});let y=function z0(n){return n.length?n[0]instanceof Map?n:n.map(e=>$0(e)):[]}(t).map(M=>sc(M));y=function Cu(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,a)=>{r.has(a)||i.push(a),r.set(a,o)}),i.length)for(let o=1;o<e.length;o++){let a=e[o];i.forEach(d=>a.set(d,ah(n,d)))}}return e}(e,y,p);const T=function Aw(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=D1(e[0]),e.length>1&&(r=D1(e[e.length-1]))):e instanceof Map&&(t=D1(e)),t||r?new P1(n,t,r):null}(e,y);return new Mw(e,y,h,T)}}let qT=(()=>{class n extends b{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:s.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?ge(t):t;return X0(this._renderer,null,r,"register",[i]),new HT(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.FYo),s.LFG(te.K0))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class HT extends E{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new ca(this._id,e,t||{},this._renderer)}}class ca{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return X0(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function X0(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const em="@.disabled";let Co=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,a)=>{const d=a?.parentNode(o);d&&a.removeChild(d,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let m=this._rendererCache.get(o);return m||(m=new uh("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,m)),m}const a=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const h=m=>{Array.isArray(m)?m.forEach(h):this.engine.registerTrigger(a,d,t,m.name,m)};return r.data.animation.forEach(h),new Pw(this,d,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[a,d]=o;a(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(s.FYo),s.LFG(Q0),s.LFG(s.R0b))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();class uh{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==em?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Pw extends uh{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==em?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Dw(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),a="";return"@"!=o.charAt(0)&&([o,a]=function $T(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,a,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let kw=(()=>{class n extends Q0{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(te.K0),s.LFG(Ac),s.LFG(qd),s.LFG(s.z2F))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac}),n})();const Fw=[{provide:b,useClass:qT},{provide:qd,useFactory:function zT(){return new DT}},{provide:Q0,useClass:kw},{provide:s.FYo,useFactory:function Ow(n,e,t){return new Co(n,e,t)},deps:[A.se,Q0,s.R0b]}],tm=[{provide:Ac,useFactory:()=>new Iw},{provide:s.QbO,useValue:"BrowserAnimations"},...Fw],Rw=[{provide:Ac,useClass:q0},{provide:s.QbO,useValue:"NoopAnimations"},...Fw];let GT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Rw:tm}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({providers:tm,imports:[A.b2]}),n})();var be=Z(5861),eg=Z(1135);let zd=(()=>{const e=class{constructor(){this.cartItems=[],this.cartSubject=new eg.X([]),this.cartCountSubject=new eg.X(0),this.loadCartFromLocalStorage()}loadCartFromLocalStorage(){const r=localStorage.getItem("cart");if(r)try{this.cartItems=JSON.parse(r),this.updateCart()}catch(i){console.error("Error loading cart from localStorage:",i),this.cartItems=[],this.updateCart()}}saveCartToLocalStorage(){localStorage.setItem("cart",JSON.stringify(this.cartItems))}getCart(){return this.cartSubject.asObservable()}getCartCount(){return this.cartCountSubject.asObservable()}updateCart(){this.cartSubject.next([...this.cartItems]),this.updateCartCount(),this.saveCartToLocalStorage()}updateCartCount(){const r=this.cartItems.reduce((i,o)=>i+o.quantity,0);this.cartCountSubject.next(r)}addToCart(r){if(!r.id)return void console.error("Invalid product ID");const i=this.cartItems.find(o=>o.id===r.id);i?(i.quantity+=r.quantity||1,i.price=r.price,r.originalPrice&&(i.originalPrice=r.originalPrice)):this.cartItems.push({...r,quantity:r.quantity||1,originalPrice:r.originalPrice||r.price}),this.updateCart()}removeFromCart(r){this.cartItems=this.cartItems.filter(i=>i.id!==r),this.updateCart()}updateQuantity(r,i,o){const a=this.cartItems.find(d=>d.id===r);a&&(a.quantity=i,void 0!==o&&(a.price=o),a.quantity<=0?this.removeFromCart(r):this.updateCart())}clearCart(){this.cartItems=[],this.updateCart()}getTotal(){return this.cartItems.reduce((r,i)=>r+i.price*i.quantity,0)}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();var kc=Z(3387);let Hl=(()=>{const e=class{constructor(r){this.supabase=r,this.userSubject=new eg.X(null),this.user$=this.userSubject.asObservable(),this.supabase.client.auth.onAuthStateChange((i,o)=>{o?.user?this.loadUserProfile(o.user):this.userSubject.next(null)})}loadUserProfile(r){var i=this;return(0,be.Z)(function*(){try{const{data:o,error:a}=yield i.supabase.client.from("users").select("*").eq("id",r.id).single();if(a)return void console.error("Error loading user profile:",a);const d={...r,...o};i.userSubject.next(d)}catch(o){console.error("Error in loadUserProfile:",o)}})()}login(r,i){var o=this;return(0,be.Z)(function*(){const{error:a}=yield o.supabase.client.auth.signInWithPassword({email:r,password:i});if(a)throw a})()}register(r,i,o,a){var d=this;return(0,be.Z)(function*(){try{const{data:{user:h},error:p}=yield d.supabase.client.auth.signUp({email:r,password:i});if(p)throw p;if(!h)throw new Error("Registration failed - no user returned");const{error:m}=yield d.supabase.client.from("users").insert([{id:h.id,email:r,name:o,age:a,role:"user"}]);if(m)throw console.error("Error creating user profile:",m),yield d.supabase.client.auth.signOut(),new Error("Failed to create user profile")}catch(h){throw console.error("Registration error:",h),h}})()}logout(){var r=this;return(0,be.Z)(function*(){const{error:i}=yield r.supabase.client.auth.signOut();if(i)throw i;r.userSubject.next(null)})()}isLoggedIn(){return this.user$.pipe((0,re.U)(r=>!!r))}isAdmin(){return this.user$.pipe((0,re.U)(r=>"admin"===r?.role))}getUserName(){return this.user$.pipe((0,re.U)(r=>r?.name))}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(kc.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();var ri=Z(2843),$l=Z(9646),Gd=Z(3900),ci=Z(262);let nm=(()=>{const e=class{constructor(r){this.supabase=r,this.PRODUCTS_BUCKET="products",this.LOGOS_BUCKET="logos",this.MAX_SIZE=5242880,this.ALLOWED_TYPES=["image/jpeg","image/png","image/webp","image/svg+xml"],this.MAX_WIDTH=800,this.QUALITY=.8}validateImage(r){return this.ALLOWED_TYPES.includes(r.type)?r.size>this.MAX_SIZE?"Image must not exceed 5MB":null:"File must be an image in JPG, PNG, WebP, or SVG format"}optimizeImage(r,i=this.MAX_WIDTH){return"image/svg+xml"===r.type?Promise.resolve(r):new Promise((o,a)=>{const d=new Image,h=document.createElement("canvas"),p=h.getContext("2d");d.onload=()=>{let y=d.width,T=d.height;y>i&&(T=Math.round(T*i/y),y=i),h.width=y,h.height=T,p?(p.imageSmoothingQuality="high",p.drawImage(d,0,0,y,T),h.toBlob(M=>{M?o(M):a(new Error("Failed to optimize image"))},"image/webp",this.QUALITY)):a(new Error("Failed to get canvas context"))},d.onerror=()=>a(new Error("Failed to load image"));const m=new FileReader;m.onload=y=>{y.target?.result&&(d.src=y.target.result)},m.onerror=()=>a(new Error("Failed to read file")),m.readAsDataURL(r)})}uploadImage(r,i="product"){const o=this.validateImage(r);if(o)return(0,ri._)(()=>new Error(o));const d="logo"===i?this.LOGOS_BUCKET:this.PRODUCTS_BUCKET;return(0,me.D)(this.optimizeImage(r,"logo"===i?200:this.MAX_WIDTH)).pipe((0,Gd.w)(h=>{const p="image/svg+xml"===r.type?".svg":".png",m=r.name.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,""),y=new Date,T=`${y.getFullYear()}_${(y.getMonth()+1).toString().padStart(2,"0")}_${y.getDate().toString().padStart(2,"0")}`,M=`${y.getHours().toString().padStart(2,"0")}_${y.getMinutes().toString().padStart(2,"0")}_${y.getSeconds().toString().padStart(2,"0")}`,R=`${Date.now()}_${m}_${T}_${M}${p}`;return(0,me.D)(this.supabase.client.storage.from(d).upload(R,h,{contentType:r.type,cacheControl:"3600",upsert:!0})).pipe((0,Gd.w)(({data:D,error:U})=>{if(U)throw U;if(!D)throw new Error("Upload failed");const{data:J}=this.supabase.client.storage.from(d).getPublicUrl(D.path);return(0,$l.of)(J.publicUrl)}))}),(0,ci.K)(h=>(console.error("Error uploading image:",h),(0,ri._)(()=>new Error("Error uploading image. Please try again.")))))}deleteImage(r,i="product"){var o=this;return(0,be.Z)(function*(){try{const a="logo"===i?o.LOGOS_BUCKET:o.PRODUCTS_BUCKET,d=r.split("/").pop();if(!d)throw new Error("Invalid image URL");const{error:h}=yield o.supabase.client.storage.from(a).remove([d]);if(h)throw h}catch(a){throw console.error("Error deleting image:",a),new Error("Error deleting image")}})()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(kc.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),dh=(()=>{const e=class{constructor(r){this.supabase=r}getSettings(){return(0,me.D)(this.supabase.client.from("site_settings").select("*").single()).pipe((0,re.U)(({data:r,error:i})=>{if(i)throw i;return r}),(0,ci.K)(r=>(console.error("Error fetching site settings:",r),(0,ri._)(()=>new Error("Error loading site settings")))))}updateLogo(r){return(0,me.D)(this.supabase.client.from("site_settings").update({logo_url:r}).eq("id","00000000-0000-0000-0000-000000000000").select().single()).pipe((0,re.U)(({data:i,error:o})=>{if(o)throw o;return i}),(0,ci.K)(i=>(console.error("Error updating logo:",i),(0,ri._)(()=>new Error("Error updating logo")))))}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(kc.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function WT(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"li",27)(1,"button",28),s.NdJ("click",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.toggleAdminMenu(i))}),s._UZ(2,"i",29),s.TgZ(3,"span"),s._uU(4,"Administraci\xf3n"),s.qZA(),s._UZ(5,"i",30),s.qZA(),s.TgZ(6,"ul",31)(7,"li",13)(8,"a",32),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.closeMenu())}),s._UZ(9,"i",33),s.TgZ(10,"span"),s._uU(11,"Gestionar Productos"),s.qZA()()(),s.TgZ(12,"li",13)(13,"a",34),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.closeMenu())}),s._UZ(14,"i",35),s.TgZ(15,"span"),s._uU(16,"Gestionar Categor\xedas"),s.qZA()()(),s.TgZ(17,"li",13)(18,"a",36),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.closeMenu())}),s._UZ(19,"i",37),s.TgZ(20,"span"),s._uU(21,"Ventas"),s.qZA()()(),s.TgZ(22,"li",13)(23,"a",38),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.closeMenu())}),s._UZ(24,"i",39),s.TgZ(25,"span"),s._uU(26,"Caja"),s.qZA()()(),s.TgZ(27,"li",13)(28,"a",40),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.closeMenu())}),s._UZ(29,"i",41),s.TgZ(30,"span"),s._uU(31,"M\xe9todos de Pago"),s.qZA()()(),s.TgZ(32,"li",13)(33,"a",42),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.closeMenu())}),s._UZ(34,"i",43),s.TgZ(35,"span"),s._uU(36,"Lista de Precios Mayorista"),s.qZA()()()()()}if(2&n){const t=s.oxw();s.ekj("open",t.isAdminMenuOpen),s.xp6(1),s.uIk("aria-expanded",t.isAdminMenuOpen),s.xp6(5),s.ekj("open",t.isAdminMenuOpen)}}function KT(n,e){if(1&n&&(s.TgZ(0,"span",44),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.Oqu(t.cartItemCount)}}function YT(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",45),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.logout())}),s._UZ(1,"i",46),s.TgZ(2,"span"),s._uU(3,"Cerrar Sesi\xf3n"),s.qZA()()}}const JT=function(){return{exact:!0}};let QT=(()=>{const e=class{onWindowScroll(){this.isScrolled=window.scrollY>50}onWindowResize(){window.innerWidth>768&&this.isMenuOpen&&this.closeMenu()}handleKeyboardEvent(r){"Escape"===r.key&&(this.closeMenu(),this.isAdminMenuOpen=!1)}handleClick(r){r.target.closest(".admin-menu")||(this.isAdminMenuOpen=!1)}constructor(r,i,o,a,d){this.cartService=r,this.authService=i,this.imageService=o,this.siteSettingsService=a,this.router=d,this.isMenuOpen=!1,this.isAdminMenuOpen=!1,this.isScrolled=!1,this.cartItemCount=0,this.logoUrl=null,this.isAdmin$=this.authService.isAdmin(),this.isLoggedIn$=this.authService.isLoggedIn()}ngOnInit(){this.cartService.getCartCount().subscribe(r=>{this.cartItemCount=r}),this.loadLogo()}loadLogo(){this.siteSettingsService.getSettings().subscribe({next:r=>{this.logoUrl=r.logo_url},error:r=>{console.error("Error loading logo:",r)}})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,document.body.classList.toggle("menu-open",this.isMenuOpen),this.isMenuOpen||(this.isAdminMenuOpen=!1)}toggleAdminMenu(r){r.stopPropagation(),this.isAdminMenuOpen=!this.isAdminMenuOpen}closeMenu(){this.isMenuOpen=!1,this.isAdminMenuOpen=!1,document.body.classList.remove("menu-open")}login(){this.router.navigate(["/login"]),this.closeMenu()}logout(){var r=this;return(0,be.Z)(function*(){try{yield r.authService.logout(),r.router.navigate(["/"]),r.closeMenu()}catch(i){console.error("Error logging out:",i)}})()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(zd),s.Y36(Hl),s.Y36(nm),s.Y36(dh),s.Y36(k.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-header"]],hostBindings:function(i,o){1&i&&s.NdJ("scroll",function(){return o.onWindowScroll()},!1,s.Jf7)("resize",function(){return o.onWindowResize()},!1,s.Jf7)("keydown",function(d){return o.handleKeyboardEvent(d)},!1,s.Jf7)("click",function(d){return o.handleClick(d)},!1,s.evT)},decls:39,vars:21,consts:[[1,"main-header"],[1,"container","header-flex"],[1,"header-row","header-top"],["routerLink","/","aria-label","Ir a inicio",1,"logo"],["aria-hidden","true",1,"logo-badge"],["alt","Logo",1,"logo-image",3,"src"],[1,"brand"],[1,"brand-tagline"],["aria-label","Abrir o cerrar men\xfa de navegaci\xf3n",1,"menu-toggle",3,"click"],[1,"fas"],[1,"header-row","header-bottom"],["role","navigation","aria-label","Men\xfa principal",1,"main-nav"],["role","menubar",1,"nav-links"],["role","none"],["routerLink","/","routerLinkActive","active","role","menuitem",1,"nav-link",3,"routerLinkActiveOptions","click"],[1,"fas","fa-home"],["routerLink","/productos","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-store"],["routerLink","/contacto","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-envelope"],["role","none","class","admin-menu",3,"open",4,"ngIf"],[1,"user-actions"],["routerLink","/carrito","aria-label","Carrito de compras",1,"cart-button",3,"click"],[1,"fas","fa-shopping-cart"],[1,"cart-label"],["class","cart-count",4,"ngIf"],["class","auth-button auth-logout","aria-label","Cerrar sesi\xf3n",3,"click",4,"ngIf"],["role","none",1,"admin-menu"],["aria-haspopup","true",1,"nav-link","admin-toggle",3,"click"],[1,"fas","fa-cog"],[1,"fas","fa-chevron-down","chevron"],["role","menu",1,"admin-submenu"],["routerLink","/gestionar-productos","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-box"],["routerLink","/gestionar-categorias","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-tags"],["routerLink","/ventas","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-cash-register"],["routerLink","/caja","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-money-bill-wave"],["routerLink","/metodos-pago","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-credit-card"],["routerLink","/lista-precios-mayorista","routerLinkActive","active","role","menuitem",1,"nav-link",3,"click"],[1,"fas","fa-file-invoice-dollar"],[1,"cart-count"],["aria-label","Cerrar sesi\xf3n",1,"auth-button","auth-logout",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(i,o){1&i&&(s.TgZ(0,"header",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"span",4),s._UZ(5,"img",5),s.qZA(),s.TgZ(6,"span",6)(7,"span",7),s._uU(8,"Cat\xe1logo premium \u2022 Env\xedos y atenci\xf3n r\xe1pida"),s.qZA()()(),s.TgZ(9,"button",8),s.NdJ("click",function(){return o.toggleMenu()}),s._UZ(10,"i",9),s.qZA()(),s.TgZ(11,"div",10)(12,"nav",11)(13,"ul",12)(14,"li",13)(15,"a",14),s.NdJ("click",function(){return o.closeMenu()}),s._UZ(16,"i",15),s.TgZ(17,"span"),s._uU(18,"Inicio"),s.qZA()()(),s.TgZ(19,"li",13)(20,"a",16),s.NdJ("click",function(){return o.closeMenu()}),s._UZ(21,"i",17),s.TgZ(22,"span"),s._uU(23,"Productos"),s.qZA()()(),s.TgZ(24,"li",13)(25,"a",18),s.NdJ("click",function(){return o.closeMenu()}),s._UZ(26,"i",19),s.TgZ(27,"span"),s._uU(28,"Contacto"),s.qZA()()(),s.YNc(29,WT,37,5,"li",20),s.ALo(30,"async"),s.qZA(),s.TgZ(31,"div",21)(32,"a",22),s.NdJ("click",function(){return o.closeMenu()}),s._UZ(33,"i",23),s.TgZ(34,"span",24),s._uU(35,"Carrito"),s.qZA(),s.YNc(36,KT,2,1,"span",25),s.qZA(),s.YNc(37,YT,4,0,"button",26),s.ALo(38,"async"),s.qZA()()()()()),2&i&&(s.ekj("scrolled",o.isScrolled),s.xp6(5),s.Q6J("src",o.logoUrl||"assets/logo.png",s.LSH),s.xp6(4),s.ekj("active",o.isMenuOpen),s.uIk("aria-expanded",o.isMenuOpen),s.xp6(1),s.ekj("fa-bars",!o.isMenuOpen)("fa-times",o.isMenuOpen),s.xp6(2),s.ekj("open",o.isMenuOpen),s.xp6(3),s.Q6J("routerLinkActiveOptions",s.DdM(20,JT)),s.xp6(14),s.Q6J("ngIf",s.lcZ(30,16,o.isAdmin$)),s.xp6(7),s.Q6J("ngIf",o.cartItemCount>0),s.xp6(1),s.Q6J("ngIf",s.lcZ(38,18,o.isLoggedIn$)))},dependencies:[te.O5,k.rH,k.Od,te.Ov],styles:['header[_ngcontent-%COMP%], .main-header[_ngcontent-%COMP%]{--header-bg-1: rgba(16, 43, 28, .98);--header-bg-2: rgba(22, 40, 31, .96);--header-surface: rgba(16, 43, 28, .95);--header-text: rgba(255, 255, 255, .96);--header-muted: rgba(255, 255, 255, .72);--header-accent: #1fda7b;--header-accent-2: #3c9c36;--header-border: rgba(255, 255, 255, .12);background:linear-gradient(135deg,var(--header-bg-1) 0%,var(--header-bg-2) 100%);box-shadow:0 8px 32px #16281f40;padding:.85rem 0;margin-bottom:0;width:100%;position:sticky;top:0;z-index:1000;border-bottom:1px solid var(--header-border);font-family:Inter,Poppins,Segoe UI,system-ui,-apple-system,Arial,Helvetica,sans-serif;letter-spacing:.01em;transition:padding .3s ease,background .3s ease,box-shadow .3s ease}header.scrolled[_ngcontent-%COMP%]{padding:.55rem 0;background:var(--header-surface);-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);box-shadow:0 16px 48px #16281f59}.header-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:1200px;margin:0 auto;padding:.75rem 1.25rem;gap:.65rem}.header-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;width:100%}.header-top[_ngcontent-%COMP%]{min-height:56px}.header-bottom[_ngcontent-%COMP%]{padding:.75rem .5rem .5rem;border-top:1px solid rgba(0,255,163,.15);background:linear-gradient(180deg,rgba(0,255,163,.06),rgba(60,156,54,.03));border-radius:14px;box-shadow:inset 0 1px #00ffa31f,inset 0 -1px #00000029,0 8px 18px #16281f1f}@supports ((-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px))){.header-bottom[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.85rem;text-decoration:none}.logo-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:0;background:transparent;border:none;box-shadow:none;width:auto;height:auto}.brand[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1.05;min-width:0}.brand-name[_ngcontent-%COMP%]{display:none}.brand-name[_ngcontent-%COMP%]{color:var(--header-text);font-weight:700;font-size:1.05rem;letter-spacing:.03em;text-transform:uppercase;white-space:nowrap}.brand-tagline[_ngcontent-%COMP%]{margin-top:.25rem;color:var(--header-muted);font-size:.85rem;font-weight:600;letter-spacing:.02em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:360px;background:linear-gradient(135deg,rgba(255,255,255,.85),rgba(31,218,123,.75));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.logo-image[_ngcontent-%COMP%]{width:82px;height:82px;border-radius:0;object-fit:contain;box-shadow:none;transition:transform .2s}.logo[_ngcontent-%COMP%]:hover   .logo-image[_ngcontent-%COMP%]{transform:scale(1.03);box-shadow:none}.menu-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;color:var(--header-muted);font-size:1.75rem;cursor:pointer;margin-left:1rem;transition:color .2s,transform .2s}.menu-toggle.active[_ngcontent-%COMP%], .menu-toggle[_ngcontent-%COMP%]:hover{color:var(--header-accent);transform:translateY(-1px)}nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem}.main-nav[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;width:100%;justify-content:space-between}@media (min-width: 769px){.nav-links[_ngcontent-%COMP%]{flex-wrap:wrap}}.nav-links[_ngcontent-%COMP%]{display:flex;gap:.35rem;list-style:none;margin:0;padding:0;flex-wrap:wrap}.nav-link[_ngcontent-%COMP%]{color:var(--header-text);text-decoration:none;padding:.6rem 1.15rem;border-radius:12px;font-weight:700;font-size:.92rem;display:flex;align-items:center;gap:.6rem;background:none;border:none;cursor:pointer;position:relative;transition:color .25s ease,background .25s ease,transform .25s ease,box-shadow .25s ease;font-family:inherit;letter-spacing:.02em}.nav-link[_ngcontent-%COMP%]:focus-visible{outline:3px solid rgba(31,218,123,.45);outline-offset:3px}.nav-link[_ngcontent-%COMP%]:after{content:"";display:block;height:2px;width:0;background:linear-gradient(90deg,var(--header-accent) 0%,var(--header-accent-2) 100%);border-radius:2px;transition:width .3s cubic-bezier(.4,0,.2,1);position:absolute;left:20%;bottom:8px;z-index:1;box-shadow:0 2px 6px #1fda7b40;pointer-events:none}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{color:#fffffffa;background:rgba(31,218,123,.15);transform:translateY(-2px);box-shadow:0 12px 28px #1fda7b33;border-radius:12px}.nav-link.active[_ngcontent-%COMP%]{background:rgba(31,218,123,.22);box-shadow:0 14px 32px #1fda7b47}.nav-link[_ngcontent-%COMP%]:hover:after, .nav-link.active[_ngcontent-%COMP%]:after{width:60%;left:20%;background:linear-gradient(90deg,var(--header-accent) 0%,rgba(255,255,255,.95) 100%)}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05rem;color:#1fda7bd9;transition:color .25s ease,transform .25s ease}.nav-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .nav-link.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--header-accent);transform:scale(1.08)}.admin-menu[_ngcontent-%COMP%]{position:relative}.admin-toggle[_ngcontent-%COMP%]{padding-right:2rem!important;position:relative;display:flex;align-items:center;cursor:pointer;color:var(--header-text)}.admin-toggle[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{position:absolute;right:1rem;transition:transform .3s;color:var(--header-accent);font-size:1.2rem;pointer-events:none}.admin-menu.open[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{transform:rotate(180deg);pointer-events:auto}.admin-submenu[_ngcontent-%COMP%]{position:absolute;top:110%;left:0;background:rgba(16,43,28,.98);border:1px solid rgba(31,218,123,.2);border-radius:14px;box-shadow:0 16px 48px #16281f59;padding:.65rem 0;min-width:240px;opacity:0;visibility:hidden;transform:translateY(10px);transition:all .3s ease;list-style:none;z-index:1002;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.admin-submenu.open[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.admin-submenu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:.75rem 1.25rem;border-radius:10px;font-size:.92rem;color:var(--header-text);background:none;margin:0 .5rem}.admin-submenu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover, .admin-submenu[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background:rgba(31,218,123,.18);color:#fffffffa}.user-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.2rem;margin-left:1rem;margin-right:0;padding-left:1.1rem;position:relative}.user-actions[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:1px;height:34px;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,.18),rgba(0,255,163,.22),rgba(255,255,255,0))}@media (min-width: 769px){.user-actions[_ngcontent-%COMP%]:before{height:30px}}.cart-button[_ngcontent-%COMP%]{position:relative;background:linear-gradient(135deg,var(--header-accent) 0%,var(--header-accent-2) 100%);color:#102b1cf5;border:1px solid rgba(255,255,255,.2);height:44px;min-width:44px;padding:0 1rem;border-radius:999px;display:flex;align-items:center;justify-content:center;gap:.6rem;cursor:pointer;transition:all .25s ease;box-shadow:0 8px 20px #1fda7b4d;white-space:nowrap}.cart-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05rem;color:#102b1cf2}.cart-label[_ngcontent-%COMP%]{display:inline;font-weight:800;font-size:.92rem;letter-spacing:.02em;color:#102b1cf2}.cart-button[_ngcontent-%COMP%]:focus-visible{outline:3px solid rgba(31,218,123,.45);outline-offset:3px}.cart-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.04);box-shadow:0 14px 32px #1fda7b66}.cart-count[_ngcontent-%COMP%]{position:absolute;top:-7px;right:-7px;background:rgba(255,76,97,.9);color:#fff;font-size:.75rem;font-weight:800;min-width:20px;height:20px;border-radius:999px;display:flex;align-items:center;justify-content:center;border:2px solid rgba(16,20,30,.9)}.auth-button[_ngcontent-%COMP%]{background:rgba(31,218,123,.12);color:#fffffff5;border:1px solid rgba(31,218,123,.3);padding:.6rem 1.15rem;border-radius:999px;font-weight:800;cursor:pointer;transition:transform .25s ease,box-shadow .25s ease,background .25s ease,border-color .25s ease;display:inline-flex;align-items:center;gap:.55rem;font-family:inherit;font-size:.92rem;letter-spacing:.02em;white-space:nowrap}.auth-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--header-accent)}.auth-button[_ngcontent-%COMP%]:focus-visible{outline:3px solid rgba(31,218,123,.45);outline-offset:3px}.auth-button[_ngcontent-%COMP%]:hover{background:rgba(31,218,123,.2);transform:translateY(-2px);box-shadow:0 12px 28px #1fda7b40;border-color:#1fda7b73}.auth-logout[_ngcontent-%COMP%]{background:rgba(255,76,97,.1);border-color:#ff4c6159}.auth-logout[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff4c61f2}.auth-logout[_ngcontent-%COMP%]:hover{background:rgba(255,76,97,.16);box-shadow:0 10px 22px #ff4c6124;border-color:#ff4c6173}@media (max-width: 900px){.header-flex[_ngcontent-%COMP%]{padding:.65rem 1rem}.brand-tagline[_ngcontent-%COMP%]{max-width:240px}.main-nav[_ngcontent-%COMP%]{margin-left:auto;margin-right:0}.user-actions[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:0}}@media (max-width: 768px){.header-flex[_ngcontent-%COMP%]{padding:.65rem .9rem;gap:0}.header-bottom[_ngcontent-%COMP%]{padding-top:0;border-top:none;background:transparent;border-radius:0;padding-bottom:0;box-shadow:none}.brand-tagline[_ngcontent-%COMP%]{display:none}.brand-name[_ngcontent-%COMP%]{font-size:.98rem}.menu-toggle[_ngcontent-%COMP%]{display:block}.main-nav[_ngcontent-%COMP%]{position:fixed;inset:0;background:linear-gradient(135deg,rgba(16,43,28,.98) 0%,rgba(22,40,31,.98) 100%);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:5.5rem 1.5rem 2.5rem;transform:translate(100%);transition:all .4s cubic-bezier(.4,0,.2,1);z-index:1000;opacity:0;visibility:hidden;gap:1.5rem;overflow-y:auto}.main-nav.open[_ngcontent-%COMP%]{transform:translate(0);opacity:1;visibility:visible}.nav-links[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem;width:100%;margin-bottom:2rem}.nav-link[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:800;padding:1.1rem 1.25rem;width:100%;justify-content:flex-start;border-radius:14px;background:rgba(255,255,255,.05);border:1px solid rgba(31,218,123,.15);box-shadow:0 4px 12px #00000026;color:#fffffff2}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{background:rgba(31,218,123,.2);border-color:#1fda7b66;color:#fffffffa;transform:translate(6px);box-shadow:0 8px 20px #1fda7b40}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:28px;text-align:center;font-size:1.25rem;color:var(--header-accent)}.admin-menu[_ngcontent-%COMP%]{width:100%}.admin-submenu[_ngcontent-%COMP%]{position:static;opacity:1;visibility:visible;transform:none;box-shadow:none;padding:.5rem 0 0;margin-top:.75rem;display:none;background:rgba(0,0,0,.15);border-radius:12px;border:1px solid rgba(31,218,123,.12)}.admin-submenu.open[_ngcontent-%COMP%]{display:block}.admin-submenu[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding-left:2.75rem;font-size:.98rem;background:transparent;border:none;margin:.35rem .5rem}.user-actions[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:1px solid rgba(31,218,123,.2);flex-direction:column;align-items:stretch;gap:1rem;width:100%;padding-left:0}.user-actions[_ngcontent-%COMP%]:before{display:none}.auth-button[_ngcontent-%COMP%]{width:100%;justify-content:center;padding:1.1rem;font-size:1.02rem;font-weight:800;background:rgba(31,218,123,.15);border:1px solid rgba(31,218,123,.35);box-shadow:0 4px 12px #1fda7b33;color:#fffffff5}.auth-button[_ngcontent-%COMP%]:hover{background:rgba(31,218,123,.25);transform:translateY(0)}.cart-button[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:14px;padding:1.1rem 1.25rem;justify-content:flex-start;background:linear-gradient(135deg,var(--header-accent) 0%,var(--header-accent-2) 100%);color:#102b1cf5;box-shadow:0 8px 20px #1fda7b4d;border:1px solid rgba(255,255,255,.25)}.cart-label[_ngcontent-%COMP%]{display:inline;font-weight:800;color:#102b1cf2}.cart-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:28px;text-align:center;font-size:1.25rem;color:#102b1cf2}.cart-count[_ngcontent-%COMP%]{position:static;margin-left:auto;background:rgba(255,76,97,.95);border-color:#102b1c80}body.menu-open[_ngcontent-%COMP%]{overflow:hidden;position:fixed;width:100%}}@media (max-width: 600px){.header-flex[_ngcontent-%COMP%]{padding:.05rem .5vw;min-height:48px}.main-nav[_ngcontent-%COMP%], .user-actions[_ngcontent-%COMP%]{margin-left:0;margin-right:0}}']}),n})(),XT=(()=>{const e=class{constructor(r){this.siteSettingsService=r,this.currentYear=(new Date).getFullYear(),this.logoUrl=null}ngOnInit(){this.loadLogo()}loadLogo(){this.siteSettingsService.getSettings().subscribe({next:r=>{this.logoUrl=r.logo_url},error:r=>{console.error("Error loading logo:",r)}})}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(dh))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-footer"]],decls:38,vars:2,consts:[[1,"container"],[1,"footer-content"],[1,"footer-logo"],["alt","Mate Tierra Logo",3,"src"],[1,"footer-links"],["routerLink","/"],[1,"fas","fa-home"],["routerLink","/productos"],[1,"fas","fa-store"],["routerLink","/contacto"],[1,"fas","fa-envelope"],[1,"footer-social"],[1,"social-icons"],["href","#","target","_blank","aria-label","Instagram"],[1,"fab","fa-instagram"],["href","#","target","_blank","aria-label","Facebook"],[1,"fab","fa-facebook-f"],["href","tel:+123456789","aria-label","Tel\xe9fono"],[1,"fas","fa-phone"],["href","mailto:info@matetierra.com","aria-label","Email"],[1,"footer-bottom"]],template:function(i,o){1&i&&(s.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2),s._UZ(4,"img",3),s.TgZ(5,"p"),s._uU(6,"Descubre nuestra selecci\xf3n premium de mates y accesorios, cuidadosamente elegidos para los verdaderos amantes del mate."),s.qZA()(),s.TgZ(7,"div",4)(8,"h3"),s._uU(9,"Enlaces R\xe1pidos"),s.qZA(),s.TgZ(10,"ul")(11,"li")(12,"a",5),s._UZ(13,"i",6),s._uU(14," Inicio "),s.qZA()(),s.TgZ(15,"li")(16,"a",7),s._UZ(17,"i",8),s._uU(18," Productos "),s.qZA()(),s.TgZ(19,"li")(20,"a",9),s._UZ(21,"i",10),s._uU(22," Contacto "),s.qZA()()()(),s.TgZ(23,"div",11)(24,"h3"),s._uU(25,"Conecta con Nosotros"),s.qZA(),s.TgZ(26,"div",12)(27,"a",13),s._UZ(28,"i",14),s.qZA(),s.TgZ(29,"a",15),s._UZ(30,"i",16),s.qZA(),s.TgZ(31,"a",17),s._UZ(32,"i",18),s.qZA(),s.TgZ(33,"a",19),s._UZ(34,"i",10),s.qZA()()()(),s.TgZ(35,"div",20)(36,"p"),s._uU(37),s.qZA()()()()),2&i&&(s.xp6(4),s.Q6J("src",o.logoUrl||"https://via.placeholder.com/150x150?text=Logo",s.LSH),s.xp6(33),s.hij("\xa9 ",o.currentYear," Mate Tierra. Todos los derechos reservados."))},dependencies:[k.rH],styles:['footer[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(16,43,28,.98) 0%,rgba(22,40,31,.98) 100%);color:#ffffffeb;padding:5rem 0 1.5rem;margin-top:auto;position:relative;overflow:hidden;width:100vw;margin-left:calc(-50vw + 50%);margin-right:calc(-50vw + 50%);border-top:1px solid rgba(31,218,123,.2);--header-accent: #1fda7b;--header-accent-2: #3c9c36}footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--header-accent) 0%,var(--header-accent-2) 50%,var(--header-accent) 100%);box-shadow:0 2px 12px #1fda7b66}.container[_ngcontent-%COMP%]{max-width:1320px;margin:0 auto;padding:0 2.5rem}.footer-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr 1fr 1fr;gap:4.5rem;margin-bottom:3.5rem}.footer-logo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.footer-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;height:130px;object-fit:contain;margin-bottom:1.75rem;background:rgba(31,218,123,.05);padding:1.25rem;border-radius:16px;border:1px solid rgba(31,218,123,.15);box-shadow:0 8px 24px #1fda7b26;transition:transform .3s ease,box-shadow .3s ease}.footer-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 32px #1fda7b40}.footer-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.02rem;line-height:1.7;color:#ffffffbf;margin:0;font-weight:500}.footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-social[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fffffff5;font-size:1.35rem;font-weight:800;margin-bottom:1.75rem;position:relative;padding-bottom:.85rem;letter-spacing:.02em}.footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after, .footer-social[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:50px;height:3px;background:linear-gradient(90deg,var(--header-accent) 0%,var(--header-accent-2) 100%);border-radius:3px;box-shadow:0 2px 8px #1fda7b59}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1.15rem}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ffffffbf;text-decoration:none;transition:all .3s ease;display:flex;align-items:center;gap:.7rem;font-size:1.02rem;font-weight:600;padding:.35rem 0}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fffffffa;transform:translate(8px)}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--header-accent);font-size:.95rem;transition:transform .3s ease}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.15)}.social-icons[_ngcontent-%COMP%]{display:flex;gap:1.35rem}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#102b1cf2;font-size:1.4rem;transition:all .3s ease;width:48px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:linear-gradient(135deg,var(--header-accent) 0%,var(--header-accent-2) 100%);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 20px #1fda7b4d}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#102b1cfa;background:linear-gradient(135deg,var(--header-accent-2) 0%,var(--header-accent) 100%);transform:translateY(-4px) scale(1.08);box-shadow:0 12px 32px #1fda7b73}.footer-bottom[_ngcontent-%COMP%]{text-align:center;padding-top:2.5rem;border-top:1px solid rgba(31,218,123,.2);font-size:.95rem;color:#ffffffa6;font-weight:500;letter-spacing:.02em}@media (max-width: 1024px){.footer-content[_ngcontent-%COMP%]{gap:3.5rem}}@media (max-width: 768px){footer[_ngcontent-%COMP%]{padding:4rem 0 1.5rem}.container[_ngcontent-%COMP%]{padding:0 1.75rem}.footer-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:3rem}.footer-logo[_ngcontent-%COMP%]{align-items:center;text-align:center}.footer-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:110px;height:110px}.footer-logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.98rem}.footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-social[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:1.25rem}.footer-links[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after, .footer-social[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{left:50%;transform:translate(-50%);width:60px}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .social-icons[_ngcontent-%COMP%]{justify-content:center}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:44px;height:44px;font-size:1.3rem}}']}),n})(),Uw=(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-whatsapp-button"]],decls:2,vars:0,consts:[["href","https://wa.me/5493758540393","target","_blank","title","Cont\xe1ctanos por WhatsApp",1,"whatsapp-button"],[1,"fab","fa-whatsapp"]],template:function(i,o){1&i&&(s.TgZ(0,"a",0),s._UZ(1,"i",1),s.qZA())},styles:[".whatsapp-button[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;background-color:#25d366;color:#fff;border-radius:50%;text-align:center;font-size:30px;width:60px;height:60px;display:flex;justify-content:center;align-items:center;text-decoration:none;box-shadow:2px 2px 3px #999;transition:all .3s ease;z-index:1000}.whatsapp-button[_ngcontent-%COMP%]:hover{background-color:#128c7e;transform:scale(1.1)}"]}),n})(),k1=(()=>{const e=class{constructor(){this.title="Mi Sitio Web"}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"]],template:function(i,o){1&i&&(s._UZ(0,"app-header"),s.TgZ(1,"main",0),s._UZ(2,"router-outlet"),s.qZA(),s._UZ(3,"app-footer")(4,"app-whatsapp-button"))},dependencies:[k.lC,QT,XT,Uw],styles:["main[_ngcontent-%COMP%]{padding:0rem 0;margin:0 auto 60px;width:100%;max-width:1200px;box-sizing:border-box;flex:1;display:flex;flex-direction:column;min-height:calc(100vh - 1080px)}[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}"]}),n})();var ol=Z(6082);function O1(n,e){1&n&&(s.TgZ(0,"article",12),s._UZ(1,"div",13),s.TgZ(2,"div",14),s._UZ(3,"div",15)(4,"div",16),s.TgZ(5,"div",17),s._UZ(6,"span")(7,"span"),s.qZA(),s.TgZ(8,"div",18),s._UZ(9,"span")(10,"span"),s.qZA()()())}function eS(n,e){if(1&n&&(s.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"span",8),s._uU(4,"Colecci\xf3n Seleccionada"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Productos destacados"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Estamos cargando la selecci\xf3n del d\xeda."),s.qZA()()(),s.TgZ(9,"div",9)(10,"div",10),s.YNc(11,O1,11,0,"article",11),s.qZA()()()),2&n){const t=s.oxw();s.xp6(11),s.Q6J("ngForOf",t.skeletonCards)}}function tS(n,e){if(1&n&&(s.TgZ(0,"div",19),s._UZ(1,"i",20),s.TgZ(2,"span"),s._uU(3),s.qZA()()),2&n){const t=s.oxw();s.xp6(3),s.Oqu(t.error)}}function Bw(n,e){if(1&n&&(s.TgZ(0,"span",49),s._UZ(1,"i",50),s._uU(2),s.qZA()),2&n){const t=s.oxw().$implicit,r=s.oxw(2);s.xp6(1),s.Q6J("ngClass",r.getStockBadgeIcon(t)),s.xp6(1),s.hij(" ",r.getStockBadgeLabel(t)," ")}}function Vw(n,e){if(1&n&&(s.TgZ(0,"span",57),s._uU(1),s.qZA()),2&n){const t=s.oxw(2).$implicit;s.xp6(1),s.hij("Ahorro -",t.discount,"%")}}function Wd(n,e){1&n&&(s.TgZ(0,"span",57),s._uU(1,"Precio"),s.qZA())}function Zw(n,e){if(1&n&&(s.TgZ(0,"span",58),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&n){const t=s.oxw(2).$implicit;s.xp6(1),s.Oqu(s.Dn7(2,1,t.price,"ARS","symbol-narrow"))}}function jw(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",51)(1,"div",52),s.YNc(2,Vw,2,1,"span",53),s.YNc(3,Wd,2,0,"span",53),s.TgZ(4,"span",54),s._uU(5),s.ALo(6,"currency"),s.qZA(),s.YNc(7,Zw,3,5,"span",55),s.qZA(),s.TgZ(8,"div",56)(9,"img",32),s.NdJ("error",function(i){s.CHM(t);const o=s.oxw(3);return s.KtG(o.handleImageError(i))}),s.qZA()()()}if(2&n){const t=s.oxw().$implicit,r=s.oxw(2);s.xp6(2),s.Q6J("ngIf",t.discount),s.xp6(1),s.Q6J("ngIf",!t.discount),s.xp6(2),s.Oqu(s.Dn7(6,6,r.getDisplayPrice(t),"ARS","symbol-narrow")),s.xp6(2),s.Q6J("ngIf",t.discount),s.xp6(2),s.Q6J("src",r.getPrimaryImage(t),s.LSH)("alt",t.name)}}function nS(n,e){1&n&&(s.TgZ(0,"span",59),s._uU(1,"Destacado"),s.qZA())}function m3(n,e){if(1&n&&(s.TgZ(0,"span",59),s._uU(1),s.qZA()),2&n){const t=s.oxw().$implicit;s.xp6(1),s.hij("-",t.discount,"%")}}function rm(n,e){if(1&n&&(s.TgZ(0,"span",59),s._uU(1),s.qZA()),2&n){const t=s.oxw().$implicit,r=s.oxw(2);s.xp6(1),s.hij("\u2605 ",r.getRating(t),"")}}const rS=function(n){return["/productos",n]};function qw(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"article",29)(1,"a",30)(2,"div",31)(3,"img",32),s.NdJ("error",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.handleImageError(i))}),s.qZA()(),s._UZ(4,"div",33),s.TgZ(5,"header",34)(6,"span",35),s._uU(7),s.qZA(),s.YNc(8,Bw,3,2,"span",36),s.qZA(),s.TgZ(9,"div",37)(10,"h3",38),s._uU(11),s.qZA(),s.TgZ(12,"p",39),s._uU(13),s.qZA(),s.YNc(14,jw,10,10,"div",40),s.TgZ(15,"div",41),s.YNc(16,nS,2,0,"span",42),s.YNc(17,m3,2,1,"span",42),s.YNc(18,rm,2,1,"span",42),s.qZA()(),s.TgZ(19,"footer",43)(20,"div",44)(21,"span",45),s._uU(22," Ver producto "),s._UZ(23,"i",46),s.qZA(),s.TgZ(24,"button",47),s.NdJ("click",function(i){const a=s.CHM(t).$implicit,d=s.oxw(2);return i.preventDefault(),i.stopPropagation(),s.KtG(d.addToCart(a))}),s._UZ(25,"i",48),s.TgZ(26,"span"),s._uU(27),s.qZA()()()()()()}if(2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(1),s.Q6J("routerLink",s.VKq(14,rS,t.id)),s.uIk("aria-label","Ver producto "+t.name),s.xp6(2),s.Q6J("src",r.getPrimaryImage(t),s.LSH)("alt",t.name),s.xp6(4),s.Oqu(t.category||"Colecci\xf3n Mate"),s.xp6(1),s.Q6J("ngIf",void 0!==t.stock),s.xp6(3),s.Oqu(t.name),s.xp6(2),s.Oqu(t.description),s.xp6(1),s.Q6J("ngIf",t.price),s.xp6(2),s.Q6J("ngIf",t.seasonal),s.xp6(1),s.Q6J("ngIf",t.discount),s.xp6(1),s.Q6J("ngIf",t.rating),s.xp6(6),s.Q6J("disabled",t.stock<=0),s.xp6(3),s.Oqu(t.stock>0?"Agregar":"Sin stock")}}function Hw(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"span",60),s.NdJ("click",function(i){const a=s.CHM(t).index;return s.oxw(2).showGroup(a),s.KtG(i.stopPropagation())}),s.qZA()}if(2&n){const t=e.index,r=s.oxw(2);s.ekj("active",t===r.currentGroup)}}function $w(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"div",6)(2,"div",7)(3,"span",8),s._uU(4,"Colecci\xf3n Seleccionada"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Productos destacados"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Curadur\xeda con stock y compra r\xe1pida para que elijas sin vueltas."),s.qZA()()(),s.TgZ(9,"div",9)(10,"div",10),s.YNc(11,qw,28,16,"article",21),s.qZA()(),s.TgZ(12,"div",22)(13,"button",23),s.NdJ("click",function(i){return s.CHM(t),s.oxw().prevGroup(),s.KtG(i.stopPropagation())}),s._UZ(14,"i",24),s.qZA(),s.TgZ(15,"div",25),s.YNc(16,Hw,1,2,"span",26),s.qZA(),s.TgZ(17,"button",27),s.NdJ("click",function(i){return s.CHM(t),s.oxw().nextGroup(),s.KtG(i.stopPropagation())}),s._UZ(18,"i",28),s.qZA()(),s.BQk()}if(2&n){const t=s.oxw();s.xp6(11),s.Q6J("ngForOf",t.visibleProducts)("ngForTrackBy",t.trackByProductId),s.xp6(2),s.Q6J("disabled",0===t.currentGroup),s.xp6(3),s.Q6J("ngForOf",t.totalGroups),s.xp6(1),s.Q6J("disabled",t.currentGroup===t.totalGroups.length-1)}}function F1(n,e){1&n&&(s.TgZ(0,"div",61),s._UZ(1,"i",62),s.TgZ(2,"div")(3,"h3"),s._uU(4,"Sin productos destacados por ahora"),s.qZA(),s.TgZ(5,"p"),s._uU(6,"Volv\xe9 en unos minutos o explor\xe1 el cat\xe1logo completo."),s.qZA(),s.TgZ(7,"a",63),s._uU(8,"Ver cat\xe1logo"),s.qZA()()())}let zw=(()=>{const e=class{constructor(r,i,o){this.productService=r,this.cartService=i,this.router=o,this.products=[],this.visibleProducts=[],this.skeletonCards=Array.from({length:4}),this.currentGroup=0,this.productsPerGroup=4,this.totalGroups=[],this.isLoading=!0,this.isSliding=!1,this.error=null,this.fallbackImage="https://images.unsplash.com/photo-1501426026826-31c667bdf23d?auto=format&fit=crop&w=900&q=60"}ngOnInit(){this.loadSeasonalProducts()}loadSeasonalProducts(){this.isLoading=!0,this.productService.getSeasonalProducts(10).subscribe({next:r=>{this.products=r,this.calculateGroups(),this.showGroup(0),this.isLoading=!1},error:r=>{console.error("Error loading seasonal products:",r),this.error="Error loading seasonal products",this.isLoading=!1}})}calculateGroups(){const r=Math.ceil(this.products.length/this.productsPerGroup);this.totalGroups=Array(r).fill(0).map((i,o)=>o)}animateGroupChange(r){var i=this;return(0,be.Z)(function*(){i.isSliding=!0,yield new Promise(o=>setTimeout(o,300)),r(),yield new Promise(o=>setTimeout(o,50)),i.isSliding=!1})()}showGroup(r){r>=0&&r<this.totalGroups.length&&this.animateGroupChange(()=>{this.currentGroup=r;const i=this.currentGroup*this.productsPerGroup;this.visibleProducts=this.products.slice(i,i+this.productsPerGroup)})}prevGroup(){this.currentGroup>0&&this.showGroup(this.currentGroup-1)}nextGroup(){this.currentGroup<this.totalGroups.length-1&&this.showGroup(this.currentGroup+1)}goToProduct(r){this.router.navigate(["/productos",r])}addToCart(r){if(!r?.id||(r.stock??0)<=0)return;const i=r.discount?this.getDisplayPrice(r):r.price;this.cartService.addToCart({id:r.id,name:r.name,price:i,originalPrice:r.price,quantity:1})}getDisplayPrice(r){if(!r?.price&&0!==r?.price)return 0;if(!r?.discount)return r.price;const i=Math.min(Math.max(r.discount,0),100);return Math.max(Number((r.price*(1-i/100)).toFixed(2)),0)}getRating(r){return r?.rating?Number(r.rating.toFixed(1)):4.8}getReviews(r){return r?.reviews??24}getStockBadgeLabel(r){const i=r?.stock??0;return i<=0?"Sin stock":i<=5?"\xdaltimas unidades":"Disponible"}getStockBadgeClass(r){const i=r?.stock??0;return i<=0?"out":i<=5?"low":"ok"}getStockBadgeIcon(r){const i=r?.stock??0;return i<=0?"fa-times-circle":i<=5?"fa-bolt":"fa-check-circle"}trackByProductId(r,i){return i.id}getPrimaryImage(r){return r?.image_urls?.length?r.image_urls[0]:r?.image?r.image:this.fallbackImage}handleImageError(r){const i=r.target;i&&i.src!==this.fallbackImage&&(i.onerror=null,i.src=this.fallbackImage)}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(ol.M),s.Y36(zd),s.Y36(k.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-product-carousel"]],decls:5,vars:4,consts:[[1,"carousel-container"],["class","loading-shell","aria-busy","true",4,"ngIf"],["class","state-card error",4,"ngIf"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["aria-busy","true",1,"loading-shell"],[1,"section-header"],[1,"section-meta"],[1,"eyebrow"],[1,"products-gallery"],[1,"gallery-grid"],["class","product-card skeleton",4,"ngFor","ngForOf"],[1,"product-card","skeleton"],[1,"product-image-container"],[1,"product-content"],[1,"skeleton-chip"],[1,"skeleton-title"],[1,"skeleton-lines"],[1,"skeleton-footer"],[1,"state-card","error"],[1,"fas","fa-exclamation-circle"],["class","mosaic-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"gallery-controls"],["aria-label","Anterior",1,"control-button","prev",3,"disabled","click"],[1,"fas","fa-chevron-left"],[1,"gallery-indicators"],["class","indicator",3,"active","click",4,"ngFor","ngForOf"],["aria-label","Siguiente",1,"control-button","next",3,"disabled","click"],[1,"fas","fa-chevron-right"],[1,"mosaic-card"],[1,"mosaic-surface",3,"routerLink"],[1,"mosaic-bg"],["loading","lazy",3,"src","alt","error"],[1,"mosaic-overlay"],[1,"mosaic-header"],[1,"mosaic-chip"],["class","mosaic-count",4,"ngIf"],[1,"mosaic-body"],[1,"mosaic-title"],[1,"mosaic-description"],["class","mosaic-featured",4,"ngIf"],[1,"mosaic-pills"],["class","pill",4,"ngIf"],[1,"mosaic-footer"],[1,"mosaic-footer-row"],[1,"mosaic-link"],[1,"fas","fa-arrow-right"],["type","button",1,"mosaic-cart",3,"disabled","click"],[1,"fas","fa-cart-plus"],[1,"mosaic-count"],[1,"fas",3,"ngClass"],[1,"mosaic-featured"],[1,"featured-left"],["class","featured-tag",4,"ngIf"],[1,"featured-name"],["class","featured-price",4,"ngIf"],[1,"featured-thumb"],[1,"featured-tag"],[1,"featured-price"],[1,"pill"],[1,"indicator",3,"click"],[1,"empty-state"],[1,"fas","fa-box-open"],["routerLink","/productos",1,"empty-cta"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0),s.YNc(1,eS,12,1,"div",1),s.YNc(2,tS,4,1,"div",2),s.YNc(3,$w,19,5,"ng-container",3),s.YNc(4,F1,9,0,"div",4),s.qZA()),2&i&&(s.xp6(1),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&o.error),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.error&&o.products.length>0),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.error&&0===o.products.length))},dependencies:[te.mk,te.sg,te.O5,k.rH,te.H9],styles:['.carousel-container[_ngcontent-%COMP%]{width:100%;max-width:95%;margin:0 auto;padding:5.25rem 3rem 3.5rem;background:radial-gradient(900px circle at 12% 12%,rgba(60,156,54,.03),transparent 55%),radial-gradient(700px circle at 88% 24%,rgba(0,255,163,.02),transparent 60%),linear-gradient(180deg,rgba(255,255,255,.5) 0%,rgba(246,251,247,.55) 100%);border-radius:28px;box-shadow:0 20px 56px #16281f1f;position:relative;overflow:hidden;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1}.carousel-container[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:1px;border-radius:26px;pointer-events:none;border:1px solid rgba(22,40,31,.1)}.state-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1.25rem 1.5rem;border-radius:16px;flex-direction:column;gap:1.75rem}.card-actions[_ngcontent-%COMP%]{border-top:1px solid rgba(22,40,31,.08);padding-top:1rem;margin-top:auto;display:grid;grid-template-columns:1fr;gap:.65rem}.cta-primary[_ngcontent-%COMP%]{width:100%;min-height:40px;border:1px solid rgba(22,40,31,.1);background:radial-gradient(900px circle at 25% 15%,rgba(255,255,255,.16),transparent 55%),linear-gradient(135deg,#1fda7b,#19b55f);color:#090e12f5;font-weight:800;font-size:.9rem;letter-spacing:.01em;border-radius:12px;padding:.55rem .85rem;display:inline-flex;align-items:center;justify-content:center;gap:.45rem;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease,filter .2s ease;box-shadow:0 12px 22px #16281f24,0 10px 26px #1fda7b2e}.cta-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.cta-secondary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.88rem;opacity:.9}.cta-secondary[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{opacity:1}.cta-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);filter:saturate(1.02);box-shadow:0 14px 26px #16281f29,0 12px 28px #1fda7b38}.cta-primary[_ngcontent-%COMP%]:active{transform:translateY(0);filter:brightness(.985)}.cta-primary[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 14px 26px #16281f29,0 0 0 4px #1fda7b38}.cta-primary[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6;box-shadow:none;filter:grayscale(.2)}.cta-secondary[_ngcontent-%COMP%]{width:100%;min-height:40px;border:1px solid rgba(22,40,31,.12);background:rgba(16,43,28,.02);color:#1f452d;border-radius:12px;padding:.5rem .85rem;font-weight:800;font-size:.88rem;letter-spacing:.01em;display:inline-flex;align-items:center;justify-content:center;gap:.4rem;cursor:pointer;transition:transform .2s ease,background .2s ease,box-shadow .2s ease}.cta-secondary[_ngcontent-%COMP%]:hover{background:rgba(16,43,28,.05);transform:translateY(-1px);box-shadow:0 14px 26px #16281f1f}.cta-secondary[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 14px 26px #16281f1f,0 0 0 4px #1fda7b2e}@media (max-width: 1024px){.carousel-container[_ngcontent-%COMP%]{padding:3rem 1.35rem 3.25rem}}.product-card.skeleton[_ngcontent-%COMP%]{cursor:default;transform:none}.product-card.skeleton[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 16px 44px #16281f1f}.product-card.skeleton[_ngcontent-%COMP%]:after{display:none}.product-card.skeleton[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]{background:linear-gradient(90deg,rgba(240,245,242,.9),rgba(230,240,235,.9),rgba(240,245,242,.9));background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s ease infinite}.product-card.skeleton[_ngcontent-%COMP%]   .product-image-container[_ngcontent-%COMP%]:after{display:none}.skeleton-chip[_ngcontent-%COMP%], .skeleton-title[_ngcontent-%COMP%], .skeleton-lines[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .skeleton-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;border-radius:999px;background:linear-gradient(90deg,rgba(240,245,242,.95),rgba(228,238,233,.95),rgba(240,245,242,.95));background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s ease infinite}.skeleton-chip[_ngcontent-%COMP%]{width:48%;height:18px}.skeleton-title[_ngcontent-%COMP%]{width:82%;height:22px;border-radius:14px}.skeleton-lines[_ngcontent-%COMP%]{display:grid;gap:.5rem}.skeleton-lines[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:14px;border-radius:12px}.skeleton-lines[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:70%}.skeleton-footer[_ngcontent-%COMP%]{margin-top:auto;display:flex;align-items:center;justify-content:space-between;gap:.75rem}.skeleton-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:16px;width:40%}.skeleton-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:32%}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:0% 0}to{background-position:-200% 0}}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.25rem;padding:1.75rem;border-radius:22px;border:1px dashed rgba(22,40,31,.2);background:rgba(255,255,255,.7);margin-top:1.5rem}.gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:1.75rem}.section-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.section-meta[_ngcontent-%COMP%]{max-width:720px;margin:0 auto;display:flex;flex-direction:column;gap:.85rem}.eyebrow[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem 1.25rem;border-radius:999px;background:linear-gradient(135deg,rgba(60,156,54,.12),rgba(0,255,163,.1));border:1px solid rgba(60,156,54,.2);color:#1f452d;font-weight:800;letter-spacing:.12em;text-transform:uppercase;font-size:.8rem;width:-moz-fit-content;width:fit-content;margin:0 auto;box-shadow:0 4px 12px #3c9c3626}.section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:900;letter-spacing:-.03em;line-height:1.1;background:linear-gradient(135deg,#102b1c 0%,#1f452d 50%,#3c9c36 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;position:relative}.section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 auto;font-size:1.05rem;color:#5b6b62;line-height:1.6;font-weight:500;text-align:center;max-width:620px}.mosaic-card[_ngcontent-%COMP%]{grid-column:span 4;min-height:340px}@media (min-width: 993px){.mosaic-card[_ngcontent-%COMP%]:nth-child(1){grid-column:span 7;min-height:400px}.mosaic-card[_ngcontent-%COMP%]:nth-child(2){grid-column:span 5;min-height:400px}}.mosaic-surface[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;border-radius:26px;overflow:hidden;position:relative;text-decoration:none;border:1px solid rgba(22,40,31,.1);box-shadow:0 20px 56px #16281f29;background:#0f1712;transition:transform .28s ease,box-shadow .28s ease}.mosaic-surface[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 30px 72px #16281f33}.mosaic-bg[_ngcontent-%COMP%]{position:absolute;inset:0}.mosaic-bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transform:scale(1.02);filter:saturate(.95) contrast(1.05);transition:transform .52s ease,filter .52s ease}.mosaic-surface[_ngcontent-%COMP%]:hover   .mosaic-bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.08);filter:saturate(1.05) contrast(1.1)}.mosaic-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(900px circle at 18% 18%,rgba(0,255,163,.14),transparent 60%),linear-gradient(180deg,rgba(0,0,0,.1),rgba(0,0,0,.7)),linear-gradient(90deg,rgba(0,0,0,.8),rgba(0,0,0,.2));opacity:.95}.mosaic-header[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding:.95rem 1.05rem 0}.mosaic-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.45rem .95rem;border-radius:999px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.14);color:#ffffffeb;font-weight:800;letter-spacing:.08em;text-transform:uppercase;font-size:.75rem}.mosaic-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.45rem .9rem;border-radius:999px;background:rgba(255,255,255,.92);color:#10141eeb;font-weight:800;font-size:.85rem}.mosaic-body[_ngcontent-%COMP%]{position:relative;z-index:1;padding:.95rem 1.05rem;margin-top:auto}.mosaic-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:900;letter-spacing:-.03em;color:#fffffff5}.mosaic-description[_ngcontent-%COMP%]{margin:.55rem 0 0;color:#ffffffc7;line-height:1.5;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.mosaic-featured[_ngcontent-%COMP%]{margin-top:.85rem;padding:.85rem .9rem;border-radius:20px;display:flex;align-items:center;justify-content:space-between;gap:.95rem;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.12)}.featured-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.featured-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:-moz-fit-content;width:fit-content;padding:.28rem .72rem;border-radius:999px;background:rgba(0,255,163,.14);border:1px solid rgba(0,255,163,.18);font-weight:800;letter-spacing:.08em;text-transform:uppercase;font-size:.72rem;color:#ffffffe0}.featured-name[_ngcontent-%COMP%]{margin-top:.25rem;font-weight:800;color:#fffffff5;line-height:1.25}.featured-price[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-weight:900;color:#ffffffbf;text-decoration:line-through}.featured-thumb[_ngcontent-%COMP%]{width:78px;height:78px;border-radius:20px;overflow:hidden;background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.14)}.featured-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.mosaic-pills[_ngcontent-%COMP%]{margin-top:.9rem;display:flex;flex-wrap:wrap;gap:.5rem}.pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.4rem .75rem;border-radius:999px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.14);color:#ffffffe0;font-weight:800;font-size:.8rem}.mosaic-footer[_ngcontent-%COMP%]{position:relative;z-index:1;padding:.85rem 1.05rem 1rem}.mosaic-footer-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.9rem}.mosaic-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.6rem;color:#ffffffeb;font-weight:900;letter-spacing:.06em;text-transform:uppercase;font-size:.78rem}.mosaic-cart[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.45rem;padding:.5rem .75rem;border-radius:999px;border:1px solid rgba(255,255,255,.16);background:rgba(255,255,255,.1);color:#ffffffeb;font-weight:900;letter-spacing:.06em;text-transform:uppercase;font-size:.72rem;cursor:pointer;transition:transform .2s ease,background .2s ease,border-color .2s ease}.mosaic-cart[_ngcontent-%COMP%]:hover{transform:translateY(-1px);background:rgba(255,255,255,.14);border-color:#00ffa338}.mosaic-cart[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 4px #00ffa32e}.mosaic-cart[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed;transform:none}@media (max-width: 992px){.mosaic-card[_ngcontent-%COMP%]{grid-column:span 6;min-height:390px}}@media (max-width: 640px){.mosaic-card[_ngcontent-%COMP%]{grid-column:span 12}}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:18px;display:inline-flex;align-items:center;justify-content:center;background:rgba(60,156,54,.12);color:#1f452d;font-size:1.35rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#102b1c;letter-spacing:-.02em}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.35rem 0 0;color:#5b6b62}.empty-cta[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;margin-top:.85rem;padding:.65rem 1.05rem;border-radius:999px;border:1px solid rgba(22,40,31,.12);background:#ffffff;color:#1f452d;font-weight:800;text-decoration:none;transition:background .2s ease,transform .2s ease}.empty-cta[_ngcontent-%COMP%]:hover{background:rgba(16,43,28,.06);transform:translateY(-1px)}.products-gallery[_ngcontent-%COMP%]{position:relative}.gallery-grid[_ngcontent-%COMP%]{transition:opacity .4s ease,transform .4s ease}.gallery-grid.sliding[_ngcontent-%COMP%]{opacity:0;transform:translateY(10px)}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px);box-shadow:0 28px 64px #16281f29;border-color:#3c9c3638}.product-card[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 30px 55px #16281f2e,0 0 0 4px #00ffa329}.product-card[_ngcontent-%COMP%]:hover:after{opacity:1}.product-image-container[_ngcontent-%COMP%]{position:relative;padding-top:82%;overflow:hidden;background:radial-gradient(900px circle at 20% 15%,rgba(255,255,255,.85),rgba(225,245,234,.9) 55%,rgba(208,236,223,1) 100%)}@supports (aspect-ratio: 1 / 1){.product-image-container[_ngcontent-%COMP%]{padding-top:0;aspect-ratio:4 / 5}}.product-image-container[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:radial-gradient(900px circle at 24% 18%,rgba(255,255,255,.32),transparent 55%),linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.1) 55%,rgba(0,0,0,.34) 100%);opacity:.95;pointer-events:none}.product-image-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(800px circle at 70% 20%,rgba(0,255,163,.18),transparent 55%);opacity:0;transition:opacity .35s ease;pointer-events:none}.product-card[_ngcontent-%COMP%]:hover   .product-image-container[_ngcontent-%COMP%]:before{opacity:1}.product-image[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center 35%;filter:saturate(1.02) contrast(1.06);transition:transform .6s ease}@media (max-width: 640px){.product-image[_ngcontent-%COMP%]{object-position:center}}.product-image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{transform:scale(1.02)}.product-card[_ngcontent-%COMP%]:hover   .product-image-container[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{transform:scale(1.09)}.product-image-container[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 1px #ffffff38}.badge[_ngcontent-%COMP%]{position:absolute;top:1rem;left:1rem;display:inline-flex;align-items:center;gap:.35rem;padding:.5rem .9rem;border-radius:999px;font-size:.85rem;font-weight:600;color:#fff;box-shadow:0 8px 20px #214e3033;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.24)}.badge.stock[_ngcontent-%COMP%]{top:auto;bottom:1rem;left:1rem;background:rgba(16,43,28,.78)}.badge.stock.ok[_ngcontent-%COMP%]{background:rgba(16,43,28,.78)}.badge.stock.low[_ngcontent-%COMP%]{background:rgba(243,156,18,.88)}.badge.stock.out[_ngcontent-%COMP%]{background:rgba(231,76,60,.9)}.badge.discount[_ngcontent-%COMP%]{top:auto;bottom:1rem;left:auto;right:1rem;background:linear-gradient(120deg,rgba(231,76,60,.96),rgba(192,57,43,.96))}.badge.seasonal[_ngcontent-%COMP%]{background:linear-gradient(120deg,rgba(60,156,54,.96),rgba(46,204,113,.96))}.product-content[_ngcontent-%COMP%]{padding:1.45rem 1.55rem 1.5rem;display:flex;flex-direction:column;gap:.95rem;flex:1;background:rgba(255,255,255,.98)}.product-head[_ngcontent-%COMP%]{display:grid;gap:.75rem}.product-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.45rem;font-size:.9rem;padding:.35rem .95rem;border-radius:999px;background:rgba(16,43,28,.06);color:#1f452d;font-weight:600;width:-moz-fit-content;width:fit-content}.product-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.3rem;color:#16281f;letter-spacing:-.02em;line-height:1.25;font-weight:900;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.description[_ngcontent-%COMP%]{margin:0;color:#4a5c50;line-height:1.55;min-height:40px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.product-meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.85rem;flex-wrap:wrap;padding-top:.25rem}.rating[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.3rem;color:#f39c12;font-weight:800;background:rgba(243,156,18,.12);border:1px solid rgba(243,156,18,.18);padding:.35rem .65rem;border-radius:999px}.rating-value[_ngcontent-%COMP%]{color:#9c5c00}.rating[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]{color:#7a6a52;font-size:.85rem;font-weight:700}.pricing[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:.5rem}.pricing[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{font-size:1.35rem;color:#1f452d;font-weight:900;letter-spacing:-.02em}.pricing[_ngcontent-%COMP%]   .original[_ngcontent-%COMP%]{font-size:.95rem;color:#9ea9a3;text-decoration:line-through}.gallery-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1.5rem;margin-top:2.5rem}.control-button[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:18px;border:1px solid rgba(22,40,31,.1);background:#fff;color:#1f452d;font-size:1.1rem;cursor:pointer;transition:all .3s ease}.control-button[_ngcontent-%COMP%]:disabled{opacity:.35;cursor:not-allowed}.control-button[_ngcontent-%COMP%]:not(:disabled):hover{background:#1f452d;color:#fff}.gallery-indicators[_ngcontent-%COMP%]{display:flex;gap:.65rem}.indicator[_ngcontent-%COMP%]{width:36px;height:4px;border-radius:999px;background:rgba(22,40,31,.12);cursor:pointer;transition:background .3s ease,transform .3s ease}.indicator.active[_ngcontent-%COMP%]{background:#1f452d;transform:scaleX(1.1)}@media (max-width: 992px){.carousel-container[_ngcontent-%COMP%]{padding:2.5rem 1.5rem 3rem}}@media (min-width: 1400px){.carousel-container[_ngcontent-%COMP%]{max-width:98%;padding-left:4rem;padding-right:4rem}}@media (min-width: 1920px){.carousel-container[_ngcontent-%COMP%]{max-width:98.5%;padding-left:5rem;padding-right:5rem}}@media (max-width: 640px){.section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;margin-bottom:1.25rem}.section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.85rem}.section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.product-content[_ngcontent-%COMP%]{padding:1.5rem}}']}),n})();var fh=Z(7123);let im=(()=>{const e=class{ngOnInit(){fh.init({duration:1e3,once:!0,offset:100})}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-features-section"]],decls:73,vars:0,consts:[[1,"features-section"],[1,"container"],["data-aos","fade-down",1,"section-header"],[1,"section-meta"],[1,"eyebrow"],["data-aos","fade-up",1,"features"],["data-aos","fade-up","data-aos-delay","100",1,"feature"],[1,"feature-img-container"],["src","assets/images/mate-premium.jpg","alt","Calidad Premium","onerror","this.src='https://images.unsplash.com/photo-1544787219-7f47ccb76574?auto=format&fit=crop&w=400&q=80'",1,"feature-img"],[1,"feature-overlay"],[1,"fas","fa-award"],[1,"feature-content"],[1,"feature-kicker"],[1,"feature-details"],[1,"feature-tag"],[1,"fas","fa-check"],[1,"fas","fa-star"],["data-aos","fade-up","data-aos-delay","200",1,"feature"],["src","assets/images/envios-rapidos.jpg","alt","Env\xedos R\xe1pidos","onerror","this.src='https://images.unsplash.com/photo-1561715276-a2d087060f1d?auto=format&fit=crop&w=400&q=80'",1,"feature-img"],[1,"fas","fa-shipping-fast"],[1,"fas","fa-truck"],[1,"fas","fa-map-marker-alt"],["data-aos","fade-up","data-aos-delay","300",1,"feature"],["src","assets/images/atencion-personalizada.jpg","alt","Atenci\xf3n Personalizada","onerror","this.src='https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=400&q=80'",1,"feature-img"],[1,"fas","fa-headset"],[1,"fas","fa-clock"],[1,"fas","fa-user-tie"],[1,"features-decoration"],[1,"decoration-element"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),s._uU(5,"Por qu\xe9 elegirnos"),s.qZA(),s.TgZ(6,"h2"),s._uU(7,"Nuestra Promesa de Calidad"),s.qZA(),s.TgZ(8,"p"),s._uU(9,"Cada detalle est\xe1 pensado para brindarte la mejor experiencia con el mate."),s.qZA()()()(),s.TgZ(10,"div",5)(11,"div",6)(12,"div",7),s._UZ(13,"img",8),s.TgZ(14,"div",9),s._UZ(15,"i",10),s.qZA()(),s.TgZ(16,"div",11)(17,"span",12),s._UZ(18,"i",10),s._uU(19," Calidad"),s.qZA(),s.TgZ(20,"h3"),s._uU(21,"Calidad Premium"),s.qZA(),s.TgZ(22,"p"),s._uU(23,"Seleccionamos artesanalmente cada mate y accesorio, garantizando la m\xe1s alta calidad en cada producto que ofrecemos."),s.qZA(),s.TgZ(24,"div",13)(25,"span",14),s._UZ(26,"i",15),s._uU(27," Garant\xeda de Calidad"),s.qZA(),s.TgZ(28,"span",14),s._UZ(29,"i",16),s._uU(30," Productos Selectos"),s.qZA()()()(),s.TgZ(31,"div",17)(32,"div",7),s._UZ(33,"img",18),s.TgZ(34,"div",9),s._UZ(35,"i",19),s.qZA()(),s.TgZ(36,"div",11)(37,"span",12),s._UZ(38,"i",19),s._uU(39," Log\xedstica"),s.qZA(),s.TgZ(40,"h3"),s._uU(41,"Env\xedos R\xe1pidos"),s.qZA(),s.TgZ(42,"p"),s._uU(43,"Tu pedido llegar\xe1 r\xe1pido y seguro. Realizamos env\xedos a todo el pa\xeds con seguimiento en tiempo real."),s.qZA(),s.TgZ(44,"div",13)(45,"span",14),s._UZ(46,"i",20),s._uU(47," Env\xedo Express"),s.qZA(),s.TgZ(48,"span",14),s._UZ(49,"i",21),s._uU(50," Seguimiento Online"),s.qZA()()()(),s.TgZ(51,"div",22)(52,"div",7),s._UZ(53,"img",23),s.TgZ(54,"div",9),s._UZ(55,"i",24),s.qZA()(),s.TgZ(56,"div",11)(57,"span",12),s._UZ(58,"i",24),s._uU(59," Soporte"),s.qZA(),s.TgZ(60,"h3"),s._uU(61,"Atenci\xf3n Personalizada"),s.qZA(),s.TgZ(62,"p"),s._uU(63,"Nuestro equipo de expertos est\xe1 disponible para asesorarte y resolver todas tus dudas sobre el mundo del mate."),s.qZA(),s.TgZ(64,"div",13)(65,"span",14),s._UZ(66,"i",25),s._uU(67," Soporte 24/7"),s.qZA(),s.TgZ(68,"span",14),s._UZ(69,"i",26),s._uU(70," Asesor\xeda Experta"),s.qZA()()()()(),s.TgZ(71,"div",27),s._UZ(72,"div",28),s.qZA()())},styles:['.features-section[_ngcontent-%COMP%]{padding:5.25rem 0;background:radial-gradient(900px circle at 18% 12%,rgba(60,156,54,.04),transparent 55%),radial-gradient(700px circle at 86% 18%,rgba(0,255,163,.03),transparent 60%),linear-gradient(180deg,rgba(255,255,255,.35) 0%,rgba(247,250,248,.4) 100%);position:relative;overflow:hidden;z-index:1}.section-header[_ngcontent-%COMP%]{margin-bottom:2.25rem}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]{text-align:center;max-width:720px;margin:0 auto;display:flex;flex-direction:column;gap:.85rem}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem 1.25rem;border-radius:999px;background:linear-gradient(135deg,rgba(60,156,54,.12),rgba(0,255,163,.1));border:1px solid rgba(60,156,54,.2);color:#1f452d;font-weight:800;letter-spacing:.12em;text-transform:uppercase;font-size:.8rem;width:-moz-fit-content;width:fit-content;margin:0 auto;box-shadow:0 4px 12px #3c9c3626}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:900;letter-spacing:-.03em;line-height:1.1;background:linear-gradient(135deg,#102b1c 0%,#1f452d 50%,#3c9c36 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 auto;font-size:1.05rem;color:#5b6b62;line-height:1.6;font-weight:500;text-align:center;max-width:620px}.features[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:1.25rem;padding:0 1.25rem;position:relative}.feature[_ngcontent-%COMP%]{grid-column:span 4;background:rgba(255,255,255,.92);border-radius:26px;overflow:hidden;box-shadow:0 16px 44px #16281f1f;transition:transform .28s ease,box-shadow .28s ease;border:1px solid rgba(22,40,31,.08);position:relative}.feature[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;box-shadow:0 0 0 1px #ffffff40;opacity:0;transition:opacity .24s ease}.feature[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 26px 64px #16281f29}.feature[_ngcontent-%COMP%]:hover:after{opacity:1}.feature-img-container[_ngcontent-%COMP%]{position:relative;width:100%;height:230px;overflow:hidden}.feature-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .6s cubic-bezier(.4,0,.2,1)}.feature[_ngcontent-%COMP%]:hover   .feature-img[_ngcontent-%COMP%]{transform:scale(1.1)}.feature-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.7) 0%,rgba(0,0,0,0) 100%);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.feature[_ngcontent-%COMP%]:hover   .feature-overlay[_ngcontent-%COMP%]{opacity:1}.feature-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#fff;text-shadow:0 2px 10px rgba(0,0,0,.3);transform:translateY(20px);transition:transform .3s ease}.feature[_ngcontent-%COMP%]:hover   .feature-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translateY(0)}.feature-content[_ngcontent-%COMP%]{padding:1.5rem 1.6rem 1.65rem;position:relative;display:flex;flex-direction:column;gap:.75rem}.feature-kicker[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;font-size:.78rem;text-transform:uppercase;letter-spacing:.14em;font-weight:900;color:#16281fb8}.feature[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;color:#16281f;margin:0;font-weight:900;letter-spacing:-.02em;text-align:left}.feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4a5c50;line-height:1.6;margin:0;font-size:1rem;text-align:left}.feature-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.8rem;justify-content:flex-start;margin-top:.35rem}.feature-tag[_ngcontent-%COMP%]{background:rgba(60,156,54,.08);color:#1f452d;padding:.52rem .9rem;border-radius:999px;font-size:.9rem;font-weight:700;display:flex;align-items:center;gap:.5rem;transition:all .3s ease}.feature-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.feature-tag[_ngcontent-%COMP%]:hover{background:rgba(31,69,45,.95);color:#fffffff2;transform:translateY(-2px)}.features-decoration[_ngcontent-%COMP%]{position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:0}.decoration-element[_ngcontent-%COMP%]{position:absolute;width:300px;height:300px;background:linear-gradient(135deg,rgba(60,156,54,.05),rgba(46,204,113,.05));border-radius:50%;transform:translate(-50%,-50%);top:20%;left:10%}.decoration-element[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:inherit;border-radius:inherit;transform:scale(1.5);opacity:.5}@media (max-width: 768px){.features-section[_ngcontent-%COMP%]{padding:4.25rem 0}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.98rem}.features[_ngcontent-%COMP%]{grid-template-columns:repeat(12,minmax(0,1fr));gap:1.1rem;padding:0 1.25rem}.feature[_ngcontent-%COMP%]{grid-column:span 12}.feature-img-container[_ngcontent-%COMP%]{height:200px}}@media (max-width: 480px){.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.85rem}.section-header[_ngcontent-%COMP%]   .section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.feature-content[_ngcontent-%COMP%]{padding:1.5rem}.feature[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}}']}),n})();var Gw=Z(9841);let Kd=(()=>{const e=class{constructor(r){this.supabase=r,this.tableName="product_categories"}getCategories(){return(0,me.D)(this.supabase.client.from(this.tableName).select("\n          id,\n          name,\n          description,\n          image_url,\n          slug,\n          is_active,\n          display_order,\n          created_at,\n          updated_at,\n          products:products(count)\n        ").order("display_order",{ascending:!0}).order("name",{ascending:!0})).pipe((0,re.U)(({data:r,error:i})=>{if(i)throw i;return(r||[]).map(o=>this.mapCategory(o))}),(0,ci.K)(r=>(0,ri._)(()=>this.normalizeSupabaseError(r,"Error al cargar las categor\xedas"))))}addCategory(r){const i=this.toPersistencePayload(r);return(0,me.D)(this.supabase.client.from(this.tableName).insert([i]).select("\n          id,\n          name,\n          description,\n          image_url,\n          slug,\n          is_active,\n          display_order,\n          created_at,\n          updated_at,\n          products:products(count)\n        ").single()).pipe((0,re.U)(({data:o,error:a})=>{if(a)throw a;if(!o)throw new Error("No category returned");return this.mapCategory(o)}),(0,ci.K)(o=>(0,ri._)(()=>this.normalizeSupabaseError(o,"Error al a\xf1adir la categor\xeda"))))}updateCategory(r,i){const o=this.toPersistencePayload(i);return(0,me.D)(this.supabase.client.from(this.tableName).update(o).eq("id",r).select("\n          id,\n          name,\n          description,\n          image_url,\n          slug,\n          is_active,\n          display_order,\n          created_at,\n          updated_at,\n          products:products(count)\n        ").single()).pipe((0,re.U)(({data:a,error:d})=>{if(d)throw d;if(!a)throw new Error("Category not found");return this.mapCategory(a)}),(0,ci.K)(a=>(0,ri._)(()=>this.normalizeSupabaseError(a,"Error al actualizar la categor\xeda"))))}deleteCategory(r){return(0,me.D)(this.supabase.client.from(this.tableName).delete().eq("id",r)).pipe((0,re.U)(({error:i})=>{if(i)throw i;return!0}),(0,ci.K)(i=>(0,ri._)(()=>this.normalizeSupabaseError(i,"Error al eliminar la categor\xeda"))))}getCategoryById(r){return(0,me.D)(this.supabase.client.from(this.tableName).select("\n          id,\n          name,\n          description,\n          image_url,\n          slug,\n          is_active,\n          display_order,\n          created_at,\n          updated_at,\n          products:products(count)\n        ").eq("id",r).single()).pipe((0,re.U)(({data:i,error:o})=>{if(o)throw o;return i?this.mapCategory(i):void 0}),(0,ci.K)(i=>(0,ri._)(()=>this.normalizeSupabaseError(i,"Error al consultar la categor\xeda"))))}mapCategory(r){return{id:r.id,name:r.name,description:r.description||"",image:r.image_url||"",slug:r.slug||"",productCount:this.extractProductCount(r.products),isActive:r.is_active??!0,order:r.display_order??void 0,createdAt:r.created_at?new Date(r.created_at):void 0,updatedAt:r.updated_at?new Date(r.updated_at):void 0}}extractProductCount(r){if(!r)return 0;if(Array.isArray(r)){const i=r[0];return i&&"number"==typeof i.count?i.count:r.length}return"number"==typeof r.count?r.count:0}toPersistencePayload(r){return{name:r.name?.trim(),description:r.description?.trim()||null,image_url:r.image||null,slug:r.slug?.trim()||null,is_active:r.isActive??!0,display_order:"number"==typeof r.order?r.order:null}}normalizeSupabaseError(r,i){const o=this.extractSupabaseMessage(r),a=this.toFriendlyMessage(o)||i;return console.error("Supabase category error:",r),new Error(a)}extractSupabaseMessage(r){if(!r)return"";if("string"==typeof r)return r;if(r.message)return r.message;if(r.details)return r.details;try{return JSON.stringify(r)}catch{return""}}toFriendlyMessage(r){if(!r)return null;const i=r.toLowerCase();return i.includes("row level security")?"Tu sesi\xf3n no tiene permisos para modificar categor\xedas. Inici\xe1 sesi\xf3n como admin.":i.includes("image_url")&&i.includes("column")?"La base de datos a\xfan no tiene la columna image_url. Ejecut\xe1 las migraciones pendientes (`supabase db push`).":i.includes("slug")&&i.includes("duplicate")?"Ya existe una categor\xeda con ese nombre o slug. Eleg\xed uno diferente.":i.includes("name")&&i.includes("duplicate")?"Ya existe una categor\xeda con ese nombre.":i.includes("foreign key constraint")||i.includes("constraint")&&i.includes("products")?"La categor\xeda tiene productos asociados y no puede eliminarse.":r}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(kc.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function R1(n,e){1&n&&(s.TgZ(0,"div",13),s._UZ(1,"i",14),s.TgZ(2,"span"),s._uU(3,"Estamos preparando las colecciones\u2026"),s.qZA()())}function N1(n,e){if(1&n&&(s.TgZ(0,"div",15),s._UZ(1,"i",16),s.TgZ(2,"span"),s._uU(3),s.qZA()()),2&n){const t=s.oxw();s.xp6(3),s.Oqu(t.errorMessage)}}function tg(n,e){if(1&n&&(s.TgZ(0,"span",29),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&n){const t=s.oxw().ngIf;s.xp6(1),s.Oqu(s.Dn7(2,1,t.price,"ARS","symbol-narrow"))}}function iS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",22)(1,"div",23)(2,"span",24),s._uU(3),s.qZA(),s.TgZ(4,"span",25),s._uU(5),s.qZA(),s.YNc(6,tg,3,5,"span",26),s.qZA(),s.TgZ(7,"div",27)(8,"img",28),s.NdJ("error",function(i){s.CHM(t);const o=s.oxw(3);return s.KtG(o.handleImageError(i,""))}),s.qZA()()()}if(2&n){const t=e.ngIf,r=s.oxw().$implicit;s.xp6(3),s.Oqu(r.category.name),s.xp6(2),s.Oqu(t.name),s.xp6(1),s.Q6J("ngIf",t.price),s.xp6(2),s.Q6J("src",t.image,s.LSH)("alt",t.name)}}const Ww=function(){return["/productos"]},sS=function(n){return{categoria:n}};function oS(n,e){if(1&n&&(s.TgZ(0,"article",19)(1,"a",20),s.YNc(2,iS,9,5,"div",21),s.qZA()()),2&n){const t=e.$implicit;s.uIk("data-aos-delay",80*e.index),s.xp6(1),s.Q6J("routerLink",s.DdM(5,Ww))("queryParams",s.VKq(6,sS,t.category.slug)),s.uIk("aria-label","Ver productos de "+t.category.name),s.xp6(1),s.Q6J("ngIf",t.featuredProduct)}}function aS(n,e){if(1&n&&(s.TgZ(0,"div",17),s.YNc(1,oS,3,8,"article",18),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.showcases)}}let Kw=(()=>{const e=class{constructor(r,i){this.categoryService=r,this.productService=i,this.showcases=[],this.isLoading=!0,this.errorMessage=null,this.fallbackImage="assets/images/placeholders/category-placeholder.jpg",this.productFallbackImage="https://images.unsplash.com/photo-1501426026826-31c667bdf23d?auto=format&fit=crop&w=900&q=60"}ngOnInit(){fh.init({duration:800,once:!0,mirror:!1}),this.loadCategoryShowcases()}loadCategoryShowcases(){this.isLoading=!0,(0,Gw.a)([this.categoryService.getCategories(),this.productService.getProducts()]).subscribe({next:([r,i])=>{this.showcases=r.map(o=>this.buildShowcase(o,i)),this.isLoading=!1,this.errorMessage=null,setTimeout(()=>fh.refreshHard(),0)},error:r=>{console.error("Error building category showcases:",r),this.errorMessage="No pudimos cargar las colecciones. Intenta nuevamente en unos minutos.",this.isLoading=!1}})}buildShowcase(r,i){const o=this.groupProductsByCategory(i),d=[r.slug,r.name].map(M=>this.normalizeKey(M)).map(M=>o[M]).find(M=>M&&M.length)||[],h=d[0],p=d.slice(1,4),m=this.resolveProductImage(h)||r.image,y=r.description||h?.description||this.buildFallbackDescription(r.name);return{category:r,featuredProduct:h,additionalProducts:p,coverImage:m,totalProducts:d.length||r.productCount,description:y}}groupProductsByCategory(r){return r.reduce((i,o)=>{const a=this.normalizeKey(o.category_name||o.category);return i[a]||(i[a]=[]),i[a].push(o),i},{})}normalizeKey(r){return r?.toLowerCase().replace(/\s+/g,"-")||"general"}buildFallbackDescription(r){return`Descubre lo mejor de ${r} en una selecci\xf3n curada para los amantes del mate.`}resolveProductImage(r){if(r)return r.image_urls?.length?r.image_urls[0]:r.image?r.image:this.productFallbackImage}handleImageError(r,i){const o=r.target;if(o){if(i&&o.src!==i)return void(o.src=i);o.src=this.fallbackImage}}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(Kd),s.Y36(ol.M))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-categories-section"]],decls:24,vars:3,consts:[[1,"categories-section"],[1,"container"],[1,"section-meta"],[1,"eyebrow"],["data-aos","fade-left",1,"categories-cta"],[1,"cta-card"],[1,"cta-copy"],[1,"cta-kicker"],["routerLink","/productos",1,"cta-pill"],[1,"fas","fa-arrow-right"],["class","state-card",4,"ngIf"],["class","state-card error",4,"ngIf"],["class","categories-mosaic",4,"ngIf"],[1,"state-card"],[1,"fas","fa-spinner","fa-spin"],[1,"state-card","error"],[1,"fas","fa-exclamation-circle"],[1,"categories-mosaic"],["class","mosaic-card featured-only","data-aos","fade-up",4,"ngFor","ngForOf"],["data-aos","fade-up",1,"mosaic-card","featured-only"],[1,"featured-link",3,"routerLink","queryParams"],["class","mosaic-featured",4,"ngIf"],[1,"mosaic-featured"],[1,"featured-left"],[1,"featured-tag"],[1,"featured-name"],["class","featured-price",4,"ngIf"],[1,"featured-thumb"],["loading","lazy",3,"src","alt","error"],[1,"featured-price"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"span",3),s._uU(4,"Colecciones por categor\xeda"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Explor\xe1 por ritual"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Eleg\xed una categor\xeda y entr\xe1 directo a su colecci\xf3n con producto insignia y una vista r\xe1pida del resto."),s.qZA()(),s.TgZ(9,"div",4)(10,"div",5)(11,"div",6)(12,"span",7),s._uU(13,"Acceso r\xe1pido"),s.qZA(),s.TgZ(14,"h3"),s._uU(15,"Ver todo el cat\xe1logo"),s.qZA(),s.TgZ(16,"p"),s._uU(17,"Filtr\xe1 por categor\xeda, precio y stock. Compra r\xe1pida desde el listado."),s.qZA()(),s.TgZ(18,"a",8),s._uU(19," Ir a productos "),s._UZ(20,"i",9),s.qZA()()(),s.YNc(21,R1,4,0,"div",10),s.YNc(22,N1,4,1,"div",11),s.YNc(23,aS,2,1,"div",12),s.qZA()()),2&i&&(s.xp6(21),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&o.errorMessage),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.errorMessage))},dependencies:[te.sg,te.O5,k.rH,te.H9],styles:['.categories-section[_ngcontent-%COMP%]{padding:5.25rem 0;background:radial-gradient(900px circle at 12% 12%,rgba(60,156,54,.04),transparent 55%),radial-gradient(700px circle at 88% 24%,rgba(0,255,163,.03),transparent 60%),linear-gradient(180deg,rgba(255,255,255,.35) 0%,rgba(246,251,247,.4) 100%);position:relative;z-index:1}.categories-header[_ngcontent-%COMP%]{display:none}.section-meta[_ngcontent-%COMP%]{text-align:center;max-width:720px;margin:0 auto 2.5rem;display:flex;flex-direction:column;gap:.85rem}.eyebrow[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem 1.25rem;border-radius:999px;background:linear-gradient(135deg,rgba(60,156,54,.12),rgba(0,255,163,.1));border:1px solid rgba(60,156,54,.2);color:#1f452d;font-weight:800;letter-spacing:.12em;text-transform:uppercase;font-size:.8rem;width:-moz-fit-content;width:fit-content;margin:0 auto;box-shadow:0 4px 12px #3c9c3626}.section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:2.5rem;font-weight:900;letter-spacing:-.03em;line-height:1.1;background:linear-gradient(135deg,#102b1c 0%,#1f452d 50%,#3c9c36 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 auto;font-size:1.05rem;color:#5b6b62;line-height:1.6;font-weight:500;text-align:center;max-width:620px}.categories-cta[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:2.5rem}.cta-card[_ngcontent-%COMP%]{width:100%;border-radius:22px;padding:1.35rem 1.35rem 1.25rem;background:linear-gradient(135deg,rgba(22,40,31,.92),rgba(31,69,45,.88));border:1px solid rgba(255,255,255,.14);box-shadow:0 18px 44px #16281f38;color:#ffffffeb;position:relative;overflow:hidden}.cta-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-45%;background:radial-gradient(circle at 30% 30%,rgba(0,255,163,.22),transparent 45%),radial-gradient(circle at 70% 20%,rgba(60,156,54,.18),transparent 45%);transform:rotate(-10deg);pointer-events:none}.cta-copy[_ngcontent-%COMP%]{position:relative;z-index:1}.cta-kicker[_ngcontent-%COMP%]{display:inline-flex;gap:.5rem;align-items:center;font-weight:700;letter-spacing:.14em;text-transform:uppercase;font-size:.75rem;color:#ffffffc7}.cta-copy[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.6rem 0 .35rem;font-size:1.35rem;font-weight:800;letter-spacing:-.02em}.cta-copy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ffffffd1;line-height:1.5}.cta-button[_ngcontent-%COMP%]{position:relative;z-index:1;margin-top:1.05rem;width:100%;display:inline-flex;align-items:center;justify-content:center;gap:.55rem;border-radius:999px;padding:.9rem 1.1rem;font-weight:800;text-decoration:none;color:#10141ef5;background:linear-gradient(135deg,rgba(0,255,163,.95),rgba(61,211,56,.9));box-shadow:0 16px 34px #00ffa333;transition:transform .22s ease,box-shadow .22s ease}.cta-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 20px 40px #00ffa342}.categories-mosaic[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:1.25rem}.mosaic-card[_ngcontent-%COMP%]{grid-column:span 4;min-height:320px}.mosaic-card[_ngcontent-%COMP%]:nth-child(1){grid-column:span 7;min-height:360px}.mosaic-card[_ngcontent-%COMP%]:nth-child(2){grid-column:span 5;min-height:360px}.mosaic-surface[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;border-radius:26px;overflow:hidden;position:relative;text-decoration:none;border:1px solid rgba(22,40,31,.1);box-shadow:0 20px 56px #16281f29;background:#0f1712;transition:transform .28s ease,box-shadow .28s ease}.mosaic-surface[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 30px 72px #16281f33}.mosaic-card.featured-only[_ngcontent-%COMP%]{min-height:auto}.featured-link[_ngcontent-%COMP%]{display:block;text-decoration:none;border-radius:22px;overflow:hidden;background:rgba(255,255,255,.92);border:1px solid rgba(22,40,31,.1);box-shadow:0 18px 44px #16281f1f;transition:transform .22s ease,box-shadow .22s ease}.featured-link[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 24px 56px #16281f29}.mosaic-card.featured-only[_ngcontent-%COMP%]   .mosaic-featured[_ngcontent-%COMP%]{margin-top:0;border-radius:0;border:0;background:radial-gradient(900px circle at 10% 10%,rgba(0,255,163,.12),transparent 55%),linear-gradient(135deg,rgba(22,40,31,.92),rgba(31,69,45,.9));-webkit-backdrop-filter:none;backdrop-filter:none;padding:1.05rem 1.1rem;grid-template-columns:minmax(0,1fr) 86px}.mosaic-card.featured-only[_ngcontent-%COMP%]   .featured-tag[_ngcontent-%COMP%]{color:#ffffffe0}.mosaic-card.featured-only[_ngcontent-%COMP%]   .featured-name[_ngcontent-%COMP%]{color:#fffffff5}.mosaic-card.featured-only[_ngcontent-%COMP%]   .featured-price[_ngcontent-%COMP%]{color:#ffffffeb}.mosaic-bg[_ngcontent-%COMP%]{position:absolute;inset:0}.mosaic-bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transform:scale(1.02);filter:saturate(.95) contrast(1.05);transition:transform .52s ease,filter .52s ease}.mosaic-surface[_ngcontent-%COMP%]:hover   .mosaic-bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.08);filter:saturate(1.05) contrast(1.1)}.mosaic-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(900px circle at 18% 18%,rgba(0,255,163,.14),transparent 60%),linear-gradient(180deg,rgba(0,0,0,.1),rgba(0,0,0,.7)),linear-gradient(90deg,rgba(0,0,0,.8),rgba(0,0,0,.2));opacity:.95}.mosaic-header[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding:1.05rem 1.15rem 0}.mosaic-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.45rem .95rem;border-radius:999px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.14);color:#ffffffeb;font-weight:800;letter-spacing:.08em;text-transform:uppercase;font-size:.75rem}.mosaic-count[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.45rem .9rem;border-radius:999px;background:rgba(255,255,255,.92);color:#10141eeb;font-weight:800;font-size:.85rem}.mosaic-body[_ngcontent-%COMP%]{position:relative;z-index:1;padding:1.1rem 1.15rem 1.05rem;margin-top:auto}.mosaic-title[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;font-weight:900;letter-spacing:-.03em;color:#fffffff5}.mosaic-description[_ngcontent-%COMP%]{margin:.55rem 0 0;color:#ffffffd6;line-height:1.55;max-width:62ch}.mosaic-featured[_ngcontent-%COMP%]{margin-top:1rem;display:grid;grid-template-columns:minmax(0,1fr) 86px;gap:.85rem;align-items:center;padding:.85rem .95rem;border-radius:18px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.14);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.featured-tag[_ngcontent-%COMP%]{display:inline-flex;font-size:.74rem;font-weight:800;letter-spacing:.12em;text-transform:uppercase;color:#00ffa3eb}.featured-name[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-weight:800;color:#fffffff5;line-height:1.25}.featured-price[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-weight:900;color:#ffffffeb}.featured-thumb[_ngcontent-%COMP%]{width:86px;height:86px;border-radius:20px;overflow:hidden;background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.14)}.featured-thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.mosaic-footer[_ngcontent-%COMP%]{position:relative;z-index:1;padding:0 1.15rem 1.15rem}.mosaic-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.45rem;font-weight:900;letter-spacing:.12em;text-transform:uppercase;font-size:.78rem;color:#ffffffeb}.mosaic-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .22s ease}.mosaic-surface[_ngcontent-%COMP%]:hover   .mosaic-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translate(3px)}@media (max-width: 1024px){.categories-cta[_ngcontent-%COMP%]{justify-content:center}.section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.98rem}.mosaic-card[_ngcontent-%COMP%], .mosaic-card[_ngcontent-%COMP%]:nth-child(1), .mosaic-card[_ngcontent-%COMP%]:nth-child(2){grid-column:span 12;min-height:360px}}@media (max-width: 600px){.categories-section[_ngcontent-%COMP%]{padding:4.25rem 0}.section-meta[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.85rem}.section-meta[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.section-meta[_ngcontent-%COMP%]{margin-bottom:1.75rem}.categories-cta[_ngcontent-%COMP%]{margin-bottom:2rem}.mosaic-title[_ngcontent-%COMP%]{font-size:1.35rem}.mosaic-featured[_ngcontent-%COMP%]{grid-template-columns:1fr}.featured-thumb[_ngcontent-%COMP%]{width:100%;height:160px}}']}),n})(),Yw=(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-home"]],decls:48,vars:0,consts:[[1,"home-container"],[1,"hero"],[1,"hero-bg-slider"],[1,"hero-content"],[1,"hero-grid"],[1,"hero-copy"],[1,"hero-badge"],[1,"hero-buttons"],["routerLink","/productos",1,"hero-button","primary"],[1,"fas","fa-shopping-bag"],["routerLink","/contacto",1,"hero-button","secondary"],[1,"fas","fa-leaf"],["aria-label","Beneficios",1,"hero-highlights"],[1,"highlight"],[1,"fas","fa-seedling"],[1,"fas","fa-hands"],[1,"fas","fa-truck"],["aria-hidden","true",1,"hero-media"],[1,"hero-frame"],[1,"hero-frame-media"],["src","https://acdn-us.mitiendanube.com/stores/002/905/434/products/modelo-tiendanube-4-6c087d889137f8ca9017303904626139-1024-1024.webp","alt","Mate artesanal","loading","lazy",1,"hero-frame-image"],[1,"hero-frame-caption"],[1,"hero-frame-kicker"],[1,"hero-frame-title"],[1,"hero-frame-sub"],[1,"seasonal-products"],[1,"container"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"section",1),s._UZ(2,"div",2),s.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),s._uU(7,"Artesanal \u2022 Natural \u2022 Premium"),s.qZA(),s.TgZ(8,"h1"),s._uU(9,"Mate Tierra"),s.qZA(),s.TgZ(10,"p"),s._uU(11,"Productos para mate con esencia natural: mates artesanales, yerbas seleccionadas y termos listos para acompa\xf1arte todos los d\xedas."),s.qZA(),s.TgZ(12,"div",7)(13,"a",8),s._UZ(14,"i",9),s._uU(15," Explorar cat\xe1logo "),s.qZA(),s.TgZ(16,"a",10),s._UZ(17,"i",11),s._uU(18," Asesor\xeda y pedidos "),s.qZA()(),s.TgZ(19,"div",12)(20,"div",13),s._UZ(21,"i",14),s.TgZ(22,"span"),s._uU(23,"Selecci\xf3n natural"),s.qZA()(),s.TgZ(24,"div",13),s._UZ(25,"i",15),s.TgZ(26,"span"),s._uU(27,"Mates artesanales"),s.qZA()(),s.TgZ(28,"div",13),s._UZ(29,"i",16),s.TgZ(30,"span"),s._uU(31,"Env\xedos y retiro"),s.qZA()()()(),s.TgZ(32,"div",17)(33,"figure",18)(34,"div",19),s._UZ(35,"img",20),s.qZA(),s.TgZ(36,"figcaption",21)(37,"span",22),s._uU(38,"Artesanal & natural"),s.qZA(),s.TgZ(39,"span",23),s._uU(40,"Eleg\xed tu mate ideal"),s.qZA(),s.TgZ(41,"span",24),s._uU(42,"Detalles, stock y compra r\xe1pida."),s.qZA()()()()()()(),s.TgZ(43,"section",25)(44,"div",26),s._UZ(45,"app-product-carousel"),s.qZA()(),s._UZ(46,"app-categories-section")(47,"app-features-section"),s.qZA())},dependencies:[k.rH,zw,im,Kw],styles:['.home-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;padding:0;width:100vw;position:relative;margin-left:calc(-50vw + 50%);margin-right:calc(-50vw + 50%);overflow-x:hidden;background:linear-gradient(to bottom,#ffffff,#f8f9fa)}.home-container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background-image:url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png);background-position:8% 12%,92% 18%,12% 42%,88% 48%,15% 70%,85% 78%,25% 88%,75% 95%;background-size:240px auto,250px auto,235px auto,245px auto,240px auto,250px auto,235px auto,245px auto;background-repeat:no-repeat;opacity:.45;z-index:0;pointer-events:none;filter:grayscale(.15) brightness(1.1)}.home-container[_ngcontent-%COMP%]:after{content:"";position:fixed;inset:0;background:radial-gradient(circle at 12% 20%,rgba(255,255,255,.25),transparent 35%),radial-gradient(circle at 88% 25%,rgba(255,255,255,.25),transparent 35%),radial-gradient(circle at 10% 60%,rgba(255,255,255,.25),transparent 35%),radial-gradient(circle at 90% 65%,rgba(255,255,255,.25),transparent 35%);z-index:0;pointer-events:none}.hero[_ngcontent-%COMP%]{width:100%;position:relative;background:linear-gradient(135deg,#1f2a23 0%,#213528 55%,#2f5a32 100%);color:#fff;padding:6.5rem 1.5rem 5.5rem;text-align:left;margin-bottom:3rem;overflow:hidden;box-shadow:0 18px 60px #0e141059;min-height:480px;height:60vh;max-height:700px;display:flex;align-items:center;justify-content:center;z-index:2}.hero-bg-slider[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;z-index:0;pointer-events:none;background:radial-gradient(900px circle at 18% 20%,rgba(0,255,163,.14),transparent 60%),radial-gradient(800px circle at 82% 18%,rgba(61,211,56,.1),transparent 62%),url(https://images.unsplash.com/photo-1508672019048-805c876b67e2?auto=format&fit=crop&w=1800&q=80) center/cover no-repeat;animation:none;opacity:.3;filter:saturate(.75) contrast(1.05) blur(.6px);transform:scale(1.04);transition:opacity .4s ease}.hero-bg-slider[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(8,10,12,.1) 0%,rgba(8,10,12,.55) 100%),radial-gradient(900px circle at 30% 15%,rgba(255,255,255,.1),transparent 55%);mix-blend-mode:soft-light;opacity:.9;pointer-events:none}.hero-bg-slider[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-20%;background:repeating-linear-gradient(0deg,rgba(255,255,255,.018) 0px,rgba(255,255,255,.018) 1px,rgba(0,0,0,0) 2px,rgba(0,0,0,0) 4px);opacity:.25;filter:blur(.2px);transform:rotate(-2deg);mix-blend-mode:overlay;pointer-events:none}.hero[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(900px circle at 16% 18%,rgba(0,255,163,.12),transparent 58%),radial-gradient(700px circle at 92% 22%,rgba(61,211,56,.1),transparent 60%),linear-gradient(180deg,rgba(12,14,18,.55),rgba(12,14,18,.84));opacity:1}.hero[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,rgba(12,14,18,.92) 0%,rgba(12,14,18,.58) 55%,rgba(12,14,18,.3) 100%);pointer-events:none}@media (prefers-reduced-motion: reduce){.hero-bg-slider[_ngcontent-%COMP%]{animation:none;transform:none}}.hero-content[_ngcontent-%COMP%]{position:relative;z-index:2;max-width:1200px;margin:0 auto;padding:0;width:100%}.hero-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1.25fr) minmax(0,.7fr);align-items:center;gap:2.25rem}.hero-copy[_ngcontent-%COMP%]{max-width:680px}.hero-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.45rem .95rem;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);color:#ffffffeb;font-weight:700;letter-spacing:.06em;text-transform:uppercase;font-size:.75rem}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2.35rem,5vw,4.1rem);font-weight:800;margin:1rem 0 1.15rem;line-height:1.2;text-shadow:0 16px 40px rgba(0,0,0,.35);font-family:Poppins,Segoe UI,system-ui,sans-serif;letter-spacing:-.02em}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1rem,2.5vw,1.25rem);opacity:.92;line-height:1.6;margin-bottom:2rem;font-weight:400;max-width:58ch;margin-left:0;margin-right:0;color:#ffffffe6}.hero-buttons[_ngcontent-%COMP%]{display:flex;gap:.85rem;justify-content:flex-start;flex-wrap:wrap}.hero-button[_ngcontent-%COMP%]{padding:.95rem 1.35rem;border:none;border-radius:999px;font-size:1.02rem;font-weight:700;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:.5rem;text-decoration:none;min-width:220px;justify-content:center}.hero-button.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(0,255,163,.95),rgba(61,211,56,.9));color:#10141ef5;box-shadow:0 16px 34px #00ffa333}.hero-button.primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 18px 40px #00ffa342}.hero-button.secondary[_ngcontent-%COMP%]{background-color:#ffffff14;color:#fffffff0;border:1px solid rgba(255,255,255,.22)}.hero-button.secondary[_ngcontent-%COMP%]:hover{background-color:#ffffff1f}.hero-highlights[_ngcontent-%COMP%]{margin-top:1.75rem;display:flex;flex-wrap:wrap;gap:.85rem}.highlight[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.55rem;padding:.6rem .85rem;border-radius:14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);color:#ffffffe6;font-weight:600}.highlight[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00ffa3f2}.hero-media[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.hero-frame[_ngcontent-%COMP%]{width:min(400px,100%);margin:0;border-radius:26px;overflow:hidden;position:relative;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.16);box-shadow:0 26px 70px #0000006b,0 1px #ffffff1a inset;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);transform:translateZ(0);transition:transform .3s ease,box-shadow .3s ease}.hero-frame[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-18px;border-radius:inherit;background:radial-gradient(520px circle at 18% 18%,rgba(0,255,163,.22),transparent 55%),radial-gradient(420px circle at 82% 22%,rgba(61,211,56,.18),transparent 60%),radial-gradient(520px circle at 60% 92%,rgba(255,255,255,.1),transparent 60%);filter:blur(16px);opacity:.85;pointer-events:none;z-index:0}.hero-frame[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none;z-index:3;box-shadow:0 0 0 1px #ffffff1a inset,0 -22px 40px #0000002e inset;opacity:.9}.hero-frame-media[_ngcontent-%COMP%]{position:relative;padding-top:112%;background:linear-gradient(180deg,rgba(255,255,255,.11),rgba(255,255,255,.04));z-index:1}.hero-frame-media[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.05) 0%,rgba(0,0,0,.75) 100%),radial-gradient(600px circle at 25% 15%,rgba(0,255,163,.2),transparent 60%);opacity:.95}.hero-frame-media[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(900px circle at 30% 20%,rgba(255,255,255,.22),transparent 52%),radial-gradient(700px circle at 75% 15%,rgba(0,255,163,.14),transparent 58%);mix-blend-mode:overlay;opacity:.65;pointer-events:none}.hero-frame-image[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center;filter:saturate(.98) contrast(1.08);transform:scale(1.02);transition:transform .5s ease}.hero-frame-caption[_ngcontent-%COMP%]{position:absolute;inset:auto 0 0;padding:1.15rem 1.15rem 1.25rem;display:grid;gap:.25rem;z-index:1}.hero-frame-caption[_ngcontent-%COMP%]{z-index:2}.hero-frame-kicker[_ngcontent-%COMP%]{font-size:.75rem;font-weight:800;letter-spacing:.08em;text-transform:uppercase;color:#ffffffc7}.hero-frame-title[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:800;letter-spacing:-.02em;color:#fffffff5}.hero-frame-sub[_ngcontent-%COMP%]{color:#ffffffd1}@media (hover: hover) and (pointer: fine){.hero-frame[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 36px 90px #0000007a,0 1px #ffffff1f inset}.hero-frame[_ngcontent-%COMP%]:hover:before{opacity:1}.hero-frame[_ngcontent-%COMP%]:hover   .hero-frame-image[_ngcontent-%COMP%]{transform:scale(1.07)}}@media (prefers-reduced-motion: reduce){.hero-frame[_ngcontent-%COMP%], .hero-frame-image[_ngcontent-%COMP%]{transition:none}}.seasonal-products[_ngcontent-%COMP%]{margin:0 auto 3.25rem}.seasonal-products[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:0;color:#2c3e50;margin-bottom:1.5rem;font-size:clamp(1.5rem,3vw,2rem);font-weight:700}@media (max-width: 768px){.seasonal-products[_ngcontent-%COMP%]{margin-bottom:2.75rem}}@media (max-width: 900px){.hero[_ngcontent-%COMP%]{min-height:340px;height:40vh;padding:5rem 1rem 4rem}.hero-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.hero-media[_ngcontent-%COMP%]{justify-content:flex-start}.hero-frame[_ngcontent-%COMP%]{width:min(520px,100%)}}@media (max-width: 768px){.hero[_ngcontent-%COMP%]{padding:4rem 1rem}.hero-content[_ngcontent-%COMP%]{padding:0}.hero-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem;padding:0}.hero-button[_ngcontent-%COMP%]{width:100%;max-width:360px;min-width:unset;padding:.875rem 1.5rem;font-size:1rem}.hero-highlights[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.hero-media[_ngcontent-%COMP%]{justify-content:flex-start}.hero-frame[_ngcontent-%COMP%]{width:100%}.hero-frame-media[_ngcontent-%COMP%]{padding-top:75%}.features[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:1rem;gap:1.5rem}.feature[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 600px){.hero[_ngcontent-%COMP%]{min-height:220px;height:28vh;padding:2.5rem .5rem}}@media (max-width: 480px){.hero[_ngcontent-%COMP%]{padding:3rem 1rem}.hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:1rem}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem}.hero-buttons[_ngcontent-%COMP%]{padding:0 1rem}.hero-button[_ngcontent-%COMP%]{max-width:240px;padding:.75rem 1.25rem}.feature[_ngcontent-%COMP%]{padding:1.25rem}.feature[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}}']}),n})();var ng=Z(1566),Tu=Z(4482),cc=Z(5403),lS=Z(4671);function uS(n,e){return n===e}var Yd=Z(7579);function dS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"li",9),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.selectSearchResult(o))}),s._uU(1),s.qZA()}if(2&n){const t=e.$implicit;s.xp6(1),s.hij(" ",t.name," ")}}function Jw(n,e){if(1&n&&(s.TgZ(0,"ul",7),s.YNc(1,dS,2,1,"li",8),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.searchResults)}}function sm(n,e){if(1&n&&(s.TgZ(0,"option",10),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.name),s.xp6(1),s.hij(" ",t.name," ")}}let L1=(()=>{const e=class{constructor(r,i){this.productService=r,this.categoryService=i,this.filterChange=new s.vpe,this.searchValue="",this.categoryValue="",this.categories=[],this.searchResults=[],this.searchTerms=new Yd.x}ngOnInit(){this.loadCategories(),this.setupSearch()}loadCategories(){this.categoryService.getCategories().subscribe({next:r=>{this.categories=r},error:r=>{console.error("Error loading categories:",r)}})}setupSearch(){this.searchTerms.pipe(function cS(n,e=ng.z){return(0,Tu.e)((t,r)=>{let i=null,o=null,a=null;const d=()=>{if(i){i.unsubscribe(),i=null;const p=o;o=null,r.next(p)}};function h(){const p=a+n,m=e.now();if(m<p)return i=this.schedule(void 0,p-m),void r.add(i);d()}t.subscribe((0,cc.x)(r,p=>{o=p,a=e.now(),i||(i=e.schedule(h,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{o=i=null}))})}(300),function _3(n,e=lS.y){return n=n??uS,(0,Tu.e)((t,r)=>{let i,o=!0;t.subscribe((0,cc.x)(r,a=>{const d=e(a);(o||!n(i,d))&&(o=!1,i=d,r.next(a))}))})}(),(0,Gd.w)(r=>this.productService.searchProducts(r))).subscribe({next:r=>{this.searchResults=r},error:r=>{console.error("Error searching products:",r),this.searchResults=[]}})}onSearchInput(r){r&&r.trim()?this.searchTerms.next(r.trim()):this.searchResults=[]}onFilterChange(){this.filterChange.emit({search:this.searchValue,category:this.categoryValue})}selectSearchResult(r){this.searchValue=r.name,this.searchResults=[],this.onFilterChange()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(ol.M),s.Y36(Kd))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-product-filter"]],outputs:{filterChange:"filterChange"},decls:12,vars:4,consts:[[1,"filter"],[1,"search-container"],["type","text","placeholder","Ingrese su b\xfasqueda...",3,"ngModel","ngModelChange","keyup"],["class","search-results",4,"ngIf"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"search-results"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"value"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"h3"),s._uU(2,"Buscar productos"),s.qZA(),s.TgZ(3,"div",1)(4,"input",2),s.NdJ("ngModelChange",function(d){return o.searchValue=d})("ngModelChange",function(d){return o.onSearchInput(d)})("keyup",function(){return o.onFilterChange()}),s.qZA(),s.YNc(5,Jw,2,1,"ul",3),s.qZA(),s.TgZ(6,"h3"),s._uU(7,"Categor\xedas"),s.qZA(),s.TgZ(8,"select",4),s.NdJ("ngModelChange",function(d){return o.categoryValue=d})("ngModelChange",function(){return o.onFilterChange()}),s.TgZ(9,"option",5),s._uU(10,"Todas las categor\xedas"),s.qZA(),s.YNc(11,sm,2,2,"option",6),s.qZA()()),2&i&&(s.xp6(4),s.Q6J("ngModel",o.searchValue),s.xp6(1),s.Q6J("ngIf",o.searchValue.trim().length>0&&o.searchResults.length>0),s.xp6(3),s.Q6J("ngModel",o.categoryValue),s.xp6(3),s.Q6J("ngForOf",o.categories))},dependencies:[te.sg,te.O5,Bi,na,nt,cs,or,As],styles:[".filter[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}h3[_ngcontent-%COMP%]{margin:0;color:#1f3324;font-size:1rem;text-transform:uppercase;letter-spacing:.08em}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:85%;padding:.85rem 1rem;border:1px solid rgba(15,23,42,.12);border-radius:14px;font-size:.95rem;background:rgba(250,252,249,.9);transition:border-color .2s ease,box-shadow .2s ease}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2f8f44;box-shadow:0 0 0 3px #2f8f4426;background:#fff}.search-container[_ngcontent-%COMP%]{position:relative}.search-results[_ngcontent-%COMP%]{position:absolute;top:calc(100% + 4px);left:0;right:0;background-color:#fff;border:1px solid rgba(15,23,42,.12);border-radius:16px;list-style:none;padding:.25rem;margin:0;max-height:240px;overflow-y:auto;box-shadow:0 20px 40px #0f172a1f;z-index:10}.search-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.65rem .85rem;border-radius:12px;cursor:pointer;transition:background .2s ease}.search-results[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:rgba(47,143,68,.08)}"]}),n})();function Qw(n,e){if(1&n&&(s.TgZ(0,"span",27),s._UZ(1,"i",28),s._uU(2),s.qZA()),2&n){const t=s.oxw();s.xp6(2),s.hij(" ",t.availableProducts," disponibles ")}}function Xw(n,e){if(1&n&&(s.TgZ(0,"span",29),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.AsE("P\xe1gina ",t.currentPage," / ",t.totalPages,"")}}function eb(n,e){1&n&&(s.TgZ(0,"div",30),s._UZ(1,"i",31),s.TgZ(2,"div")(3,"p"),s._uU(4,"Cargando productos..."),s.qZA(),s.TgZ(5,"small"),s._uU(6,"Obteniendo el inventario m\xe1s reciente."),s.qZA()()())}function tb(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",32),s._UZ(1,"i",33),s.TgZ(2,"div")(3,"p"),s._uU(4),s.qZA(),s.TgZ(5,"button",34),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.retryLoading())}),s._UZ(6,"i",12),s._uU(7," Intentar de nuevo "),s.qZA()()()}if(2&n){const t=s.oxw();s.xp6(4),s.Oqu(t.errorMessage)}}function fS(n,e){1&n&&(s.TgZ(0,"div",35),s._UZ(1,"i",36),s.TgZ(2,"div")(3,"p"),s._uU(4,"No se encontraron productos con esos filtros."),s.qZA(),s.TgZ(5,"small"),s._uU(6,"Ajusta la b\xfasqueda o selecciona otra categor\xeda."),s.qZA()()())}const hS=function(n,e,t){return{"fa-check-circle":n,"fa-exclamation-triangle":e,"fa-times-circle":t}};function pS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"article",39)(1,"div",40),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.viewProductDetails(o))}),s.TgZ(2,"img",41),s.NdJ("error",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.handleProductImageError(i))}),s.qZA(),s._UZ(3,"div",42),s.TgZ(4,"div",43)(5,"span",44),s._uU(6),s.qZA(),s.TgZ(7,"span",45),s._uU(8),s.qZA()(),s.TgZ(9,"div",46)(10,"span",47),s._uU(11),s.qZA(),s.TgZ(12,"span",48),s._uU(13,"Toca para ver detalles"),s.qZA()()(),s.TgZ(14,"div",49)(15,"div",50)(16,"h2",51),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.viewProductDetails(o))}),s._uU(17),s.qZA(),s.TgZ(18,"p",52),s._uU(19),s.ALo(20,"slice"),s.qZA()(),s.TgZ(21,"div",53)(22,"div",54)(23,"span",55),s._uU(24),s.ALo(25,"currency"),s.qZA(),s.TgZ(26,"small"),s._uU(27,"Precio final"),s.qZA()(),s.TgZ(28,"div",56),s._UZ(29,"i",57),s.TgZ(30,"span"),s._uU(31),s.qZA()()(),s.TgZ(32,"div",58)(33,"button",59),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.addToCart(o))}),s._UZ(34,"i",60),s._uU(35),s.qZA(),s.TgZ(36,"button",61),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.viewProductDetails(o))}),s._UZ(37,"i",62),s._uU(38," Ver detalles "),s.qZA()()()()}if(2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(2),s.Q6J("src",r.getPrimaryImage(t),s.LSH)("alt",t.name),s.xp6(4),s.Oqu(t.category_name||"Colecci\xf3n"),s.xp6(1),s.ekj("low-stock",t.stock<5&&t.stock>0)("out-of-stock",0===t.stock),s.xp6(1),s.hij(" ",0===t.stock?"Sin stock":t.stock<5?"\xdaltimas unidades":t.stock+" disponibles"," "),s.xp6(3),s.Oqu(t.name),s.xp6(6),s.Oqu(t.name),s.xp6(2),s.AsE(" ",s.Dn7(20,21,t.description,0,110),"",t.description.length>110?"\u2026":""," "),s.xp6(5),s.Oqu(s.xi3(25,25,t.price,"USD")),s.xp6(4),s.ekj("low-stock",t.stock<5)("out-of-stock",0===t.stock),s.xp6(1),s.Q6J("ngClass",s.kEZ(28,hS,t.stock>5,t.stock>0&&t.stock<=5,0===t.stock)),s.xp6(2),s.hij(" ",0===t.stock?"Sin unidades disponibles":t.stock<5?"Quedan "+t.stock+" unidades":"Stock saludable"," "),s.xp6(2),s.Q6J("disabled",0===t.stock),s.xp6(2),s.hij(" ",0===t.stock?"Sin stock":"Agregar al carrito"," ")}}function gS(n,e){if(1&n&&(s.TgZ(0,"div",37),s.YNc(1,pS,39,32,"article",38),s.qZA()),2&n){const t=s.oxw();s.Q6J("@productAnimation",t.displayedProducts.length),s.xp6(1),s.Q6J("ngForOf",t.displayedProducts)}}function mS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",63)(1,"button",64),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.changePage(i.currentPage-1))}),s._UZ(2,"i",65),s._uU(3," Anterior "),s.qZA(),s.TgZ(4,"span"),s._uU(5),s.qZA(),s.TgZ(6,"button",64),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.changePage(i.currentPage+1))}),s._uU(7," Siguiente "),s._UZ(8,"i",66),s.qZA()()}if(2&n){const t=s.oxw();s.xp6(1),s.Q6J("disabled",1===t.currentPage),s.xp6(4),s.AsE("P\xe1gina ",t.currentPage," de ",t.totalPages,""),s.xp6(1),s.Q6J("disabled",t.currentPage===t.totalPages)}}let Su=(()=>{const e=class{constructor(r,i,o){this.cartService=r,this.productService=i,this.router=o,this.products=[],this.filteredProducts=[],this.displayedProducts=[],this.isLoading=!0,this.currentPage=1,this.productsPerPage=10,this.totalPages=1,this.errorMessage=null,this.availableProducts=0,this.productImageFallback="https://images.unsplash.com/photo-1501426026826-31c667bdf23d?auto=format&fit=crop&w=900&q=60"}ngOnInit(){this.loadProducts()}loadProducts(){this.isLoading=!0,this.errorMessage=null,this.productService.getProducts().subscribe({next:r=>{this.products=r,this.applyFilters(),this.isLoading=!1},error:r=>{console.error("Error loading products:",r),this.isLoading=!1,this.errorMessage="Could not load products. Please try again later."}})}onFilterChange(r){this.applyFilters(r)}applyFilters(r){this.filteredProducts=r?this.products.filter(i=>(i.name.toLowerCase().includes(r.search.toLowerCase())||i.description.toLowerCase().includes(r.search.toLowerCase()))&&(""===r.category||i.category_name===r.category)):[...this.products],this.updateAvailableProducts(),this.updateDisplayedProducts()}updateDisplayedProducts(){const r=(this.currentPage-1)*this.productsPerPage;this.displayedProducts=this.filteredProducts.slice(r,r+this.productsPerPage),this.totalPages=Math.ceil(this.filteredProducts.length/this.productsPerPage)}updateAvailableProducts(){this.availableProducts=this.filteredProducts.filter(r=>r.stock>0).length}changePage(r){r>=1&&r<=this.totalPages&&(this.currentPage=r,this.updateDisplayedProducts())}addToCart(r){this.cartService.addToCart({id:r.id,name:r.name,price:r.price,quantity:1})}viewProductDetails(r){this.router.navigate(["/productos",r.id])}retryLoading(){this.loadProducts()}getPrimaryImage(r){return r?.image_urls?.length?r.image_urls[0]:r?.image?r.image:this.productImageFallback}handleProductImageError(r){const i=r.target;i&&i.src!==this.productImageFallback&&(i.onerror=null,i.src=this.productImageFallback)}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(zd),s.Y36(ol.M),s.Y36(k.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-products"]],decls:51,vars:13,consts:[[1,"products-page"],[1,"products-hero","glass-card"],[1,"hero-copy"],[1,"eyebrow"],[1,"hero-metrics"],[1,"metric"],[1,"metric-value"],[1,"metric-label"],[1,"products-layout"],[1,"filter-panel","glass-card"],[1,"filter-intro"],["type","button",1,"toolbar-refresh",3,"disabled","click"],[1,"fas","fa-sync-alt"],[3,"filterChange"],[1,"products-panel","glass-card"],[1,"products-toolbar"],[1,"toolbar-meta"],[1,"results-count"],[1,"fas","fa-box-open"],["class","stock-indicator",4,"ngIf"],[1,"toolbar-actions"],["class","page-indicator",4,"ngIf"],["class","state-card",4,"ngIf"],["class","state-card error",4,"ngIf"],["class","state-card empty",4,"ngIf"],["class","products-list",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"stock-indicator"],[1,"fas","fa-check-circle"],[1,"page-indicator"],[1,"state-card"],[1,"fas","fa-spinner","fa-spin"],[1,"state-card","error"],[1,"fas","fa-exclamation-circle"],["type","button",1,"toolbar-refresh",3,"click"],[1,"state-card","empty"],[1,"fas","fa-search"],[1,"products-list"],["class","product-card",4,"ngFor","ngForOf"],[1,"product-card"],["role","button","tabindex","0",1,"card-media",3,"click"],["loading","lazy",3,"src","alt","error"],[1,"media-overlay"],[1,"badge-stack"],[1,"badge","category"],[1,"badge","stock"],[1,"media-cta"],[1,"media-title"],[1,"media-subtitle"],[1,"card-body"],[1,"card-header"],[1,"product-title",3,"click"],[1,"product-description"],[1,"card-meta"],[1,"price-wrapper"],[1,"product-price"],[1,"stock-info"],[1,"fas",3,"ngClass"],[1,"product-actions"],[1,"btn","cta",3,"disabled","click"],[1,"fas","fa-cart-plus"],[1,"btn","secondary",3,"click"],[1,"fas","fa-info-circle"],[1,"pagination"],[3,"disabled","click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"span",3),s._uU(4,"Cat\xe1logo premium"),s.qZA(),s.TgZ(5,"h1"),s._uU(6,"Encuentra tu pr\xf3ximo ritual matero"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Explora nuestra selecci\xf3n curada de productos para mate con descripciones claras, disponibilidad al momento y acciones r\xe1pidas."),s.qZA()(),s.TgZ(9,"div",4)(10,"div",5)(11,"span",6),s._uU(12),s.qZA(),s.TgZ(13,"span",7),s._uU(14,"Productos encontrados"),s.qZA()(),s.TgZ(15,"div",5)(16,"span",6),s._uU(17),s.qZA(),s.TgZ(18,"span",7),s._uU(19,"Con stock activo"),s.qZA()()()(),s.TgZ(20,"div",8)(21,"aside",9)(22,"div",10)(23,"div")(24,"p",3),s._uU(25,"Filtrar cat\xe1logo"),s.qZA(),s.TgZ(26,"h2"),s._uU(27,"Refina tu b\xfasqueda"),s.qZA(),s.TgZ(28,"p"),s._uU(29,"Combina palabras clave y categor\xedas para encontrar el set ideal."),s.qZA()(),s.TgZ(30,"button",11),s.NdJ("click",function(){return o.retryLoading()}),s._UZ(31,"i",12),s._uU(32," Actualizar datos "),s.qZA()(),s.TgZ(33,"app-product-filter",13),s.NdJ("filterChange",function(d){return o.onFilterChange(d)}),s.qZA()(),s.TgZ(34,"section",14)(35,"div",15)(36,"div",16)(37,"span",17),s._UZ(38,"i",18),s._uU(39),s.qZA(),s.YNc(40,Qw,3,1,"span",19),s.qZA(),s.TgZ(41,"div",20),s.YNc(42,Xw,2,2,"span",21),s.TgZ(43,"button",11),s.NdJ("click",function(){return o.retryLoading()}),s._UZ(44,"i",12),s._uU(45," Refrescar "),s.qZA()()(),s.YNc(46,eb,7,0,"div",22),s.YNc(47,tb,8,1,"div",23),s.YNc(48,fS,7,0,"div",24),s.YNc(49,gS,2,2,"div",25),s.YNc(50,mS,9,4,"div",26),s.qZA()()()),2&i&&(s.xp6(12),s.Oqu(o.filteredProducts.length||0),s.xp6(5),s.Oqu(o.availableProducts||0),s.xp6(13),s.Q6J("disabled",o.isLoading),s.xp6(9),s.AsE(" Mostrando ",o.displayedProducts.length," de ",o.filteredProducts.length," productos "),s.xp6(1),s.Q6J("ngIf",o.availableProducts),s.xp6(2),s.Q6J("ngIf",o.totalPages>1),s.xp6(1),s.Q6J("disabled",o.isLoading),s.xp6(3),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.errorMessage&&0===o.filteredProducts.length),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.errorMessage&&o.filteredProducts.length),s.xp6(1),s.Q6J("ngIf",o.totalPages>1))},dependencies:[te.mk,te.sg,te.O5,L1,te.OU,te.H9],styles:['.products-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2.5rem var(--gutter) 3rem;display:flex;flex-direction:column;gap:2rem;position:relative}.products-page[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background-image:url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png);background-position:8% 12%,92% 18%,12% 42%,88% 48%,15% 70%,85% 78%,25% 88%,75% 95%;background-size:240px auto,250px auto,235px auto,245px auto,240px auto,250px auto,235px auto,245px auto;background-repeat:no-repeat;opacity:.45;z-index:-1;pointer-events:none;filter:grayscale(.15) brightness(1.1)}.products-page[_ngcontent-%COMP%]:after{content:"";position:fixed;inset:0;background:radial-gradient(circle at 12% 20%,rgba(255,255,255,.25),transparent 35%),radial-gradient(circle at 88% 25%,rgba(255,255,255,.25),transparent 35%),radial-gradient(circle at 10% 60%,rgba(255,255,255,.25),transparent 35%),radial-gradient(circle at 90% 65%,rgba(255,255,255,.25),transparent 35%);z-index:-1;pointer-events:none}.glass-card[_ngcontent-%COMP%]{background:var(--surface);border-radius:var(--radius-xl);box-shadow:var(--shadow-soft);border:1px solid var(--surface-border)}.products-hero[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:2.5rem;padding:2.5rem 3rem;align-items:center}.hero-copy[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.35rem 0 1rem;font-size:clamp(2rem,4vw,2.75rem);color:#152c1a}.hero-copy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4e5b52;line-height:1.6}.hero-metrics[_ngcontent-%COMP%]{display:flex;gap:1.25rem}.metric[_ngcontent-%COMP%]{min-width:150px;padding:1.5rem;border-radius:22px;background:linear-gradient(145deg,#f5fff0,#e2f5df);text-align:center}.metric-value[_ngcontent-%COMP%]{display:block;font-size:2.2rem;font-weight:700;color:#2b5a32}.metric-label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:.8rem;color:#627667}.products-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px minmax(0,1fr);gap:1.5rem}.filter-panel[_ngcontent-%COMP%]{padding:2rem;position:sticky;top:1.5rem;height:-moz-fit-content;height:fit-content}.filter-intro[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.filter-intro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.15rem 0;font-size:1.5rem}.filter-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#5a6a60}.products-panel[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;gap:1.5rem}.products-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.toolbar-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem;color:#4a5a50}.results-count[_ngcontent-%COMP%]{font-weight:600;display:flex;align-items:center;gap:.5rem}.stock-indicator[_ngcontent-%COMP%]{font-size:.9rem;display:inline-flex;align-items:center;gap:.35rem;color:#25652c}.toolbar-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.page-indicator[_ngcontent-%COMP%]{font-size:.9rem;color:#7a867d}.toolbar-refresh[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:.55rem 1.35rem;background:var(--brand-forest-800);color:#fff;font-weight:600;display:inline-flex;align-items:center;gap:.4rem;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.toolbar-refresh[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.toolbar-refresh[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:0 10px 20px #2f8f4440}.state-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.state-card.empty[_ngcontent-%COMP%]{background:rgba(33,150,243,.06);color:#1e4f73}.products-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.product-card[_ngcontent-%COMP%]{border-radius:24px;background:linear-gradient(180deg,#ffffff 0%,#f8fbf7 100%);border:1px solid rgba(18,40,30,.08);box-shadow:0 18px 40px #12281e14;overflow:hidden;display:flex;flex-direction:column;transition:transform .35s ease,box-shadow .35s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 30px 60px #12281e2e}.card-media[_ngcontent-%COMP%]{position:relative;padding-top:78%;cursor:pointer;overflow:hidden;isolation:isolate}.card-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transform:scale(1.01);transition:transform .65s ease}.product-card[_ngcontent-%COMP%]:hover   .card-media[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.08)}.media-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(180deg,rgba(8,16,12,.05) 0%,rgba(8,16,12,.22) 55%,rgba(8,16,12,.65) 100%);z-index:1;pointer-events:none}.badge-stack[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;display:flex;flex-direction:column;gap:.35rem;z-index:3}.badge[_ngcontent-%COMP%]{padding:.35rem .9rem;border-radius:999px;font-size:.8rem;font-weight:600;color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.badge.category[_ngcontent-%COMP%]{background:rgba(15,23,42,.55)}.badge.stock[_ngcontent-%COMP%]{background:rgba(47,143,68,.82)}.badge.stock.low-stock[_ngcontent-%COMP%]{background:rgba(241,196,15,.9);color:#2d1d00}.badge.stock.out-of-stock[_ngcontent-%COMP%]{background:rgba(231,76,60,.9)}.media-cta[_ngcontent-%COMP%]{position:absolute;left:1.1rem;right:1.1rem;bottom:1.05rem;display:flex;flex-direction:column;gap:.2rem;z-index:2;pointer-events:none}.media-title[_ngcontent-%COMP%]{color:#fff;font-weight:750;font-size:1.12rem;line-height:1.2;text-shadow:0 10px 25px rgba(0,0,0,.35)}.media-subtitle[_ngcontent-%COMP%]{color:#ffffffdb;font-size:.9rem;text-shadow:0 8px 20px rgba(0,0,0,.35)}.card-body[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.product-title[_ngcontent-%COMP%]{margin:0;font-size:1.35rem;color:#1c3223;cursor:pointer}.product-title[_ngcontent-%COMP%]:hover{color:#2f8f44}.product-description[_ngcontent-%COMP%]{margin:0;color:#5a6a60;line-height:1.5}.card-header[_ngcontent-%COMP%]{gap:.4rem}.product-title[_ngcontent-%COMP%]{font-size:1.15rem;color:#203b2e}.card-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;gap:1rem;flex-wrap:wrap}.price-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.product-price[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#d35400}.price-wrapper[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#7a867d}.stock-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.45rem;font-size:.95rem;color:#25652c}.stock-info.low-stock[_ngcontent-%COMP%]{color:#a56b00}.stock-info.out-of-stock[_ngcontent-%COMP%]{color:#b3392b}.product-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.65rem}.btn[_ngcontent-%COMP%]{border:none;border-radius:16px;padding:.85rem 1.1rem;font-weight:600;display:inline-flex;align-items:center;justify-content:center;gap:.4rem;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.btn.cta[_ngcontent-%COMP%]{width:100%;border-radius:18px;padding:.95rem 1.15rem;background:linear-gradient(120deg,#1f8a3d,#62c370);color:#fff;box-shadow:0 16px 35px #2f8f4447}.btn.cta[_ngcontent-%COMP%]:disabled{background:#ced7cf;color:#7a867d;cursor:not-allowed;box-shadow:none}.btn.secondary[_ngcontent-%COMP%]{width:100%;border-radius:18px;border:1px solid rgba(32,59,46,.22);color:#203b2e;background:#ffffff}.btn[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 4px #2f8f442e}.btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 15px 30px #2c3e5033}.btn.cta[_ngcontent-%COMP%]:not(:disabled):hover{box-shadow:0 22px 45px #2f8f445c}.btn.secondary[_ngcontent-%COMP%]:not(:disabled):hover{box-shadow:0 18px 35px #0f172a1a}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1.25rem;margin-top:.5rem}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:999px;padding:.55rem 1.4rem;background:#1f6feb;color:#fff;font-weight:600;display:inline-flex;align-items:center;gap:.4rem;cursor:pointer}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#c5d0de;cursor:not-allowed}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#4a5a50}@media (max-width: 1024px){.products-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-panel[_ngcontent-%COMP%]{position:static}.products-hero[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.hero-metrics[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 640px){.products-page[_ngcontent-%COMP%]{padding:2rem 1rem}.products-panel[_ngcontent-%COMP%], .filter-panel[_ngcontent-%COMP%], .products-hero[_ngcontent-%COMP%]{padding:1.5rem}.products-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.products-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}'],data:{animation:[j("productAnimation",[vn("* => *",[yn(":enter",[Me({opacity:0,transform:"translateY(15px)"}),us("50ms",H("300ms ease-out",Me({opacity:1,transform:"translateY(0)"})))],{optional:!0})])])]}}),n})(),rg=(()=>{const e=class{constructor(){this.contactForm={name:"",email:"",message:""}}onSubmit(){console.log("Formulario enviado",this.contactForm),alert("Mensaje enviado con \xe9xito!"),this.contactForm={name:"",email:"",message:""}}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-contact"]],decls:49,vars:3,consts:[[1,"contact-page"],[1,"container"],[1,"contact-header"],[1,"section-meta"],[1,"eyebrow"],[1,"contact-content"],[1,"contact-info"],[1,"fas","fa-envelope"],[1,"fas","fa-phone"],[1,"fas","fa-map-marker-alt"],[1,"contact-form"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","message"],["id","message","name","message","required","",3,"ngModel","ngModelChange"],["type","submit",1,"cta-pill"],[1,"fas","fa-paper-plane"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),s._uU(5,"Contacto"),s.qZA(),s.TgZ(6,"h2"),s._uU(7,"Hablemos"),s.qZA(),s.TgZ(8,"p"),s._uU(9,"Escribinos para consultas, pedidos y asesor\xeda. Respondemos lo antes posible."),s.qZA()()(),s.TgZ(10,"div",5)(11,"div",6)(12,"h3"),s._uU(13,"Informaci\xf3n de contacto"),s.qZA(),s.TgZ(14,"ul")(15,"li"),s._UZ(16,"i",7),s.TgZ(17,"strong"),s._uU(18,"Email: "),s.qZA(),s._uU(19," matetierraa@gmail.com "),s.qZA(),s.TgZ(20,"li"),s._UZ(21,"i",8),s.TgZ(22,"strong"),s._uU(23,"Tel\xe9fono: "),s.qZA(),s._uU(24," 3758-540393 "),s.qZA(),s.TgZ(25,"li"),s._UZ(26,"i",9),s.TgZ(27,"strong"),s._uU(28,"Direcci\xf3n: "),s.qZA(),s._uU(29," B\xb0 56 Viviendas Casa 31 - Apostoles Misiones"),s.qZA()()(),s.TgZ(30,"div",10)(31,"h3"),s._uU(32,"Env\xedanos un mensaje"),s.qZA(),s.TgZ(33,"form",11),s.NdJ("ngSubmit",function(){return o.onSubmit()}),s.TgZ(34,"div",12)(35,"label",13),s._uU(36,"Nombre:"),s.qZA(),s.TgZ(37,"input",14),s.NdJ("ngModelChange",function(d){return o.contactForm.name=d}),s.qZA()(),s.TgZ(38,"div",12)(39,"label",15),s._uU(40,"Email:"),s.qZA(),s.TgZ(41,"input",16),s.NdJ("ngModelChange",function(d){return o.contactForm.email=d}),s.qZA()(),s.TgZ(42,"div",12)(43,"label",17),s._uU(44,"Mensaje:"),s.qZA(),s.TgZ(45,"textarea",18),s.NdJ("ngModelChange",function(d){return o.contactForm.message=d}),s.qZA()(),s.TgZ(46,"button",19),s._uU(47,"Enviar mensaje "),s._UZ(48,"i",20),s.qZA()()()()()()),2&i&&(s.xp6(37),s.Q6J("ngModel",o.contactForm.name),s.xp6(4),s.Q6J("ngModel",o.contactForm.email),s.xp6(4),s.Q6J("ngModel",o.contactForm.message))},dependencies:[xn,nt,or,to,ra,As,Ji],styles:['.contact-page[_ngcontent-%COMP%]{padding:3.25rem 0 4rem;background:radial-gradient(900px circle at 18% 12%,rgba(60,156,54,.04),transparent 55%),radial-gradient(700px circle at 86% 18%,rgba(0,255,163,.03),transparent 60%),linear-gradient(180deg,rgba(255,255,255,.35) 0%,rgba(247,250,248,.4) 100%);position:relative;overflow:hidden}.contact-page[_ngcontent-%COMP%]:before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png),url(/assets/images/yerba-mate-leaves.png);background-repeat:no-repeat;background-position:8% 12%,92% 18%,12% 42%,88% 48%,15% 70%,85% 78%,25% 88%,75% 95%;background-size:240px,250px,235px,245px,240px,250px,235px,245px;opacity:.45;filter:grayscale(.15) brightness(1.1);z-index:-1;pointer-events:none}.contact-page[_ngcontent-%COMP%]:after{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(1100px circle at 12% 20%,rgba(247,250,248,.25) 0%,transparent 45%),radial-gradient(1000px circle at 88% 25%,rgba(247,250,248,.25) 0%,transparent 48%),radial-gradient(950px circle at 10% 60%,rgba(247,250,248,.25) 0%,transparent 46%),radial-gradient(1050px circle at 90% 65%,rgba(247,250,248,.25) 0%,transparent 47%);z-index:-1;pointer-events:none}.contact-header[_ngcontent-%COMP%]{margin-bottom:2.25rem}.contact-content[_ngcontent-%COMP%]{display:flex;gap:2rem;background-color:var(--surface);border-radius:var(--radius-xl);box-shadow:var(--shadow-soft);border:1px solid var(--surface-border);overflow:hidden}.contact-info[_ngcontent-%COMP%], .contact-form[_ngcontent-%COMP%]{flex:1;padding:2rem}.contact-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(22,40,31,.92),rgba(31,69,45,.88));color:#fffffff0}.contact-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .contact-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.5rem;font-size:1.35rem;font-weight:900;letter-spacing:-.02em}.contact-info[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.contact-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;align-items:center}.contact-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--brand-forest-900);font-weight:800}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid rgba(22,40,31,.15);border-radius:14px;font-size:1rem;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#00ffa38c;box-shadow:0 0 0 4px #00ffa324}textarea[_ngcontent-%COMP%]{min-height:150px;resize:vertical}.cta-pill[_ngcontent-%COMP%]{width:100%;border:none}@media (max-width: 768px){.contact-content[_ngcontent-%COMP%]{flex-direction:column}.contact-info[_ngcontent-%COMP%], .contact-form[_ngcontent-%COMP%]{padding:1.5rem}}']}),n})();var nb=Z(6962);function v3(n,e){if(1&n&&(s.TgZ(0,"div",26),s._UZ(1,"i",27),s._uU(2),s.qZA()),2&n){const t=s.oxw(2);s.xp6(2),s.hij(" ",t.errorMessage," ")}}function y3(n,e){if(1&n&&(s.TgZ(0,"span",44),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&n){const t=s.oxw().$implicit,r=s.oxw(2);s.xp6(1),s.Oqu(s.gM2(2,1,r.getOriginalPrice(t),"ARS","symbol","1.2-2"))}}function x3(n,e){if(1&n&&(s.TgZ(0,"span",45),s._UZ(1,"i",46),s._uU(2),s.ALo(3,"number"),s.qZA()),2&n){const t=s.oxw().$implicit,r=s.oxw(2);s.xp6(2),s.hij(" -",s.xi3(3,1,r.getDiscount(t),"1.0-0"),"% ")}}function w3(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"article",28)(1,"header",29)(2,"div",30)(3,"h3"),s._uU(4),s.qZA(),s.TgZ(5,"div",31)(6,"span",32),s._uU(7),s.ALo(8,"currency"),s.qZA(),s.YNc(9,y3,3,6,"span",33),s.YNc(10,x3,4,4,"span",34),s.qZA()(),s.TgZ(11,"button",35),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.removeItem(o.id))}),s._UZ(12,"i",36),s.qZA()(),s.TgZ(13,"div",37)(14,"div",38)(15,"button",39),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.decrementQuantity(o))}),s._UZ(16,"i",40),s.qZA(),s.TgZ(17,"span"),s._uU(18),s.qZA(),s.TgZ(19,"button",41),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.incrementQuantity(o))}),s._UZ(20,"i",42),s.qZA()(),s.TgZ(21,"div",43)(22,"span"),s._uU(23,"Total"),s.qZA(),s.TgZ(24,"strong"),s._uU(25),s.ALo(26,"currency"),s.qZA()()()()}if(2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(4),s.Oqu(t.name),s.xp6(3),s.Oqu(s.gM2(8,6,t.price,"ARS","symbol","1.2-2")),s.xp6(2),s.Q6J("ngIf",r.getDiscount(t)>0),s.xp6(1),s.Q6J("ngIf",r.getDiscount(t)>0),s.xp6(8),s.Oqu(t.quantity),s.xp6(7),s.Oqu(s.gM2(26,11,t.price*t.quantity,"ARS","symbol","1.2-2"))}}function b3(n,e){if(1&n&&(s.TgZ(0,"li")(1,"span"),s._uU(2,"Ahorro aplicado"),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.ALo(5,"currency"),s.qZA()()),2&n){const t=s.oxw(2);s.xp6(4),s.hij("-",s.gM2(5,1,t.getTotalSavings(),"ARS","symbol","1.2-2"),"")}}function rb(n,e){if(1&n){const t=s.EpF();s.ynx(0),s.TgZ(1,"header",3)(2,"div",4)(3,"p",5),s._uU(4,"Tu selecci\xf3n actual"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Detalle del carrito"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Revis\xe1 cantidades y descuentos antes de confirmar la compra."),s.qZA()(),s.TgZ(9,"div",6)(10,"div",7)(11,"span",8),s._uU(12,"Productos \xfanicos"),s.qZA(),s.TgZ(13,"span",9),s._uU(14),s.qZA()(),s.TgZ(15,"div",7)(16,"span",8),s._uU(17,"Unidades"),s.qZA(),s.TgZ(18,"span",9),s._uU(19),s.qZA()(),s.TgZ(20,"div",7)(21,"span",8),s._uU(22,"Ahorro total"),s.qZA(),s.TgZ(23,"span",9),s._uU(24),s.ALo(25,"currency"),s.qZA()()()(),s.YNc(26,v3,3,1,"div",10),s.TgZ(27,"div",11)(28,"div",12),s.YNc(29,w3,27,16,"article",13),s.qZA(),s.TgZ(30,"aside",14)(31,"h3"),s._uU(32,"Resumen de compra"),s.qZA(),s.TgZ(33,"ul",15)(34,"li")(35,"span"),s._uU(36,"Subtotal"),s.qZA(),s.TgZ(37,"span"),s._uU(38),s.ALo(39,"currency"),s.qZA()(),s.YNc(40,b3,6,6,"li",16),s.qZA(),s.TgZ(41,"div",17)(42,"span"),s._uU(43,"Total a pagar"),s.qZA(),s.TgZ(44,"strong"),s._uU(45),s.ALo(46,"currency"),s.qZA()(),s.TgZ(47,"p",18),s._uU(48," Una vez revisado el detalle, pod\xe9s descargar un comprobante PDF o continuar con el proceso de pago. "),s.qZA(),s.TgZ(49,"div",19)(50,"button",20),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.generatePDF())}),s._UZ(51,"i",21),s._uU(52," Descargar PDF "),s.qZA(),s.TgZ(53,"button",22),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.clearCart())}),s._UZ(54,"i",23),s._uU(55," Vaciar carrito "),s.qZA(),s.TgZ(56,"button",24),s._UZ(57,"i",25),s._uU(58," Proceder al pago "),s.qZA()()()(),s.BQk()}if(2&n){const t=s.oxw();s.xp6(14),s.Oqu(t.cartItems.length),s.xp6(5),s.Oqu(t.getTotalQuantity()),s.xp6(5),s.Oqu(s.gM2(25,8,t.getTotalSavings(),"ARS","symbol","1.2-2")),s.xp6(2),s.Q6J("ngIf",t.errorMessage),s.xp6(3),s.Q6J("ngForOf",t.cartItems),s.xp6(9),s.Oqu(s.gM2(39,13,t.getSubtotal(),"ARS","symbol","1.2-2")),s.xp6(2),s.Q6J("ngIf",t.getTotalSavings()>0),s.xp6(5),s.Oqu(s.gM2(46,18,t.getTotal(),"ARS","symbol","1.2-2"))}}function _S(n,e){1&n&&(s.TgZ(0,"div",47),s._UZ(1,"i",48),s.TgZ(2,"h3"),s._uU(3,"Tu carrito est\xe1 vac\xedo"),s.qZA(),s.TgZ(4,"p"),s._uU(5,"Explor\xe1 el cat\xe1logo y sum\xe1 productos para comenzar tu compra."),s.qZA(),s.TgZ(6,"a",49),s._UZ(7,"i",50),s._uU(8," Ver productos "),s.qZA()())}let vS=(()=>{const e=class{constructor(r,i,o,a){this.cartService=r,this.productService=i,this.discountSettingsService=o,this.siteSettingsService=a,this.cartItems=[],this.errorMessage="",this.discountSettings=null,this.logoUrl=null,this.logoImage=null,this.currencyFormatter=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2})}ngOnInit(){this.cartService.getCart().subscribe(r=>{this.cartItems=r}),this.loadDiscountSettings(),this.loadSiteBranding()}loadDiscountSettings(){this.discountSettingsService.getSettings().subscribe({next:r=>{this.discountSettings=r},error:r=>{console.error("Error loading discount settings:",r)}})}loadSiteBranding(){this.siteSettingsService.getSettings().subscribe({next:r=>{this.logoUrl=r.logo_url,this.logoImage=null},error:r=>{console.error("Error loading site branding:",r)}})}removeItem(r){this.cartService.removeFromCart(r)}incrementQuantity(r){this.productService.getProductById(r.id).subscribe({next:i=>{if(i&&r.quantity<i.stock){const o=r.quantity+1,a=this.getOriginalPrice(r),d=this.calculateUnitPrice(a,o);this.cartService.updateQuantity(r.id,o,d),this.errorMessage=""}else this.errorMessage="Not enough stock available"},error:i=>{console.error("Error checking stock:",i),this.errorMessage="Error checking available stock"}})}decrementQuantity(r){if(r.quantity>1){const i=r.quantity-1,o=this.getOriginalPrice(r),a=this.calculateUnitPrice(o,i);this.cartService.updateQuantity(r.id,i,a)}else this.removeItem(r.id)}clearCart(){this.cartService.clearCart()}getTotal(){return this.cartService.getTotal()}getOriginalPrice(r){return r.originalPrice||r.price}getDiscount(r){const i=this.getOriginalPrice(r);return(i-r.price)/i*100}getTotalSavings(){return this.cartItems.reduce((r,i)=>r+(this.getOriginalPrice(i)-i.price)*i.quantity,0)}getTotalQuantity(){return this.cartItems.reduce((r,i)=>r+i.quantity,0)}getSubtotal(){return this.cartItems.reduce((r,i)=>r+this.getOriginalPrice(i)*i.quantity,0)}calculateUnitPrice(r,i){return this.discountSettings?i>=this.discountSettings.tier2_quantity?r*(1-this.discountSettings.tier2_discount/100):i>=this.discountSettings.tier1_quantity?r*(1-this.discountSettings.tier1_discount/100):r:r}loadPdfLib(){return this.pdfLib||(this.pdfLib=Promise.all([Z.e(822).then(Z.bind(Z,7822)),Promise.all([Z.e(822),Z.e(983)]).then(Z.t.bind(Z,2983,23))]).then(([r])=>r.default)),this.pdfLib}generatePDF(){var r=this;return(0,be.Z)(function*(){const o=new(yield r.loadPdfLib())({orientation:"landscape",unit:"pt",format:"a4"});o.setProperties({title:"Mate Tierra - Resumen profesional del carrito"});let a=o.internal.pageSize.getWidth(),d=o.internal.pageSize.getHeight();const h=56;let p=120;const m=()=>{o.setDrawColor(210,226,216),o.setLineWidth(.75),o.line(h,d-54,a-h,d-54),o.setFont("helvetica","italic"),o.setFontSize(10),o.setTextColor(120,130,124),o.text("Documento generado autom\xe1ticamente por Mate Tierra \u2014 Distribuci\xf3n y dise\xf1o artesanal",a/2,d-32,{align:"center"})};o.setFillColor(24,52,36),o.rect(0,0,a,120,"F");const y=yield r.getLogoImage();if(y)try{o.addImage(y.dataUrl,y.format,h,32,148,56,void 0,"FAST")}catch(wt){console.error("Error rendering logo in PDF:",wt)}o.setFont("helvetica","bold"),o.setFontSize(28),o.setTextColor(255,255,255),o.text("Mate Tierra",a-h,54,{align:"right"}),o.setFont("helvetica","normal"),o.setFontSize(14),o.text("Resumen profesional del carrito",a-h,78,{align:"right"}),o.setFont("helvetica","italic"),o.setFontSize(11),o.text("Calidad artesanal para tu ritual diario",a-h,100,{align:"right"}),o.setFont("helvetica","normal"),o.setFontSize(10),o.text("www.matetierra.com  |  matetierraa@gmail.com  |  3758-540393",a/2,106,{align:"center"}),o.setDrawColor(210,226,216),o.setLineWidth(1),o.line(h,p,a-h,p),p+=28;const T=a-112,R=(T-20)/2,U=new Date,J=r.cartItems.reduce((tn,$t)=>tn+$t.quantity,0);o.setFillColor(247,251,244),o.setDrawColor(210,226,216),o.roundedRect(h,p,R,108,14,14,"FD"),o.roundedRect(h+R+20,p,R,108,14,14,"FD"),o.setFont("helvetica","bold"),o.setFontSize(13),o.setTextColor(32,48,38),o.text("Detalle del pedido",78,p+26),o.text("Resumen r\xe1pido",h+R+20+22,p+26),o.setFont("helvetica","normal"),o.setFontSize(11),o.setTextColor(72,83,77);let W=p+48;o.text(`Fecha de generaci\xf3n: ${U.toLocaleDateString("es-AR")}`,78,W),W+=18,o.text(`Hora: ${U.toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"})} hs`,78,W),W+=18,o.text("Cliente: Mostrador",78,W),W+=18,o.text("Documento v\xe1lido como comprobante interno",78,W);const pe=h+R+20+22;let Ae=p+48;if(o.text(`Productos \xfanicos: ${r.cartItems.length}`,pe,Ae),Ae+=18,o.text(`Unidades totales: ${J}`,pe,Ae),Ae+=18,o.text(`Subtotal: ${r.formatCurrency(r.getSubtotal())}`,pe,Ae),Ae+=18,o.text(`Ahorro acumulado: ${r.formatCurrency(r.getTotalSavings())}`,pe,Ae),p+=140,!r.cartItems.length)return o.setFont("helvetica","italic"),o.setFontSize(12),o.setTextColor(120,130,124),o.text("No registramos productos en el carrito en este momento. Agreg\xe1 art\xedculos para generar el PDF.",h,p),m(),void o.save("mate-tierra-carrito.pdf");const Ve=r.cartItems.map(tn=>{const $t=r.getOriginalPrice(tn),wt=r.getDiscount(tn);return[tn.name,tn.quantity.toString(),r.formatCurrency($t),wt>0?`${wt.toFixed(0)}%`:"-",r.formatCurrency(tn.price),r.formatCurrency(tn.price*tn.quantity)]});o.autoTable({head:[["Producto","Cantidad","Precio lista","Descuento","Precio unitario","Subtotal"]],body:Ve,startY:p,margin:{left:h,right:h},theme:"grid",styles:{fontSize:10,font:"helvetica",lineWidth:.5,lineColor:[228,238,231],textColor:[36,45,38],cellPadding:{top:6,right:10,bottom:6,left:10},valign:"middle"},headStyles:{fillColor:[36,102,58],textColor:[255,255,255],fontStyle:"bold",fontSize:11,cellPadding:{top:8,right:10,bottom:8,left:10}},alternateRowStyles:{fillColor:[242,247,244]},columnStyles:{0:{halign:"left",cellWidth:220},1:{halign:"center",cellWidth:70},2:{halign:"right",cellWidth:110},3:{halign:"center",cellWidth:90},4:{halign:"right",cellWidth:110},5:{halign:"right",cellWidth:120}}}),p=(o.lastAutoTable.finalY||p)+28;const Re=r.getTotalSavings()>0?156:140;p+Re+90>d&&(m(),o.addPage("a4","landscape"),a=o.internal.pageSize.getWidth(),d=o.internal.pageSize.getHeight(),o.setFillColor(247,251,244),o.rect(0,0,a,80,"F"),o.setFont("helvetica","bold"),o.setFontSize(18),o.setTextColor(32,48,38),o.text("Resumen financiero (continuaci\xf3n)",h,50),o.setDrawColor(210,226,216),o.line(h,60,a-h,60),p=96),o.setFillColor(233,242,236),o.setDrawColor(206,222,212),o.roundedRect(h,p,T,Re,16,16,"FD"),o.setFont("helvetica","bold"),o.setFontSize(14),o.setTextColor(32,48,38),o.text("Resumen financiero",84,p+32);const at=h+T-32;let Be=p+60;o.setFont("helvetica","normal"),o.setFontSize(12),o.setTextColor(70,82,76),o.text("Subtotal sin descuentos",88,Be),o.text(r.formatCurrency(r.getSubtotal()),at,Be,{align:"right"}),Be+=22,r.getTotalSavings()>0&&(o.setTextColor(102,114,108),o.text("Ahorro total aplicado",88,Be),o.text(`-${r.formatCurrency(r.getTotalSavings())}`,at,Be,{align:"right"}),Be+=22),o.setFont("helvetica","bold"),o.setFontSize(16),o.setTextColor(24,52,36),o.text("Total a pagar",88,Be),o.text(r.formatCurrency(r.getTotal()),at,Be,{align:"right"}),Be+=32,o.setFont("helvetica","italic"),o.setFontSize(11),o.setTextColor(102,114,108);const Ut=o.splitTextToSize("Record\xe1 conservar este documento como soporte interno. Los valores est\xe1n expresados en pesos argentinos (ARS).",T-64);o.text(Ut,88,Be,{align:"left"}),m(),o.save("mate-tierra-carrito.pdf")})()}formatCurrency(r){return this.currencyFormatter.format(r)}getLogoImage(){var r=this;return(0,be.Z)(function*(){if(null!==r.logoImage)return r.logoImage;const i=r.resolveLogoSource();if(!i)return r.logoImage=null,null;try{const o=yield fetch(i,{mode:"cors"});if(!o.ok)throw new Error(`Failed to fetch logo: ${o.status}`);const a=yield o.blob(),d=r.detectImageFormat(a.type),h=yield r.blobToDataUrl(a),p=d??r.extractFormatFromDataUrl(h);if(!p)throw new Error(`Unsupported logo mime type: ${a.type||"unknown"}`);return r.logoImage={dataUrl:h,format:p},r.logoImage}catch(o){return console.error("Error preparing logo for PDF:",o),r.logoImage=null,null}})()}resolveLogoSource(){const r=this.logoUrl?.trim()||"assets/images/yerba-mate-leaves.png";if(!r)return null;if(/^https?:/i.test(r))return r;const i=r.startsWith("/")?r.slice(1):r;return`${window.location.origin}/${i}`}blobToDataUrl(r){return new Promise((i,o)=>{const a=new FileReader;a.onloadend=()=>{"string"==typeof a.result?i(a.result):o(new Error("Failed to convert blob to data URL"))},a.onerror=()=>o(new Error("Error reading image blob")),a.readAsDataURL(r)})}detectImageFormat(r){if(!r)return null;const i=r.toLowerCase();return i.includes("png")?"PNG":i.includes("jpeg")||i.includes("jpg")?"JPEG":i.includes("webp")?"WEBP":null}extractFormatFromDataUrl(r){const i=/^data:image\/(png|jpeg|jpg|webp)/i.exec(r);if(!i)return null;const o=i[1].toLowerCase();return"png"===o?"PNG":"jpeg"===o||"jpg"===o?"JPEG":"webp"===o?"WEBP":null}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(zd),s.Y36(ol.M),s.Y36(nb.r),s.Y36(dh))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-cart"]],decls:4,vars:2,consts:[[1,"cart-page"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"cart-hero","glass-card"],[1,"hero-copy"],[1,"eyebrow"],[1,"hero-metrics"],[1,"metric-card"],[1,"metric-label"],[1,"metric-value"],["class","cart-alert",4,"ngIf"],[1,"cart-layout"],[1,"cart-items"],["class","cart-card glass-card",4,"ngFor","ngForOf"],[1,"summary-card","glass-card"],[1,"summary-list"],[4,"ngIf"],[1,"summary-total"],[1,"summary-note"],[1,"summary-actions"],["type","button",1,"btn-secondary",3,"click"],[1,"fas","fa-file-download"],["type","button",1,"btn-outline",3,"click"],[1,"fas","fa-trash"],["type","button",1,"btn-primary"],[1,"fas","fa-credit-card"],[1,"cart-alert"],[1,"fas","fa-exclamation-triangle"],[1,"cart-card","glass-card"],[1,"cart-card-header"],[1,"title-group"],[1,"price-row"],[1,"current-price"],["class","original-price",4,"ngIf"],["class","discount-chip",4,"ngIf"],["type","button","aria-label","Eliminar producto",1,"icon-button",3,"click"],[1,"fas","fa-times"],[1,"cart-card-body"],["aria-label","Controlar cantidad",1,"quantity-control"],["type","button","aria-label","Disminuir cantidad",3,"click"],[1,"fas","fa-minus"],["type","button","aria-label","Incrementar cantidad",3,"click"],[1,"fas","fa-plus"],[1,"line-total"],[1,"original-price"],[1,"discount-chip"],[1,"fas","fa-tag"],[1,"empty-state","glass-card"],[1,"fas","fa-shopping-basket"],["routerLink","/productos",1,"btn-primary"],[1,"fas","fa-store"]],template:function(i,o){if(1&i&&(s.TgZ(0,"section",0),s.YNc(1,rb,59,23,"ng-container",1),s.YNc(2,_S,9,0,"ng-template",null,2,s.W1O),s.qZA()),2&i){const a=s.MAs(3);s.xp6(1),s.Q6J("ngIf",o.cartItems.length>0)("ngIfElse",a)}},dependencies:[te.sg,te.O5,k.rH,te.JJ,te.H9],styles:[".cart-page[_ngcontent-%COMP%]{max-width:1120px;margin:0 auto;padding:clamp(2rem,4vw,3rem) var(--gutter, 1.5rem) 3rem;display:flex;flex-direction:column;gap:2rem;font-family:Poppins,Segoe UI,system-ui,-apple-system,sans-serif}.glass-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.92);border-radius:24px;border:1px solid rgba(15,23,42,.08);box-shadow:0 22px 40px #12281f14;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px)}.cart-hero[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:2rem;padding:clamp(1.75rem,3vw,2.5rem);align-items:center;background:radial-gradient(700px circle at 10% 20%,rgba(47,143,68,.18),transparent 58%),radial-gradient(680px circle at 80% 0%,rgba(0,255,163,.12),transparent 60%),rgba(255,255,255,.92)}.hero-copy[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.35rem 0 .75rem;font-size:clamp(2rem,3vw,2.6rem);color:#152c1f}.hero-copy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4a5b50;max-width:420px}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.1em;font-size:.75rem;font-weight:600;color:#4fbf5a;margin:0}.hero-metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(110px,1fr));gap:1rem}.metric-card[_ngcontent-%COMP%]{padding:1.15rem 1.35rem;border-radius:20px;background:linear-gradient(135deg,rgba(47,143,68,.12),rgba(18,40,31,.05));border:1px solid rgba(18,40,31,.12);display:flex;flex-direction:column;gap:.35rem}.metric-label[_ngcontent-%COMP%]{font-size:.78rem;text-transform:uppercase;letter-spacing:.08em;color:#516458}.metric-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#12331f}.cart-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.65rem;background:rgba(231,76,60,.12);border:1px solid rgba(231,76,60,.25);color:#a22f24;padding:1rem 1.25rem;border-radius:18px}.cart-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,2.1fr) minmax(0,1fr);gap:2rem;align-items:start}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.cart-card[_ngcontent-%COMP%]{padding:1.5rem 1.75rem;display:flex;flex-direction:column;gap:1.35rem}.cart-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.title-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.2rem;color:#13271c}.price-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.current-price[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:700;color:#16522e}.original-price[_ngcontent-%COMP%]{text-decoration:line-through;color:#7b8a80;font-size:.95rem}.discount-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;background:rgba(231,76,60,.15);color:#c0392b;padding:.25rem .65rem;border-radius:999px;font-size:.78rem;font-weight:600}.discount-chip[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.icon-button[_ngcontent-%COMP%]{border:none;background:rgba(231,76,60,.12);color:#c0392b;width:36px;height:36px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s ease,background-color .2s ease}.icon-button[_ngcontent-%COMP%]:hover{background:rgba(231,76,60,.22);transform:translateY(-2px)}.cart-card-body[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem;flex-wrap:wrap}.quantity-control[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.65rem;background:rgba(47,143,68,.08);border-radius:999px;padding:.35rem .75rem}.quantity-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:#2f8f44;color:#fff;width:32px;height:32px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s ease,background-color .2s ease}.quantity-control[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#256f35;transform:translateY(-1px)}.quantity-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:32px;text-align:center;font-weight:600;color:#12331f}.line-total[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.15rem;color:#142c1f}.line-total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;color:#5c6f63}.line-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.summary-card[_ngcontent-%COMP%]{padding:1.85rem 2rem;display:flex;flex-direction:column;gap:1.5rem;position:sticky;top:2rem}.summary-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.4rem;color:#142c1f}.summary-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.75rem}.summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;color:#44564b;font-size:.95rem}.summary-total[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.1rem 1.25rem;border-radius:18px;background:linear-gradient(140deg,rgba(47,143,68,.18),rgba(22,82,46,.12));color:#0f2419}.summary-total[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:.75rem}.summary-total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.summary-note[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#5d6c61;line-height:1.45}.summary-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-outline[_ngcontent-%COMP%]{padding:.95rem 1.2rem;border-radius:999px;border:none;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:.6rem;transition:transform .2s ease,box-shadow .2s ease,background-color .2s ease}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(120deg,#2f8f44,#62c370);color:#fff;box-shadow:0 16px 30px #2f8f4440}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 22px 34px #2f8f4447}.btn-secondary[_ngcontent-%COMP%]{background:rgba(47,143,68,.12);color:#16522e;border:1px solid rgba(47,143,68,.3)}.btn-secondary[_ngcontent-%COMP%]:hover{background:rgba(47,143,68,.18)}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#b14535;border:1px solid rgba(231,76,60,.4)}.btn-outline[_ngcontent-%COMP%]:hover{background:rgba(231,76,60,.08)}.summary-actions[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{margin-top:.25rem}.empty-state[_ngcontent-%COMP%]{max-width:520px;margin:0 auto;padding:clamp(2rem,4vw,2.75rem);text-align:center;display:flex;flex-direction:column;gap:1.25rem;align-items:center}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.8rem;color:#2f8f44}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;color:#142c1f}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#5a6a60;line-height:1.5}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{margin-top:.5rem;padding-inline:1.75rem}@media (max-width: 1024px){.cart-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.summary-card[_ngcontent-%COMP%]{position:static}}@media (max-width: 768px){.cart-hero[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.hero-copy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:none}.hero-metrics[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));width:100%}.cart-card[_ngcontent-%COMP%]{padding:1.35rem 1.25rem}.cart-card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.icon-button[_ngcontent-%COMP%]{align-self:flex-end}.cart-card-body[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.line-total[_ngcontent-%COMP%]{align-items:flex-start}}@media (max-width: 520px){.cart-page[_ngcontent-%COMP%]{padding-inline:1rem}.summary-card[_ngcontent-%COMP%]{padding:1.5rem}}"]}),n})();function yS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",30),s.NdJ("click",function(){const o=s.CHM(t).index,a=s.oxw(3);return s.KtG(a.selectImage(o))}),s.TgZ(1,"img",9),s.NdJ("error",function(i){const a=s.CHM(t).index,d=s.oxw(3);return s.KtG(d.handleThumbnailError(i,a))}),s.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=s.oxw(3);s.ekj("active",r===i.selectedImageIndex),s.uIk("aria-label","Ver imagen "+(r+1)),s.xp6(1),s.Q6J("src",t,s.LSH)("alt",i.product.name+" vista "+(r+1))}}function xS(n,e){if(1&n&&(s.TgZ(0,"div",28),s.YNc(1,yS,2,5,"button",29),s.qZA()),2&n){const t=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",t.productImages)}}function U1(n,e){if(1&n&&(s.TgZ(0,"div",35)(1,"span",18),s._uU(2,"Precio actual:"),s.qZA(),s.TgZ(3,"span",36),s._uU(4),s.ALo(5,"currency"),s.qZA(),s.TgZ(6,"span",37),s._uU(7),s.qZA(),s.TgZ(8,"span",38),s._uU(9),s.ALo(10,"currency"),s.qZA()()),2&n){const t=s.oxw(3);s.xp6(4),s.hij("",s.xi3(5,3,t.getCurrentPrice(),"USD")," por unidad"),s.xp6(3),s.hij("Descuento aplicado: ",t.getCurrentDiscount(),"%"),s.xp6(2),s.hij("Ahorro total: ",s.xi3(10,6,t.getTotalSavings(),"USD"),"")}}function zl(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",31)(1,"label"),s._uU(2,"Cantidad:"),s.qZA(),s.TgZ(3,"div",32)(4,"button",33),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updateQuantity(-1))}),s._uU(5,"-"),s.qZA(),s.TgZ(6,"span"),s._uU(7),s.qZA(),s.TgZ(8,"button",33),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updateQuantity(1))}),s._uU(9,"+"),s.qZA()(),s.YNc(10,U1,11,9,"div",34),s.qZA()}if(2&n){const t=s.oxw(2);s.xp6(4),s.Q6J("disabled",t.quantity<=1),s.xp6(3),s.Oqu(t.quantity),s.xp6(1),s.Q6J("disabled",t.quantity>=t.product.stock),s.xp6(2),s.Q6J("ngIf",t.quantity>=t.getQuantityTier1())}}function ig(n,e){if(1&n&&(s.TgZ(0,"p",39),s._uU(1),s.qZA()),2&n){const t=s.oxw(2);s.xp6(1),s.Oqu(t.errorMessage)}}function ib(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",3)(1,"button",4),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.goBack())}),s._UZ(2,"i",5),s._uU(3," Volver "),s.qZA(),s.TgZ(4,"div",6)(5,"div",7)(6,"div",8)(7,"img",9),s.NdJ("error",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.handleImageError(i))}),s.qZA(),s.TgZ(8,"span",10),s._uU(9),s.qZA(),s.TgZ(10,"span",11),s._uU(11),s.qZA()(),s.YNc(12,xS,2,1,"div",12),s.qZA(),s.TgZ(13,"div",13)(14,"h1"),s._uU(15),s.qZA(),s.TgZ(16,"p",14),s._uU(17),s.qZA(),s.TgZ(18,"div",15)(19,"div",16)(20,"p",17),s._uU(21),s.ALo(22,"currency"),s.qZA(),s.TgZ(23,"span",18),s._uU(24,"Precio unitario"),s.qZA()(),s.TgZ(25,"div",19)(26,"h3"),s._uU(27,"Precios por mayor"),s.qZA(),s.TgZ(28,"div",20)(29,"div",21)(30,"span",22),s._uU(31),s.qZA(),s.TgZ(32,"span",23),s._uU(33),s.ALo(34,"currency"),s.qZA(),s.TgZ(35,"span",24),s._uU(36),s.qZA()(),s.TgZ(37,"div",21)(38,"span",22),s._uU(39),s.qZA(),s.TgZ(40,"span",23),s._uU(41),s.ALo(42,"currency"),s.qZA(),s.TgZ(43,"span",24),s._uU(44),s.qZA()()()()(),s.YNc(45,zl,11,4,"div",25),s.YNc(46,ig,2,1,"p",2),s.TgZ(47,"button",26),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.addToCart())}),s._UZ(48,"i",27),s._uU(49),s.qZA()()()()}if(2&n){const t=s.oxw();s.xp6(7),s.Q6J("src",t.currentImage,s.LSH)("alt",t.product.name),s.xp6(2),s.Oqu(t.product.category_name),s.xp6(1),s.ekj("low-stock",t.product.stock<5)("out-of-stock",0===t.product.stock),s.xp6(1),s.hij(" ",0===t.product.stock?"Sin stock":t.product.stock<5?"\xdaltimas unidades":t.product.stock+" disponibles"," "),s.xp6(1),s.Q6J("ngIf",t.productImages.length>1),s.xp6(3),s.Oqu(t.product.name),s.xp6(2),s.Oqu(t.product.description),s.xp6(4),s.Oqu(s.xi3(22,22,t.product.price,"USD")),s.xp6(10),s.hij("",t.getQuantityTier1(),"+ unidades"),s.xp6(2),s.hij("",s.xi3(34,25,t.getWholesalePrice(t.getQuantityTier1()),"USD")," c/u"),s.xp6(3),s.hij("",t.getDiscountTier1(),"% descuento"),s.xp6(3),s.hij("",t.getQuantityTier2(),"+ unidades"),s.xp6(2),s.hij("",s.xi3(42,28,t.getWholesalePrice(t.getQuantityTier2()),"USD")," c/u"),s.xp6(3),s.hij("",t.getDiscountTier2(),"% descuento"),s.xp6(1),s.Q6J("ngIf",t.product.stock>0),s.xp6(1),s.Q6J("ngIf",t.errorMessage),s.xp6(1),s.Q6J("disabled",0===t.product.stock),s.xp6(2),s.hij(" ",0===t.product.stock?"Sin stock":"Agregar al carrito"," ")}}function sb(n,e){1&n&&(s.TgZ(0,"div",40)(1,"p"),s._uU(2,"Cargando detalles del producto..."),s.qZA()())}function ob(n,e){if(1&n&&(s.TgZ(0,"div",39)(1,"p"),s._uU(2),s.qZA()()),2&n){const t=s.oxw();s.xp6(2),s.Oqu(t.errorMessage)}}let C3=(()=>{const e=class{constructor(r,i,o,a,d,h){this.route=r,this.router=i,this.location=o,this.productService=a,this.cartService=d,this.discountSettingsService=h,this.product=null,this.isLoading=!0,this.errorMessage=null,this.quantity=1,this.discountSettings=null,this.productImages=[],this.selectedImageIndex=0,this.fallbackImage="https://images.unsplash.com/photo-1501426026826-31c667bdf23d?auto=format&fit=crop&w=900&q=60"}ngOnInit(){const r=this.route.snapshot.paramMap.get("id");r?(this.loadProduct(r),this.loadDiscountSettings()):(this.errorMessage="Product ID not found.",this.isLoading=!1)}loadProduct(r){this.isLoading=!0,this.errorMessage=null,this.productService.getProductById(r).subscribe({next:i=>{this.product=i,this.isLoading=!1,i?this.setProductImages(i):(this.errorMessage="Product not found",this.setProductImages(null))},error:i=>{console.error("Error loading product:",i),this.isLoading=!1,this.errorMessage="Could not load product. Please try again later."}})}loadDiscountSettings(){this.discountSettingsService.getSettings().subscribe({next:r=>{this.discountSettings=r},error:r=>{console.error("Error loading discount settings:",r)}})}getWholesalePrice(r){return this.product&&this.discountSettings?r>=this.discountSettings.tier2_quantity?this.product.price*(1-this.discountSettings.tier2_discount/100):r>=this.discountSettings.tier1_quantity?this.product.price*(1-this.discountSettings.tier1_discount/100):this.product.price:0}getCurrentPrice(){return this.product&&this.discountSettings?this.quantity>=this.discountSettings.tier2_quantity?this.getWholesalePrice(this.discountSettings.tier2_quantity):this.quantity>=this.discountSettings.tier1_quantity?this.getWholesalePrice(this.discountSettings.tier1_quantity):this.product.price:0}getCurrentDiscount(){return this.product&&this.discountSettings?this.quantity>=this.discountSettings.tier2_quantity?this.discountSettings.tier2_discount:this.quantity>=this.discountSettings.tier1_quantity?this.discountSettings.tier1_discount:0:0}getTotalSavings(){return this.product?this.product.price*this.quantity-this.getCurrentPrice()*this.quantity:0}addToCart(){if(this.product){if(this.quantity>this.product.stock)return void(this.errorMessage="Selected quantity exceeds available stock");const r=this.getCurrentPrice();this.cartService.addToCart({id:this.product.id,name:this.product.name,price:r,originalPrice:this.product.price,quantity:this.quantity}),this.router.navigate(["/carrito"])}}updateQuantity(r){const i=this.quantity+r;this.product&&i>=1&&i<=this.product.stock&&(this.quantity=i,this.errorMessage="")}goBack(){this.location.back()}getDiscountTier1(){return this.discountSettings?.tier1_discount||0}getDiscountTier2(){return this.discountSettings?.tier2_discount||0}getQuantityTier1(){return this.discountSettings?.tier1_quantity||5}getQuantityTier2(){return this.discountSettings?.tier2_quantity||10}get currentImage(){return this.productImages[this.selectedImageIndex]??this.fallbackImage}selectImage(r){r!==this.selectedImageIndex&&r>=0&&r<this.productImages.length&&(this.selectedImageIndex=r)}handleImageError(r){const i=r.target;i&&i.src!==this.fallbackImage&&(i.onerror=null,i.src=this.fallbackImage)}handleThumbnailError(r,i){const o=r.target;o&&(o.src!==this.fallbackImage&&(o.onerror=null,o.src=this.fallbackImage),i>=0&&i<this.productImages.length&&(this.productImages[i]=this.fallbackImage))}setProductImages(r){const i=this.extractImageUrls(r);this.productImages=i.length?i:[this.fallbackImage],this.selectedImageIndex=0}extractImageUrls(r){return r?Array.isArray(r.image_urls)&&r.image_urls.length?r.image_urls.filter(i=>"string"==typeof i&&i.trim().length>0):"string"==typeof r.image&&r.image.trim().length>0?[r.image.trim()]:[]:[]}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(k.gz),s.Y36(k.F0),s.Y36(te.Ye),s.Y36(ol.M),s.Y36(zd),s.Y36(nb.r))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-product-details"]],decls:3,vars:3,consts:[["class","product-details-container",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"product-details-container"],[1,"btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"product-content"],[1,"product-image"],[1,"main-image"],[3,"src","alt","error"],[1,"product-category"],[1,"stock-badge"],["class","thumbnail-strip",4,"ngIf"],[1,"product-info"],[1,"description"],[1,"pricing-info"],[1,"regular-price"],[1,"price"],[1,"price-label"],[1,"wholesale-pricing"],[1,"wholesale-tiers"],[1,"tier"],[1,"tier-quantity"],[1,"tier-price"],[1,"tier-discount"],["class","quantity-selector",4,"ngIf"],[1,"btn-add-to-cart",3,"disabled","click"],[1,"fas","fa-cart-plus"],[1,"thumbnail-strip"],["type","button","class","thumbnail",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"thumbnail",3,"click"],[1,"quantity-selector"],[1,"quantity-controls"],[3,"disabled","click"],["class","current-price",4,"ngIf"],[1,"current-price"],[1,"discounted-price"],[1,"discount-percentage"],[1,"savings"],[1,"error-message"],[1,"loading"]],template:function(i,o){1&i&&(s.YNc(0,ib,50,31,"div",0),s.YNc(1,sb,3,0,"div",1),s.YNc(2,ob,3,1,"div",2)),2&i&&(s.Q6J("ngIf",!o.isLoading&&!o.errorMessage&&o.product),s.xp6(1),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",o.errorMessage))},dependencies:[te.sg,te.O5,te.H9],styles:[".product-details-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:0 1rem}.btn-back[_ngcontent-%COMP%]{background:none;border:none;color:#3c9c36;font-size:1rem;cursor:pointer;padding:.5rem 0;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;transition:color .3s ease}.btn-back[_ngcontent-%COMP%]:hover{color:#2ecc71}.product-content[_ngcontent-%COMP%]{display:flex;gap:2rem;background-color:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a;overflow:hidden}.product-image[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:1rem}.main-image[_ngcontent-%COMP%]{position:relative;min-height:400px;border-radius:16px;overflow:hidden;background:linear-gradient(135deg,rgba(12,100,50,.08),rgba(255,255,255,.85));box-shadow:0 20px 40px #0f172a2e}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.thumbnail-strip[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem;justify-content:center}.thumbnail-strip[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{border:2px solid transparent;border-radius:15px;padding:0;background:none;cursor:pointer;width:82px;height:82px;overflow:hidden;transition:border-color .2s ease,transform .2s ease;box-shadow:0 12px 24px #0f172a1f}.thumbnail-strip[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.thumbnail-strip[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]:hover{border-color:#2f8f4459}.thumbnail-strip[_ngcontent-%COMP%]   .thumbnail.active[_ngcontent-%COMP%]{border-color:#2f8f44;transform:translateY(-3px);box-shadow:0 20px 36px #2f8f4440}.product-category[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background-color:#3c9c36cc;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem}.stock-badge[_ngcontent-%COMP%]{position:absolute;bottom:1rem;right:1rem;background-color:#3498dbe6;color:#fff;padding:.5rem 1rem;border-radius:20px;font-size:.9rem}.stock-badge.low-stock[_ngcontent-%COMP%]{background-color:#f39c12e6}.stock-badge.out-of-stock[_ngcontent-%COMP%]{background-color:#e74c3ce6}.product-info[_ngcontent-%COMP%]{flex:1;padding:2rem}h1[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin-bottom:1rem}.description[_ngcontent-%COMP%]{color:#7f8c8d;line-height:1.6;margin-bottom:1.5rem}.pricing-info[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1.5rem;border-radius:10px;margin-bottom:1.5rem}.regular-price[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.price[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#2c3e50;margin-bottom:.5rem}.price-label[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem}.wholesale-pricing[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;padding-top:1.5rem}.wholesale-pricing[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-bottom:1rem;font-size:1.2rem}.wholesale-tiers[_ngcontent-%COMP%]{display:grid;gap:1rem}.tier[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-radius:8px;display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:1rem;text-align:center;box-shadow:0 2px 4px #0000000d}.tier-quantity[_ngcontent-%COMP%]{font-weight:700;color:#2c3e50}.tier-price[_ngcontent-%COMP%]{font-size:1.2rem;color:#3c9c36;font-weight:700}.tier-discount[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem}.quantity-selector[_ngcontent-%COMP%]{margin-bottom:1.5rem}.quantity-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#2c3e50;font-weight:700}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3c9c36;color:#fff;border:none;width:40px;height:40px;border-radius:8px;cursor:pointer;transition:background-color .3s ease;font-size:1.2rem}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#2ecc71}.quantity-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;min-width:40px;text-align:center;font-weight:700;color:#2c3e50}.current-price[_ngcontent-%COMP%]{background-color:#e8f5e9;padding:1rem;border-radius:8px;margin-top:1rem;text-align:center}.current-price[_ngcontent-%COMP%]   .price-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.discounted-price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#3c9c36;display:block;margin-bottom:.5rem}.discount-percentage[_ngcontent-%COMP%]{color:#3c9c36;font-weight:700;display:block;margin-bottom:.5rem}.savings[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem;font-weight:700}.btn-add-to-cart[_ngcontent-%COMP%]{width:100%;background-color:#3c9c36;color:#fff;border:none;padding:1rem;border-radius:8px;font-size:1.1rem;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.btn-add-to-cart[_ngcontent-%COMP%]:disabled{background-color:#bdc3c7;cursor:not-allowed}.btn-add-to-cart[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#2ecc71}.error-message[_ngcontent-%COMP%]{color:#e74c3c;margin:1rem 0;text-align:center;padding:.75rem;background-color:#fde8e8;border-radius:8px}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#7f8c8d}@media (max-width: 768px){.product-content[_ngcontent-%COMP%]{flex-direction:column}.main-image[_ngcontent-%COMP%]{min-height:300px}.product-info[_ngcontent-%COMP%]{padding:1.5rem}.tier[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.5rem}.thumbnail-strip[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{width:70px;height:70px}}"]}),n})();var E3=Z(6805),T3=Z(930);function Gl(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new T3.Hp({next:a=>{r(a),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new E3.K)}});n.subscribe(o)})}const B1=["createFileInput"],S3=["editFileInput"];function A3(n,e){if(1&n&&(s.TgZ(0,"div",58),s._UZ(1,"i",59),s._uU(2),s.qZA()),2&n){const t=s.oxw();s.xp6(2),s.hij(" ",t.errorMessage," ")}}function ab(n,e){if(1&n&&(s.TgZ(0,"span",60),s._UZ(1,"i",61),s._uU(2),s.qZA()),2&n){const t=s.oxw();s.xp6(2),s.AsE(" ",t.activeFilterCount," ",1===t.activeFilterCount?"filtro activo":"filtros activos"," ")}}function wS(n,e){if(1&n&&(s.TgZ(0,"option",62),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij(" ",t.name," ")}}function bS(n,e){if(1&n&&(s.TgZ(0,"span",63),s._UZ(1,"i",61),s._uU(2),s.qZA()),2&n){const t=s.oxw();s.xp6(2),s.AsE(" ",t.activeFilterCount," ",1===t.activeFilterCount?"filtro activo":"filtros activos"," ")}}function CS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"tr")(1,"td",64),s._UZ(2,"img",65),s.qZA(),s.TgZ(3,"td",66),s._uU(4),s.qZA(),s.TgZ(5,"td",67),s._uU(6),s.ALo(7,"slice"),s.qZA(),s.TgZ(8,"td",68),s._uU(9),s.ALo(10,"currency"),s.qZA(),s.TgZ(11,"td",69),s._uU(12),s.qZA(),s.TgZ(13,"td",70),s._uU(14),s.ALo(15,"currency"),s.qZA(),s.TgZ(16,"td",71),s._uU(17),s.qZA(),s.TgZ(18,"td",72),s._uU(19),s.qZA(),s.TgZ(20,"td",73),s._uU(21),s.qZA(),s.TgZ(22,"td",74)(23,"div",75)(24,"button",76),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw();return s.KtG(a.editProduct(o))}),s._UZ(25,"i",77),s.qZA(),s.TgZ(26,"button",78),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw();return s.KtG(a.deleteProduct(o))}),s._UZ(27,"i",79),s.qZA()()()()}if(2&n){const t=e.$implicit,r=s.oxw();s.xp6(2),s.Q6J("src",r.getPrimaryImage(t),s.LSH)("alt",t.name),s.xp6(2),s.Oqu(t.name),s.xp6(2),s.AsE(" ",s.Dn7(7,15,t.description,0,50),"",t.description.length>50?"...":""," "),s.xp6(3),s.Oqu(s.xi3(10,19,t.cost,"USD")),s.xp6(3),s.hij("",t.markup_percentage,"%"),s.xp6(2),s.Oqu(s.xi3(15,22,t.price,"USD")),s.xp6(2),s.ekj("low-stock",t.stock<5)("out-of-stock",0===t.stock),s.xp6(1),s.hij(" ",t.stock," "),s.xp6(2),s.Oqu(t.category_name),s.xp6(2),s.Oqu(t.seasonal?"S\xed":"No")}}function ES(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"td",80),s._UZ(2,"i",81),s.TgZ(3,"span"),s._uU(4),s.qZA()()()),2&n){const t=s.oxw();s.xp6(4),s.hij(" ",t.hasActiveFilters?"No encontramos productos que coincidan con los filtros aplicados.":"Todav\xeda no hay productos registrados."," ")}}function cb(n,e){if(1&n&&(s.TgZ(0,"option",93),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("ngValue",t),s.xp6(1),s.Oqu(t)}}const la=function(){return{standalone:!0}};function TS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",82)(1,"div",83),s._uU(2),s.qZA(),s.TgZ(3,"div",84)(4,"label",85),s._uU(5,"Productos por p\xe1gina"),s.qZA(),s.TgZ(6,"select",86),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.onPageSizeChange(i))}),s.YNc(7,cb,2,2,"option",87),s.qZA(),s.TgZ(8,"button",88),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.prevPage())}),s._UZ(9,"i",89),s.qZA(),s.TgZ(10,"span",90),s._uU(11),s.qZA(),s.TgZ(12,"button",91),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.nextPage())}),s._UZ(13,"i",92),s.qZA()()()}if(2&n){const t=s.oxw();s.xp6(2),s.lnq(" Mostrando ",t.displayRangeStart," - ",t.displayRangeEnd," de ",t.filteredProducts.length," "),s.xp6(4),s.Q6J("ngModel",t.pageSize)("ngModelOptions",s.DdM(10,la)),s.xp6(1),s.Q6J("ngForOf",t.pageSizeOptions),s.xp6(1),s.Q6J("disabled",1===t.currentPage),s.xp6(3),s.AsE("P\xe1gina ",t.currentPage," de ",t.totalPages,""),s.xp6(1),s.Q6J("disabled",t.currentPage===t.totalPages||!t.filteredProducts.length)}}function V1(n,e){if(1&n&&(s.TgZ(0,"option",62),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij(" ",t.name," ")}}function SS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",140),s._UZ(1,"img",141),s.TgZ(2,"button",142),s.NdJ("click",function(){const o=s.CHM(t).index,a=s.oxw(4);return s.KtG(a.removeEditExistingImage(o))}),s._UZ(3,"i",136),s.qZA(),s.TgZ(4,"span",143),s._uU(5,"Actual"),s.qZA()()}if(2&n){const t=e.$implicit,r=e.index;s.xp6(1),s.MGl("alt","Imagen actual ",r+1,""),s.Q6J("src",t,s.LSH)}}function ps(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",144),s._UZ(1,"img",141),s.TgZ(2,"button",145),s.NdJ("click",function(){const o=s.CHM(t).index,a=s.oxw(4);return s.KtG(a.removeEditNewImage(o))}),s._UZ(3,"i",136),s.qZA(),s.TgZ(4,"span",143),s._uU(5,"Nueva"),s.qZA()()}if(2&n){const t=e.$implicit,r=e.index;s.xp6(1),s.MGl("alt","Nueva imagen ",r+1,""),s.Q6J("src",t,s.LSH)}}function AS(n,e){if(1&n&&(s.TgZ(0,"div",137),s.YNc(1,SS,6,2,"div",138),s.YNc(2,ps,6,2,"div",139),s.qZA()),2&n){const t=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",t.editExistingImages),s.xp6(1),s.Q6J("ngForOf",t.editNewImagePreviews)}}function MS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"form",97),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.saveProduct())}),s.TgZ(1,"div",98)(2,"h4"),s._uU(3,"Detalles generales"),s.qZA(),s.TgZ(4,"div",99)(5,"div",100)(6,"label",101),s._uU(7,"Nombre del producto"),s.qZA(),s.TgZ(8,"input",102),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.name=i)}),s.qZA(),s.TgZ(9,"small"),s._uU(10,"As\xed se mostrar\xe1 en el cat\xe1logo."),s.qZA()(),s.TgZ(11,"div",103)(12,"label",104),s._uU(13,"Categor\xeda"),s.qZA(),s.TgZ(14,"select",105),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.category_id=i)}),s.TgZ(15,"option",30),s._uU(16,"Seleccion\xe1 una categor\xeda"),s.qZA(),s.YNc(17,V1,2,2,"option",31),s.qZA(),s.TgZ(18,"small"),s._uU(19,"Organiza el producto dentro de la tienda."),s.qZA()(),s.TgZ(20,"div",106)(21,"label",107),s._uU(22,"Descripci\xf3n"),s.qZA(),s.TgZ(23,"textarea",108),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.description=i)}),s.qZA(),s.TgZ(24,"small"),s._uU(25,"Inclu\xed materiales, cuidados o notas destacadas."),s.qZA()()()(),s.TgZ(26,"div",109)(27,"div")(28,"h4"),s._uU(29,"Rentabilidad"),s.qZA(),s.TgZ(30,"div",110)(31,"div",111)(32,"label",112),s._uU(33,"Costo"),s.qZA(),s.TgZ(34,"input",113),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.cost=i)})("ngModelChange",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updatePrice())}),s.qZA(),s.TgZ(35,"small"),s._uU(36,"Indic\xe1 el costo real del art\xedculo."),s.qZA()(),s.TgZ(37,"div",114)(38,"label",115),s._uU(39,"Porcentaje de margen"),s.qZA(),s.TgZ(40,"input",116),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.markup_percentage=i)})("ngModelChange",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updatePrice())}),s.qZA(),s.TgZ(41,"small"),s._uU(42,"Calcularemos autom\xe1ticamente el precio final."),s.qZA()(),s.TgZ(43,"div",117)(44,"label",118),s._uU(45,"Stock disponible"),s.qZA(),s.TgZ(46,"input",119),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.stock=i)}),s.qZA(),s.TgZ(47,"small"),s._uU(48,"Los clientes ver\xe1n alertas cuando el stock sea bajo."),s.qZA()(),s.TgZ(49,"div",120)(50,"label"),s._uU(51,"Temporada"),s.qZA(),s.TgZ(52,"label",121)(53,"input",122),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingProduct.seasonal=i)}),s.qZA(),s._UZ(54,"span",123),s.qZA(),s.TgZ(55,"small"),s._uU(56,"Activa esta opci\xf3n si solo se vende por temporada."),s.qZA()()()(),s.TgZ(57,"div",124)(58,"span"),s._uU(59,"Precio final sugerido"),s.qZA(),s.TgZ(60,"p"),s._uU(61),s.ALo(62,"currency"),s.qZA(),s.TgZ(63,"small"),s._uU(64,"Se actualiza autom\xe1ticamente seg\xfan costo y margen."),s.qZA()()(),s.TgZ(65,"div",98)(66,"h4"),s._uU(67,"Im\xe1genes del producto"),s.qZA(),s.TgZ(68,"div",125)(69,"input",126,127),s.NdJ("change",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.onEditFilesSelected(i))}),s.qZA(),s.TgZ(71,"div",128),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.triggerFileInput("edit"))}),s._UZ(72,"i",129),s.TgZ(73,"p"),s._uU(74,"Click o arrastra las im\xe1genes aqu\xed"),s.qZA(),s.TgZ(75,"small"),s._uU(76),s.qZA(),s.TgZ(77,"button",130),s.NdJ("click",function(i){return s.CHM(t),s.oxw(2).triggerFileInput("edit"),s.KtG(i.stopPropagation())}),s._uU(78," Seleccionar archivos "),s.qZA()(),s.YNc(79,AS,3,2,"div",131),s.qZA()(),s.TgZ(80,"div",132)(81,"button",133),s._UZ(82,"i",134),s._uU(83," Guardar cambios "),s.qZA(),s.TgZ(84,"button",135),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.cancelEdit())}),s._UZ(85,"i",136),s._uU(86," Cancelar "),s.qZA()()()}if(2&n){const t=s.oxw(2);s.xp6(8),s.Q6J("ngModel",t.editingProduct.name),s.xp6(6),s.Q6J("ngModel",t.editingProduct.category_id),s.xp6(3),s.Q6J("ngForOf",t.categories),s.xp6(6),s.Q6J("ngModel",t.editingProduct.description),s.xp6(11),s.Q6J("ngModel",t.editingProduct.cost),s.xp6(6),s.Q6J("ngModel",t.editingProduct.markup_percentage),s.xp6(6),s.Q6J("ngModel",t.editingProduct.stock),s.xp6(7),s.Q6J("ngModel",t.editingProduct.seasonal),s.xp6(8),s.Oqu(s.xi3(62,14,t.editingProduct.price||0,"USD")),s.xp6(15),s.AsE("Pod\xe9s cargar hasta ",t.maxImages," im\xe1genes (restan ",t.getRemainingSlots("edit"),")"),s.xp6(1),s.Q6J("disabled",0===t.getRemainingSlots("edit")),s.xp6(2),s.Q6J("ngIf",t.editExistingImages.length||t.editNewImagePreviews.length),s.xp6(2),s.Q6J("disabled",t.isSubmitting)}}function Z1(n,e){if(1&n&&(s.TgZ(0,"option",62),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.id),s.xp6(1),s.hij(" ",t.name," ")}}function lb(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",144),s._UZ(1,"img",141),s.TgZ(2,"button",160),s.NdJ("click",function(){const o=s.CHM(t).index,a=s.oxw(4);return s.KtG(a.removeCreateImage(o))}),s._UZ(3,"i",136),s.qZA(),s.TgZ(4,"span",143),s._uU(5,"Nueva"),s.qZA()()}if(2&n){const t=e.$implicit,r=e.index;s.xp6(1),s.MGl("alt","Imagen seleccionada ",r+1,""),s.Q6J("src",t,s.LSH)}}function IS(n,e){if(1&n&&(s.TgZ(0,"div",137),s.YNc(1,lb,6,2,"div",139),s.qZA()),2&n){const t=s.oxw(3);s.xp6(1),s.Q6J("ngForOf",t.createImagePreviews)}}function PS(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"form",97),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.onSubmit())}),s.TgZ(1,"div",98)(2,"h4"),s._uU(3,"Detalles generales"),s.qZA(),s.TgZ(4,"div",99)(5,"div",100)(6,"label",146),s._uU(7,"Nombre del producto"),s.qZA(),s.TgZ(8,"input",147),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.name=i)}),s.qZA(),s.TgZ(9,"small"),s._uU(10,"As\xed se mostrar\xe1 en el cat\xe1logo."),s.qZA()(),s.TgZ(11,"div",103)(12,"label",148),s._uU(13,"Categor\xeda"),s.qZA(),s.TgZ(14,"select",149),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.category_id=i)}),s.TgZ(15,"option",30),s._uU(16,"Seleccion\xe1 una categor\xeda"),s.qZA(),s.YNc(17,Z1,2,2,"option",31),s.qZA(),s.TgZ(18,"small"),s._uU(19,"Organiza el producto dentro de la tienda."),s.qZA()(),s.TgZ(20,"div",106)(21,"label",150),s._uU(22,"Descripci\xf3n"),s.qZA(),s.TgZ(23,"textarea",151),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.description=i)}),s.qZA(),s.TgZ(24,"small"),s._uU(25,"Inclu\xed materiales, cuidados o notas destacadas."),s.qZA()()()(),s.TgZ(26,"div",109)(27,"div")(28,"h4"),s._uU(29,"Rentabilidad"),s.qZA(),s.TgZ(30,"div",110)(31,"div",111)(32,"label",152),s._uU(33,"Costo"),s.qZA(),s.TgZ(34,"input",153),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.cost=i)})("ngModelChange",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updatePrice())}),s.qZA(),s.TgZ(35,"small"),s._uU(36,"Indic\xe1 el costo real del art\xedculo."),s.qZA()(),s.TgZ(37,"div",114)(38,"label",154),s._uU(39,"Porcentaje de margen"),s.qZA(),s.TgZ(40,"input",155),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.markup_percentage=i)})("ngModelChange",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updatePrice())}),s.qZA(),s.TgZ(41,"small"),s._uU(42,"Calcularemos autom\xe1ticamente el precio final."),s.qZA()(),s.TgZ(43,"div",117)(44,"label",156),s._uU(45,"Stock disponible"),s.qZA(),s.TgZ(46,"input",157),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.stock=i)}),s.qZA(),s.TgZ(47,"small"),s._uU(48,"Los clientes ver\xe1n alertas cuando el stock sea bajo."),s.qZA()(),s.TgZ(49,"div",120)(50,"label"),s._uU(51,"Temporada"),s.qZA(),s.TgZ(52,"label",121)(53,"input",122),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.product.seasonal=i)}),s.qZA(),s._UZ(54,"span",123),s.qZA(),s.TgZ(55,"small"),s._uU(56,"Activa esta opci\xf3n si solo se vende por temporada."),s.qZA()()()(),s.TgZ(57,"div",124)(58,"span"),s._uU(59,"Precio final sugerido"),s.qZA(),s.TgZ(60,"p"),s._uU(61),s.ALo(62,"currency"),s.qZA(),s.TgZ(63,"small"),s._uU(64,"Se actualiza autom\xe1ticamente seg\xfan costo y margen."),s.qZA()()(),s.TgZ(65,"div",98)(66,"h4"),s._uU(67,"Im\xe1genes del producto"),s.qZA(),s.TgZ(68,"div",125)(69,"input",158,159),s.NdJ("change",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.onCreateFilesSelected(i))}),s.qZA(),s.TgZ(71,"div",128),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.triggerFileInput("create"))}),s._UZ(72,"i",129),s.TgZ(73,"p"),s._uU(74,"Click o arrastra las im\xe1genes aqu\xed"),s.qZA(),s.TgZ(75,"small"),s._uU(76),s.qZA(),s.TgZ(77,"button",130),s.NdJ("click",function(i){return s.CHM(t),s.oxw(2).triggerFileInput("create"),s.KtG(i.stopPropagation())}),s._uU(78," Seleccionar archivos "),s.qZA()(),s.YNc(79,IS,2,1,"div",131),s.qZA()(),s.TgZ(80,"div",132)(81,"button",133),s._UZ(82,"i",6),s._uU(83," Agregar producto "),s.qZA(),s.TgZ(84,"button",135),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.showAddForm=!1)}),s._UZ(85,"i",136),s._uU(86," Cancelar "),s.qZA()()()}if(2&n){const t=s.oxw(2);s.xp6(8),s.Q6J("ngModel",t.product.name),s.xp6(6),s.Q6J("ngModel",t.product.category_id),s.xp6(3),s.Q6J("ngForOf",t.categories),s.xp6(6),s.Q6J("ngModel",t.product.description),s.xp6(11),s.Q6J("ngModel",t.product.cost),s.xp6(6),s.Q6J("ngModel",t.product.markup_percentage),s.xp6(6),s.Q6J("ngModel",t.product.stock),s.xp6(7),s.Q6J("ngModel",t.product.seasonal),s.xp6(8),s.Oqu(s.xi3(62,14,t.product.price||0,"USD")),s.xp6(15),s.AsE("Pod\xe9s cargar hasta ",t.maxImages," im\xe1genes (restan ",t.getRemainingSlots("create"),")"),s.xp6(1),s.Q6J("disabled",0===t.getRemainingSlots("create")),s.xp6(2),s.Q6J("ngIf",t.createImagePreviews.length),s.xp6(2),s.Q6J("disabled",t.isSubmitting)}}function DS(n,e){if(1&n&&(s.TgZ(0,"div",94)(1,"div",95)(2,"h3"),s._uU(3),s.qZA(),s.YNc(4,MS,87,17,"form",96),s.YNc(5,PS,87,17,"form",96),s.qZA()()),2&n){const t=s.oxw();s.xp6(3),s.Oqu(t.editingProduct?"Editar producto":"Agregar producto"),s.xp6(1),s.Q6J("ngIf",t.editingProduct),s.xp6(1),s.Q6J("ngIf",!t.editingProduct)}}let kS=(()=>{const e=class{get lowStockCount(){return this.products.filter(r=>r.stock<5).length}get seasonalProductCount(){return this.products.filter(r=>r.seasonal).length}constructor(r,i,o,a){this.productService=r,this.categoryService=i,this.imageService=o,this.supabaseService=a,this.maxImages=3,this.imagePlaceholder="https://images.unsplash.com/photo-1521572267360-ee0c2909d518?auto=format&fit=crop&w=400&q=60",this.products=[],this.editingProduct=null,this.product={name:"",description:"",price:0,cost:0,markup_percentage:30,image:"",image_urls:[],category_id:"",stock:0,seasonal:!1},this.categories=[],this.errorMessage="",this.isSubmitting=!1,this.showAddForm=!1,this.isLoadingProducts=!1,this.filteredProducts=[],this.paginatedProducts=[],this.pageSizeOptions=[10,20,50],this.pageSize=10,this.currentPage=1,this.totalPages=1,this.createImagePreviews=[],this.createSelectedFiles=[],this.editExistingImages=[],this.editSelectedFiles=[],this.editNewImagePreviews=[],this.originalEditImages=[],this.filters=this.createDefaultFilters()}ngOnInit(){this.loadProducts(),this.loadCategories()}loadCategories(){this.categoryService.getCategories().subscribe({next:r=>{this.categories=r,this.ensureSupabaseCategoryIds()},error:r=>{console.error("Error loading categories:",r),this.errorMessage="Could not load categories. Please try again later."}})}ensureSupabaseCategoryIds(){var r=this;return(0,be.Z)(function*(){try{const i=[...r.categories],o=r.getCategoryNameFromList(i,r.product.category_id),a=r.editingProduct?r.getCategoryNameFromList(i,r.editingProduct.category_id):null,{data:d,error:h}=yield r.supabaseService.client.from("product_categories").select("id, name").order("name",{ascending:!0});if(h)throw h;if(!d||!d.length)return;const p=new Map(r.categories.map(T=>[r.normalizeCategoryName(T.name),T])),m=d.map(T=>{const M=r.normalizeCategoryName(T.name),R=p.get(M);return R?{...R,id:T.id}:{id:T.id,name:T.name,image:r.getFallbackImage(T.name),productCount:0,slug:r.generateSlug(T.name),description:""}}),y=r.categories.filter(T=>!d.some(M=>r.normalizeCategoryName(M.name)===r.normalizeCategoryName(T.name)));r.categories=[...m,...y],r.rehydrateSelectedCategoryIds(o,a)}catch(i){console.error("Error synchronizing categories with Supabase:",i)}})()}normalizeCategoryName(r){return(r||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}generateSlug(r){return this.normalizeCategoryName(r).replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}getFallbackImage(r){return"https://images.unsplash.com/photo-1528712306091-ed0763094c98?auto=format&fit=crop&w=600&q=80"}getCategoryNameFromList(r,i){if(!i)return null;const o=r.find(a=>a.id===i);return o?o.name:null}rehydrateSelectedCategoryIds(r,i){if(r){const o=this.findCategoryIdByName(r);o&&(this.product.category_id=o)}if(i&&this.editingProduct){const o=this.findCategoryIdByName(i);o&&(this.editingProduct.category_id=o)}}findCategoryIdByName(r){if(!r)return;const i=this.normalizeCategoryName(r);return this.categories.find(a=>this.normalizeCategoryName(a.name)===i)?.id}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts().subscribe({next:r=>{this.products=r,this.errorMessage="",this.applyFilters(),this.isLoadingProducts=!1},error:r=>{console.error("Error loading products:",r),this.errorMessage="Could not load products. Please try again later.",this.filteredProducts=[],this.paginatedProducts=[],this.totalPages=1,this.isLoadingProducts=!1}})}onFilterChange(){this.applyFilters()}resetFilters(){this.filters=this.createDefaultFilters(),this.applyFilters()}onPageSizeChange(r){const i=Number(r);!i||i<=0||(this.pageSize=i,this.currentPage=1,this.updatePagination())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage+=1,this.updatePagination())}prevPage(){this.currentPage>1&&(this.currentPage-=1,this.updatePagination())}get displayRangeStart(){return this.filteredProducts.length?(this.currentPage-1)*this.pageSize+1:0}get displayRangeEnd(){return this.filteredProducts.length?this.displayRangeStart+this.paginatedProducts.length-1:0}get activeFilterCount(){const{name:r,description:i,categoryId:o,seasonal:a,minCost:d,maxCost:h,minPrice:p,maxPrice:m,minStock:y,maxStock:T}=this.filters;let M=0;return r.trim()&&(M+=1),i.trim()&&(M+=1),o&&(M+=1),"all"!==a&&(M+=1),null!==d&&(M+=1),null!==h&&(M+=1),null!==p&&(M+=1),null!==m&&(M+=1),null!==y&&(M+=1),null!==T&&(M+=1),M}get hasActiveFilters(){return this.activeFilterCount>0}createDefaultFilters(){return{name:"",description:"",categoryId:"",seasonal:"all",minCost:null,maxCost:null,minPrice:null,maxPrice:null,minStock:null,maxStock:null}}matchesFilters(r){const{name:i,description:o,categoryId:a,seasonal:d,minCost:h,maxCost:p,minPrice:m,maxPrice:y,minStock:T,maxStock:M}=this.filters,R=i.trim().toLowerCase();if(R&&!r.name.toLowerCase().includes(R))return!1;const D=o.trim().toLowerCase();return!(D&&!(r.description||"").toLowerCase().includes(D)||a&&r.category_id!==a||"true"===d&&!r.seasonal||"false"===d&&r.seasonal||null!==h&&r.cost<h||null!==p&&r.cost>p||null!==m&&r.price<m||null!==y&&r.price>y||null!==T&&r.stock<T||null!==M&&r.stock>M)}applyFilters(r=!0){this.filteredProducts=this.products.filter(i=>this.matchesFilters(i)),r&&(this.currentPage=1),this.updatePagination()}updatePagination(){this.totalPages=Math.max(Math.ceil(this.filteredProducts.length/this.pageSize),1),this.currentPage>this.totalPages&&(this.currentPage=this.totalPages);const i=(this.currentPage-1)*this.pageSize;this.paginatedProducts=this.filteredProducts.slice(i,i+this.pageSize)}triggerFileInput(r){this.getRemainingSlots(r)<=0?this.errorMessage=`Solo pod\xe9s subir hasta ${this.maxImages} im\xe1genes por producto.`:("create"===r?this.createFileInput:this.editFileInput)?.nativeElement?.click()}onCreateFilesSelected(r){this.handleFilesSelected(r,"create")}onEditFilesSelected(r){this.handleFilesSelected(r,"edit")}removeCreateImage(r){this.createSelectedFiles.splice(r,1),this.createImagePreviews.splice(r,1)}removeEditExistingImage(r){this.editExistingImages.splice(r,1),this.editingProduct&&(this.editingProduct.image_urls=[...this.editExistingImages],this.editingProduct.image=this.editExistingImages[0]??this.editingProduct.image)}removeEditNewImage(r){this.editSelectedFiles.splice(r,1),this.editNewImagePreviews.splice(r,1)}getRemainingSlots(r){return Math.max(this.maxImages-this.getCurrentImageCount(r),0)}handleFilesSelected(r,i){const o=r.target;if(!o?.files?.length)return void this.resetNativeFileInput(i);const a=Array.from(o.files),d=this.getRemainingSlots(i);if(d<=0)return this.errorMessage=`Solo pod\xe9s subir hasta ${this.maxImages} im\xe1genes por producto.`,void this.resetNativeFileInput(i);const h=a.slice(0,d);for(const p of h){const m=this.imageService.validateImage(p);if(m){this.errorMessage=m;continue}const y=new FileReader;y.onload=T=>{const M=T.target?.result;M&&("create"===i?this.createImagePreviews.push(M):this.editNewImagePreviews.push(M))},y.readAsDataURL(p),"create"===i?this.createSelectedFiles.push(p):this.editSelectedFiles.push(p)}a.length>h.length&&(this.errorMessage=`Solo pod\xe9s subir hasta ${this.maxImages} im\xe1genes por producto.`),this.resetNativeFileInput(i)}getCurrentImageCount(r){return"create"===r?this.createSelectedFiles.length:this.editExistingImages.length+this.editSelectedFiles.length}resetNativeFileInput(r){const i="create"===r?this.createFileInput:this.editFileInput;i?.nativeElement&&(i.nativeElement.value="")}resetCreateImageState(){this.createSelectedFiles=[],this.createImagePreviews=[],this.resetNativeFileInput("create")}resetEditImageState(){this.editExistingImages=[],this.editSelectedFiles=[],this.editNewImagePreviews=[],this.originalEditImages=[],this.resetNativeFileInput("edit")}safeDeleteImage(r){var i=this;return(0,be.Z)(function*(){try{yield i.imageService.deleteImage(r)}catch(o){console.error("Error deleting image from storage:",o)}})()}calculatePrice(r,i){return r*(1+i/100)}updatePrice(){this.editingProduct?this.editingProduct.price=this.calculatePrice(this.editingProduct.cost,this.editingProduct.markup_percentage):this.product.price=this.calculatePrice(this.product.cost,this.product.markup_percentage)}onSubmit(){var r=this;return(0,be.Z)(function*(){if(0!==r.createSelectedFiles.length)if(r.product.category_id)if(r.product.cost<=0)r.errorMessage="Cost must be greater than 0";else if(r.product.markup_percentage<=0)r.errorMessage="Markup percentage must be greater than 0";else{r.isSubmitting=!0,r.errorMessage="";try{const i=yield Promise.all(r.createSelectedFiles.map(a=>Gl(r.imageService.uploadImage(a))));r.product.price=r.calculatePrice(r.product.cost,r.product.markup_percentage);const o={name:r.product.name.trim(),description:r.product.description.trim(),price:r.product.price,cost:r.product.cost,markup_percentage:r.product.markup_percentage,image:i[0]??"",image_urls:i,category_id:r.product.category_id,stock:r.product.stock,seasonal:r.product.seasonal};yield Gl(r.productService.addProduct(o)),r.resetForm(),r.loadProducts(),r.showAddForm=!1}catch(i){console.error("Error adding product:",i),r.errorMessage=i.message||"Error adding product. Please try again."}finally{r.isSubmitting=!1}}else r.errorMessage="Please select a valid category";else r.errorMessage="Carga al menos una imagen para crear el producto."})()}resetForm(){this.product={name:"",description:"",price:0,cost:0,markup_percentage:30,image:"",image_urls:[],category_id:"",stock:0,seasonal:!1},this.resetCreateImageState(),this.errorMessage=""}editProduct(r){const i=r.image_urls?.length?[...r.image_urls]:r.image?[r.image]:[];this.editingProduct={...r,image_urls:i},this.originalEditImages=[...i],this.editExistingImages=[...i],this.editSelectedFiles=[],this.editNewImagePreviews=[],this.errorMessage="",this.showAddForm=!1,this.resetNativeFileInput("edit")}cancelEdit(){this.editingProduct=null,this.errorMessage="",this.resetEditImageState()}saveProduct(){var r=this;return(0,be.Z)(function*(){if(r.editingProduct){if(!r.editingProduct.category_id)return void(r.errorMessage="Please select a valid category");if(r.editingProduct.cost<=0)return void(r.errorMessage="Cost must be greater than 0");if(r.editingProduct.markup_percentage<=0)return void(r.errorMessage="Markup percentage must be greater than 0");if(r.editExistingImages.length+r.editSelectedFiles.length===0)return void(r.errorMessage="El producto debe tener al menos una imagen.");r.isSubmitting=!0,r.errorMessage="";try{const i=yield Promise.all(r.editSelectedFiles.map(h=>Gl(r.imageService.uploadImage(h)))),o=[...r.editExistingImages,...i].slice(0,r.maxImages);r.editingProduct.price=r.calculatePrice(r.editingProduct.cost,r.editingProduct.markup_percentage);const a={...r.editingProduct,image:o[0]??r.editingProduct.image,image_urls:o};yield Gl(r.productService.updateProduct(a.id,a));const d=r.originalEditImages.filter(h=>!r.editExistingImages.includes(h));d.length&&(yield Promise.all(d.map(h=>r.safeDeleteImage(h)))),r.editingProduct=null,r.resetEditImageState(),r.errorMessage="",r.loadProducts()}catch(i){console.error("Error updating product:",i),r.errorMessage=i.message||"Error updating product. Please try again."}finally{r.isSubmitting=!1}}})()}getPrimaryImage(r){return r?.image_urls?.length?r.image_urls[0]:r?.image?r.image:this.imagePlaceholder}trackByProductId(r,i){return i.id}deleteProduct(r){var i=this;return(0,be.Z)(function*(){if(confirm(r.stock>0?`\xbfConfirm\xe1s la eliminaci\xf3n de "${r.name}"? El producto tiene stock y podr\xeda estar vinculado a ventas.`:`\xbfConfirm\xe1s la eliminaci\xf3n de "${r.name}"? Este producto no tiene stock.`))try{yield Gl(i.productService.deleteProduct(r.id)),i.products=i.products.filter(a=>a.id!==r.id),i.errorMessage="",i.applyFilters(!1)}catch(a){console.error("Error deleting product:",a),i.errorMessage="sale_items_product_id_fkey"===a.message?`Cannot delete "${r.name}" because it has associated sales. Consider setting the stock to 0 instead.`:"Error deleting product. Please try again later."}})()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(ol.M),s.Y36(Kd),s.Y36(nm),s.Y36(kc.T))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-product-crud"]],viewQuery:function(i,o){if(1&i&&(s.Gf(B1,5),s.Gf(S3,5)),2&i){let a;s.iGM(a=s.CRH())&&(o.createFileInput=a.first),s.iGM(a=s.CRH())&&(o.editFileInput=a.first)}},decls:130,vars:45,consts:[[1,"product-crud-page"],[1,"crud-hero","glass-card"],[1,"hero-copy"],[1,"eyebrow"],[1,"hero-actions"],[1,"btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"btn-secondary",3,"click"],[1,"fas","fa-sync-alt"],[1,"hero-stats"],[1,"stat-card"],[1,"stat-label"],[1,"stat-value"],["class","error-message",4,"ngIf"],[1,"table-card","glass-card"],[1,"table-head"],[1,"table-meta"],[1,"meta-primary"],["class","meta-secondary",4,"ngIf"],[1,"filters-panel"],[1,"filters-title"],[1,"fas","fa-sliders-h"],[1,"filter-grid"],[1,"filter-field"],["for","filter-name"],["id","filter-name","type","text","placeholder","Buscar por nombre",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter-description"],["id","filter-description","type","text","placeholder","Palabras clave",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter-category"],["id","filter-category",3,"ngModel","ngModelOptions","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","filter-seasonal"],["id","filter-seasonal",3,"ngModel","ngModelOptions","ngModelChange"],["value","all"],["value","true"],["value","false"],["for","filter-cost-min"],[1,"range-inputs"],["id","filter-cost-min","type","number","placeholder","Min","inputmode","decimal","step","0.01","min","0",3,"ngModel","ngModelOptions","ngModelChange"],["type","number","placeholder","Max","inputmode","decimal","step","0.01","min","0","aria-label","Costo m\xe1ximo",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter-price-min"],["id","filter-price-min","type","number","placeholder","Min","inputmode","decimal","step","0.01","min","0",3,"ngModel","ngModelOptions","ngModelChange"],["type","number","placeholder","Max","inputmode","decimal","step","0.01","min","0","aria-label","Precio m\xe1ximo",3,"ngModel","ngModelOptions","ngModelChange"],["for","filter-stock-min"],["id","filter-stock-min","type","number","placeholder","Min","inputmode","numeric","min","0",3,"ngModel","ngModelOptions","ngModelChange"],["type","number","placeholder","Max","inputmode","numeric","min","0","aria-label","Stock m\xe1ximo",3,"ngModel","ngModelOptions","ngModelChange"],[1,"filter-actions"],[1,"filter-summary"],["class","active-filter-badge",4,"ngIf"],[1,"filter-hint"],["type","button",1,"btn-secondary","btn-compact","filter-reset",3,"disabled","click"],[1,"fas","fa-eraser"],[1,"table-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","pagination-bar",4,"ngIf"],["class","modal",4,"ngIf"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[1,"meta-secondary"],[1,"fas","fa-filter"],[3,"value"],[1,"active-filter-badge"],["data-label","Imagen"],[1,"product-thumbnail",3,"src","alt"],["data-label","Nombre"],["data-label","Descripci\xf3n"],["data-label","Costo"],["data-label","Margen"],["data-label","Precio"],["data-label","Stock"],["data-label","Categor\xeda"],["data-label","Temporada"],["data-label","Acciones"],[1,"table-actions"],["title","Editar",1,"btn-edit",3,"click"],[1,"fas","fa-edit"],["title","Eliminar",1,"btn-delete",3,"click"],[1,"fas","fa-trash"],["colspan","10",1,"empty-state"],[1,"fas","fa-search"],[1,"pagination-bar"],[1,"pagination-info"],[1,"pagination-controls"],["for","page-size",1,"page-size-label"],["id","page-size","aria-label","Seleccionar cantidad de productos por p\xe1gina",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["type","button","aria-label","P\xe1gina anterior",1,"btn-secondary","btn-compact","pagination-btn",3,"disabled","click"],[1,"fas","fa-chevron-left"],[1,"page-indicator"],["type","button","aria-label","P\xe1gina siguiente",1,"btn-secondary","btn-compact","pagination-btn",3,"disabled","click"],[1,"fas","fa-chevron-right"],[3,"ngValue"],[1,"modal"],[1,"modal-content"],["class","product-form",3,"ngSubmit",4,"ngIf"],[1,"product-form",3,"ngSubmit"],[1,"form-section"],[1,"form-grid","details-grid"],[1,"form-field","name-field"],["for","name-edit"],["type","text","id","name-edit","name","name","required","","placeholder","Ej: Mate imperial de calabaza",3,"ngModel","ngModelChange"],[1,"form-field","category-field"],["for","category-edit"],["id","category-edit","name","category_id","required","",3,"ngModel","ngModelChange"],[1,"form-field","description-field"],["for","description-edit"],["id","description-edit","name","description","rows","3","required","","placeholder","Materiales, terminaciones, cuidados, etc.",3,"ngModel","ngModelChange"],[1,"form-section","two-columns"],[1,"form-grid"],[1,"form-field","cost-field"],["for","cost-edit"],["type","number","id","cost-edit","name","cost","step","0.01","min","0.01","required","","inputmode","decimal",3,"ngModel","ngModelChange"],[1,"form-field","markup-field"],["for","markup-edit"],["type","number","id","markup-edit","name","markup_percentage","step","0.01","min","0.01","required","","inputmode","decimal",3,"ngModel","ngModelChange"],[1,"form-field"],["for","stock-edit"],["type","number","id","stock-edit","name","stock","min","0","required","","inputmode","numeric",3,"ngModel","ngModelChange"],[1,"form-field","toggle-field"],[1,"switch"],["type","checkbox","name","seasonal",3,"ngModel","ngModelChange"],[1,"slider"],[1,"price-summary"],[1,"image-upload-container"],["type","file","id","images-edit","multiple","","accept","image/*",1,"file-input-hidden",3,"change"],["editFileInput",""],[1,"upload-placeholder",3,"click"],[1,"fas","fa-cloud-upload-alt"],["type","button",1,"upload-trigger",3,"disabled","click"],["class","image-preview-grid",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas","fa-save"],["type","button",1,"btn-secondary",3,"click"],[1,"fas","fa-times"],[1,"image-preview-grid"],["class","image-preview-card existing",4,"ngFor","ngForOf"],["class","image-preview-card new",4,"ngFor","ngForOf"],[1,"image-preview-card","existing"],[3,"src","alt"],["type","button","aria-label","Eliminar imagen actual",1,"remove-image",3,"click"],[1,"image-chip"],[1,"image-preview-card","new"],["type","button","aria-label","Eliminar imagen nueva",1,"remove-image",3,"click"],["for","name-create"],["type","text","id","name-create","name","name","required","","placeholder","Ej: Mate torpedo premium",3,"ngModel","ngModelChange"],["for","category-create"],["id","category-create","name","category_id","required","",3,"ngModel","ngModelChange"],["for","description-create"],["id","description-create","name","description","rows","3","required","","placeholder","Materiales, terminaciones, cuidados, etc.",3,"ngModel","ngModelChange"],["for","cost-create"],["type","number","id","cost-create","name","cost","step","0.01","min","0.01","required","","inputmode","decimal",3,"ngModel","ngModelChange"],["for","markup-create"],["type","number","id","markup-create","name","markup_percentage","step","0.01","min","0.01","required","","inputmode","decimal",3,"ngModel","ngModelChange"],["for","stock-create"],["type","number","id","stock-create","name","stock","min","0","required","","inputmode","numeric",3,"ngModel","ngModelChange"],["type","file","id","images-create","multiple","","accept","image/*",1,"file-input-hidden",3,"change"],["createFileInput",""],["type","button","aria-label","Eliminar imagen seleccionada",1,"remove-image",3,"click"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"p",3),s._uU(4,"Panel de administraci\xf3n"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Gesti\xf3n de productos"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Control\xe1 el cat\xe1logo, actualiz\xe1 stocks y manten\xe9 cada ficha con informaci\xf3n precisa."),s.qZA(),s.TgZ(9,"div",4)(10,"button",5),s.NdJ("click",function(){return o.showAddForm=!0}),s._UZ(11,"i",6),s._uU(12," Registrar producto "),s.qZA(),s.TgZ(13,"button",7),s.NdJ("click",function(){return o.loadProducts()}),s._UZ(14,"i",8),s._uU(15," Actualizar listado "),s.qZA()()(),s.TgZ(16,"div",9)(17,"div",10)(18,"span",11),s._uU(19,"Total de productos"),s.qZA(),s.TgZ(20,"span",12),s._uU(21),s.qZA()(),s.TgZ(22,"div",10)(23,"span",11),s._uU(24,"Con bajo stock"),s.qZA(),s.TgZ(25,"span",12),s._uU(26),s.qZA()(),s.TgZ(27,"div",10)(28,"span",11),s._uU(29,"Temporada"),s.qZA(),s.TgZ(30,"span",12),s._uU(31),s.qZA()()()(),s.YNc(32,A3,3,1,"div",13),s.TgZ(33,"div",14)(34,"div",15)(35,"div")(36,"p",3),s._uU(37,"Inventario actualizado"),s.qZA(),s.TgZ(38,"h3"),s._uU(39,"Listado de productos"),s.qZA()(),s.TgZ(40,"div",16)(41,"span",17),s._uU(42),s.qZA(),s.YNc(43,ab,3,2,"span",18),s.qZA()(),s.TgZ(44,"div",19)(45,"div",20),s._UZ(46,"i",21),s.TgZ(47,"span"),s._uU(48,"Filtrar por columnas"),s.qZA()(),s.TgZ(49,"div",22)(50,"div",23)(51,"label",24),s._uU(52,"Nombre"),s.qZA(),s.TgZ(53,"input",25),s.NdJ("ngModelChange",function(d){return o.filters.name=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA()(),s.TgZ(54,"div",23)(55,"label",26),s._uU(56,"Descripci\xf3n"),s.qZA(),s.TgZ(57,"input",27),s.NdJ("ngModelChange",function(d){return o.filters.description=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA()(),s.TgZ(58,"div",23)(59,"label",28),s._uU(60,"Categor\xeda"),s.qZA(),s.TgZ(61,"select",29),s.NdJ("ngModelChange",function(d){return o.filters.categoryId=d})("ngModelChange",function(){return o.onFilterChange()}),s.TgZ(62,"option",30),s._uU(63,"Todas"),s.qZA(),s.YNc(64,wS,2,2,"option",31),s.qZA()(),s.TgZ(65,"div",23)(66,"label",32),s._uU(67,"Temporada"),s.qZA(),s.TgZ(68,"select",33),s.NdJ("ngModelChange",function(d){return o.filters.seasonal=d})("ngModelChange",function(){return o.onFilterChange()}),s.TgZ(69,"option",34),s._uU(70,"Todos"),s.qZA(),s.TgZ(71,"option",35),s._uU(72,"S\xf3lo temporada"),s.qZA(),s.TgZ(73,"option",36),s._uU(74,"Disponibles siempre"),s.qZA()()(),s.TgZ(75,"div",23)(76,"label",37),s._uU(77,"Costo (m\xedn - m\xe1x)"),s.qZA(),s.TgZ(78,"div",38)(79,"input",39),s.NdJ("ngModelChange",function(d){return o.filters.minCost=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA(),s.TgZ(80,"input",40),s.NdJ("ngModelChange",function(d){return o.filters.maxCost=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA()()(),s.TgZ(81,"div",23)(82,"label",41),s._uU(83,"Precio (m\xedn - m\xe1x)"),s.qZA(),s.TgZ(84,"div",38)(85,"input",42),s.NdJ("ngModelChange",function(d){return o.filters.minPrice=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA(),s.TgZ(86,"input",43),s.NdJ("ngModelChange",function(d){return o.filters.maxPrice=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA()()(),s.TgZ(87,"div",23)(88,"label",44),s._uU(89,"Stock (m\xedn - m\xe1x)"),s.qZA(),s.TgZ(90,"div",38)(91,"input",45),s.NdJ("ngModelChange",function(d){return o.filters.minStock=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA(),s.TgZ(92,"input",46),s.NdJ("ngModelChange",function(d){return o.filters.maxStock=d})("ngModelChange",function(){return o.onFilterChange()}),s.qZA()()()(),s.TgZ(93,"div",47)(94,"div",48),s.YNc(95,bS,3,2,"span",49),s.TgZ(96,"span",50),s._uU(97,"Combin\xe1 criterios para depurar r\xe1pidamente el inventario."),s.qZA()(),s.TgZ(98,"button",51),s.NdJ("click",function(){return o.resetFilters()}),s._UZ(99,"i",52),s._uU(100," Limpiar filtros "),s.qZA()()(),s.TgZ(101,"div",53)(102,"table")(103,"thead")(104,"tr")(105,"th"),s._uU(106,"Imagen"),s.qZA(),s.TgZ(107,"th"),s._uU(108,"Nombre"),s.qZA(),s.TgZ(109,"th"),s._uU(110,"Descripci\xf3n"),s.qZA(),s.TgZ(111,"th"),s._uU(112,"Costo"),s.qZA(),s.TgZ(113,"th"),s._uU(114,"Margen %"),s.qZA(),s.TgZ(115,"th"),s._uU(116,"Precio"),s.qZA(),s.TgZ(117,"th"),s._uU(118,"Stock"),s.qZA(),s.TgZ(119,"th"),s._uU(120,"Categor\xeda"),s.qZA(),s.TgZ(121,"th"),s._uU(122,"Temporada"),s.qZA(),s.TgZ(123,"th"),s._uU(124,"Acciones"),s.qZA()()(),s.TgZ(125,"tbody"),s.YNc(126,CS,28,25,"tr",54),s.YNc(127,ES,5,1,"tr",55),s.qZA()()(),s.YNc(128,TS,14,11,"div",56),s.qZA(),s.YNc(129,DS,6,3,"div",57),s.qZA()),2&i&&(s.xp6(21),s.Oqu(o.products.length),s.xp6(5),s.Oqu(o.lowStockCount),s.xp6(5),s.Oqu(o.seasonalProductCount),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(10),s.AsE(" ",o.filteredProducts.length," ",1===o.filteredProducts.length?"producto":"productos"," "),s.xp6(1),s.Q6J("ngIf",o.hasActiveFilters),s.xp6(10),s.Q6J("ngModel",o.filters.name)("ngModelOptions",s.DdM(35,la)),s.xp6(4),s.Q6J("ngModel",o.filters.description)("ngModelOptions",s.DdM(36,la)),s.xp6(4),s.Q6J("ngModel",o.filters.categoryId)("ngModelOptions",s.DdM(37,la)),s.xp6(3),s.Q6J("ngForOf",o.categories),s.xp6(4),s.Q6J("ngModel",o.filters.seasonal)("ngModelOptions",s.DdM(38,la)),s.xp6(11),s.Q6J("ngModel",o.filters.minCost)("ngModelOptions",s.DdM(39,la)),s.xp6(1),s.Q6J("ngModel",o.filters.maxCost)("ngModelOptions",s.DdM(40,la)),s.xp6(5),s.Q6J("ngModel",o.filters.minPrice)("ngModelOptions",s.DdM(41,la)),s.xp6(1),s.Q6J("ngModel",o.filters.maxPrice)("ngModelOptions",s.DdM(42,la)),s.xp6(5),s.Q6J("ngModel",o.filters.minStock)("ngModelOptions",s.DdM(43,la)),s.xp6(1),s.Q6J("ngModel",o.filters.maxStock)("ngModelOptions",s.DdM(44,la)),s.xp6(3),s.Q6J("ngIf",o.hasActiveFilters),s.xp6(3),s.Q6J("disabled",!o.hasActiveFilters),s.xp6(28),s.Q6J("ngForOf",o.paginatedProducts)("ngForTrackBy",o.trackByProductId),s.xp6(1),s.Q6J("ngIf",!o.paginatedProducts.length&&!o.isLoadingProducts),s.xp6(1),s.Q6J("ngIf",o.filteredProducts.length),s.xp6(1),s.Q6J("ngIf",o.showAddForm||o.editingProduct))},dependencies:[te.sg,te.O5,xn,Bi,na,nt,go,Ce,cs,or,to,ra,mo,As,Ji,te.OU,te.H9],styles:['.product-crud-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:clamp(2rem,4vw,3rem) var(--gutter) 3.25rem;display:flex;flex-direction:column;gap:2rem;font-family:Poppins,Segoe UI,system-ui,-apple-system,sans-serif}.glass-card[_ngcontent-%COMP%]{background:var(--surface);border-radius:var(--radius-xl);border:1px solid var(--surface-border);box-shadow:var(--shadow-soft)}.crud-hero[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:2rem;padding:clamp(1.75rem,3vw,2.5rem);align-items:center;background:radial-gradient(900px circle at 18% 18%,rgba(0,255,163,.12),transparent 55%),radial-gradient(700px circle at 92% 22%,rgba(61,211,56,.1),transparent 60%),var(--surface)}.hero-copy[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.25rem 0 .75rem;font-size:clamp(2rem,3vw,2.6rem);color:#122417}.hero-copy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#4d5a51;margin:0;max-width:520px}.hero-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.25rem;flex-wrap:wrap}.hero-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:46px}.hero-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(120px,1fr));gap:1rem}.stat-card[_ngcontent-%COMP%]{padding:1.35rem 1.5rem;border-radius:20px;background:linear-gradient(145deg,#f4fff0,#e4f5df);text-align:center;border:1px solid rgba(22,40,31,.12)}.stat-label[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.75rem;letter-spacing:.08em;color:#5c695f}.stat-value[_ngcontent-%COMP%]{display:block;font-size:2.1rem;font-weight:700;color:#235d2c}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:.85rem 1.3rem;border:none;border-radius:999px;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;display:inline-flex;align-items:center;gap:.45rem;line-height:1}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(120deg,#2f8f44,#62c370);color:#fff;box-shadow:0 14px 28px #00ffa329}.btn-secondary[_ngcontent-%COMP%]{background:rgba(15,23,42,.08);color:#1b2f21;border:1px solid rgba(15,23,42,.1)}.btn-primary[_ngcontent-%COMP%]:hover, .btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 15px 30px #12281e33}.btn-primary[_ngcontent-%COMP%]:focus-visible, .btn-secondary[_ngcontent-%COMP%]:focus-visible, .btn-edit[_ngcontent-%COMP%]:focus-visible, .btn-delete[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 15px 30px #12281e33,0 0 0 4px #00ffa329}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed;transform:none}.btn-edit[_ngcontent-%COMP%], .btn-delete[_ngcontent-%COMP%]{padding:.55rem .85rem;border-radius:14px;font-size:.9rem}.btn-edit[_ngcontent-%COMP%]{background:rgba(46,134,222,.15);color:#2e86de}.btn-delete[_ngcontent-%COMP%]{background:rgba(231,76,60,.15);color:#c0392b}.error-message[_ngcontent-%COMP%]{background:rgba(231,76,60,.1);color:#a52f23;padding:1rem 1.2rem;border-radius:16px;display:flex;gap:.65rem;align-items:center;border:1px solid rgba(231,76,60,.18)}.table-card[_ngcontent-%COMP%]{padding:1.75rem 2rem;display:flex;flex-direction:column;gap:1.25rem}.table-head[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:space-between;gap:1rem}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.table-head[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.2rem 0 0;color:#122417}.table-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.35rem}.table-meta[_ngcontent-%COMP%]   .meta-primary[_ngcontent-%COMP%]{font-weight:600;color:#1b2f21}.table-meta[_ngcontent-%COMP%]   .meta-secondary[_ngcontent-%COMP%]{font-size:.85rem;color:#4d5a51;display:inline-flex;align-items:center;gap:.35rem;background:rgba(47,143,68,.1);padding:.35rem .75rem;border-radius:999px}.filters-panel[_ngcontent-%COMP%]{--filter-field-bg: rgba(255, 255, 255, .92);--filter-field-border: rgba(22, 40, 31, .14);--filter-field-border-hover: rgba(22, 40, 31, .24);--filter-field-focus: rgba(0, 255, 163, .16);border:1px solid rgba(15,23,42,.08);border-radius:20px;padding:1.35rem 1.5rem;background:linear-gradient(180deg,rgba(247,251,244,.9),rgba(247,251,244,.55));display:flex;flex-direction:column;gap:1rem}.filters-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;font-weight:600;color:#1b2f21}.filters-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2f8f44}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.85rem 1.2rem}.filter-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.filter-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.82rem;font-weight:600;color:#4d5a51}.filter-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filter-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid var(--filter-field-border);border-radius:16px;padding:.7rem .85rem;font-size:.9rem;background:var(--filter-field-bg);color:#122417;transition:border-color .2s ease,box-shadow .2s ease,background-color .2s ease}.filter-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#4d5a51b3}.filter-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .filter-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:var(--filter-field-border-hover)}.filter-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .filter-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00ffa3bf;box-shadow:0 0 0 3px var(--filter-field-focus),0 10px 20px #16281f1a;background:#fff}.range-inputs[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.5rem}.filter-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.75rem}.filter-summary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.65rem;color:#4d5a51;font-size:.9rem}.filter-hint[_ngcontent-%COMP%]{color:#607063}.active-filter-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;background:rgba(37,140,67,.18);color:#1b5e2f;padding:.35rem .75rem;border-radius:999px;font-weight:600}.btn-compact[_ngcontent-%COMP%]{padding:.55rem .95rem;font-size:.85rem;border-radius:14px}.pagination-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.85rem;margin-top:.75rem}.pagination-info[_ngcontent-%COMP%]{font-size:.9rem;color:#4d5a51}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.65rem}.pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid var(--filter-field-border, rgba(22, 40, 31, .14));border-radius:14px;padding:.6rem .85rem;background:var(--filter-field-bg, rgba(255, 255, 255, .92));color:#122417;font-size:.9rem}.pagination-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00ffa3bf;box-shadow:0 0 0 3px var(--filter-field-focus, rgba(0, 255, 163, .16))}.pagination-btn[_ngcontent-%COMP%]{min-width:42px;justify-content:center;gap:0}.pagination-btn[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed}.page-indicator[_ngcontent-%COMP%]{font-weight:600;color:#1b2f21}.page-size-label[_ngcontent-%COMP%]{font-size:.85rem;color:#607063}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2.5rem 1rem;color:#607063;font-size:.95rem;display:flex;flex-direction:column;gap:.75rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:#2f8f44;opacity:.75}td.empty-state[_ngcontent-%COMP%]:before{display:none;content:none}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:.85rem .75rem;font-size:.85rem;text-transform:uppercase;letter-spacing:.08em;color:#6c7a6f;border-bottom:1px solid rgba(15,23,42,.08)}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem .75rem;border-bottom:1px solid rgba(15,23,42,.05);color:#1e2c22}tr[_ngcontent-%COMP%]:hover{background:rgba(47,143,68,.04)}.product-thumbnail[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:16px;object-fit:cover;box-shadow:0 8px 16px #0f172a26}td.low-stock[_ngcontent-%COMP%]{color:#d98500;font-weight:600}td.out-of-stock[_ngcontent-%COMP%]{color:#c0392b;font-weight:700}.table-actions[_ngcontent-%COMP%]{display:inline-flex;gap:.5rem}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(15,23,42,.55);display:flex;justify-content:center;align-items:center;padding:2rem;z-index:1000}.modal[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(900px circle at 18% 12%,rgba(0,255,163,.1),transparent 55%),radial-gradient(700px circle at 92% 18%,rgba(61,211,56,.08),transparent 58%),#fff;border-radius:30px;padding:clamp(1.5rem,3vw,2.25rem);width:min(96vw,1100px);max-height:92vh;overflow-y:auto;overscroll-behavior:contain;box-shadow:0 40px 80px #0f172a40;margin-top:0;border:1px solid rgba(15,23,42,.08)}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.6rem;color:#122417}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{letter-spacing:-.02em}.product-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.product-form[_ngcontent-%COMP%]{--field-bg: rgba(255, 255, 255, .92);--field-border: rgba(22, 40, 31, .14);--field-border-hover: rgba(22, 40, 31, .24);--field-focus: rgba(0, 255, 163, .16)}.form-section[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.08);border-radius:24px;padding:1.5rem;background:linear-gradient(180deg,rgba(247,251,244,.9),rgba(247,251,244,.65))}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.05rem;color:#1b2f21}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{letter-spacing:-.01em}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.15rem 1.35rem}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,2fr) minmax(0,1fr);gap:1.15rem 1.35rem;align-items:start}.details-grid[_ngcontent-%COMP%]   .name-field[_ngcontent-%COMP%]{grid-column:1 / -1;min-width:0}.details-grid[_ngcontent-%COMP%]   .description-field[_ngcontent-%COMP%]{grid-column:1 / -1}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#4d5a51}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.92rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:1px solid var(--field-border);border-radius:18px;padding:.9rem 1.05rem;font-size:.95rem;background:var(--field-bg);color:#122417;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease,background-color .2s ease}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#4d5a51b8}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .form-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover, .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:hover{border-color:var(--field-border-hover)}.form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#00ffa3bf;box-shadow:0 0 0 4px var(--field-focus),0 16px 34px #16281f1a;background:#fff}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-field[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.form-field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6f7c72;font-size:.8rem}.form-field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{line-height:1.35}.form-field-full[_ngcontent-%COMP%]{grid-column:1 / -1}.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,3fr) minmax(320px,1.25fr);gap:1.35rem;align-items:flex-start}@media (max-width: 1100px){.two-columns[_ngcontent-%COMP%]{grid-template-columns:minmax(0,1fr) minmax(280px,.9fr)}}.price-summary[_ngcontent-%COMP%]{border-radius:18px;background:linear-gradient(160deg,#1c7c35,#4ec86d);color:#fff;padding:1.1rem 1.25rem;display:flex;flex-direction:column;gap:.25rem;justify-content:center;max-width:320px;width:100%;margin-left:auto}.price-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.08em;font-size:.7rem;opacity:.85}.price-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.45rem;font-weight:700}.price-summary[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;opacity:.9}.cost-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .markup-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:auto;min-width:auto;max-width:none;align-self:flex-start}.cost-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:7.5ch;min-width:7.5ch;text-align:right}.markup-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:6ch;min-width:6ch;text-align:right}.toggle-field[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.toggle-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-flex;width:48px;height:26px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#0f172a26;border-radius:999px;transition:background-color .2s ease}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:20px;width:20px;left:3px;bottom:3px;background-color:#fff;border-radius:50%;transition:transform .2s ease;box-shadow:0 4px 8px #00000026}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#2f8f44}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(22px)}.image-upload-container[_ngcontent-%COMP%]{border:2px dashed rgba(22,40,31,.22);border-radius:24px;padding:1.25rem;background:linear-gradient(180deg,rgba(0,255,163,.06),rgba(47,143,68,.03));max-width:680px;margin:0 auto;transition:transform .18s ease,border-color .18s ease,box-shadow .18s ease;display:flex;flex-direction:column;align-items:center;gap:1rem;text-align:center}.image-upload-container[_ngcontent-%COMP%]:hover{border-color:#00ffa359;box-shadow:0 18px 46px #16281f1a;transform:translateY(-1px)}.file-input-hidden[_ngcontent-%COMP%]{display:none}.upload-placeholder[_ngcontent-%COMP%]{color:#4d5a51;display:flex;flex-direction:column;align-items:center;gap:.4rem;cursor:pointer;text-align:center}.upload-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem;color:#00ffa3d9;margin-bottom:.35rem}.upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 .35rem;font-weight:700;color:#122417}.upload-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block}.upload-trigger[_ngcontent-%COMP%]{margin-top:.35rem;padding:.6rem 1.3rem;border-radius:999px;border:none;background:linear-gradient(120deg,#2f8f44,#62c370);color:#fff;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease,opacity .2s ease;display:inline-flex;align-items:center;gap:.4rem}.upload-trigger[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.upload-trigger[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-1px);box-shadow:0 15px 32px #2f8f4438}.upload-trigger[_ngcontent-%COMP%]:disabled{opacity:.55;cursor:not-allowed;box-shadow:none}.image-preview-grid[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-top:.5rem}.image-preview-card[_ngcontent-%COMP%]{position:relative;border-radius:20px;overflow:hidden;box-shadow:0 22px 44px #0f172a2e;min-height:160px;background:rgba(255,255,255,.92)}.image-preview-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.remove-image[_ngcontent-%COMP%]{position:absolute;top:.65rem;right:.65rem;border:none;width:32px;height:32px;border-radius:50%;background:rgba(0,0,0,.55);color:#fff;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s ease,transform .2s ease}.remove-image[_ngcontent-%COMP%]:hover{background:rgba(231,76,60,.92);transform:scale(1.05)}.image-chip[_ngcontent-%COMP%]{position:absolute;left:.85rem;bottom:.85rem;padding:.3rem .9rem;border-radius:999px;font-size:.72rem;letter-spacing:.05em;color:#fff;background:rgba(18,40,30,.78);text-transform:uppercase}.image-preview-card.new[_ngcontent-%COMP%]   .image-chip[_ngcontent-%COMP%]{background:rgba(47,143,68,.85)}.image-preview-card.existing[_ngcontent-%COMP%]   .image-chip[_ngcontent-%COMP%]{background:rgba(15,23,42,.8)}.form-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}@media (max-width: 1024px){.crud-hero[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.hero-stats[_ngcontent-%COMP%]{width:100%;grid-template-columns:repeat(3,minmax(0,1fr))}.hero-actions[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 768px){.product-crud-page[_ngcontent-%COMP%]{padding:2rem 1rem}.glass-card[_ngcontent-%COMP%]{padding:1.5rem}.table-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.table-meta[_ngcontent-%COMP%]{align-items:flex-start}.filters-panel[_ngcontent-%COMP%]{padding:1.1rem}.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.filter-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-summary[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.4rem}.pagination-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.65rem}.pagination-controls[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.page-size-label[_ngcontent-%COMP%]{display:none}.hero-stats[_ngcontent-%COMP%], .two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}.price-summary[_ngcontent-%COMP%]{min-height:140px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.details-grid[_ngcontent-%COMP%]   .name-field[_ngcontent-%COMP%], .details-grid[_ngcontent-%COMP%]   .category-field[_ngcontent-%COMP%], .details-grid[_ngcontent-%COMP%]   .description-field[_ngcontent-%COMP%]{flex:1 1 100%}.cost-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .markup-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-width:100%;text-align:left}table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:none}tr[_ngcontent-%COMP%]{border:1px solid rgba(15,23,42,.08);border-radius:18px;margin-bottom:1rem;padding:1rem}td[_ngcontent-%COMP%]{border:none;padding:.5rem 0;display:flex;justify-content:space-between;align-items:center}td.empty-state[_ngcontent-%COMP%]{justify-content:center;align-items:center}td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:600;color:#6c7a6f}.modal[_ngcontent-%COMP%]{padding:1rem}.modal-content[_ngcontent-%COMP%]{padding:1.5rem;border-radius:22px;max-height:95vh}}']}),n})();const hh=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},q1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],a=i+1<n.length,d=a?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0;let T=(15&d)<<2|p>>6,M=63&p;h||(M=64,a||(T=64)),r.push(t[o>>2],t[(3&o)<<4|d>>4],t[T],t[M])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hh(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const h=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(1023&h))}else{const o=n[t++],a=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==d||null==p||null==y)throw new ub;r.push(o<<2|d>>4),64!==p&&(r.push(d<<4&240|p>>2),64!==y&&r.push(p<<6&192|y))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ub extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H1=function(n){return function(n){const e=hh(n);return q1.encodeByteArray(e,!0)}(n).replace(/\./g,"")},am=function(n){try{return q1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},sg=()=>{try{return function P3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&am(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},K1=n=>{var e,t;return null===(t=null===(e=sg())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},Au=n=>{const e=K1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]},fb=()=>{var n;return null===(n=sg())||void 0===n?void 0:n.config},cm=n=>{var e;return null===(e=sg())||void 0===e?void 0:e[`_${n}`]};class og{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function hb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[H1(JSON.stringify({alg:"none",type:"JWT"})),H1(JSON.stringify(a)),""].join(".")}function Ti(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gb(){try{return"object"==typeof indexedDB}catch{return!1}}class al extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,al.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ph.prototype.create)}}class ph{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?function F3(n,e){return n.replace(US,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new al(i,`${this.serviceName}: ${a} (${i}).`,r)}}const US=/\{\$([^}]+)}/g;function mh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],a=e[i];if(dm(o)&&dm(a)){if(!mh(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function dm(n){return null!==n&&"object"==typeof n}function _h(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class ZS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function vb(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=Q1),void 0===i.error&&(i.error=Q1),void 0===i.complete&&(i.complete=Q1);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Q1(){}function Eo(n){return n&&n._delegate?n._delegate:n}class Kl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qd="[DEFAULT]";class $S{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new og;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function GS(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Qd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Qd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,be.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Qd){return this.instances.has(e)}getOptions(e=Qd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,a]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&a.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Qd?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Qd){return this.component?this.component.multipleInstances?e:Qd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $S(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const X1=[];var vr=(()=>{return(n=vr||(vr={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",vr;var n})();const Cb={debug:vr.DEBUG,verbose:vr.VERBOSE,info:vr.INFO,warn:vr.WARN,error:vr.ERROR,silent:vr.SILENT},zn=vr.INFO,Eb={[vr.DEBUG]:"log",[vr.VERBOSE]:"log",[vr.INFO]:"info",[vr.WARN]:"warn",[vr.ERROR]:"error"},Tb=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Eb[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class hm{constructor(e){this.name=e,this._logLevel=zn,this._logHandler=Tb,this._userLogHandler=null,X1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Cb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vr.DEBUG,...e),this._logHandler(this,vr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vr.VERBOSE,...e),this._logHandler(this,vr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vr.INFO,...e),this._logHandler(this,vr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vr.WARN,...e),this._logHandler(this,vr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vr.ERROR,...e),this._logHandler(this,vr.ERROR,...e)}}const Sb=(n,e)=>e.some(t=>n instanceof t);let Ab,ev;const YS=new WeakMap,pm=new WeakMap,tv=new WeakMap,Yl=new WeakMap,nv=new WeakMap;let sv={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return pm.get(n);if("objectStoreNames"===e)return n.objectStoreNames||tv.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mu(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function Q3(n){return"function"==typeof n?function J3(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function KS(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(gm(this),e),Mu(YS.get(this))}:function(...e){return Mu(n.apply(gm(this),e))}:function(e,...t){const r=n.call(gm(this),e,...t);return tv.set(r,e.sort?e.sort():[e]),Mu(r)}}(n):(n instanceof IDBTransaction&&function iv(n){if(pm.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});pm.set(n,e)}(n),Sb(n,function WS(){return Ab||(Ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,sv):n)}function Mu(n){if(n instanceof IDBRequest)return function rv(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Mu(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&YS.set(t,n)}).catch(()=>{}),nv.set(e,n),e}(n);if(Yl.has(n))return Yl.get(n);const e=Q3(n);return e!==n&&(Yl.set(n,e),nv.set(e,n)),e}const gm=n=>nv.get(n),vh=["get","getKey","getAll","getAllKeys","count"],JS=["put","add","delete","clear"],mm=new Map;function lg(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(mm.get(e))return mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=JS.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!vh.includes(t))return;const o=function(){var a=(0,be.Z)(function*(d,...h){const p=this.transaction(d,i?"readwrite":"readonly");let m=p.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&p.done]))[0]});return function(h){return a.apply(this,arguments)}}();return mm.set(e,o),o}!function Y3(n){sv=n(sv)}(n=>({...n,get:(e,t,r)=>lg(e,t)||n.get(e,t,r),has:(e,t)=>!!lg(e,t)||n.has(e,t)}));class QS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Mb(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const ov="@firebase/app",Xd=new hm("@firebase/app"),wh="[DEFAULT]",fv={[ov]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Iu=new Map,bh=new Map;function oA(n,e){try{n.container.addComponent(e)}catch(t){Xd.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pu(n){const e=n.name;if(bh.has(e))return Xd.debug(`There were multiple attempts to register component ${e}.`),!1;bh.set(e,n);for(const t of Iu.values())oA(t,n);return!0}function dg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Jl=new ph("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Fa{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jl.create("app-deleted",{appName:this._name})}}const ef="9.23.0";function Nb(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:wh,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Jl.create("bad-app-name",{appName:String(i)});if(t||(t=fb()),!t)throw Jl.create("no-options");const o=Iu.get(i);if(o){if(mh(t,o.options)&&mh(r,o.config))return o;throw Jl.create("duplicate-app",{appName:i})}const a=new bb(i);for(const h of bh.values())a.addComponent(h);const d=new Fa(t,r,a);return Iu.set(i,d),d}function Lb(n=wh){const e=Iu.get(n);if(!e&&n===wh&&fb())return Nb();if(!e)throw Jl.create("no-app",{appName:n});return e}function cl(n,e,t){var r;let i=null!==(r=fv[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const d=[`Unable to register library "${i}" with version "${e}":`];return o&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&d.push("and"),a&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Xd.warn(d.join(" "))}Pu(new Kl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const fA="firebase-heartbeat-database",hA=1,tf="firebase-heartbeat-store";let pv=null;function Bb(){return pv||(pv=function X3(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(n,e),d=Mu(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Mu(a.result),h.oldVersion,h.newVersion,Mu(a.transaction),h)}),t&&a.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}(fA,hA,{upgrade:(n,e)=>{0===e&&n.createObjectStore(tf)}}).catch(n=>{throw Jl.create("idb-open",{originalErrorMessage:n.message})})),pv}function gv(){return(gv=(0,be.Z)(function*(n){try{return yield(yield Bb()).transaction(tf).objectStore(tf).get(ym(n))}catch(e){if(e instanceof al)Xd.warn(e.message);else{const t=Jl.create("idb-get",{originalErrorMessage:e?.message});Xd.warn(t.message)}}})).apply(this,arguments)}function Vb(n,e){return lc.apply(this,arguments)}function lc(){return(lc=(0,be.Z)(function*(n,e){try{const r=(yield Bb()).transaction(tf,"readwrite");yield r.objectStore(tf).put(e,ym(n)),yield r.done}catch(t){if(t instanceof al)Xd.warn(t.message);else{const r=Jl.create("idb-set",{originalErrorMessage:t?.message});Xd.warn(r.message)}}})).apply(this,arguments)}function ym(n){return`${n.name}!${n.options.appId}`}class Zb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,be.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jb();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,be.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=jb(),{heartbeatsToSend:r,unsentEntries:i}=function _A(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),xm(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),xm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=H1(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function jb(){return(new Date).toISOString().substring(0,10)}class vA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,be.Z)(function*(){return!!gb()&&function J1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,be.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function pA(n){return gv.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,be.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return Vb(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,be.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return Vb(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function xm(n){return H1(JSON.stringify({version:2,heartbeats:n})).length}!function yA(n){Pu(new Kl("platform-logger",e=>new QS(e),"PRIVATE")),Pu(new Kl("heartbeat",e=>new Zb(e),"PRIVATE")),cl(ov,"0.9.13",n),cl(ov,"0.9.13","esm2017"),cl("fire-js","")}("");var cn,xA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ua={},Ch=Ch||{},Gn=xA||self;function Eh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var bm="closure_uid_"+(1e9*Math.random()>>>0),Hb=0;function $b(n,e,t){return n.call.apply(n.bind,arguments)}function mv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$b:mv).apply(null,arguments)}function nf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function es(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var a=Array(arguments.length-2),d=2;d<arguments.length;d++)a[d-2]=arguments[d];return e.prototype[i].apply(r,a)}}function uc(){this.s=this.s,this.o=this.o}uc.prototype.s=!1,uc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function qb(n){Object.prototype.hasOwnProperty.call(n,bm)&&n[bm]||(n[bm]=++Hb)}(this)},uc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _v=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Cm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function zb(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Eh(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let a=0;a<o;a++)n[i+a]=r[a]}else n.push(r)}}function To(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}To.prototype.h=function(){this.defaultPrevented=!0};var fg=function(){if(!Gn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gn.addEventListener("test",()=>{},e),Gn.removeEventListener("test",()=>{},e)}catch{}return n}();function hg(n){return/^[\s\xa0]*$/.test(n)}function vv(){var n=Gn.navigator;return n&&(n=n.userAgent)?n:""}function ll(n){return-1!=vv().indexOf(n)}function yv(n){return yv[" "](n),n}yv[" "]=function(){};var pg,n,CA=ll("Opera"),Th=ll("Trident")||ll("MSIE"),Gb=ll("Edge"),xv=Gb||Th,wv=ll("Gecko")&&!(-1!=vv().toLowerCase().indexOf("webkit")&&!ll("Edge"))&&!(ll("Trident")||ll("MSIE"))&&!ll("Edge"),bv=-1!=vv().toLowerCase().indexOf("webkit")&&!ll("Edge");function Wb(){var n=Gn.document;return n?n.documentMode:void 0}e:{var Cv="",Ev=(n=vv(),wv?/rv:([^\);]+)(\)|;)/.exec(n):Gb?/Edge\/([\d\.]+)/.exec(n):Th?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bv?/WebKit\/(\S+)/.exec(n):CA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Ev&&(Cv=Ev?Ev[1]:""),Th){var Tv=Wb();if(null!=Tv&&Tv>parseFloat(Cv)){pg=String(Tv);break e}}pg=Cv}var EA=Gn.document&&Th&&(Wb()||parseInt(pg,10))||void 0;function gg(n,e){if(To.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wv){e:{try{yv(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gg.$.h.call(this)}}es(gg,To);var Yb={2:"touch",3:"pen",4:"mouse"};gg.prototype.h=function(){gg.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sh="closure_listenable_"+(1e6*Math.random()|0),TA=0;function sF(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++TA,this.fa=this.ia=!1}function mg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Jb(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Qb(n){const e={};for(const t in n)e[t]=n[t];return e}const Xb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tm(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Xb.length;o++)t=Xb[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Sm(n){this.src=n,this.g={},this.h=0}function dc(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=_v(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(mg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rf(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}Sm.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var a=rf(n,e,r,i);return-1<a?(e=n[a],t||(e.ia=!1)):((e=new sF(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var $s="closure_lm_"+(1e6*Math.random()|0),Ql={};function _g(n,e,t,r,i){if(r&&r.once)return sf(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)_g(n,e[o],t,r,i);return null}return t=Fu(t),n&&n[Sh]?n.O(e,t,wm(r)?!!r.capture:!!r,i):Ra(n,e,t,!1,r,i)}function Ra(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var a=wm(i)?!!i.capture:!!i,d=ku(n);if(d||(n[$s]=d=new Sm(n)),(t=d.add(e,t,r,a,o)).proxy)return t;if(r=function Av(){const e=Ah;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fg||(i=a),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(cf(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function sf(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)sf(n,e[o],t,r,i);return null}return t=Fu(t),n&&n[Sh]?n.P(e,t,wm(r)?!!r.capture:!!r,i):Ra(n,e,t,!0,r,i)}function af(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)af(n,e[o],t,r,i);else r=wm(r)?!!r.capture:!!r,t=Fu(t),n&&n[Sh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rf(o=n.g[e],t,r,i))&&(mg(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=ku(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rf(e,t,r,i)),(t=-1<n?e[n]:null)&&Du(t))}function Du(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Sh])dc(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(cf(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ku(e))?(dc(t,n),0==t.h&&(t.src=null,e[$s]=null)):mg(n)}}}function cf(n){return n in Ql?Ql[n]:Ql[n]="on"+n}function Ah(n,e){if(n.fa)n=!0;else{e=new gg(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Du(n),n=t.call(r,e)}return n}function ku(n){return(n=n[$s])instanceof Sm?n:null}var Ou="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fu(n){return"function"==typeof n?n:(n[Ou]||(n[Ou]=function(e){return n.handleEvent(e)}),n[Ou])}function Si(){uc.call(this),this.i=new Sm(this),this.S=this,this.J=null}function zs(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new To(e,n);else if(e instanceof To)e.target=e.target||n;else{var i=e;Tm(e=new To(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.g=t[o];i=vg(a,r,!0,e)&&i}if(i=vg(a=e.g=n,r,!0,e)&&i,i=vg(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=vg(a=e.g=t[o],r,!1,e)&&i}function vg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.fa&&a.capture==t){var d=a.listener,h=a.la||a.src;a.ia&&dc(n.i,a),i=!1!==d.call(h,r)&&i}}return i&&!r.defaultPrevented}es(Si,uc),Si.prototype[Sh]=!0,Si.prototype.removeEventListener=function(n,e,t,r){af(this,n,e,t,r)},Si.prototype.N=function(){if(Si.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)mg(t[r]);delete n.g[e],n.h--}}this.J=null},Si.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Si.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Am=Gn.JSON.stringify;function tC(){var n=Iv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Mv=new class eC{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new rC,n=>n.reset());class rC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function SA(n){Gn.setTimeout(()=>{throw n},0)}let yg,Mh=!1,Iv=new class nC{constructor(){this.h=this.g=null}add(e,t){const r=Mv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Pv=()=>{const n=Gn.Promise.resolve(void 0);yg=()=>{n.then(Dv)}};var Dv=()=>{for(var n;n=tC();){try{n.h.call(n.g)}catch(t){SA(t)}var e=Mv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Mh=!1};function Ih(n,e){Si.call(this),this.h=n||1,this.g=e||Gn,this.j=yi(this.qb,this),this.l=Date.now()}function kv(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Ph(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gn.setTimeout(n,e||0)}function xg(n){n.g=Ph(()=>{n.g=null,n.i&&(n.i=!1,xg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}es(Ih,Si),(cn=Ih.prototype).ga=!1,cn.T=null,cn.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zs(this,"tick"),this.ga&&(kv(this),this.start()))}},cn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},cn.N=function(){Ih.$.N.call(this),kv(this),delete this.g};class Ov extends uc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xg(this)}N(){super.N(),this.g&&(Gn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wg(n){uc.call(this),this.h=n,this.g={}}es(wg,uc);var bg=[];function Cg(n,e,t,r){Array.isArray(t)||(t&&(bg[0]=t.toString()),t=bg);for(var i=0;i<t.length;i++){var o=_g(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Fv(n){Jb(n.g,function(e,t){this.g.hasOwnProperty(t)&&Du(e)},n),n.g={}}function Eg(){this.g=!0}function lf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Am(t)}catch{return e}}(n,t)+(r?" "+r:"")})}wg.prototype.N=function(){wg.$.N.call(this),Fv(this)},wg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Eg.prototype.Ea=function(){this.g=!1},Eg.prototype.info=function(){};var uf={},Lv=null;function Tg(){return Lv=Lv||new Si}function Uv(n){To.call(this,uf.Ta,n)}function Dh(n){const e=Tg();zs(e,new Uv(e))}function aC(n,e){To.call(this,uf.STAT_EVENT,n),this.stat=e}function Bo(n){const e=Tg();zs(e,new aC(e,n))}function cC(n,e){To.call(this,uf.Ua,n),this.size=e}function kh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gn.setTimeout(function(){n()},e)}uf.Ta="serverreachability",es(Uv,To),uf.STAT_EVENT="statevent",es(aC,To),uf.Ua="timingevent",es(cC,To);var df={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Bv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mm(){}function Zv(){}Mm.prototype.h=null;var Dm,Oh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Im(){To.call(this,"d")}function Pm(){To.call(this,"c")}function ff(){}function fc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new wg(this),this.P=AA,this.V=new Ih(n=xv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new lC}function lC(){this.i=null,this.g="",this.h=!1}es(Im,To),es(Pm,To),es(ff,Mm),ff.prototype.g=function(){return new XMLHttpRequest},ff.prototype.i=function(){return{}},Dm=new ff;var AA=45e3,Sg={},ul={};function Ag(n,e,t){n.L=1,n.v=Dg(da(e)),n.s=t,n.S=!0,uC(n,null)}function uC(n,e){n.G=Date.now(),Mg(n),n.A=da(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),mC(t.i,"t",r),n.C=0,t=n.l.J,n.h=new lC,n.g=qm(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Ov(yi(n.Pa,n,n.g),n.O)),Cg(n.U,n.g,"readystatechange",n.nb),e=n.I?Qb(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Dh(),function Rv(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var a="",d=o.split("&"),h=0;h<d.length;h++){var p=d[h].split("=");if(1<p.length){var m=p[0];p=p[1];var y=m.split("_");a=2<=y.length&&"type"==y[1]?a+(m+"=")+p+"&":a+(m+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+a})}(n.j,n.u,n.A,n.m,n.W,n.s)}function km(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function MA(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=oF(n,t),i==ul){4==e&&(n.o=4,Bo(14),r=!1),lf(n.j,n.m,null,"[Incomplete Response]");break}if(i==Sg){n.o=4,Bo(15),lf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}lf(n.j,n.m,i,null),Om(n,i)}km(n)&&i!=ul&&i!=Sg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),jm(e),e.M=!0,Bo(11))):(lf(n.j,n.m,t,"[Invalid Chunked Response]"),li(n),Pg(n))}function oF(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ul:(t=Number(e.substring(t,r)),isNaN(t)?Sg:(r+=1)+t>e.length?ul:(e=e.slice(r,r+t),n.C=r+t,e))}function Mg(n){n.Y=Date.now()+n.P,dC(n,n.P)}function dC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kh(yi(n.lb,n),e)}function Ig(n){n.B&&(Gn.clearTimeout(n.B),n.B=null)}function Pg(n){0==n.l.H||n.J||Nu(n.l,n)}function li(n){Ig(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,kv(n.V),Fv(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Om(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Wv(t.i,n)))if(!n.K&&Wv(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Rg(t),Vm(t)}Zm(t),Bo(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=kh(yi(t.ib,t),6e3));if(1>=_C(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else mf(t,11)}else if((n.K||t.g==n)&&Rg(t),!hg(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let p=i[e];if(t.V=p[0],p=p[1],2==t.H)if("c"==p[0]){t.K=p[1],t.pa=p[2];const m=p[3];null!=m&&(t.ra=m,t.l.info("VER="+t.ra));const y=p[4];null!=y&&(t.Ga=y,t.l.info("SVER="+t.Ga));const T=p[5];null!=T&&"number"==typeof T&&0<T&&(t.L=r=1.5*T,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const M=n.g;if(M){const R=M.g?M.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(R){var o=r.i;o.g||-1==R.indexOf("spdy")&&-1==R.indexOf("quic")&&-1==R.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Lm(o,o.h),o.h=null))}if(r.F){const D=M.g?M.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(r.Da=D,ui(r.I,r.F,D))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var a=n;if((r=t).wa=BA(r,r.J?r.pa:null,r.Y),a.K){Kv(r.i,a);var d=a,h=r.L;h&&d.setTimeout(h),d.B&&(Ig(d),Mg(d)),r.g=a}else ry(r);0<t.j.length&&Fg(t)}else"stop"!=p[0]&&"close"!=p[0]||mf(t,7);else 3==t.H&&("stop"==p[0]||"close"==p[0]?"stop"==p[0]?mf(t,7):Xv(t):"noop"!=p[0]&&t.h&&t.h.Aa(p),t.A=0)}Dh()}catch{}}function jv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Eh(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function PA(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Eh(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function IA(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Eh(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(cn=fc.prototype).setTimeout=function(n){this.P=n},cn.nb=function(n){n=n.target;const e=this.M;e&&3==fl(n)?e.l():this.Pa(n)},cn.Pa=function(n){try{if(n==this.g)e:{const m=fl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>m)&&(3!=m||xv||this.g&&(this.h.h||this.g.ja()||SC(this.g)))){this.J||4!=m||7==e||Dh(),Ig(this);var t=this.g.da();this.ca=t;t:if(km(this)){var r=SC(this.g);n="";var i=r.length,o=4==fl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){li(this),Pg(this);var a="";break t}this.h.i=new Gn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=200==t,function sC(n,e,t,r,i,o,a){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+a})}(this.j,this.u,this.A,this.m,this.W,m,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,h=this.g;if((d=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hg(d)){var p=d;break t}}p=null}if(!(t=p)){this.i=!1,this.o=3,Bo(12),li(this),Pg(this);break e}lf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Om(this,t)}this.S?(MA(this,m,a),xv&&this.i&&3==m&&(Cg(this.U,this.V,"tick",this.mb),this.V.start())):(lf(this.j,this.m,a,null),Om(this,a)),4==m&&li(this),this.i&&!this.J&&(4==m?Nu(this.l,this):(this.i=!1,Mg(this)))}else(function UA(n){const e={};n=(n.g&&2<=fl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(hg(n[r]))continue;var t=iC(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function Em(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<a.indexOf("Unknown SID")?(this.o=3,Bo(12)):(this.o=0,Bo(13)),li(this),Pg(this)}}}catch{}},cn.mb=function(){if(this.g){var n=fl(this.g),e=this.g.ja();this.C<e.length&&(Ig(this),MA(this,n,e),this.i&&4!=n&&Mg(this))}},cn.cancel=function(){this.J=!0,li(this)},cn.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Nv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Dh(),Bo(17)),li(this),this.o=2,Pg(this)):dC(this,this.Y-n)};var fC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ru(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ru){this.h=n.h,Fm(this,n.j),this.s=n.s,this.g=n.g,Rm(this,n.m),this.l=n.l;var e=n.i,t=new Vo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),qv(this,t),this.o=n.o}else n&&(e=String(n).match(fC))?(this.h=!1,Fm(this,e[1]||"",!0),this.s=Nm(e[2]||""),this.g=Nm(e[3]||"",!0),Rm(this,e[4]),this.l=Nm(e[5]||"",!0),qv(this,e[6]||"",!0),this.o=Nm(e[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}function da(n){return new Ru(n)}function Fm(n,e,t){n.j=t?Nm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Rm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qv(n,e,t){e instanceof Vo?(n.i=e,function kA(n,e){e&&!n.j&&(Xl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&($v(this,r),mC(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=hf(e,dl)),n.i=new Vo(e,n.h))}function ui(n,e,t){n.i.set(e,t)}function Dg(n){return ui(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Hv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Hv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ru.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hf(e,Rc,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hf(e,Rc,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(hf(t,"/"==t.charAt(0)?pC:DA,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hf(t,Nc)),n.join("")};var Rc=/[#\/\?@]/g,DA=/[#\?:]/g,pC=/[#\?]/g,dl=/[#\?@]/g,Nc=/#/g;function Vo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xl(n){n.g||(n.g=new Map,n.h=0,n.i&&function hC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $v(n,e){Xl(n),e=Fh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function gC(n,e){return Xl(n),e=Fh(n,e),n.g.has(e)}function mC(n,e,t){$v(n,e),0<t.length&&(n.i=null,n.g.set(Fh(n,e),Cm(t)),n.h+=t.length)}function Fh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Rh(n){this.l=n||OA,n=Gn.PerformanceNavigationTiming?0<(n=Gn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gn.g&&Gn.g.Ka&&Gn.g.Ka()&&Gn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(cn=Vo.prototype).add=function(n,e){Xl(this),this.i=null,n=Fh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},cn.forEach=function(n,e){Xl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},cn.ta=function(){Xl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},cn.Z=function(n){Xl(this);let e=[];if("string"==typeof n)gC(this,n)&&(e=e.concat(this.g.get(Fh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},cn.set=function(n,e){return Xl(this),this.i=null,gC(this,n=Fh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},cn.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},cn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),n.push(i)}}return this.i=n.join("&")};var OA=10;function Gv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _C(n){return n.h?1:n.g?n.g.size:0}function Wv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Lm(n,e){n.g?n.g.add(e):n.h=e}function Kv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function kg(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Cm(n.i)}Rh.prototype.cancel=function(){if(this.i=kg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var FA=class{stringify(n){return Gn.JSON.stringify(n,void 0)}parse(n){return Gn.JSON.parse(n,void 0)}};function vC(){this.g=new FA}function yC(n,e,t){const r=t||"";try{jv(n,function(i,o){let a=i;wm(i)&&(a=Am(i)),e.push(r+o+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pf(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function gf(n){this.l=n.fc||null,this.j=n.ob||!1}function Nh(n,e){Si.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Um,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}es(gf,Mm),gf.prototype.g=function(){return new Nh(this.l,this.j)},gf.prototype.i=function(n){return function(){return n}}({}),es(Nh,Si);var Um=0;function Jv(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Lh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uh(n)}function Uh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(cn=Nh.prototype).open=function(n,e){if(this.readyState!=Um)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uh(this)},cn.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Gn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},cn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lh(this)),this.readyState=Um},cn.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Gn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Jv(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},cn.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Lh(this):Uh(this),3==this.readyState&&Jv(this)}},cn.Za=function(n){this.g&&(this.response=this.responseText=n,Lh(this))},cn.Ya=function(n){this.g&&(this.response=n,Lh(this))},cn.ka=function(){this.g&&Lh(this)},cn.setRequestHeader=function(n,e){this.v.append(n,e)},cn.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},cn.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var xC=Gn.JSON.parse;function Ai(n){Si.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wC,this.L=this.M=!1}es(Ai,Si);var wC="",RA=/^https?$/i,NA=["POST","PUT"];function bC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,CC(n),Bm(n)}function CC(n){n.F||(n.F=!0,zs(n,"complete"),zs(n,"error"))}function EC(n){if(n.h&&typeof Ch<"u"&&(!n.C[1]||4!=fl(n)||2!=n.da()))if(n.v&&4==fl(n))Ph(n.La,0,n);else if(zs(n,"readystatechange"),4==fl(n)){n.h=!1;try{const a=n.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.I).match(fC)[1]||null;!i&&Gn.self&&Gn.self.location&&(i=Gn.self.location.protocol.slice(0,-1)),r=!RA.test(i?i.toLowerCase():"")}t=r}if(t)zs(n,"complete"),zs(n,"success");else{n.m=6;try{var o=2<fl(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",CC(n)}}finally{Bm(n)}}}function Bm(n,e){if(n.g){TC(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||zs(n,"ready");try{t.onreadystatechange=r}catch{}}}function TC(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Gn.clearTimeout(n.A),n.A=null)}function fl(n){return n.g?n.g.readyState:0}function SC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case wC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function AC(n){let e="";return Jb(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Qv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=AC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ui(n,e,t))}function Og(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function MC(n){this.Ga=0,this.j=[],this.l=new Eg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Og("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Og("baseRetryDelayMs",5e3,n),this.hb=Og("retryDelaySeedMs",1e4,n),this.eb=Og("forwardChannelMaxRetries",2,n),this.xa=Og("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Rh(n&&n.concurrentRequestLimit),this.Ja=new vC,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Xv(n){if(ey(n),3==n.H){var e=n.W++,t=da(n.I);if(ui(t,"SID",n.K),ui(t,"RID",e),ui(t,"TYPE","terminate"),Bh(n,t),(e=new fc(n,n.l,e)).L=2,e.v=Dg(da(t)),t=!1,Gn.navigator&&Gn.navigator.sendBeacon)try{t=Gn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Gn.Image&&((new Image).src=e.v,t=!0),t||(e.g=qm(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Mg(e)}_f(n)}function Vm(n){n.g&&(jm(n),n.g.cancel(),n.g=null)}function ey(n){Vm(n),n.u&&(Gn.clearTimeout(n.u),n.u=null),Rg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Gn.clearTimeout(n.m),n.m=null)}function Fg(n){if(!Gv(n.i)&&!n.m){n.m=!0;var e=n.Na;yg||Pv(),Mh||(yg(),Mh=!0),Iv.add(e,n),n.C=0}}function ty(n,e){var t;t=e?e.m:n.W++;const r=da(n.I);ui(r,"SID",n.K),ui(r,"RID",t),ui(r,"AID",n.V),Bh(n,r),n.o&&n.s&&Qv(r,n.o,n.s),t=new fc(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=ny(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Lm(n.i,t),Ag(t,r,e)}function Bh(n,e){n.na&&Jb(n.na,function(t,r){ui(e,r,t)}),n.h&&jv({},function(t,r){ui(e,r,t)})}function ny(n,e,t){t=Math.min(n.j.length,t);var r=n.h?yi(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const a=["count="+t];-1==o?0<t?(o=i[0].g,a.push("ofs="+o)):o=0:a.push("ofs="+o);let d=!0;for(let h=0;h<t;h++){let p=i[h].g;const m=i[h].map;if(p-=o,0>p)o=Math.max(0,i[h].g-100),d=!1;else try{yC(m,a,"req"+p+"_")}catch{r&&r(m)}}if(d){r=a.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function ry(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;yg||Pv(),Mh||(yg(),Mh=!0),Iv.add(e,n),n.A=0}}function Zm(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kh(yi(n.Ma,n),PC(n,n.A)),n.A++,0))}function jm(n){null!=n.B&&(Gn.clearTimeout(n.B),n.B=null)}function iy(n){n.g=new fc(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=da(n.wa);ui(e,"RID","rpc"),ui(e,"SID",n.K),ui(e,"AID",n.V),ui(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ui(e,"TO",n.qa),ui(e,"TYPE","xmlhttp"),Bh(n,e),n.o&&n.s&&Qv(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Dg(da(e)),t.s=null,t.S=!0,uC(t,n)}function Rg(n){null!=n.v&&(Gn.clearTimeout(n.v),n.v=null)}function Nu(n,e){var t=null;if(n.g==e){Rg(n),jm(n),n.g=null;var r=2}else{if(!Wv(n.i,e))return;t=e.F,Kv(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;zs(r=Tg(),new cC(r,t)),Fg(n)}else ry(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function IC(n,e){return!(_C(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kh(yi(n.Na,n,e),PC(n,n.C)),n.C++,0)))}(n,e)||2==r&&Zm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:mf(n,5);break;case 4:mf(n,10);break;case 3:mf(n,6);break;default:mf(n,2)}}function PC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function mf(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=yi(n.pb,n);t||(t=new Ru("//www.google.com/images/cleardot.gif"),Gn.location&&"http"==Gn.location.protocol||Fm(t,"https"),Dg(t)),function Yv(n,e){const t=new Eg;if(Gn.Image){const r=new Image;r.onload=nf(pf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nf(pf,t,r,"TestLoadImage: error",!1,e),r.onabort=nf(pf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nf(pf,t,r,"TestLoadImage: timeout",!1,e),Gn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bo(2);n.H=0,n.h&&n.h.za(e),_f(n),ey(n)}function _f(n){if(n.H=0,n.ma=[],n.h){const e=kg(n.i);(0!=e.length||0!=n.j.length)&&(zb(n.ma,e),zb(n.ma,n.j),n.i.i.length=0,Cm(n.j),n.j.length=0),n.h.ya()}}function BA(n,e,t){var r=t instanceof Ru?da(t):new Ru(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Rm(r,r.m);else{var i=Gn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ru(null);r&&Fm(o,r),e&&(o.g=e),i&&Rm(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&ui(r,t,e),ui(r,"VER",n.ra),Bh(n,r),r}function qm(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ai(t&&n.Ha&&!n.va?new gf({ob:!0}):n.va)).Oa(n.J),e}function VA(){}function Ng(){if(Th&&!(10<=Number(EA)))throw Error("Environmental error: no available transport.")}function fa(n,e){Si.call(this),this.g=new MC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!hg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hg(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vh(this)}function ZA(n){Im.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Rn(){Pm.call(this),this.status=1}function Vh(n){this.g=n}function Lc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Lu(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],a=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;a=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(a<<7&4294967295|a>>>25))+((a=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(e=t+((a=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function qr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(cn=Ai.prototype).Oa=function(n){this.M=n},cn.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Dm.g(),this.C=function Vv(n){return n.h||(n.h=n.i())}(this.u?this.u:Dm),this.g.onreadystatechange=yi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void bC(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=Gn.FormData&&n instanceof Gn.FormData,!(0<=_v(NA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of t)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{TC(this),0<this.B&&((this.L=function LA(n){return Th&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.ua,this)):this.A=Ph(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){bC(this,o)}},cn.ua=function(){typeof Ch<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zs(this,"timeout"),this.abort(8))},cn.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,zs(this,"complete"),zs(this,"abort"),Bm(this))},cn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bm(this,!0)),Ai.$.N.call(this)},cn.La=function(){this.s||(this.G||this.v||this.l?EC(this):this.kb())},cn.kb=function(){EC(this)},cn.isActive=function(){return!!this.g},cn.da=function(){try{return 2<fl(this)?this.g.status:-1}catch{return-1}},cn.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},cn.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),xC(e)}},cn.Ia=function(){return this.m},cn.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(cn=MC.prototype).ra=8,cn.H=1,cn.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new fc(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Qb(o),Tm(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ny(this,i,e),ui(t=da(this.I),"RID",n),ui(t,"CVER",22),this.F&&ui(t,"X-HTTP-Session-Id",this.F),Bh(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(AC(o)))+"&"+e:this.o&&Qv(t,this.o,o)),Lm(this.i,i),this.bb&&ui(t,"TYPE","init"),this.P?(ui(t,"$req",e),ui(t,"SID","null"),i.aa=!0,Ag(i,t,null)):Ag(i,t,e),this.H=2}}else 3==this.H&&(n?ty(this,n):0==this.j.length||Gv(this.i)||ty(this))},cn.Ma=function(){if(this.u=null,iy(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kh(yi(this.jb,this),n)}},cn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bo(10),Vm(this),iy(this))},cn.ib=function(){null!=this.v&&(this.v=null,Vm(this),Zm(this),Bo(19))},cn.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Bo(2)):(this.l.info("Failed to ping google.com"),Bo(1))},cn.isActive=function(){return!!this.h&&this.h.isActive(this)},(cn=VA.prototype).Ba=function(){},cn.Aa=function(){},cn.za=function(){},cn.ya=function(){},cn.isActive=function(){return!0},cn.Va=function(){},Ng.prototype.g=function(n,e){return new fa(n,e)},es(fa,Si),fa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Bo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=BA(n,null,n.Y),Fg(n)},fa.prototype.close=function(){Xv(this.g)},fa.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Am(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Fg(e)},fa.prototype.N=function(){this.g.h=null,delete this.j,Xv(this.g),delete this.g,fa.$.N.call(this)},es(ZA,Im),es(Rn,Pm),es(Vh,VA),Vh.prototype.Ba=function(){zs(this.g,"a")},Vh.prototype.Aa=function(n){zs(this.g,new ZA(n))},Vh.prototype.za=function(n){zs(this.g,new Rn)},Vh.prototype.ya=function(){zs(this.g,"b")},es(Lc,function jA(){this.blockSize=-1}),Lc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Lc.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)Lu(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){Lu(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){Lu(this,r),i=0;break}}this.h=i,this.i+=e},Lc.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Hm={};function Zh(n){return-128<=n&&128>n?function bA(n,e){var t=Hm;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new qr([0|e],0>e?-1:0)}):new qr([0|n],0>n?-1:0)}function Lr(n){if(isNaN(n)||!isFinite(n))return vf;if(0>n)return Gs(Lr(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=$m;return new qr(e,0)}var $m=4294967296,vf=Zh(0),sy=Zh(1),oy=Zh(16777216);function hl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Na(n){return-1==n.h}function Gs(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new qr(t,~n.h).add(sy)}function zm(n,e){return n.add(Gs(e))}function Gm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Lg(n,e){this.g=n,this.h=e}function Uu(n,e){if(hl(e))throw Error("division by zero");if(hl(n))return new Lg(vf,vf);if(Na(n))return e=Uu(Gs(n),e),new Lg(Gs(e.g),Gs(e.h));if(Na(e))return e=Uu(n,Gs(e)),new Lg(Gs(e.g),e.h);if(30<n.g.length){if(Na(n)||Na(e))throw Error("slowDivide_ only works with positive integers.");for(var t=sy,r=e;0>=r.X(n);)t=DC(t),r=DC(r);var i=jh(t,1),o=jh(r,1);for(r=jh(r,2),t=jh(t,2);!hl(r);){var a=o.add(r);0>=a.X(n)&&(i=i.add(t),o=a),r=jh(r,1),t=jh(t,1)}return e=zm(n,i.R(e)),new Lg(i,e)}for(i=vf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),a=(o=Lr(t)).R(e);Na(a)||0<a.X(n);)a=(o=Lr(t-=r)).R(e);hl(o)&&(o=sy),i=i.add(o),n=zm(n,a)}return new Lg(i,n)}function DC(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new qr(t,n.h)}function jh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new qr(i,n.h)}(cn=qr.prototype).ea=function(){if(Na(this))return-Gs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:$m+r)*e,e*=$m}return n},cn.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(hl(this))return"0";if(Na(this))return"-"+Gs(this).toString(n);for(var e=Lr(Math.pow(n,6)),t=this,r="";;){var i=Uu(t,e).g,o=((0<(t=zm(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(hl(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},cn.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},cn.X=function(n){return Na(n=zm(this,n))?-1:hl(n)?0:1},cn.abs=function(){return Na(this)?Gs(this):this},cn.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),a=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=a>>>16,t[i]=(a&=65535)<<16|(o&=65535)}return new qr(t,-2147483648&t[t.length-1]?-1:0)},cn.R=function(n){if(hl(this)||hl(n))return vf;if(Na(this))return Na(n)?Gs(this).R(Gs(n)):Gs(Gs(this).R(n));if(Na(n))return Gs(this.R(Gs(n)));if(0>this.X(oy)&&0>n.X(oy))return Lr(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,a=65535&this.D(r),d=n.D(i)>>>16,h=65535&n.D(i);t[2*r+2*i]+=a*h,Gm(t,2*r+2*i),t[2*r+2*i+1]+=o*h,Gm(t,2*r+2*i+1),t[2*r+2*i+1]+=a*d,Gm(t,2*r+2*i+1),t[2*r+2*i+2]+=o*d,Gm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new qr(t,0)},cn.gb=function(n){return Uu(this,n).h},cn.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new qr(t,this.h&n.h)},cn.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new qr(t,this.h|n.h)},cn.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new qr(t,this.h^n.h)},Ng.prototype.createWebChannel=Ng.prototype.g,fa.prototype.send=fa.prototype.u,fa.prototype.open=fa.prototype.m,fa.prototype.close=fa.prototype.close,df.NO_ERROR=0,df.TIMEOUT=8,df.HTTP_ERROR=6,Bv.COMPLETE="complete",Zv.EventType=Oh,Oh.OPEN="a",Oh.CLOSE="b",Oh.ERROR="c",Oh.MESSAGE="d",Si.prototype.listen=Si.prototype.O,Ai.prototype.listenOnce=Ai.prototype.P,Ai.prototype.getLastError=Ai.prototype.Sa,Ai.prototype.getLastErrorCode=Ai.prototype.Ia,Ai.prototype.getStatus=Ai.prototype.da,Ai.prototype.getResponseJson=Ai.prototype.Wa,Ai.prototype.getResponseText=Ai.prototype.ja,Ai.prototype.send=Ai.prototype.ha,Ai.prototype.setWithCredentials=Ai.prototype.Oa,Lc.prototype.digest=Lc.prototype.l,Lc.prototype.reset=Lc.prototype.reset,Lc.prototype.update=Lc.prototype.j,qr.prototype.add=qr.prototype.add,qr.prototype.multiply=qr.prototype.R,qr.prototype.modulo=qr.prototype.gb,qr.prototype.compare=qr.prototype.X,qr.prototype.toNumber=qr.prototype.ea,qr.prototype.toString=qr.prototype.toString,qr.prototype.getBits=qr.prototype.D,qr.fromNumber=Lr,qr.fromString=function qA(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Gs(qA(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Lr(Math.pow(e,8)),r=vf,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),a=parseInt(n.substring(i,i+o),e);8>o?(o=Lr(Math.pow(e,o)),r=r.R(o).add(Lr(a))):r=(r=r.R(t)).add(Lr(a))}return r};var HA=ua.createWebChannelTransport=function(){return new Ng},Wm=ua.getStatEventTarget=function(){return Tg()},Km=ua.ErrorCode=df,kC=ua.EventType=Bv,OC=ua.Event=uf,FC=ua.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ug=ua.FetchXmlHttpFactory=gf,Bu=ua.WebChannel=Zv,$A=ua.XhrIo=Ai,zA=ua.Md5=Lc,qh=ua.Integer=qr;const ay="@firebase/firestore";class Ds{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ds.UNAUTHENTICATED=new Ds(null),Ds.GOOGLE_CREDENTIALS=new Ds("google-credentials-uid"),Ds.FIRST_PARTY=new Ds("first-party-uid"),Ds.MOCK_USER=new Ds("mock-user");let yf="9.23.0";const Vu=new hm("@firebase/firestore");function Ym(){return Vu.logLevel}function Rt(n,...e){if(Vu.logLevel<=vr.DEBUG){const t=e.map(RC);Vu.debug(`Firestore (${yf}): ${n}`,...t)}}function gs(n,...e){if(Vu.logLevel<=vr.ERROR){const t=e.map(RC);Vu.error(`Firestore (${yf}): ${n}`,...t)}}function pl(n,...e){if(Vu.logLevel<=vr.WARN){const t=e.map(RC);Vu.warn(`Firestore (${yf}): ${n}`,...t)}}function RC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function wn(n="Unexpected state"){const e=`FIRESTORE (${yf}) INTERNAL ASSERTION FAILED: `+n;throw gs(e),new Error(e)}function Mn(n,e){n||wn()}function un(n,e){return n}const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class At extends al{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class NC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ds.UNAUTHENTICATED))}shutdown(){}}class WA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KA{constructor(e){this.t=e,this.currentUser=Ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Mi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=a;e.enqueueRetryable((0,be.Z)(function*(){yield p.promise,yield o(r.currentUser)}))},h=p=>{Rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Mi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mn("string"==typeof r.accessToken),new NC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mn(null===e||"string"==typeof e),new Ds(e)}}class cF{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ds.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class YA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new cF(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ds.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=o=>{null!=o.error&&Rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.T;return this.T=o.token,Rt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?i(o):Rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mn("string"==typeof t.token),this.T=t.token,new ly(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bg(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class LC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Bg(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Zn(n,e){return n<e?-1:n>e?1:0}function Hh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uy(n){return n+"\0"}class Ii{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new At(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new At(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new At(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new At(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ii.fromMillis(Date.now())}static fromDate(e){return Ii.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ii(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zn(this.nanoseconds,e.nanoseconds):Zn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pn(e)}static min(){return new Pn(new Ii(0,0))}static max(){return new Pn(new Ii(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vg{constructor(e,t,r){void 0===t?t=0:t>e.length&&wn(),void 0===r?r=e.length-t:r>e.length-t&&wn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vg?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pr extends Vg{construct(e,t,r){return new pr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new At(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pr(t)}static emptyPath(){return new pr([])}}const QA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qi extends Vg{construct(e,t,r){return new qi(e,t,r)}static isValidIdentifier(e){return QA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qi(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new At(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new At(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new At(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else"`"===d?(a=!a,i++):"."!==d||a?(r+=d,i++):(o(),i++)}if(o(),a)throw new At(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qi(t)}static emptyPath(){return new qi([])}}class sn{constructor(e){this.path=e}static fromPath(e){return new sn(pr.fromString(e))}static fromName(e){return new sn(pr.fromString(e).popFirst(5))}static empty(){return new sn(pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sn(new pr(e.slice()))}}class Jm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function dy(n){return n.fields.find(e=>2===e.kind)}function xf(n){return n.fields.filter(e=>2!==e.kind)}Jm.UNKNOWN_ID=-1;class Qm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zg(0,La.min())}}function VC(n){return new La(n.readTime,n.key,-1)}class La{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new La(Pn.min(),sn.empty(),-1)}static max(){return new La(Pn.max(),sn.empty(),-1)}}function hy(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=sn.comparator(n.documentKey,e.documentKey),0!==t?t:Zn(n.largestBatchId,e.largestBatchId))}const ZC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Zu(n){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,be.Z)(function*(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==ZC)throw n;Rt("LocalStore","Unexpectedly lost primary lease")}),Xm.apply(this,arguments)}class ze{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ze((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ze?t:ze.resolve(t)}catch(t){return ze.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ze.reject(t)}static resolve(e){return new ze((t,r)=>{t(e)})}static reject(e){return new ze((t,r)=>{r(e)})}static waitFor(e){return new ze((t,r)=>{let i=0,o=0,a=!1;e.forEach(d=>{++i,d.next(()=>{++o,a&&o===i&&t()},h=>r(h))}),a=!0,o===i&&t()})}static or(e){let t=ze.resolve(!1);for(const r of e)t=t.next(i=>i?ze.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ze((r,i)=>{const o=e.length,a=new Array(o);let d=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next(m=>{a[p]=m,++d,d===o&&r(a)},m=>i(m))}})}static doWhile(e,t){return new ze((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class e_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Mi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new jg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=n_(r.target.error);this.v.reject(new jg(e,i))}}static open(e,t,r,i){try{return new e_(t,e.transaction(i,r))}catch(o){throw new jg(t,o)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Rt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XA(t)}}class Uc{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Uc.S(Ti())&&gs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Rt("SimpleDb","Removing database:",e),eu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!gb())return!1;if(Uc.C())return!0;const e=Ti(),t=Uc.S(e),r=0<t&&t<10,i=Uc.N(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,be.Z)(function*(){return t.db||(Rt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=a=>{r(a.target.result)},o.onblocked=()=>{i(new jg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=a=>{const d=a.target.error;i("VersionError"===d.name?new At(et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new At(et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new jg(e,d))},o.onupgradeneeded=a=>{Rt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',a.oldVersion),t.V.O(a.target.result,o.transaction,a.oldVersion,t.version).next(()=>{Rt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,be.Z)(function*(){const a="readonly"===t;let d=0;for(;;){++d;try{o.db=yield o.$(e);const h=e_.open(o.db,e,a?"readonly":"readwrite",r),p=i(h).next(m=>(h.P(),m)).catch(m=>(h.abort(m),ze.reject(m))).toPromise();return p.catch(()=>{}),yield h.R,p}catch(h){const p=h,m="FirebaseError"!==p.name&&d<3;if(Rt("SimpleDb","Transaction failed with error:",p.message,"Retrying:",m),o.close(),!m)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qC{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return eu(this.L.delete())}}class jg extends At{constructor(e,t){super(et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ju(n){return"IndexedDbTransactionError"===n.name}class XA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Rt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Rt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eu(r)}add(e){return Rt("SimpleDb","ADD",this.store.name,e,e),eu(this.store.add(e))}get(e){return eu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Rt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Rt("SimpleDb","DELETE",this.store.name,e),eu(this.store.delete(e))}count(){return Rt("SimpleDb","COUNT",this.store.name),eu(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.W(i,(a,d)=>{o.push(d)}).next(()=>o)}{const i=this.store.getAll(r.range);return new ze((o,a)=>{i.onerror=d=>{a(d.target.error)},i.onsuccess=d=>{o(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ze((i,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}J(e,t){Rt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(o,a,d)=>d.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ze((r,i)=>{t.onerror=o=>{const a=n_(o.target.error);i(a)},t.onsuccess=o=>{const a=o.target.result;a?e(a.primaryKey,a.value).next(d=>{d?a.continue():r()}):r()}})}W(e,t){const r=[];return new ze((i,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{const d=a.target.result;if(!d)return void i();const h=new qC(d),p=t(d.primaryKey,d.value,h);if(p instanceof ze){const m=p.catch(y=>(h.done(),ze.reject(y)));r.push(m)}h.isDone?i():null===h.K?d.continue():d.continue(h.K)}}).next(()=>ze.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function eu(n){return new ze((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=n_(r.target.error);t(i)}})}let t_=!1;function n_(n){const e=Uc.S(Ti());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new At("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return t_||(t_=!0,setTimeout(()=>{throw r},0)),r}}return n}class py{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Rt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Rt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){ju(r)?Rt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Zu(r)}yield t.et(6e4)}))}}class eM{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,o=!0;return ze.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(null!==a&&!r.has(a))return Rt("IndexBackiller",`Processing collection: ${a}`),this.it(e,a,i).next(d=>{i-=d,r.add(a)});o=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.rt(i,o)).next(d=>(Rt("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>a.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,o)=>{const a=VC(o);hy(a,r)>0&&(r=a)}),new La(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ua=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function wf(n){return null==n}function qg(n){return 0===n&&1/n==-1/0}function ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$C(e)),e=HC(n.get(t),e);return $C(e)}function HC(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function $C(n){return n+"\x01\x01"}function tu(n){const e=n.length;if(Mn(e>=2),2===e)return Mn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pr.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const a=n.indexOf("\x01",o);switch((a<0||a>t)&&wn(),n.charAt(a+1)){case"\x01":const d=n.substring(o,a);let h;0===i.length?h=d:(i+=d,h=i,i=""),r.push(h);break;case"\x10":i+=n.substring(o,a),i+="\0";break;case"\x11":i+=n.substring(o,a+1);break;default:wn()}o=a+2}return new pr(r)}const my=["userId","batchId"];function $h(n,e){return[n,ts(e)]}function zC(n,e,t){return[n,ts(e),t]}const _y={},tM=["prefixPath","collectionGroup","readTime","documentId"],GC=["prefixPath","collectionGroup","documentId"],vy=["collectionGroup","readTime","prefixPath","documentId"],WC=["canonicalId","targetId"],KC=["targetId","path"],YC=["path","targetId"],JC=["collectionId","parent"],nM=["indexId","uid"],rM=["uid","sequenceNumber"],iM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sM=["indexId","uid","orderedDocumentKey"],QC=["userId","collectionPath","documentId"],uF=["userId","collectionPath","largestBatchId"],XC=["userId","collectionGroup","largestBatchId"],e2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oM=[...e2,"documentOverlays"],aM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],t2=aM,cM=[...t2,"indexConfiguration","indexState","indexEntries"];class r_ extends jC{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ks(n,e){const t=un(n);return Uc.M(t.ht,e)}function n2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function nu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function r2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ii{constructor(e,t){this.comparator=e,this.root=t||ao.EMPTY}insert(e,t){return new ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ao.BLACK,null,null))}remove(e){return new ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ao.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new i_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new i_(this.root,e,this.comparator,!1)}getReverseIterator(){return new i_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new i_(this.root,e,this.comparator,!0)}}class i_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ao{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ao.RED,this.left=i??ao.EMPTY,this.right=o??ao.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ao(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ao.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ao.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ao.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ao.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wn();const e=this.left.check();if(e!==this.right.check())throw wn();return e+(this.isRed()?0:1)}}ao.EMPTY=null,ao.RED=!0,ao.BLACK=!1,ao.EMPTY=new class{constructor(){this.size=0}get key(){throw wn()}get value(){throw wn()}get color(){throw wn()}get left(){throw wn()}get right(){throw wn()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ao(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class di{constructor(e){this.comparator=e,this.data=new ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new i2(this.data.getIterator())}getIteratorFrom(e){return new i2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof di)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new di(this.comparator);return t.data=e,t}}class i2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gl(n){return n.hasNext()?n.getNext():void 0}class Zo{constructor(e){this.fields=e,e.sort(qi.comparator)}static empty(){return new Zo([])}unionWith(e){let t=new di(qi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ms{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yy("Invalid base64 string: "+i):i}}(e);return new ms(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new ms(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ms.EMPTY_BYTE_STRING=new ms("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ru(n){if(Mn(!!n),"string"==typeof n){let e=0;const t=s2.exec(n);if(Mn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hi(n.seconds),nanos:Hi(n.nanos)}}function Hi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qu(n){return"string"==typeof n?ms.fromBase64String(n):ms.fromUint8Array(n)}function Hg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function $g(n){const e=n.mapValue.fields.__previous_value__;return Hg(e)?$g(e):e}function zh(n){const e=ru(n.mapValue.fields.__local_write_time__.timestampValue);return new Ii(e.seconds,e.nanos)}class o2{constructor(e,t,r,i,o,a,d,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=p}}class bf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new bf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof bf&&e.projectId===this.projectId&&e.database===this.database}}const hc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},s_={nullValue:"NULL_VALUE"};function ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hg(n)?4:by(n)?9007199254740991:10:wn()}function Os(n,e){if(n===e)return!0;const t=ml(n);if(t!==ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zh(n).isEqual(zh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=ru(r.timestampValue),a=ru(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,qu(n.bytesValue).isEqual(qu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Hi(r.geoPointValue.latitude)===Hi(i.geoPointValue.latitude)&&Hi(r.geoPointValue.longitude)===Hi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Hi(r.integerValue)===Hi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Hi(r.doubleValue),a=Hi(i.doubleValue);return o===a?qg(o)===qg(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Hh(n.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(n2(o)!==n2(a))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(void 0===a[d]||!Os(o[d],a[d])))return!1;return!0}(n,e);default:return wn()}var i}function zg(n,e){return void 0!==(n.values||[]).find(t=>Os(t,e))}function _l(n,e){if(n===e)return 0;const t=ml(n),r=ml(e);if(t!==r)return Zn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zn(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Hi(i.integerValue||i.doubleValue),d=Hi(o.integerValue||o.doubleValue);return a<d?-1:a>d?1:a===d?0:isNaN(a)?isNaN(d)?0:-1:1}(n,e);case 3:return Gh(n.timestampValue,e.timestampValue);case 4:return Gh(zh(n),zh(e));case 5:return Zn(n.stringValue,e.stringValue);case 6:return function(i,o){const a=qu(i),d=qu(o);return a.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),d=o.split("/");for(let h=0;h<a.length&&h<d.length;h++){const p=Zn(a[h],d[h]);if(0!==p)return p}return Zn(a.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Zn(Hi(i.latitude),Hi(o.latitude));return 0!==a?a:Zn(Hi(i.longitude),Hi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],d=o.values||[];for(let h=0;h<a.length&&h<d.length;++h){const p=_l(a[h],d[h]);if(p)return p}return Zn(a.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===hc.mapValue&&o===hc.mapValue)return 0;if(i===hc.mapValue)return 1;if(o===hc.mapValue)return-1;const a=i.fields||{},d=Object.keys(a),h=o.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=Zn(d[m],p[m]);if(0!==y)return y;const T=_l(a[d[m]],h[p[m]]);if(0!==T)return T}return Zn(d.length,p.length)}(n.mapValue,e.mapValue);default:throw wn()}}function Gh(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zn(n,e);const t=ru(n),r=ru(e),i=Zn(t.seconds,r.seconds);return 0!==i?i:Zn(t.nanos,r.nanos)}function Wh(n){return xy(n)}function xy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ru(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qu(n.bytesValue).toBase64():"referenceValue"in n?sn.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const a of r.values||[])o?o=!1:i+=",",i+=xy(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",a=!0;for(const d of i)a?a=!1:o+=",",o+=`${d}:${xy(r.fields[d])}`;return o+"}"}(n.mapValue):wn();var e}function vl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kh(n){return!!n&&"integerValue"in n}function Gg(n){return!!n&&"arrayValue"in n}function a2(n){return!!n&&"nullValue"in n}function wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wg(n){return!!n&&"mapValue"in n}function Cf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return nu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function by(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Cy(n){return"nullValue"in n?s_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vl(bf.empty(),sn.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:wn()}function Ey(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vl(bf.empty(),sn.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?hc:wn()}function Ty(n,e){const t=_l(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function a_(n,e){const t=_l(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fs{constructor(e){this.value=e}static empty(){return new Fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cf(t)}setAll(e){let t=qi.emptyPath(),r={},i=[];e.forEach((a,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}a?r[d.lastSegment()]=Cf(a):i.push(d.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Wg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){nu(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Fs(Cf(this.value))}}function c2(n){const e=[];return nu(n.fields,(t,r)=>{const i=new qi([t]);if(Wg(r)){const o=c2(r.mapValue).fields;if(0===o.length)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Zo(e)}class fi{constructor(e,t,r,i,o,a,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=d}static newInvalidDocument(e){return new fi(e,0,Pn.min(),Pn.min(),Pn.min(),Fs.empty(),0)}static newFoundDocument(e,t,r,i){return new fi(e,1,t,Pn.min(),r,i,0)}static newNoDocument(e,t){return new fi(e,2,t,Pn.min(),Pn.min(),Fs.empty(),0)}static newUnknownDocument(e,t){return new fi(e,3,t,Pn.min(),Pn.min(),Fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hu{constructor(e,t){this.position=e,this.inclusive=t}}function l2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],a=n.position[i];if(r=o.field.isKeyField()?sn.comparator(sn.fromName(a.referenceValue),t.key):_l(a,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Sy(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Os(n.position[t],e.position[t]))return!1;return!0}class $u{constructor(e,t="asc"){this.field=e,this.dir=t}}function u2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ay{}class ur extends Ay{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new uM(e,t,r):"array-contains"===t?new f2(e,r):"in"===t?new d_(e,r):"not-in"===t?new Kg(e,r):"array-contains-any"===t?new hM(e,r):new ur(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new dM(e,r):new dF(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(_l(t,this.value)):null!==t&&ml(this.value)===ml(t)&&this.matchesComparison(_l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Br extends Ay{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Br(e,t)}matches(e){return Yh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Yh(n){return"and"===n.op}function c_(n){return"or"===n.op}function l_(n){return d2(n)&&Yh(n)}function d2(n){for(const e of n.filters)if(e instanceof Br)return!1;return!0}function u_(n){if(n instanceof ur)return n.field.canonicalString()+n.op.toString()+Wh(n.value);if(l_(n))return n.filters.map(e=>u_(e)).join(",");{const e=n.filters.map(t=>u_(t)).join(",");return`${n.op}(${e})`}}function My(n,e){return n instanceof ur?(t=n,(r=e)instanceof ur&&t.op===r.op&&t.field.isEqual(r.field)&&Os(t.value,r.value)):n instanceof Br?function(t,r){return r instanceof Br&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,o,a)=>i&&My(o,r.filters[a]),!0)}(n,e):void wn();var t,r}function So(n,e){const t=n.filters.concat(e);return Br.create(t,n.op)}function Ef(n){return n instanceof ur?`${(e=n).field.canonicalString()} ${e.op} ${Wh(e.value)}`:n instanceof Br?function(e){return e.op.toString()+" {"+e.getFilters().map(Ef).join(" ,")+"}"}(n):"Filter";var e}class uM extends ur{constructor(e,t,r){super(e,t,r),this.key=sn.fromName(r.referenceValue)}matches(e){const t=sn.comparator(e.key,this.key);return this.matchesComparison(t)}}class dM extends ur{constructor(e,t){super(e,"in",t),this.keys=fM(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dF extends ur{constructor(e,t){super(e,"not-in",t),this.keys=fM(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fM(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>sn.fromName(r.referenceValue))}class f2 extends ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gg(t)&&zg(t.arrayValue,this.value)}}class d_ extends ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zg(this.value.arrayValue,t)}}class Kg extends ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(zg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zg(this.value.arrayValue,t)}}class hM extends ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zg(this.value.arrayValue,r))}}class Iy{constructor(e,t=null,r=[],i=[],o=null,a=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=d,this.dt=null}}function Py(n,e=null,t=[],r=[],i=null,o=null,a=null){return new Iy(n,e,t,r,i,o,a)}function zu(n){const e=un(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>u_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wh(r)).join(",")),e.dt=t}return e.dt}function Yg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!u2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!My(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Sy(n.startAt,e.startAt)&&Sy(n.endAt,e.endAt)}function f_(n){return sn.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function h_(n,e){return n.filters.filter(t=>t instanceof ur&&t.field.isEqual(e))}function p_(n,e,t){let r=s_,i=!0;for(const o of h_(n,e)){let a=s_,d=!0;switch(o.op){case"<":case"<=":a=Cy(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,d=!1;break;case"!=":case"not-in":a=s_}Ty({value:r,inclusive:i},{value:a,inclusive:d})<0&&(r=a,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const a=t.position[o];Ty({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}function Dy(n,e,t){let r=hc,i=!0;for(const o of h_(n,e)){let a=hc,d=!0;switch(o.op){case">=":case">":a=Ey(o.value),d=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,d=!1;break;case"!=":case"not-in":a=hc}a_({value:r,inclusive:i},{value:a,inclusive:d})>0&&(r=a,i=d)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const a=t.position[o];a_({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}class yl{constructor(e,t=null,r=[],i=[],o=null,a="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=d,this.endAt=h,this.wt=null,this._t=null}}function Gu(n){return new yl(n)}function pM(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function g_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function m_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function __(n){return null!==n.collectionGroup}function pc(n){const e=un(n);if(null===e.wt){e.wt=[];const t=m_(e),r=g_(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new $u(t)),e.wt.push(new $u(qi.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new $u(qi.keyField(),o))}}}return e.wt}function jo(n){const e=un(n);if(!e._t)if("F"===e.limitType)e._t=Py(e.path,e.collectionGroup,pc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of pc(e))t.push(new $u(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Hu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Hu(e.startAt.position,e.startAt.inclusive):null;e._t=Py(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function v_(n,e){e.getFirstInequalityField(),m_(n);const t=n.filters.concat([e]);return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jh(n,e,t){return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function y_(n,e){return Yg(jo(n),jo(e))&&n.limitType===e.limitType}function h2(n){return`${zu(jo(n))}|lt:${n.limitType}`}function p2(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Ef(r)).join(", ")}]`),wf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wh(r)).join(",")),`Target(${t})`}(jo(n))}; limitType=${n.limitType})`}function Qg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):sn.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of pc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,a){const d=l2(i,o,a);return i.inclusive?d<=0:d<0}(t.startAt,pc(t),r)||t.endAt&&!function(i,o,a){const d=l2(i,o,a);return i.inclusive?d>=0:d>0}(t.endAt,pc(t),r)));var t,r}function m2(n){return(e,t)=>{let r=!1;for(const i of pc(n)){const o=_2(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function _2(n,e,t){const r=n.field.isKeyField()?sn.comparator(e.key,t.key):function(i,o,a){const d=o.data.field(i),h=a.data.field(i);return null!==d&&null!==h?_l(d,h):wn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return wn()}}class xl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){nu(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return r2(this.inner)}size(){return this.innerSize}}const gM=new ii(sn.comparator);function qo(){return gM}const ky=new ii(sn.comparator);function Xg(...n){let e=ky;for(const t of n)e=e.insert(t.key,t);return e}function v2(n){let e=ky;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bc(){return Qh()}function y2(){return Qh()}function Qh(){return new xl(n=>n.toString(),(n,e)=>n.isEqual(e))}const x2=new ii(sn.comparator),w2=new di(sn.comparator);function Jn(...n){let e=w2;for(const t of n)e=e.add(t);return e}const mM=new di(Zn);function _M(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qg(e)?"-0":e}}function Fy(n){return{integerValue:""+n}}function vM(n,e){return function gy(n){return"number"==typeof n&&Number.isInteger(n)&&!qg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?Fy(e):_M(n,e)}class Ry{constructor(){this._=void 0}}function fF(n,e,t){return n instanceof e0?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Hg(i)&&(i=$g(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Xh?xM(n,e):n instanceof wl?wM(n,e):function(r,i){const o=yM(r,i),a=t0(o)+t0(r.gt);return Kh(o)&&Kh(r.gt)?Fy(a):_M(r.serializer,a)}(n,e)}function hF(n,e,t){return n instanceof Xh?xM(n,e):n instanceof wl?wM(n,e):t}function yM(n,e){return n instanceof Tf?Kh(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class e0 extends Ry{}class Xh extends Ry{constructor(e){super(),this.elements=e}}function xM(n,e){const t=Ny(e);for(const r of n.elements)t.some(i=>Os(i,r))||t.push(r);return{arrayValue:{values:t}}}class wl extends Ry{constructor(e){super(),this.elements=e}}function wM(n,e){let t=Ny(e);for(const r of n.elements)t=t.filter(i=>!Os(i,r));return{arrayValue:{values:t}}}class Tf extends Ry{constructor(e,t){super(),this.serializer=e,this.gt=t}}function t0(n){return Hi(n.integerValue||n.doubleValue)}function Ny(n){return Gg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ep{constructor(e,t){this.field=e,this.transform=t}}class Ly{constructor(e,t){this.version=e,this.transformResults=t}}class hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function x_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Uy{}function b2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new tp(n.key,hi.none()):new r0(n.key,n.data,hi.none());{const t=n.data,r=Fs.empty();let i=new di(qi.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);null===a&&o.length>1&&(o=o.popLast(),a=t.field(o)),null===a?r.delete(o):r.set(o,a),i=i.add(o)}return new Wu(n.key,r,new Zo(i.toArray()),hi.none())}}function bM(n,e,t){n instanceof r0?function(r,i,o){const a=r.value.clone(),d=E2(r.fieldTransforms,i,o.transformResults);a.setAll(d),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Wu?function(r,i,o){if(!x_(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=E2(r.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(CM(r)),d.setAll(a),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function n0(n,e,t,r){return n instanceof r0?function(i,o,a,d){if(!x_(i.precondition,o))return a;const h=i.value.clone(),p=T2(i.fieldTransforms,d,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Wu?function(i,o,a,d){if(!x_(i.precondition,o))return a;const h=T2(i.fieldTransforms,d,o),p=o.data;return p.setAll(CM(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null===a?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,x_(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function w_(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=yM(r.transform,i||null);null!=o&&(null===t&&(t=Fs.empty()),t.set(r.field,o))}return t||null}function C2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Hh(t,r,(i,o)=>function pF(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xh&&r instanceof Xh||t instanceof wl&&r instanceof wl?Hh(t.elements,r.elements,Os):t instanceof Tf&&r instanceof Tf?Os(t.gt,r.gt):t instanceof e0&&r instanceof e0);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class r0 extends Uy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wu extends Uy{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function CM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function E2(n,e,t){const r=new Map;Mn(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],a=o.transform,d=e.data.field(o.field);r.set(o.field,hF(a,d,t[i]))}return r}function T2(n,e,t){const r=new Map;for(const i of n){const o=i.transform,a=t.data.field(i.field);r.set(i.field,fF(o,a,e))}return r}class tp extends Uy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S2 extends Uy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class By{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&bM(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=n0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=n0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=y2();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let d=this.applyToLocalView(a,o.mutatedFields);d=t.has(i.key)?null:d;const h=b2(a,d);null!==h&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(Pn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jn())}isEqual(e){return this.batchId===e.batchId&&Hh(this.mutations,e.mutations,(t,r)=>C2(t,r))&&Hh(this.baseMutations,e.baseMutations,(t,r)=>C2(t,r))}}class b_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Mn(e.mutations.length===r.length);let i=x2;const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new b_(e,t,r,i)}}class C_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vc{constructor(e,t){this.count=e,this.unchangedNames=t}}var _s,gr;function EM(n){if(void 0===n)return gs("GRPC error has no .code"),et.UNKNOWN;switch(n){case _s.OK:return et.OK;case _s.CANCELLED:return et.CANCELLED;case _s.UNKNOWN:return et.UNKNOWN;case _s.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case _s.INTERNAL:return et.INTERNAL;case _s.UNAVAILABLE:return et.UNAVAILABLE;case _s.UNAUTHENTICATED:return et.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case _s.NOT_FOUND:return et.NOT_FOUND;case _s.ALREADY_EXISTS:return et.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return et.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case _s.ABORTED:return et.ABORTED;case _s.OUT_OF_RANGE:return et.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return et.UNIMPLEMENTED;case _s.DATA_LOSS:return et.DATA_LOSS;default:return wn()}}(gr=_s||(_s={}))[gr.OK=0]="OK",gr[gr.CANCELLED=1]="CANCELLED",gr[gr.UNKNOWN=2]="UNKNOWN",gr[gr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gr[gr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gr[gr.NOT_FOUND=5]="NOT_FOUND",gr[gr.ALREADY_EXISTS=6]="ALREADY_EXISTS",gr[gr.PERMISSION_DENIED=7]="PERMISSION_DENIED",gr[gr.UNAUTHENTICATED=16]="UNAUTHENTICATED",gr[gr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gr[gr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gr[gr.ABORTED=10]="ABORTED",gr[gr.OUT_OF_RANGE=11]="OUT_OF_RANGE",gr[gr.UNIMPLEMENTED=12]="UNIMPLEMENTED",gr[gr.INTERNAL=13]="INTERNAL",gr[gr.UNAVAILABLE=14]="UNAVAILABLE",gr[gr.DATA_LOSS=15]="DATA_LOSS";class ha{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return E_}static getOrCreateInstance(){return null===E_&&(E_=new ha),E_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let E_=null;const TM=new qh([4294967295,4294967295],0);function M2(n){const e=function T_(){return new TextEncoder}().encode(n),t=new zA;return t.update(e),new Uint8Array(t.digest())}function S_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new qh([t,r],0),new qh([i,o],0)]}class A_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new np(`Invalid padding: ${t}`);if(r<0)throw new np(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new np(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new np(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=qh.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(qh.fromNumber(r)));return 1===i.compare(TM)&&(i=new qh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=M2(e),[r,i]=S_(t);for(let o=0;o<this.hashCount;o++){const a=this.Et(r,i,o);if(!this.At(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new A_(o,i,t);return r.forEach(d=>a.insert(d)),a}insert(e){if(0===this.It)return;const t=M2(e),[r,i]=S_(t);for(let o=0;o<this.hashCount;o++){const a=this.Et(r,i,o);this.Rt(a)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class np extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class s0{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,rp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new s0(Pn.min(),i,new ii(Zn),qo(),Jn())}}class rp{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rp(r,t,Jn(),Jn(),Jn())}}class o0{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class I2{constructor(e,t){this.targetId=e,this.Vt=t}}class Vy{constructor(e,t,r=ms.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class P2{constructor(){this.St=0,this.Dt=iu(),this.Ct=ms.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Jn(),t=Jn(),r=Jn();return this.Dt.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:wn()}}),new rp(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=iu()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Zy{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=qo(),this.zt=bl(),this.Wt=new ii(Zn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:wn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,o=this.se(r);if(o){const a=o.target;if(f_(a))if(0===i){const d=new sn(a.path);this.Yt(r,d,fi.newNoDocument(d,Pn.min()))}else Mn(1===i);else{const d=this.ie(r);if(d!==i){const h=this.re(e,d);0!==h&&(this.ee(r),this.Wt=this.Wt.insert(r,2===h?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=ha.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(p,m,y){var T,M,R,D,U,J;const ee={localCacheCount:m,existenceFilterCount:y.count},W=y.unchangedNames;return W&&(ee.bloomFilter={applied:0===p,hashCount:null!==(T=W?.hashCount)&&void 0!==T?T:0,bitmapLength:null!==(D=null===(R=null===(M=W?.bits)||void 0===M?void 0:M.bitmap)||void 0===R?void 0:R.length)&&void 0!==D?D:0,padding:null!==(J=null===(U=W?.bits)||void 0===U?void 0:U.padding)&&void 0!==J?J:0}),ee}(h,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:o="",padding:a=0},hashCount:d=0}=r;let h,p;try{h=qu(o).toUint8Array()}catch(m){if(m instanceof yy)return pl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw m}try{p=new A_(h,a,d)}catch(m){return pl(m instanceof np?"BloomFilter error: ":"Applying bloom filter failed: ",m),1}return 0===p.It?1:i!==t-this.oe(e.targetId,p)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const a=this.Gt.ue(),d=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;t.vt(d)||(this.Yt(e,o,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((o,a)=>{const d=this.se(a);if(d){if(o.current&&f_(d.target)){const h=new sn(d.target.path);null!==this.jt.get(h)||this.ae(a,h)||this.Yt(a,h,fi.newNoDocument(h,e))}o.Mt&&(t.set(a,o.Ot()),o.Ft())}});let r=Jn();this.zt.forEach((o,a)=>{let d=!0;a.forEachWhile(h=>{const p=this.se(h);return!p||"TargetPurposeLimboResolution"===p.purpose||(d=!1,!1)}),d&&(r=r.add(o))}),this.jt.forEach((o,a)=>a.setReadTime(e));const i=new s0(e,t,this.Wt,this.jt,r);return this.jt=qo(),this.zt=bl(),this.Wt=new ii(Zn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new P2,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new di(Zn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Rt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new P2),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function bl(){return new ii(sn.comparator)}function iu(){return new ii(sn.comparator)}const D2={asc:"ASCENDING",desc:"DESCENDING"},jy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k2={and:"AND",or:"OR"};class SM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function O2(n,e){return n.useProto3Json||wf(e)?e:{value:e}}function ip(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AM(n,e){return ip(n,e.toTimestamp())}function ns(n){return Mn(!!n),Pn.fromTimestamp(function(e){const t=ru(e);return new Ii(t.seconds,t.nanos)}(n))}function M_(n,e){return(t=n,new pr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function MM(n){const e=pr.fromString(n);return Mn(RM(e)),e}function sp(n,e){return M_(n.databaseId,e.path)}function Cl(n,e){const t=MM(e);if(t.get(1)!==n.databaseId.projectId)throw new At(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new At(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new sn(qy(t))}function I_(n,e){return M_(n.databaseId,e)}function IM(n){const e=MM(n);return 4===e.length?pr.emptyPath():qy(e)}function Sf(n){return new pr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qy(n){return Mn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Hy(n,e,t){return{name:sp(n,e),fields:t.value.mapValue.fields}}function Ku(n,e){let t;if(e instanceof r0)t={update:Hy(n,e.key,e.value)};else if(e instanceof tp)t={delete:sp(n,e.key)};else if(e instanceof Wu)t={update:Hy(n,e.key,e.data),updateMask:_F(e.fieldMask)};else{if(!(e instanceof S2))return wn();t={verify:sp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof e0)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tf)return{fieldPath:o.field.canonicalString(),increment:a.gt};throw wn()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:AM(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:wn()),t;var i}function op(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?hi.updateTime(ns(i.updateTime)):void 0!==i.exists?hi.exists(i.exists):hi.none():hi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let d=null;"setToServerValue"in a?(Mn("REQUEST_TIME"===a.setToServerValue),d=new e0):"appendMissingElements"in a?d=new Xh(a.appendMissingElements.values||[]):"removeAllFromArray"in a?d=new wl(a.removeAllFromArray.values||[]):"increment"in a?d=new Tf(o,a.increment):wn();const h=qi.fromServerFormat(a.fieldPath);return new ep(h,d)}(n,i)):[];var i;if(e.update){const i=Cl(n,e.update.name),o=new Fs({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=new Zo((e.updateMask.fieldPaths||[]).map(p=>qi.fromServerFormat(p)));return new Wu(i,o,a,t,r)}return new r0(i,o,t,r)}if(e.delete){const i=Cl(n,e.delete);return new tp(i,t)}if(e.verify){const i=Cl(n,e.verify);return new S2(i,t)}return wn()}function U2(n,e){return{documents:[I_(n,e.path)]}}function B2(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(0!==h.length)return FM(Br.create(h,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(h){if(0!==h.length)return h.map(p=>{return{field:Yu((m=p).field),direction:V2(m.dir)};var m})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=O2(n,e.limit);var d,h;return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(h=e.endAt).inclusive,values:h.position}),t}function PM(n){let e=IM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Mn(1===r);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(m){const y=DM(m);return y instanceof Br&&l_(y)?y.getFilters():[y]}(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(m=>{return new $u(a0((y=m).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction));var y}));let d=null;t.limit&&(d=function(m){let y;return y="object"==typeof m?m.value:m,wf(y)?null:y}(t.limit));let h=null;var m;t.startAt&&(h=new Hu((m=t.startAt).values||[],!!m.before));let p=null;return t.endAt&&(p=function(m){return new Hu(m.values||[],!m.before)}(t.endAt)),function Jg(n,e,t,r,i,o,a,d){return new yl(n,e,t,r,i,o,a,d)}(e,i,a,o,d,"F",h,p)}function DM(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=a0(e.unaryFilter.field);return ur.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=a0(e.unaryFilter.field);return ur.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=a0(e.unaryFilter.field);return ur.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=a0(e.unaryFilter.field);return ur.create(o,"!=",{nullValue:"NULL_VALUE"});default:return wn()}}(n):void 0!==n.fieldFilter?ur.create(a0((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Br.create(e.compositeFilter.filters.map(t=>DM(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return wn()}}(e.compositeFilter.op))}(n):wn();var e}function V2(n){return D2[n]}function kM(n){return jy[n]}function OM(n){return k2[n]}function Yu(n){return{fieldPath:n.canonicalString()}}function a0(n){return qi.fromServerFormat(n.fieldPath)}function FM(n){return n instanceof ur?function(e){if("=="===e.op){if(wy(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NAN"}};if(a2(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wy(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NOT_NAN"}};if(a2(e.value))return{unaryFilter:{field:Yu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yu(e.field),op:kM(e.op),value:e.value}}}(n):n instanceof Br?function(e){const t=e.getFilters().map(r=>FM(r));return 1===t.length?t[0]:{compositeFilter:{op:OM(e.op),filters:t}}}(n):wn()}function _F(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ju{constructor(e,t,r,i,o=Pn.min(),a=Pn.min(),d=ms.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Z2{constructor(e){this.fe=e}}function j2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:D_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sp(i=n.fe,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:ip(i,o.version.toTimestamp()),createTime:ip(i,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Qu(e.version)};else{if(!e.isUnknownDocument())return wn();r.unknownDocument={path:t.path.toArray(),version:Qu(e.version)}}var i,o;return r}function D_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Qu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ba(n){const e=new Ii(n.seconds,n.nanoseconds);return Pn.fromTimestamp(e)}function Xu(n,e){const t=(e.baseMutations||[]).map(o=>op(n.fe,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>op(n.fe,o)),i=Ii.fromMillis(e.localWriteTimeMs);return new By(e.batchId,i,t,r)}function Af(n){const e=Ba(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ba(n.lastLimboFreeSnapshotVersion):Pn.min();let r;var i;return void 0!==n.query.documents?(Mn(1===(i=n.query).documents.length),r=jo(Gu(IM(i.documents[0])))):r=jo(PM(n.query)),new Ju(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ms.fromBase64String(n.resumeToken))}function k_(n,e){const t=Qu(e.snapshotVersion),r=Qu(e.lastLimboFreeSnapshotVersion);let i;i=f_(e.target)?U2(n.fe,e.target):B2(n.fe,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:zu(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zy(n){const e=PM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Jh(e,e.limit,"L"):e}function c0(n,e){return new C_(e.largestBatchId,op(n.fe,e.overlayMutation))}function O_(n,e){const t=e.path.lastSegment();return[n,ts(e.path.popLast()),t]}function l0(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Qu(r.readTime),documentKey:ts(r.documentKey.path),largestBatchId:r.largestBatchId}}class vF{getBundleMetadata(e,t){return NM(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ba(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return NM(e).put({bundleId:(r=t).id,createTime:Qu(ns(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return LM(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:zy(i.bundledQuery),readTime:Ba(i.readTime)};var i})}saveNamedQuery(e,t){return LM(e).put({name:(r=t).name,readTime:Qu(ns(r.readTime)),bundledQuery:r.bundledQuery});var r}}function NM(n){return ks(n,"bundles")}function LM(n){return ks(n,"namedQueries")}class Gy{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Gy(e,t.uid||"")}getOverlay(e,t){return ap(e).get(O_(this.userId,t)).next(r=>r?c0(this.serializer,r):null)}getOverlays(e,t){const r=Bc();return ze.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,a)=>{const d=new C_(t,a);i.push(this.we(e,d))}),ze.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(ts(a.getCollectionPath())));const o=[];return i.forEach(a=>{const d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);o.push(ap(e).J("collectionPathOverlayIndex",d))}),ze.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Bc(),o=ts(t),a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ap(e).j("collectionPathOverlayIndex",a).next(d=>{for(const h of d){const p=c0(this.serializer,h);i.set(p.getKey(),p)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Bc();let a;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ap(e).X({index:"collectionGroupOverlayIndex",range:d},(h,p,m)=>{const y=c0(this.serializer,p);o.size()<i||y.largestBatchId===a?(o.set(y.getKey(),y),a=y.largestBatchId):m.done()}).next(()=>o)}we(e,t){return ap(e).put(function(r,i,o){const[a,d,h]=O_(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ku(r.fe,o.mutation)}}(this.serializer,this.userId,t))}}function ap(n){return ks(n,"documentOverlays")}class Mf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Hi(e.integerValue));else if("doubleValue"in e){const r=Hi(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),qg(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(qu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?by(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):wn()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),sn.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function UM(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function q2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=UM(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Mf.Ve=new Mf;class BM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=q2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=q2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class H2{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class $2{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class cp{constructor(){this.je=new BM,this.ze=new H2(this.je),this.We=new $2(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class If{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new If(this.indexId,this.documentKey,this.arrayValue,r)}}function ed(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Wy(n.arrayValue,e.arrayValue),0!==t?t:(t=Wy(n.directionalValue,e.directionalValue),0!==t?t:sn.comparator(n.documentKey,e.documentKey)))}function Wy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Ky{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Mn(e.collectionGroup===this.collectionId);const t=dy(e);if(void 0!==t&&!this.en(t))return!1;const r=xf(e);let i=new Set,o=0,a=0;for(;o<r.length&&this.en(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const d=r[o];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[a++],d))return!1}++o}for(;o<r.length;++o)if(a>=this.Ye.length||!this.sn(this.Ye[a++],r[o]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function VM(n){var e,t;if(Mn(n instanceof ur||n instanceof Br),n instanceof ur){if(n instanceof d_){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>ur.create(n.field,"==",o)))||[];return Br.create(i,"or")}return n}const r=n.filters.map(i=>VM(i));return Br.create(r,n.op)}function z2(n){if(0===n.getFilters().length)return[];const e=W2(VM(n));return Mn(G2(e)),u0(e)||Yy(e)?[e]:e.getFilters()}function u0(n){return n instanceof ur}function Yy(n){return n instanceof Br&&l_(n)}function G2(n){return u0(n)||Yy(n)||function(e){if(e instanceof Br&&c_(e)){for(const t of e.getFilters())if(!u0(t)&&!Yy(t))return!1;return!0}return!1}(n)}function W2(n){if(Mn(n instanceof ur||n instanceof Br),n instanceof ur)return n;if(1===n.filters.length)return W2(n.filters[0]);const e=n.filters.map(r=>W2(r));let t=Br.create(e,n.op);return t=F_(t),G2(t)?t:(Mn(t instanceof Br),Mn(Yh(t)),Mn(t.filters.length>1),t.filters.reduce((r,i)=>K2(r,i)))}function K2(n,e){let t;return Mn(n instanceof ur||n instanceof Br),Mn(e instanceof ur||e instanceof Br),t=n instanceof ur?e instanceof ur?Br.create([n,e],"and"):Y2(n,e):e instanceof ur?Y2(e,n):function(r,i){if(Mn(r.filters.length>0&&i.filters.length>0),Yh(r)&&Yh(i))return So(r,i.getFilters());const o=c_(r)?r:i,a=c_(r)?i:r,d=o.filters.map(h=>K2(h,a));return Br.create(d,"or")}(n,e),F_(t)}function Y2(n,e){if(Yh(e))return So(e,n.getFilters());{const t=e.filters.map(r=>K2(n,r));return Br.create(t,"or")}}function F_(n){if(Mn(n instanceof ur||n instanceof Br),n instanceof ur)return n;const e=n.getFilters();if(1===e.length)return F_(e[0]);if(d2(n))return n;const t=e.map(i=>F_(i)),r=[];return t.forEach(i=>{i instanceof ur?r.push(i):i instanceof Br&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Br.create(r,n.op)}class ZM{constructor(){this.rn=new J2}addToCollectionParentIndex(e,t){return this.rn.add(t),ze.resolve()}getCollectionParents(e,t){return ze.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ze.resolve()}deleteFieldIndex(e,t){return ze.resolve()}getDocumentsMatchingTarget(e,t){return ze.resolve(null)}getIndexType(e,t){return ze.resolve(0)}getFieldIndexes(e,t){return ze.resolve([])}getNextCollectionGroupToUpdate(e){return ze.resolve(null)}getMinOffset(e,t){return ze.resolve(La.min())}getMinOffsetFromCollectionGroup(e,t){return ze.resolve(La.min())}updateCollectionGroup(e,t,r){return ze.resolve()}updateIndexEntries(e,t){return ze.resolve()}}class J2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new di(pr.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new di(pr.comparator)).toArray()}}const Jy=new Uint8Array(0);class yF{constructor(e,t){this.user=e,this.databaseId=t,this.on=new J2,this.un=new xl(r=>zu(r),(r,i)=>Yg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const o={collectionId:r,parent:ts(i)};return jM(e).put(o)}return ze.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[uy(t),""],!1,!0);return jM(e).j(i).next(o=>{for(const a of o){if(a.collectionId!==t)break;r.push(tu(a.parent))}return r})}addFieldIndex(e,t){const r=Qy(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const a=R_(e);return o.next(d=>{a.put(l0(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Qy(e),i=R_(e),o=d0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=d0(e);let i=!0;const o=new Map;return ze.forEach(this.cn(t),a=>this.an(e,a).next(d=>{i&&(i=!!d),o.set(a,d)})).next(()=>{if(i){let a=Jn();const d=[];return ze.forEach(o,(h,p)=>{var m;Rt("IndexedDbIndexManager",`Using index ${m=h,`id=${m.indexId}|cg=${m.collectionGroup}|f=${m.fields.map(W=>`${W.fieldPath}:${W.kind}`).join(",")}`} to execute ${zu(t)}`);const y=function(W,pe){const Ae=dy(pe);if(void 0===Ae)return null;for(const Ve of h_(W,Ae.fieldPath))switch(Ve.op){case"array-contains-any":return Ve.value.arrayValue.values||[];case"array-contains":return[Ve.value]}return null}(p,h),T=function(W,pe){const Ae=new Map;for(const Ve of xf(pe))for(const ae of h_(W,Ve.fieldPath))switch(ae.op){case"==":case"in":Ae.set(Ve.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return Ae.set(Ve.fieldPath.canonicalString(),ae.value),Array.from(Ae.values())}return null}(p,h),M=function(W,pe){const Ae=[];let Ve=!0;for(const ae of xf(pe)){const Re=0===ae.kind?p_(W,ae.fieldPath,W.startAt):Dy(W,ae.fieldPath,W.startAt);Ae.push(Re.value),Ve&&(Ve=Re.inclusive)}return new Hu(Ae,Ve)}(p,h),R=function(W,pe){const Ae=[];let Ve=!0;for(const ae of xf(pe)){const Re=0===ae.kind?Dy(W,ae.fieldPath,W.endAt):p_(W,ae.fieldPath,W.endAt);Ae.push(Re.value),Ve&&(Ve=Re.inclusive)}return new Hu(Ae,Ve)}(p,h),D=this.hn(h,p,M),U=this.hn(h,p,R),J=this.ln(h,p,T),ee=this.fn(h.indexId,y,D,M.inclusive,U,R.inclusive,J);return ze.forEach(ee,W=>r.H(W,t.limit).next(pe=>{pe.forEach(Ae=>{const Ve=sn.fromSegments(Ae.documentKey);a.has(Ve)||(a=a.add(Ve),d.push(Ve))})}))}).next(()=>d)}return ze.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:z2(Br.create(e.filters,"and")).map(r=>Py(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,o,a,d){const h=(null!=t?t.length:1)*Math.max(r.length,o.length),p=h/(null!=t?t.length:1),m=[];for(let y=0;y<h;++y){const T=t?this.dn(t[y/p]):Jy,M=this.wn(e,T,r[y%p],i),R=this._n(e,T,o[y%p],a),D=d.map(U=>this.wn(e,T,U,!0));m.push(...this.createRange(M,R,D))}return m}wn(e,t,r,i){const o=new If(e,sn.empty(),t,r);return i?o:o.Je()}_n(e,t,r,i){const o=new If(e,sn.empty(),t,r);return i?o.Je():o}an(e,t){const r=new Ky(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let a=null;for(const d of o)r.tn(d)&&(!a||d.fields.length>a.fields.length)&&(a=d);return a})}getIndexType(e,t){let r=2;const i=this.cn(t);return ze.forEach(i,o=>this.an(e,o).next(a=>{a?0!==r&&a.fields.length<function(d){let h=new di(qi.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new cp;for(const i of xf(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const a=r.He(i.kind);Mf.Ve._e(o,a)}return r.Qe()}dn(e){const t=new cp;return Mf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new cp;return Mf.Ve._e(vl(this.databaseId,t),r.He(function(i){const o=xf(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new cp);let o=0;for(const a of xf(e)){const d=r[o++];for(const h of i)if(this.yn(t,a.fieldPath)&&Gg(d))i=this.pn(i,a,d);else{const p=h.He(a.kind);Mf.Ve._e(d,p)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],o=[];for(const a of r.arrayValue.values||[])for(const d of i){const h=new cp;h.seed(d.Qe()),Mf.Ve._e(a,h.He(t.kind)),o.push(h)}return o}yn(e,t){return!!e.filters.find(r=>r instanceof ur&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Qy(e),i=R_(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(o=>{const a=[];return ze.forEach(o,d=>i.get([d.indexId,this.uid]).next(h=>{a.push(function(p,m){const y=m?new Zg(m.sequenceNumber,new La(Ba(m.readTime),new sn(tu(m.documentKey)),m.largestBatchId)):Zg.empty(),T=p.fields.map(([M,R])=>new Qm(qi.fromServerFormat(M),R));return new Jm(p.indexId,p.collectionGroup,T,y)}(d,h))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Zn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Qy(e),o=R_(e);return this.Tn(e).next(a=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ze.forEach(d,h=>o.put(l0(h.indexId,this.user,a,r)))))}updateIndexEntries(e,t){const r=new Map;return ze.forEach(t,(i,o)=>{const a=r.get(i.collectionGroup);return(a?ze.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),ze.forEach(d,h=>this.En(e,i,h).next(p=>{const m=this.An(o,h);return p.isEqual(m)?ze.resolve():this.vn(e,o,h,p,m)}))))})}Rn(e,t,r,i){return d0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return d0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=d0(e);let o=new di(ed);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(a,d)=>{o=o.add(new If(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>o)}An(e,t){let r=new di(ed);const i=this.mn(t,e);if(null==i)return r;const o=dy(t);if(null!=o){const a=e.data.field(o.fieldPath);if(Gg(a))for(const d of a.arrayValue.values||[])r=r.add(new If(t.indexId,e.key,this.dn(d),i))}else r=r.add(new If(t.indexId,e.key,Jy,i));return r}vn(e,t,r,i,o){Rt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(d,h,p,m,y){const T=d.getIterator(),M=h.getIterator();let R=gl(T),D=gl(M);for(;R||D;){let U=!1,J=!1;if(R&&D){const ee=p(R,D);ee<0?J=!0:ee>0&&(U=!0)}else null!=R?J=!0:U=!0;U?(m(D),D=gl(M)):J?(y(R),R=gl(T)):(R=gl(T),D=gl(M))}}(i,o,ed,d=>{a.push(this.Rn(e,t,r,d))},d=>{a.push(this.Pn(e,t,r,d))}),ze.waitFor(a)}Tn(e){let t=1;return R_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,d)=>ed(a,d)).filter((a,d,h)=>!d||0!==ed(a,h[d-1]));const i=[];i.push(e);for(const a of r){const d=ed(a,e),h=ed(a,t);if(0===d)i[0]=e.Je();else if(d>0&&h<0)i.push(a),i.push(a.Je());else if(h>0)break}i.push(t);const o=[];for(let a=0;a<i.length;a+=2){if(this.bn(i[a],i[a+1]))return[];o.push(IDBKeyRange.bound([i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Jy,[]],[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Jy,[]]))}return o}bn(e,t){return ed(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qM)}getMinOffset(e,t){return ze.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||wn())).next(qM)}}function jM(n){return ks(n,"collectionParents")}function d0(n){return ks(n,"indexEntries")}function Qy(n){return ks(n,"indexConfiguration")}function R_(n){return ks(n,"indexState")}function qM(n){Mn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;hy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new La(e.readTime,e.documentKey,t)}const HM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ho(e,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $M(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],a=IDBKeyRange.only(t.batchId);let d=0;const h=r.X({range:a},(m,y,T)=>(d++,T.delete()));o.push(h.next(()=>{Mn(1===d)}));const p=[];for(const m of t.mutations){const y=zC(e,m.key.path,t.batchId);o.push(i.delete(y)),p.push(m.key)}return ze.waitFor(o).next(()=>p)}function c(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw wn();e=n.noDocument}return JSON.stringify(e).length}Ho.DEFAULT_COLLECTION_PERCENTILE=10,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ho.DEFAULT=new Ho(41943040,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ho.DISABLED=new Ho(-1,0,0);class l{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Mn(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new l(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return f(e).X({index:"userMutationsIndex",range:r},(i,o,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=g(e),a=f(e);return a.add({}).next(d=>{Mn("number"==typeof d);const h=new By(d,t,r,i),p=function(T,M,R){const D=R.baseMutations.map(J=>Ku(T.fe,J)),U=R.mutations.map(J=>Ku(T.fe,J));return{userId:M,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:D,mutations:U}}(this.serializer,this.userId,h),m=[];let y=new di((T,M)=>Zn(T.canonicalString(),M.canonicalString()));for(const T of i){const M=zC(this.userId,T.key.path,d);y=y.add(T.key.path.popLast()),m.push(a.put(p)),m.push(o.put(M,_y))}return y.forEach(T=>{m.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Vn[d]=h.keys()}),ze.waitFor(m).next(()=>h)})}lookupMutationBatch(e,t){return f(e).get(t).next(r=>r?(Mn(r.userId===this.userId),Xu(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ze.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return f(e).X({index:"userMutationsIndex",range:i},(a,d,h)=>{d.userId===this.userId&&(Mn(d.batchId>=r),o=Xu(this.serializer,d)),h.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return f(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,o,a)=>{r=o.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return f(e).j("userMutationsIndex",t).next(r=>r.map(i=>Xu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=$h(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return g(e).X({range:i},(a,d,h)=>{const[p,m,y]=a,T=tu(m);if(p===this.userId&&t.path.isEqual(T))return f(e).get(y).next(M=>{if(!M)throw wn();Mn(M.userId===this.userId),o.push(Xu(this.serializer,M))});h.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new di(Zn);const i=[];return t.forEach(o=>{const a=$h(this.userId,o.path),d=IDBKeyRange.lowerBound(a),h=g(e).X({range:d},(p,m,y)=>{const[T,M,R]=p,D=tu(M);T===this.userId&&o.path.isEqual(D)?r=r.add(R):y.done()});i.push(h)}),ze.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=$h(this.userId,r),a=IDBKeyRange.lowerBound(o);let d=new di(Zn);return g(e).X({range:a},(h,p,m)=>{const[y,T,M]=h,R=tu(T);y===this.userId&&r.isPrefixOf(R)?R.length===i&&(d=d.add(M)):m.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(f(e).get(o).next(a=>{if(null===a)throw wn();Mn(a.userId===this.userId),r.push(Xu(this.serializer,a))}))}),ze.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return $M(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ze.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ze.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return g(e).X({range:r},(o,a,d)=>{if(o[0]===this.userId){const h=tu(o[1]);i.push(h)}else d.done()}).next(()=>{Mn(0===i.length)})})}containsKey(e,t){return u(e,this.userId,t)}xn(e){return _(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u(n,e,t){const r=$h(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let a=!1;return g(n).X({range:o,Y:!0},(d,h,p)=>{const[m,y,T]=d;m===e&&y===i&&(a=!0),p.done()}).next(()=>a)}function f(n){return ks(n,"mutations")}function g(n){return ks(n,"documentMutations")}function _(n){return ks(n,"mutationQueues")}class x{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new x(0)}static Mn(){return new x(-1)}}class S{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new x(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Pn.fromTimestamp(new Ii(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>O(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Mn(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return O(e).X((a,d)=>{const h=Af(d);h.sequenceNumber<=t&&null===r.get(h.targetId)&&(i++,o.push(this.removeTargetData(e,h)))}).next(()=>ze.waitFor(o)).next(()=>i)}forEachTarget(e,t){return O(e).X((r,i)=>{const o=Af(i);t(o)})}$n(e){return B(e).get("targetGlobalKey").next(t=>(Mn(null!==t),t))}On(e,t){return B(e).put("targetGlobalKey",t)}Fn(e,t){return O(e).put(k_(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=zu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return O(e).X({range:i,index:"queryTargetsIndex"},(a,d,h)=>{const p=Af(d);Yg(t,p.target)&&(o=p,h.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=G(e);return t.forEach(a=>{const d=ts(a.path);i.push(o.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,a))}),ze.waitFor(i)}removeMatchingKeys(e,t,r){const i=G(e);return ze.forEach(t,o=>{const a=ts(o.path);return ze.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=G(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=G(e);let o=Jn();return i.X({range:r,Y:!0},(a,d,h)=>{const p=tu(a[1]),m=new sn(p);o=o.add(m)}).next(()=>o)}containsKey(e,t){const r=ts(t.path),i=IDBKeyRange.bound([r],[uy(r)],!1,!0);let o=0;return G(e).X({index:"documentTargetsIndex",Y:!0,range:i},([a,d],h,p)=>{0!==a&&(o++,p.done())}).next(()=>o>0)}le(e,t){return O(e).get(t).next(r=>r?Af(r):null)}}function O(n){return ks(n,"targets")}function B(n){return ks(n,"targetGlobal")}function G(n){return ks(n,"targetDocuments")}function oe([n,e],[t,r]){const i=Zn(n,t);return 0===i?Zn(e,r):i}class Te{constructor(e){this.Ln=e,this.buffer=new di(oe),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oe(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ze{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Rt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ju(r)?Rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Zu(r)}yield t.Qn(3e5)}))}}class ut{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ze.resolve(Ua.ct);const r=new Te(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector","Garbage collection skipped; disabled"),ze.resolve(HM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HM):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,o,a,d,h,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,d=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(p=Date.now(),Ym()<=vr.DEBUG&&Rt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-m}ms\n\tDetermined least recently used ${i} in `+(d-a)+`ms\n\tRemoved ${o} targets in `+(h-d)+`ms\n\tRemoved ${y} documents in `+(p-h)+`ms\nTotal Duration: ${p-m}ms`),ze.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}class en{constructor(e,t){this.db=e,this.garbageCollector=function Nt(n,e){return new ut(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return gn(e,r)}removeReference(e,t,r){return gn(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gn(e,t)}Xn(e,t){return function(r,i){let o=!1;return _(r).Z(a=>u(r,a,i).next(d=>(d&&(o=!0),ze.resolve(!d)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Yn(e,(a,d)=>{if(d<=t){const h=this.Xn(e,a).next(p=>{if(!p)return o++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Pn.min()),G(e).delete([0,ts(a.path)])))});i.push(h)}}).next(()=>ze.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gn(e,t)}Yn(e,t){const r=G(e);let i,o=Ua.ct;return r.X({index:"documentTargetsIndex"},([a,d],{path:h,sequenceNumber:p})=>{0===a?(o!==Ua.ct&&t(new sn(tu(i)),o),o=p,i=h):o=Ua.ct}).next(()=>{o!==Ua.ct&&t(new sn(tu(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gn(n,e){return G(n).put((r=n.currentSequenceNumber,{targetId:0,path:ts(e.path),sequenceNumber:r}));var r}class On{constructor(){this.changes=new xl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ze.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ot{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lp(e).put(r)}removeEntry(e,t,r){return lp(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],D_(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=fi.newInvalidDocument(t);return lp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Xy(t))},(i,o)=>{r=this.ts(t,o)}).next(()=>r)}es(e,t){let r={size:0,document:fi.newInvalidDocument(t)};return lp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Xy(t))},(i,o)=>{r={document:this.ts(t,o),size:c(o)}}).next(()=>r)}getEntries(e,t){let r=qo();return this.ns(e,t,(i,o)=>{const a=this.ts(i,o);r=r.insert(i,a)}).next(()=>r)}ss(e,t){let r=qo(),i=new ii(sn.comparator);return this.ns(e,t,(o,a)=>{const d=this.ts(o,a);r=r.insert(o,d),i=i.insert(o,c(a))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ze.resolve();let i=new di(wF);t.forEach(h=>i=i.add(h));const o=IDBKeyRange.bound(Xy(i.first()),Xy(i.last())),a=i.getIterator();let d=a.getNext();return lp(e).X({index:"documentKeyIndex",range:o},(h,p,m)=>{const y=sn.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&wF(d,y)<0;)r(d,null),d=a.getNext();d&&d.isEqual(y)&&(r(d,p),d=a.hasNext()?a.getNext():null),d?m.G(Xy(d)):m.done()}).next(()=>{for(;d;)r(d,null),d=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),D_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lp(e).j(IDBKeyRange.bound(a,d,!0)).next(h=>{let p=qo();for(const m of h){const y=this.ts(sn.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Qg(t,y)||i.has(y.key))&&(p=p.insert(y.key,y))}return p})}getAllFromCollectionGroup(e,t,r,i){let o=qo();const a=xF(t,r),d=xF(t,La.max());return lp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,d,!0)},(h,p,m)=>{const y=this.ts(sn.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(y.key,y),o.size===i&&m.done()}).next(()=>o)}newChangeBuffer(e){return new xi(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return $i(e).get("remoteDocumentGlobalKey").next(t=>(Mn(!!t),t))}Zn(e,t){return $i(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function P_(n,e){let t;if(e.document)t=function $y(n,e,t){const r=Cl(n,e.name),i=ns(e.updateTime),o=e.createTime?ns(e.createTime):Pn.min(),a=new Fs({mapValue:{fields:e.fields}}),d=fi.newFoundDocument(r,i,o,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=sn.fromSegments(e.noDocument.path),i=Ba(e.noDocument.readTime);t=fi.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wn();{const r=sn.fromSegments(e.unknownDocument.path),i=Ba(e.unknownDocument.version);t=fi.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ii(r[0],r[1]);return Pn.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Pn.min()))return r}return fi.newInvalidDocument(e)}}function qn(n){return new Ot(n)}class xi extends On{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new xl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new di((o,a)=>Zn(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{const d=this.us.get(o);if(t.push(this.os.removeEntry(e,o,d.readTime)),a.isValidDocument()){const h=j2(this.os.serializer,a);i=i.add(o.path.popLast());const p=c(h);r+=p-d.size,t.push(this.os.addEntry(e,o,h))}else if(r-=d.size,this.trackRemovals){const h=j2(this.os.serializer,a.convertToNoDocument(Pn.min()));t.push(this.os.addEntry(e,o,h))}}),i.forEach(o=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.os.updateMetadata(e,r)),ze.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((o,a)=>{this.us.set(o,{size:a,readTime:r.get(o).readTime})}),r))}}function $i(n){return ks(n,"remoteDocumentGlobal")}function lp(n){return ks(n,"remoteDocumentsV14")}function Xy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xF(n,e){const t=e.documentKey.path.toArray();return[n,D_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Zn(t[o],r[o]),i)return i;return i=Zn(t.length,r.length),i||(i=Zn(t[t.length-2],r[r.length-2]),i||Zn(t[t.length-1],r[r.length-1]))}class XL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&n0(r.mutation,i,Zo.empty(),Ii.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jn()){const i=Bc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=Xg();return o.forEach((d,h)=>{a=a.insert(d,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=Bc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jn()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,d)=>{t.set(a,d)})})}computeViews(e,t,r,i){let o=qo();const a=Qh(),d=Qh();return t.forEach((h,p)=>{const m=r.get(p.key);i.has(p.key)&&(void 0===m||m.mutation instanceof Wu)?o=o.insert(p.key,p):void 0!==m?(a.set(p.key,m.mutation.getFieldMask()),n0(m.mutation,p,m.mutation.getFieldMask(),Ii.now())):a.set(p.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,m)=>a.set(p,m)),t.forEach((p,m)=>{var y;return d.set(p,new XL(m,null!==(y=a.get(p))&&void 0!==y?y:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Qh();let i=new ii((a,d)=>a-d),o=Jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const d of a)d.keys().forEach(h=>{const p=t.get(h);if(null===p)return;let m=r.get(h)||Zo.empty();m=d.applyToLocalView(p,m),r.set(h,m);const y=(i.get(d.batchId)||Jn()).add(h);i=i.insert(d.batchId,y)})}).next(()=>{const a=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),p=h.key,m=h.value,y=y2();m.forEach(T=>{if(!o.has(T)){const M=b2(t.get(T),r.get(T));null!==M&&y.set(T,M),o=o.add(T)}}),a.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ze.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return sn.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):__(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ze.resolve(Bc());let d=-1,h=o;return a.next(p=>ze.forEach(p,(m,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),o.get(m)?ze.resolve():this.remoteDocumentCache.getEntry(e,m).next(T=>{h=h.insert(m,T)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,Jn())).next(m=>({batchId:d,changes:v2(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sn(t)).next(r=>{let i=Xg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Xg();return this.indexManager.getCollectionParents(e,i).next(a=>ze.forEach(a,d=>{const h=(p=t,m=d.child(i),new yl(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,m;return this.getDocumentsMatchingCollectionQuery(e,h,r).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(o=>{i.forEach((d,h)=>{const p=h.getKey();null===o.get(p)&&(o=o.insert(p,fi.newInvalidDocument(p)))});let a=Xg();return o.forEach((d,h)=>{const p=i.get(d);void 0!==p&&n0(p.mutation,h,Zo.empty(),Ii.now()),Qg(t,h)&&(a=a.insert(d,h))}),a})}}class e8{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ze.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ns(r.createTime)}),ze.resolve()}getNamedQuery(e,t){return ze.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:zy(r.bundledQuery),readTime:ns(r.readTime)}),ze.resolve();var r}}class t8{constructor(){this.overlays=new ii(sn.comparator),this.ls=new Map}getOverlay(e,t){return ze.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Bc();return ze.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.we(e,t,o)}),ze.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(r)),ze.resolve()}getOverlaysForCollection(e,t,r){const i=Bc(),o=t.length+1,a=new sn(t.child("")),d=this.overlays.getIteratorFrom(a);for(;d.hasNext();){const h=d.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ze.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ii((p,m)=>p-m);const a=this.overlays.getIterator();for(;a.hasNext();){const p=a.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);null===m&&(m=Bc(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const d=Bc(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,m)=>d.set(p,m)),!(d.size()>=i)););return ze.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const a=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new C_(t,r));let o=this.ls.get(t);void 0===o&&(o=Jn(),this.ls.set(t,o)),this.ls.set(t,o.add(r.key))}}class zM{constructor(){this.fs=new di(Ao.ds),this.ws=new di(Ao._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ao(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ao(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new sn(new pr([])),r=new Ao(t,e),i=new Ao(t,e+1),o=[];return this.ws.forEachInRange([r,i],a=>{this.ys(a),o.push(a.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new sn(new pr([])),r=new Ao(t,e),i=new Ao(t,e+1);let o=Jn();return this.ws.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const t=new Ao(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ao{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return sn.comparator(e.key,t.key)||Zn(e.As,t.As)}static _s(e,t){return Zn(e.As,t.As)||sn.comparator(e.key,t.key)}}class n8{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new di(Ao.ds)}checkEmpty(e){return ze.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.vs;this.vs++;const a=new By(o,t,r,i);this.mutationQueue.push(a);for(const d of i)this.Rs=this.Rs.add(new Ao(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ze.resolve(a)}lookupMutationBatch(e,t){return ze.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),o=i<0?0:i;return ze.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ze.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ze.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ao(t,0),i=new Ao(t,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([r,i],a=>{const d=this.Ps(a.As);o.push(d)}),ze.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new di(Zn);return t.forEach(i=>{const o=new Ao(i,0),a=new Ao(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,a],d=>{r=r.add(d.As)})}),ze.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;sn.isDocumentKey(o)||(o=o.child(""));const a=new Ao(new sn(o),0);let d=new di(Zn);return this.Rs.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(d=d.add(h.As)),!0)},a),ze.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Mn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ze.forEach(t.mutations,i=>{const o=new Ao(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ao(t,0),i=this.Rs.firstAfterOrEqual(r);return ze.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ze.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class r8{constructor(e){this.Ds=e,this.docs=new ii(sn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ze.resolve(r?r.document.mutableCopy():fi.newInvalidDocument(t))}getEntries(e,t){let r=qo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():fi.newInvalidDocument(i))}),ze.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qo();const a=t.path,d=new sn(a.child("")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:p,value:{document:m}}=h.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||hy(VC(m),r)<=0||(i.has(m.key)||Qg(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ze.resolve(o)}getAllFromCollectionGroup(e,t,r,i){wn()}Cs(e,t){return ze.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new i8(this)}getSize(e){return ze.resolve(this.size)}}class i8 extends On{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ze.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class s8{constructor(e){this.persistence=e,this.xs=new xl(t=>zu(t),Yg),this.lastRemoteSnapshotVersion=Pn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new zM,this.targetCount=0,this.Ms=x.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ze.resolve()}getLastRemoteSnapshotVersion(e){return ze.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ze.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ze.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ze.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new x(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ze.resolve()}updateTargetData(e,t){return this.Fn(t),ze.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ze.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.xs.forEach((a,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(a),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ze.waitFor(o).next(()=>i)}getTargetCount(e){return ze.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ze.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ze.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),ze.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ze.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ze.resolve(r)}containsKey(e,t){return ze.resolve(this.ks.containsKey(t))}}class GM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ua(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new s8(this),this.indexManager=new ZM,this.remoteDocumentCache=new r8(r=>this.referenceDelegate.Ls(r)),this.serializer=new Z2(t),this.qs=new e8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new t8,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new n8(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Rt("MemoryPersistence","Starting transaction:",e);const i=new o8(this.Os.next());return this.referenceDelegate.Us(),r(i).next(o=>this.referenceDelegate.Ks(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gs(e,t){return ze.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class o8 extends jC{constructor(e){super(),this.currentSequenceNumber=e}}class Q2{constructor(e){this.persistence=e,this.Qs=new zM,this.js=null}static zs(e){return new Q2(e)}get Ws(){if(this.js)return this.js;throw wn()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ze.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ze.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ze.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Ws.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ze.forEach(this.Ws,r=>{const i=sn.fromPath(r);return this.Hs(e,i).next(o=>{o||t.removeEntry(i,Pn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ze.or([()=>ze.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class a8{constructor(e){this.serializer=e}O(e,t,r,i){const o=new e_("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",my,{unique:!0}),d.createObjectStore("documentMutations"),CF(e),function(d){d.createObjectStore("remoteDocuments")}(e));let a=ze.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),CF(e)),a=a.next(()=>function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pn.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)}(o))),r<4&&i>=4&&(0!==r&&(a=a.next(()=>function(d,h){return h.store("mutations").j().next(p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",my,{unique:!0});const m=h.store("mutations"),y=p.map(T=>m.put(T));return ze.waitFor(y)})}(e,o))),a=a.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(a=a.next(()=>this.Ys(o))),r<6&&i>=6&&(a=a.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(o)))),r<7&&i>=7&&(a=a.next(()=>this.Zs(o))),r<8&&i>=8&&(a=a.next(()=>this.ti(e,o))),r<9&&i>=9&&(a=a.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(a=a.next(()=>this.ei(o))),r<11&&i>=11&&(a=a.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{!function(d){const h=d.createObjectStore("documentOverlays",{keyPath:QC});h.createIndex("collectionPathOverlayIndex",uF,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",XC,{unique:!1})}(e)})),r<13&&i>=13&&(a=a.next(()=>function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:tM});h.createIndex("documentKeyIndex",GC),h.createIndex("collectionGroupIndex",vy)}(e)).next(()=>this.ni(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.si(e,o))),r<15&&i>=15&&(a=a.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:nM}).createIndex("sequenceNumberIndex",rM,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:iM}).createIndex("documentKeyIndex",sM,{unique:!1})}(e))),a}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=c(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ze.forEach(i,o=>{const a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next(d=>ze.forEach(d,h=>{Mn(h.userId===o.userId);const p=Xu(this.serializer,h);return $M(e,o.userId,p).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.X((a,d)=>{const h=new pr(a),p=[0,ts(h)];o.push(t.get(p).next(m=>m?ze.resolve():t.put({targetId:0,path:ts(h),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ze.waitFor(o))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:JC});const r=t.store("collectionParents"),i=new J2,o=a=>{if(i.add(a)){const d=a.lastSegment(),h=a.popLast();return r.put({collectionId:d,parent:ts(h)})}};return t.store("remoteDocuments").X({Y:!0},(a,d)=>{const h=new pr(a);return o(h.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([a,d,h],p)=>{const m=tu(d);return o(m.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const o=Af(i),a=k_(this.serializer,o);return t.put(a)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((o,a)=>{const d=t.store("remoteDocumentsV14"),h=(p=a,p.document?new sn(pr.fromString(p.document.name).popFirst(5)):p.noDocument?sn.fromSegments(p.noDocument.path):p.unknownDocument?sn.fromSegments(p.unknownDocument.path):wn()).path.toArray();var p;const m={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(d.put(m))}).next(()=>ze.waitFor(i))}si(e,t){const r=t.store("mutations"),i=qn(this.serializer),o=new GM(Q2.zs,this.serializer.fe);return r.j().next(a=>{const d=new Map;return a.forEach(h=>{var p;let m=null!==(p=d.get(h.userId))&&void 0!==p?p:Jn();Xu(this.serializer,h).keys().forEach(y=>m=m.add(y)),d.set(h.userId,m)}),ze.forEach(d,(h,p)=>{const m=new Ds(p),y=Gy.de(this.serializer,m),T=o.getIndexManager(m),M=l.de(m,this.serializer,T,o.referenceDelegate);return new bF(i,M,y,T).recalculateAndSaveOverlaysForDocumentKeys(new r_(t,Ua.ct),h).next()})})}}function CF(n){n.createObjectStore("targetDocuments",{keyPath:KC}).createIndex("documentTargetsIndex",YC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",WC,{unique:!0}),n.createObjectStore("targetGlobal")}const WM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class KM{constructor(e,t,r,i,o,a,d,h,p,m,y=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=o,this.window=a,this.document=d,this.ri=p,this.oi=m,this.ui=y,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=T=>Promise.resolve(),!KM.D())throw new At(et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new en(this,i),this.di=t+"main",this.serializer=new Z2(h),this.wi=new Uc(this.di,this.ui,new a8(this.serializer)),this.Bs=new S(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qn(this.serializer),this.qs=new vF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===m&&gs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new At(et.FAILED_PRECONDITION,WM);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ua(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ju(e))return Rt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ex(e).get("owner").next(t=>ze.resolve(this.Ri(t)))}Pi(e){return eE(e).delete(this.clientId)}bi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ks(r,"clientMetadata");return i.j().next(o=>{const a=e.Si(o,18e5),d=o.filter(h=>-1===a.indexOf(h));return ze.forEach(d,h=>i.delete(h.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ze.resolve(!0):ex(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new At(et.FAILED_PRECONDITION,WM);return!1}}return!(!this.networkEnabled||!this.inForeground)||eE(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Rt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new r_(t,Ua.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>eE(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return l.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yF(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Gy.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Rt("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(a=this.ui)?cM:14===a?t2:13===a?aM:12===a?oM:11===a?e2:void wn();var a;let d;return this.wi.runTransaction(e,i,o,h=>(d=new r_(h,this.Os?this.Os.next():Ua.ct),"readwrite-primary"===t?this.Ti(d).next(p=>!!p||this.Ei(d)).next(p=>{if(!p)throw gs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new At(et.FAILED_PRECONDITION,ZC);return r(d)}).next(p=>this.vi(d).next(()=>p)):this.Oi(d).next(()=>r(d)))).then(h=>(d.raiseOnCommittedEvent(),h))}Oi(e){return ex(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new At(et.FAILED_PRECONDITION,WM)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ex(e).put("owner",t)}static D(){return Uc.D()}Ai(e){const t=ex(e);return t.get("owner").next(r=>this.Ri(r)?(Rt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ze.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(gs(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(function LS(){return!function Jd(){var n;const e=null===(n=sg())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")})()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Rt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gs("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){gs("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ex(n){return ks(n,"owner")}function eE(n){return ks(n,"clientMetadata")}class JM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Jn(),i=Jn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new JM(e,t.fromCache,r,i)}}class EF{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(o=>o||this.Gi(e,t,i,r)).next(o=>o||this.Qi(e,t))}Ki(e,t){if(pM(t))return ze.resolve(null);let r=jo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Jh(t,null,"F"),r=jo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Jn(...o);return this.Ui.getDocuments(e,a).next(d=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.ji(t,d);return this.zi(t,p,a,h.readTime)?this.Ki(e,Jh(t,null,"F")):this.Wi(e,p,t,h)}))})))}Gi(e,t,r,i){return pM(t)||i.isEqual(Pn.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(o=>{const a=this.ji(t,o);return this.zi(t,a,r,i)?this.Qi(e,t):(Ym()<=vr.DEBUG&&Rt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),p2(t)),this.Wi(e,a,t,function BC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pn.fromTimestamp(1e9===r?new Ii(t+1,0):new Ii(t,r));return new La(i,sn.empty(),e)}(i,-1)))})}ji(e,t){let r=new di(m2(e));return t.forEach((i,o)=>{Qg(e,o)&&(r=r.add(o))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Qi(e,t){return Ym()<=vr.DEBUG&&Rt("QueryEngine","Using full collection scan to execute query:",p2(t)),this.Ui.getDocumentsMatchingQuery(e,t,La.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}}class c8{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new ii(Zn),this.Yi=new xl(o=>zu(o),Yg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bF(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function TF(n,e,t,r){return new c8(n,e,t,r)}function SF(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,be.Z)(function*(n,e){const t=un(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],d=[];let h=Jn();for(const p of i){a.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}for(const p of o){d.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(p=>({er:p,removedBatchIds:a,addedBatchIds:d}))})})}),QM.apply(this,arguments)}function AF(n){const e=un(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function d8(n,e){const t=un(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L_(n,e,t){return XM.apply(this,arguments)}function XM(){return XM=(0,be.Z)(function*(n,e,t){const r=un(n),i=r.Ji.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!ju(a))throw a;Rt("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),XM.apply(this,arguments)}function tE(n,e,t){const r=un(n);let i=Pn.min(),o=Jn();return r.persistence.runTransaction("Execute query","readonly",a=>function(d,h,p){const m=un(d),y=m.Yi.get(p);return void 0!==y?ze.resolve(m.Ji.get(y)):m.Bs.getTargetData(h,p)}(r,a,jo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(a,d.targetId).next(h=>{o=h})}).next(()=>r.Hi.getDocumentsMatchingQuery(a,e,t?i:Pn.min(),t?o:Jn())).next(d=>(function DF(n,e,t){let r=n.Xi.get(e)||Pn.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Xi.set(e,r)}(r,function g2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),d),{documents:d,ir:o})))}class iI{constructor(){this.activeTargetIds=function Oy(){return mM}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FF{constructor(){this.Hr=new iI,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new iI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class p8{Yr(e){}shutdown(){}}class RF{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let iE=null;function oI(){return null===iE?iE=268435456+Math.round(2147483648*Math.random()):iE++,"0x"+iE.toString(16)}const g8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m8{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const pa="WebChannelConnection";class _8 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,o){const a=oI(),d=this.To(e,t);Rt("RestConnection",`Sending RPC '${e}' ${a}:`,d,r);const h={};return this.Eo(h,i,o),this.Ao(e,d,h,r).then(p=>(Rt("RestConnection",`Received RPC '${e}' ${a}: `,p),p),p=>{throw pl("RestConnection",`RPC '${e}' ${a} failed with error: `,p,"url: ",d,"request:",r),p})}vo(e,t,r,i,o,a){return this.Io(e,t,r,i,o)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+yf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}To(e,t){return`${this.mo}/v1/${t}:${g8[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const o=oI();return new Promise((a,d)=>{const h=new $A;h.setWithCredentials(!0),h.listenOnce(kC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Km.NO_ERROR:const m=h.getResponseJson();Rt(pa,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Km.TIMEOUT:Rt(pa,`RPC '${e}' ${o} timed out`),d(new At(et.DEADLINE_EXCEEDED,"Request time out"));break;case Km.HTTP_ERROR:const y=h.getStatus();if(Rt(pa,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let T=h.getResponseJson();Array.isArray(T)&&(T=T[0]);const M=T?.error;if(M&&M.status&&M.message){const R=function(D){const U=D.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(U)>=0?U:et.UNKNOWN}(M.status);d(new At(R,M.message))}else d(new At(et.UNKNOWN,"Server responded with status "+h.getStatus()))}else d(new At(et.UNAVAILABLE,"Connection failed."));break;default:wn()}}finally{Rt(pa,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);Rt(pa,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",p,r,15)})}Ro(e,t,r){const i=oI(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=HA(),d=Wm(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;void 0!==p&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.xmlHttpFactory=new Ug({})),this.Eo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");Rt(pa,`Creating RPC '${e}' stream ${i}: ${m}`,h);const y=a.createWebChannel(m,h);let T=!1,M=!1;const R=new m8({ro:U=>{M?Rt(pa,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(T||(Rt(pa,`Opening RPC '${e}' stream ${i} transport.`),y.open(),T=!0),Rt(pa,`RPC '${e}' stream ${i} sending:`,U),y.send(U))},oo:()=>y.close()}),D=(U,J,ee)=>{U.listen(J,W=>{try{ee(W)}catch(pe){setTimeout(()=>{throw pe},0)}})};return D(y,Bu.EventType.OPEN,()=>{M||Rt(pa,`RPC '${e}' stream ${i} transport opened.`)}),D(y,Bu.EventType.CLOSE,()=>{M||(M=!0,Rt(pa,`RPC '${e}' stream ${i} transport closed`),R.wo())}),D(y,Bu.EventType.ERROR,U=>{M||(M=!0,pl(pa,`RPC '${e}' stream ${i} transport errored:`,U),R.wo(new At(et.UNAVAILABLE,"The operation could not be completed")))}),D(y,Bu.EventType.MESSAGE,U=>{var J;if(!M){const ee=U.data[0];Mn(!!ee);const pe=ee.error||(null===(J=ee[0])||void 0===J?void 0:J.error);if(pe){Rt(pa,`RPC '${e}' stream ${i} received error:`,pe);const Ae=pe.status;let Ve=function(Re){const ke=_s[Re];if(void 0!==ke)return EM(ke)}(Ae),ae=pe.message;void 0===Ve&&(Ve=et.INTERNAL,ae="Unknown error status: "+Ae+" with message "+pe.message),M=!0,R.wo(new At(Ve,ae)),y.close()}else Rt(pa,`RPC '${e}' stream ${i} received:`,ee),R._o(ee)}}),D(d,OC.STAT_EVENT,U=>{U.stat===FC.PROXY?Rt(pa,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===FC.NOPROXY&&Rt(pa,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.fo()},0),R}}function sE(){return typeof document<"u"?document:null}function nx(n){return new SM(n,!0)}class aI{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Rt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class LF{constructor(e,t,r,i,o,a,d,h){this.ii=e,this.$o=r,this.Oo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new aI(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,be.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,be.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(gs(t.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===et.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new At(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,be.Z)(function*(){e.state=0,e.start()}))}tu(e){return Rt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v8 extends LF{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function N2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:wn(),i=e.targetChange.targetIds||[],o=function(h,p){return h.useProto3Json?(Mn(void 0===p||"string"==typeof p),ms.fromBase64String(p||"")):(Mn(void 0===p||p instanceof Uint8Array),ms.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,d=a&&function(h){const p=void 0===h.code?et.UNKNOWN:EM(h.code);return new At(p,h.message||"")}(a);t=new Vy(r,i,o,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Cl(n,r.document.name),o=ns(r.document.updateTime),a=r.document.createTime?ns(r.document.createTime):Pn.min(),d=new Fs({mapValue:{fields:r.document.fields}}),h=fi.newFoundDocument(i,o,a,d);t=new o0(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Cl(n,r.document),o=r.readTime?ns(r.readTime):Pn.min(),a=fi.newNoDocument(i,o);t=new o0([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in e){const r=e.documentRemove,i=Cl(n,r.document);t=new o0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return wn();{const r=e.filter,{count:i=0,unchangedNames:o}=r,a=new Vc(i,o);t=new I2(r.targetId,a)}}var h;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Pn.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Pn.min():o.readTime?ns(o.readTime):Pn.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=Sf(this.serializer),t.addTarget=function(i,o){let a;const d=o.target;if(a=f_(d)?{documents:U2(i,d)}:{query:B2(i,d)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=F2(i,o.resumeToken);const h=O2(i,o.expectedCount);null!==h&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(Pn.min())>0){a.readTime=ip(i,o.snapshotVersion.toTimestamp());const h=O2(i,o.expectedCount);null!==h&&(a.expectedCount=h)}return a}(this.serializer,e);const r=function mF(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wn()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=Sf(this.serializer),t.removeTarget=e,this.Wo(t)}}class y8 extends LF{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Mn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function L2(n,e){return n&&n.length>0?(Mn(void 0!==e),n.map(t=>function(r,i){let o=ns(r.updateTime?r.updateTime:i);return o.isEqual(Pn.min())&&(o=ns(i)),new Ly(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ns(e.commitTime);return this.listener.cu(r,t)}return Mn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Sf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ku(this.serializer,r))};this.Wo(t)}}class x8 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new At(et.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Io(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new At(et.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,t,r,o,a,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new At(et.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class b8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(gs(t),this.mu=!1):Rt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class C8{constructor(e,t,r,i,o){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(d=>{r.enqueueAndForget((0,be.Z)(function*(){var h;up(a)&&(Rt("RemoteStore","Restarting streams for network reachability change."),yield(h=(0,be.Z)(function*(p){const m=un(p);m.vu.add(4),yield U_(m),m.bu.set("Unknown"),m.vu.delete(4),yield rx(m)}),function(p){return h.apply(this,arguments)})(a))}))}),this.bu=new b8(r,i)}}function rx(n){return lI.apply(this,arguments)}function lI(){return lI=(0,be.Z)(function*(n){if(up(n))for(const e of n.Ru)yield e(!0)}),lI.apply(this,arguments)}function U_(n){return uI.apply(this,arguments)}function uI(){return uI=(0,be.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),uI.apply(this,arguments)}function oE(n,e){const t=un(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),hI(t)?fI(t):V_(t).Ko()&&dI(t,e))}function ix(n,e){const t=un(n),r=V_(t);t.Au.delete(e),r.Ko()&&UF(t,e),0===t.Au.size&&(r.Ko()?r.jo():up(t)&&t.bu.set("Unknown"))}function dI(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}V_(n).su(e)}function UF(n,e){n.Vu.qt(e),V_(n).iu(e)}function fI(n){n.Vu=new Zy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),V_(n).start(),n.bu.gu()}function hI(n){return up(n)&&!V_(n).Uo()&&n.Au.size>0}function up(n){return 0===un(n).vu.size}function BF(n){n.Vu=void 0}function E8(n){return pI.apply(this,arguments)}function pI(){return pI=(0,be.Z)(function*(n){n.Au.forEach((e,t)=>{dI(n,e)})}),pI.apply(this,arguments)}function T8(n,e){return gI.apply(this,arguments)}function gI(){return gI=(0,be.Z)(function*(n,e){BF(n),hI(n)?(n.bu.Iu(e),fI(n)):n.bu.set("Unknown")}),gI.apply(this,arguments)}function S8(n,e,t){return mI.apply(this,arguments)}function mI(){return mI=(0,be.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof Vy&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,o){const a=o.cause;for(const d of o.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,a),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){Rt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield aE(n,r)}else if(e instanceof o0?n.Vu.Ht(e):e instanceof I2?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Pn.min()))try{const r=yield AF(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const a=i.Vu.ce(o);return a.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.Au.get(h);p&&i.Au.set(h,p.withResumeToken(d.resumeToken,o))}}),a.targetMismatches.forEach((d,h)=>{const p=i.Au.get(d);if(!p)return;i.Au.set(d,p.withResumeToken(ms.EMPTY_BYTE_STRING,p.snapshotVersion)),UF(i,d);const m=new Ju(p.target,d,h,p.sequenceNumber);dI(i,m)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Rt("RemoteStore","Failed to raise snapshot:",r),yield aE(n,r)}var r}),mI.apply(this,arguments)}function aE(n,e,t){return _I.apply(this,arguments)}function _I(){return _I=(0,be.Z)(function*(n,e,t){if(!ju(e))throw e;n.vu.add(1),yield U_(n),n.bu.set("Offline"),t||(t=()=>AF(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Rt("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield rx(n)}))}),_I.apply(this,arguments)}function VF(n,e){return e().catch(t=>aE(n,t,e))}function B_(n){return vI.apply(this,arguments)}function vI(){return vI=(0,be.Z)(function*(n){const e=un(n),t=dp(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;A8(e);)try{const i=yield d8(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,M8(e,i)}catch(i){yield aE(e,i)}ZF(e)&&jF(e)}),vI.apply(this,arguments)}function A8(n){return up(n)&&n.Eu.length<10}function M8(n,e){n.Eu.push(e);const t=dp(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function ZF(n){return up(n)&&!dp(n).Uo()&&n.Eu.length>0}function jF(n){dp(n).start()}function I8(n){return yI.apply(this,arguments)}function yI(){return yI=(0,be.Z)(function*(n){dp(n).hu()}),yI.apply(this,arguments)}function P8(n){return xI.apply(this,arguments)}function xI(){return xI=(0,be.Z)(function*(n){const e=dp(n);for(const t of n.Eu)e.uu(t.mutations)}),xI.apply(this,arguments)}function D8(n,e,t){return wI.apply(this,arguments)}function wI(){return wI=(0,be.Z)(function*(n,e,t){const r=n.Eu.shift(),i=b_.from(r,e,t);yield VF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield B_(n)}),wI.apply(this,arguments)}function k8(n,e){return bI.apply(this,arguments)}function bI(){return bI=(0,be.Z)(function*(n,e){var t;e&&dp(n).ou&&(yield(t=(0,be.Z)(function*(r,i){if(function A2(n){switch(n){default:return wn();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}(o=i.code)&&o!==et.ABORTED){const a=r.Eu.shift();dp(r).Qo(),yield VF(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),yield B_(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),ZF(n)&&jF(n)}),bI.apply(this,arguments)}function qF(n,e){return CI.apply(this,arguments)}function CI(){return CI=(0,be.Z)(function*(n,e){const t=un(n);t.asyncQueue.verifyOperationInProgress(),Rt("RemoteStore","RemoteStore received new credentials");const r=up(t);t.vu.add(3),yield U_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield rx(t)}),CI.apply(this,arguments)}function TI(){return TI=(0,be.Z)(function*(n,e){const t=un(n);e?(t.vu.delete(2),yield rx(t)):e||(t.vu.add(2),yield U_(t),t.bu.set("Unknown"))}),TI.apply(this,arguments)}function V_(n){return n.Su||(n.Su=function(e,t,r){const i=un(e);return i.fu(),new v8(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:E8.bind(null,n),ao:T8.bind(null,n),nu:S8.bind(null,n)}),n.Ru.push(function(){var e=(0,be.Z)(function*(t){t?(n.Su.Qo(),hI(n)?fI(n):n.bu.set("Unknown")):(yield n.Su.stop(),BF(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function dp(n){return n.Du||(n.Du=function(e,t,r){const i=un(e);return i.fu(),new y8(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:I8.bind(null,n),ao:k8.bind(null,n),au:P8.bind(null,n),cu:D8.bind(null,n)}),n.Ru.push(function(){var e=(0,be.Z)(function*(t){t?(n.Du.Qo(),yield B_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Rt("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class SI{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,r,i,o){const a=Date.now()+r,d=new SI(e,t,a,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new At(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Z_(n,e){if(gs("AsyncQueue",`${e}: ${n}`),ju(n))return new At(et.UNAVAILABLE,`${e}: ${n}`);throw n}class j_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||sn.comparator(t.key,r.key):(t,r)=>sn.comparator(t.key,r.key),this.keyedMap=Xg(),this.sortedSet=new ii(this.comparator)}static emptySet(e){return new j_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof j_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new j_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class HF{constructor(){this.Cu=new ii(sn.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):wn():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class q_{constructor(e,t,r,i,o,a,d,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new q_(e,t,j_.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&y_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class O8{constructor(){this.Nu=void 0,this.listeners=[]}}class F8{constructor(){this.queries=new xl(e=>h2(e),y_),this.onlineState="Unknown",this.ku=new Set}}function AI(n,e){return MI.apply(this,arguments)}function MI(){return MI=(0,be.Z)(function*(n,e){const t=un(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new O8),i)try{o.Nu=yield t.onListen(r)}catch(a){const d=Z_(a,`Initialization of query '${p2(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,o),o.listeners.push(e),e.Mu(t.onlineState),o.Nu&&e.$u(o.Nu)&&DI(t)}),MI.apply(this,arguments)}function II(n,e){return PI.apply(this,arguments)}function PI(){return PI=(0,be.Z)(function*(n,e){const t=un(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const a=o.listeners.indexOf(e);a>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),PI.apply(this,arguments)}function R8(n,e){const t=un(n);let r=!1;for(const i of e){const a=t.queries.get(i.query);if(a){for(const d of a.listeners)d.$u(i)&&(r=!0);a.Nu=i}}r&&DI(t)}function N8(n,e,t){const r=un(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function DI(n){n.ku.forEach(e=>{e.next()})}class kI{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new q_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=q_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class GF{constructor(e){this.key=e}}class WF{constructor(e){this.key=e}}class KF{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Jn(),this.mutatedKeys=Jn(),this.tc=m2(e),this.ec=new j_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new HF,i=t?t.ec:this.ec;let o=t?t.mutatedKeys:this.mutatedKeys,a=i,d=!1;const h="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,p="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const T=i.get(m),M=Qg(this.query,y)?y:null,R=!!T&&this.mutatedKeys.has(T.key),D=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;T&&M?T.data.isEqual(M.data)?R!==D&&(r.track({type:3,doc:M}),U=!0):this.rc(T,M)||(r.track({type:2,doc:M}),U=!0,(h&&this.tc(M,h)>0||p&&this.tc(M,p)<0)&&(d=!0)):!T&&M?(r.track({type:0,doc:M}),U=!0):T&&!M&&(r.track({type:1,doc:T}),U=!0,(h||p)&&(d=!0)),U&&(M?(a=a.add(M),o=D?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const m="F"===this.query.limitType?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{ec:a,ic:r,zi:d,mutatedKeys:o}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((p,m)=>function(y,T){const M=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wn()}};return M(y)-M(T)}(p.type,m.type)||this.tc(p.doc,m.doc)),this.oc(r);const a=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,h=d!==this.Xu;return this.Xu=d,0!==o.length||h?{snapshot:new q_(this.query,e.ec,i,o,e.mutatedKeys,0===d,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:a}:{cc:a}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new HF,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Jn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new WF(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new GF(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Jn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return q_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class B8{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class V8{constructor(e){this.key=e,this.fc=!1}}class Z8{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.dc={},this.wc=new xl(d=>h2(d),y_),this._c=new Map,this.mc=new Set,this.gc=new ii(sn.comparator),this.yc=new Map,this.Ic=new zM,this.Tc={},this.Ec=new Map,this.Ac=x.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function j8(n,e){return OI.apply(this,arguments)}function OI(){return OI=(0,be.Z)(function*(n,e){const t=function nP(n){const e=un(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$8.bind(null,e),e.dc.nu=R8.bind(null,e.eventManager),e.dc.Pc=N8.bind(null,e.eventManager),e}(n);let r,i;const o=t.wc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.lc();else{const a=yield function N_(n,e){const t=un(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(o=>o?(i=o,ze.resolve(i)):t.Bs.allocateTargetId(r).next(a=>(i=new Ju(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,jo(e)),d=t.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=yield function FI(n,e,t,r,i){return RI.apply(this,arguments)}(t,e,r,"current"===d,a.resumeToken),t.isPrimaryClient&&oE(t.remoteStore,a)}return i}),OI.apply(this,arguments)}function RI(){return RI=(0,be.Z)(function*(n,e,t,r,i){n.Rc=(y,T,M)=>{return(R=(0,be.Z)(function*(D,U,J,ee){let W=U.view.sc(J);W.zi&&(W=yield tE(D.localStore,U.query,!1).then(({documents:Ve})=>U.view.sc(Ve,W)));const pe=ee&&ee.targetChanges.get(U.targetId),Ae=U.view.applyChanges(W,D.isPrimaryClient,pe);return $I(D,U.targetId,Ae.cc),Ae.snapshot}),function(D,U,J,ee){return R.apply(this,arguments)})(n,y,T,M);var R};const o=yield tE(n.localStore,e,!0),a=new KF(e,o.ir),d=a.sc(o.documents),h=rp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),p=a.applyChanges(d,n.isPrimaryClient,h);$I(n,t,p.cc);const m=new B8(e,t,a);return n.wc.set(e,m),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),p.snapshot}),RI.apply(this,arguments)}function q8(n,e){return NI.apply(this,arguments)}function NI(){return NI=(0,be.Z)(function*(n,e){const t=un(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(o=>!y_(o,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield L_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ix(t.remoteStore,r.targetId),H_(t,r.targetId)}).catch(Zu))):(H_(t,r.targetId),yield L_(t.localStore,r.targetId,!0))}),NI.apply(this,arguments)}function LI(){return LI=(0,be.Z)(function*(n,e,t){const r=rP(n);try{const i=yield function(o,a){const d=un(o),h=Ii.now(),p=a.reduce((T,M)=>T.add(M.key),Jn());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let M=qo(),R=Jn();return d.Zi.getEntries(T,p).next(D=>{M=D,M.forEach((U,J)=>{J.isValidDocument()||(R=R.add(U))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,M)).next(D=>{m=D;const U=[];for(const J of a){const ee=w_(J,m.get(J.key).overlayedDocument);null!=ee&&U.push(new Wu(J.key,ee,c2(ee.value.mapValue),hi.exists(!0)))}return d.mutationQueue.addMutationBatch(T,h,U,a)}).next(D=>{y=D;const U=D.applyToLocalDocumentSet(m,R);return d.documentOverlayCache.saveOverlays(T,D.batchId,U)})}).then(()=>({batchId:y.batchId,changes:v2(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,d){let h=o.Tc[o.currentUser.toKey()];h||(h=new ii(Zn)),h=h.insert(a,d),o.Tc[o.currentUser.toKey()]=h}(r,i.batchId,t),yield Pf(r,i.changes),yield B_(r.remoteStore)}catch(i){const o=Z_(i,"Failed to persist write");t.reject(o)}}),LI.apply(this,arguments)}function YF(n,e){return UI.apply(this,arguments)}function UI(){return UI=(0,be.Z)(function*(n,e){const t=un(n);try{const r=yield function u8(n,e){const t=un(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((m,y)=>{const T=i.get(y);if(!T)return;d.push(t.Bs.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Bs.addMatchingKeys(o,m.addedDocuments,y)));let M=T.withSequenceNumber(o.currentSequenceNumber);var R,D,U;null!==e.targetMismatches.get(y)?M=M.withResumeToken(ms.EMPTY_BYTE_STRING,Pn.min()).withLastLimboFreeSnapshotVersion(Pn.min()):m.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(m.resumeToken,r)),i=i.insert(y,M),D=M,U=m,(0===(R=T).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(o,M))});let h=qo(),p=Jn();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),d.push(function MF(n,e,t){let r=Jn(),i=Jn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=qo();return t.forEach((d,h)=>{const p=o.get(d);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(Pn.min())?(e.removeEntry(d,h.readTime),a=a.insert(d,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),a=a.insert(d,h)):Rt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",h.version)}),{nr:a,sr:i}})}(o,a,e.documentUpdates).next(m=>{h=m.nr,p=m.sr})),!r.isEqual(Pn.min())){const m=t.Bs.getLastRemoteSnapshotVersion(o).next(y=>t.Bs.setTargetsMetadata(o,o.currentSequenceNumber,r));d.push(m)}return ze.waitFor(d).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(t.Ji=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const a=t.yc.get(o);a&&(Mn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.fc=!0:i.modifiedDocuments.size>0?Mn(a.fc):i.removedDocuments.size>0&&(Mn(a.fc),a.fc=!1))}),yield Pf(t,r,e)}catch(r){yield Zu(r)}}),UI.apply(this,arguments)}function JF(n,e,t){const r=un(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((o,a)=>{const d=a.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(o,a){const d=un(o);d.onlineState=a;let h=!1;d.queries.forEach((p,m)=>{for(const y of m.listeners)y.Mu(a)&&(h=!0)}),h&&DI(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $8(n,e,t){return BI.apply(this,arguments)}function BI(){return BI=(0,be.Z)(function*(n,e,t){const r=un(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),o=i&&i.key;if(o){let a=new ii(sn.comparator);a=a.insert(o,fi.newNoDocument(o,Pn.min()));const d=Jn().add(o),h=new s0(Pn.min(),new Map,new ii(Zn),a,d);yield YF(r,h),r.gc=r.gc.remove(o),r.yc.delete(e),zI(r)}else yield L_(r.localStore,e,!1).then(()=>H_(r,e,t)).catch(Zu)}),BI.apply(this,arguments)}function z8(n,e){return VI.apply(this,arguments)}function VI(){return VI=(0,be.Z)(function*(n,e){const t=un(n),r=e.batch.batchId;try{const i=yield function l8(n,e){const t=un(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Zi.newChangeBuffer({trackRemovals:!0});return function(a,d,h,p){const m=h.batch,y=m.keys();let T=ze.resolve();return y.forEach(M=>{T=T.next(()=>p.getEntry(d,M)).next(R=>{const D=h.docVersions.get(M);Mn(null!==D),R.version.compareTo(D)<0&&(m.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),p.addEntry(R)))})}),T.next(()=>a.mutationQueue.removeMutationBatch(d,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let d=Jn();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(d=d.add(a.batch.mutations[h].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);HI(t,r,null),qI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pf(t,i)}catch(i){yield Zu(i)}}),VI.apply(this,arguments)}function G8(n,e,t){return ZI.apply(this,arguments)}function ZI(){return ZI=(0,be.Z)(function*(n,e,t){const r=un(n);try{const i=yield function(o,a){const d=un(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return d.mutationQueue.lookupMutationBatch(h,a).next(m=>(Mn(null!==m),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,a)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>d.localDocuments.getDocuments(h,p))})}(r.localStore,e);HI(r,e,t),qI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pf(r,i)}catch(i){yield Zu(i)}}),ZI.apply(this,arguments)}function qI(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function HI(n,e,t){const r=un(n);let i=r.Tc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function H_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||QF(n,r)})}function QF(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(ix(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),zI(n))}function $I(n,e,t){for(const r of t)r instanceof GF?(n.Ic.addReference(r.key,e),K8(n,r)):r instanceof WF?(Rt("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||QF(n,r.key)):wn()}function K8(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Rt("SyncEngine","New document in limbo: "+t),n.mc.add(r),zI(n))}function zI(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new sn(pr.fromString(e)),r=n.Ac.next();n.yc.set(r,new V8(t)),n.gc=n.gc.insert(t,r),oE(n.remoteStore,new Ju(jo(Gu(t.path)),r,"TargetPurposeLimboResolution",Ua.ct))}}function Pf(n,e,t){return GI.apply(this,arguments)}function GI(){return GI=(0,be.Z)(function*(n,e,t){const r=un(n),i=[],o=[],a=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,h)=>{a.push(r.Rc(h,e,t).then(p=>{if((p||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,p?.fromCache?"not-current":"current"),p){i.push(p);const m=JM.Li(h.targetId,p);o.push(m)}}))}),yield Promise.all(a),r.dc.nu(i),yield(d=(0,be.Z)(function*(h,p){const m=un(h);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ze.forEach(p,T=>ze.forEach(T.Fi,M=>m.persistence.referenceDelegate.addReference(y,T.targetId,M)).next(()=>ze.forEach(T.Bi,M=>m.persistence.referenceDelegate.removeReference(y,T.targetId,M)))))}catch(y){if(!ju(y))throw y;Rt("LocalStore","Failed to update sequence numbers: "+y)}for(const y of p){const T=y.targetId;if(!y.fromCache){const M=m.Ji.get(T),D=M.withLastLimboFreeSnapshotVersion(M.snapshotVersion);m.Ji=m.Ji.insert(T,D)}}}),function(h,p){return d.apply(this,arguments)})(r.localStore,o))}),GI.apply(this,arguments)}function Y8(n,e){return WI.apply(this,arguments)}function WI(){return WI=(0,be.Z)(function*(n,e){const t=un(n);if(!t.currentUser.isEqual(e)){Rt("SyncEngine","User change. New user:",e.toKey());const r=yield SF(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(a=>{a.forEach(d=>{d.reject(new At(et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pf(t,r.er)}var i}),WI.apply(this,arguments)}function J8(n,e){const t=un(n),r=t.yc.get(e);if(r&&r.fc)return Jn().add(r.key);{let i=Jn();const o=t._c.get(e);if(!o)return i;for(const a of o){const d=t.wc.get(a);i=i.unionWith(d.view.nc)}return i}}function rP(n){const e=un(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G8.bind(null,e),e}class sx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.serializer=nx(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return TF(this.persistence,new EF,e.initialUser,this.serializer)}createPersistence(e){return new GM(Q2.zs,this.serializer)}createSharedClientState(e){return new FF}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class t4 extends sx{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield rP(r.Vc.syncEngine),yield B_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return TF(this.persistence,new EF,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Ze(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new eM(t,this.persistence);return new py(e.asyncQueue,r)}createPersistence(e){const t=function YM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ho.withCacheSize(this.cacheSizeBytes):Ho.DEFAULT;return new KM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,function NF(){return typeof window<"u"?window:null}(),sE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new FF}}class $_{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Y8.bind(null,r.syncEngine),yield function EI(n,e){return TI.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new F8}createDatastore(e){const t=nx(e.databaseInfo.databaseId),r=new _8(e.databaseInfo);return new x8(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=d=>JF(this.syncEngine,d,0),a=RF.D()?new RF:new p8,new C8(t,r,i,o,a);var t,r,i,o,a}createSyncEngine(e,t){return function(r,i,o,a,d,h,p){const m=new Z8(r,i,o,a,d,h);return p&&(m.vc=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=un(t);Rt("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield U_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class cE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uU{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ds.UNAUTHENTICATED,this.clientId=LC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var a=(0,be.Z)(function*(d){Rt("FirestoreClient","Received user=",d.uid),yield o.authCredentialListener(d),o.user=d});return function(d){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Rt("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new At(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Z_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function lE(n,e){return iP.apply(this,arguments)}function iP(){return iP=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Rt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(o){r.isEqual(o)||(yield SF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),iP.apply(this,arguments)}function sP(n,e){return oP.apply(this,arguments)}function oP(){return oP=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function aP(n){return cP.apply(this,arguments)}(n);Rt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>qF(e.remoteStore,o)),n._onlineComponents=e}),oP.apply(this,arguments)}function i4(n){return"FirebaseError"===n.name?n.code===et.FAILED_PRECONDITION||n.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function cP(){return cP=(0,be.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Rt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!i4(t))throw t;pl("Error using user provided cache. Falling back to memory cache: "+t),yield lE(n,new sx)}}else Rt("FirestoreClient","Using default OfflineComponentProvider"),yield lE(n,new sx);return n._offlineComponents}),cP.apply(this,arguments)}function uE(n){return lP.apply(this,arguments)}function lP(){return lP=(0,be.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Rt("FirestoreClient","Using user provided OnlineComponentProvider"),yield sP(n,n._uninitializedComponentsProvider._online)):(Rt("FirestoreClient","Using default OnlineComponentProvider"),yield sP(n,new $_))),n._onlineComponents}),lP.apply(this,arguments)}function z_(n){return dP.apply(this,arguments)}function dP(){return dP=(0,be.Z)(function*(n){const e=yield uE(n),t=e.eventManager;return t.onListen=j8.bind(null,e.syncEngine),t.onUnlisten=q8.bind(null,e.syncEngine),t}),dP.apply(this,arguments)}function u4(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const d4=new Map;function fP(n,e,t){if(!t)throw new At(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f4(n){if(!sn.isDocumentKey(n))throw new At(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function h4(n){if(sn.isDocumentKey(n))throw new At(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":wn()}function Ar(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new At(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=fE(n);throw new At(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class g4{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new At(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new At(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function yU(n,e,t,r){if(!0===e&&!0===r)throw new At(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=u4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new At(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new At(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new At(et.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ox{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new At(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new At(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g4(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GA;switch(t.type){case"firstParty":return new YA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new At(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=d4.get(e);t&&(Rt("ComponentProvider","Removing Datastore"),d4.delete(e),t.terminate())}(this),Promise.resolve()}}class Rs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new td(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rs(this.firestore,e,this._key)}}class $o{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $o(this.firestore,e,this._query)}}class td extends $o{constructor(e,t,r){super(e,t,Gu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rs(this.firestore,null,new sn(e))}withConverter(e){return new td(this.firestore,e,this._path)}}function hP(n,e,...t){if(n=Eo(n),fP("collection","path",e),n instanceof ox){const r=pr.fromString(e,...t);return h4(r),new td(n,null,r)}{if(!(n instanceof Rs||n instanceof td))throw new At(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pr.fromString(e,...t));return h4(r),new td(n.firestore,null,r)}}function hE(n,e,...t){if(n=Eo(n),1===arguments.length&&(e=LC.A()),fP("doc","path",e),n instanceof ox){const r=pr.fromString(e,...t);return f4(r),new Rs(n,null,new sn(r))}{if(!(n instanceof Rs||n instanceof td))throw new At(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pr.fromString(e,...t));return f4(r),new Rs(n.firestore,n instanceof td?n.converter:null,new sn(r))}}class wU{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new aI(this,"async_queue_retry"),this.Xc=()=>{const t=sE();t&&Rt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=sE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=sE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Mi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,be.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ju(t))throw t;Rt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,gs("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=SI.createAndSchedule(this,e,t,r,o=>this.na(o));return this.zc.push(i),i}Zc(){this.Wc&&wn()}verifyOperationInProgress(){}sa(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class Pi extends ox{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new wU,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_4(this),this._firestoreClient.terminate()}}function Ws(n){return n._firestoreClient||_4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _4(n){var e,t,r;const i=n._freezeSettings(),o=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new o2(n._databaseId,d,n._persistenceKey,(p=i).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,u4(p.experimentalLongPollingOptions),p.useFetchStreams));var d,p;n._firestoreClient=new uU(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class f0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new f0(ms.fromBase64String(e))}catch(t){throw new At(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new f0(ms.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class G_{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new At(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gP{constructor(e){this._methodName=e}}class mP{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new At(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new At(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zn(this._lat,e._lat)||Zn(this._long,e._long)}}const SU=/^__.*__$/;class AU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new r0(e,this.data,t,this.fieldTransforms)}}class x4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function w4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wn()}}class pE{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new pE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return mE(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(w4(this.ca)&&SU.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class MU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||nx(e)}ya(e,t,r,i=!1){return new pE({ca:e,methodName:t,ga:r,path:qi.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W_(n){const e=n._freezeSettings(),t=nx(n._databaseId);return new MU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _P(n,e,t,r,i,o={}){const a=n.ya(o.merge||o.mergeFields?2:0,e,t,i);yP("Data must be an object, but it was:",a,r);const d=S4(r,a);let h,p;if(o.merge)h=new Zo(a.fieldMask),p=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const T=lx(e,y,t);if(!a.contains(T))throw new At(et.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);M4(m,T)||m.push(T)}h=new Zo(m),p=a.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,p=a.fieldTransforms;return new AU(new Fs(d),h,p)}class cx extends gP{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cx}}function h0(n,e){if(A4(n=Eo(n)))return yP("Unsupported field value:",e,n),S4(n,e);if(n instanceof gP)return function(t,r){if(!w4(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const a of t){let d=h0(a,r.wa(o));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=Eo(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vM(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ii.fromDate(t);return{timestampValue:ip(r.serializer,i)}}if(t instanceof Ii){const i=new Ii(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ip(r.serializer,i)}}if(t instanceof mP)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof f0)return{bytesValue:F2(r.serializer,t._byteString)};if(t instanceof Rs){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:M_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${fE(t)}`)}(n,e)}function S4(n,e){const t={};return r2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nu(n,(r,i)=>{const o=h0(i,e.ha(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function A4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ii||n instanceof mP||n instanceof f0||n instanceof Rs||n instanceof gP)}function yP(n,e,t){if(!A4(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=fE(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function lx(n,e,t){if((e=Eo(e))instanceof G_)return e._internalPath;if("string"==typeof e)return gE(n,e);throw mE("Field path arguments must be of type string or ",n,!1,void 0,t)}const kU=new RegExp("[~\\*/\\[\\]]");function gE(n,e,t){if(e.search(kU)>=0)throw mE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new G_(...e.split("."))._internalPath}catch{throw mE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mE(n,e,t,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new At(et.INVALID_ARGUMENT,d+n+h)}function M4(n,e){return n.some(t=>t.isEqual(e))}class xP{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_E("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OU extends xP{data(){return super.data()}}function _E(n,e){return"string"==typeof e?gE(n,e):e instanceof G_?e._internalPath:e._delegate._internalPath}class wP{}class P4 extends wP{}class ux extends P4{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ux(e,t,r)}_apply(e){const t=this._parse(e);return R4(e._query,t),new $o(e.firestore,e.converter,v_(e._query,t))}_parse(e){const t=W_(e.firestore);return function(i,o,a,d,h,p,m){let y;if(h.isKeyField()){if("array-contains"===p||"array-contains-any"===p)throw new At(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if("in"===p||"not-in"===p){F4(m,p);const T=[];for(const M of m)T.push(O4(d,i,M));y={arrayValue:{values:T}}}else y=O4(d,i,m)}else"in"!==p&&"not-in"!==p&&"array-contains-any"!==p||F4(m,p),y=function T4(n,e,t,r=!1){return h0(t,n.ya(r?4:3,e))}(a,"where",m,"in"===p||"not-in"===p);return ur.create(h,p,y)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function D4(n,e,t){const r=e,i=_E("where",n);return ux._create(i,r,t)}class K_ extends wP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new K_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Br.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const d of a)R4(o,d),o=v_(o,d)}(e._query,t),new $o(e.firestore,e.converter,v_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class vE extends P4{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new vE(e,t,r)}_apply(e){return new $o(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function O4(n,e,t){if("string"==typeof(t=Eo(t))){if(""===t)throw new At(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__(e)&&-1!==t.indexOf("/"))throw new At(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pr.fromString(t));if(!sn.isDocumentKey(r))throw new At(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vl(n,new sn(r))}if(t instanceof Rs)return vl(n,t._key);throw new At(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fE(t)}.`)}function F4(n,e){if(!Array.isArray(n)||0===n.length)throw new At(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R4(n,e){if(e.isInequality()){const r=m_(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new At(et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const o=g_(n);null!==o&&function N4(n,e,t){if(!t.isEqual(e))throw new At(et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}(0,i,o)}const t=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new At(et.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NU{convertValue(e,t="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return nu(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new mP(Hi(e.latitude),Hi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$g(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zh(e));default:return null}}convertTimestamp(e){const t=ru(e);return new Ii(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pr.fromString(e);Mn(RM(r));const i=new bf(r.get(1),r.get(3)),o=new sn(r.popFirst(5));return i.isEqual(t)||gs(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class p0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y_ extends xP{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_E("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class wE extends Y_{data(e={}){return super.data(e)}}class J_{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new p0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wE(this._firestore,this._userDataWriter,r.key,r,new p0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new At(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new wE(r._firestore,r._userDataWriter,a.doc.key,a.doc,new p0(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||3!==a.type).map(a=>{const d=new wE(r._firestore,r._userDataWriter,a.doc.key,a.doc,new p0(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,p=-1;return 0!==a.type&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:UU(a.type),doc:d,oldIndex:h,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wn()}}class fp extends NU{constructor(e){super(),this.firestore=e}convertBytes(e){return new f0(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rs(this.firestore,null,t)}}function U4(n){n=Ar(n,$o);const e=Ar(n.firestore,Pi),t=Ws(e),r=new fp(e);return function I4(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new At(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),function l4(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,o,a,d,h){const p=new cE({next:y=>{o.enqueueAndForget(()=>II(i,m)),y.fromCache&&"server"===d.source?h.reject(new At(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new kI(a,p,{includeMetadataChanges:!0,Ku:!0});return AI(i,m)}(yield z_(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new J_(e,r,n,i))}function dx(n,e){return function(t,r){const i=new Mi;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function H8(n,e,t){return LI.apply(this,arguments)}(yield function uP(n){return uE(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Ws(n),e)}!function(n,e=!0){yf=ef,Pu(new Kl("firestore",(t,{instanceIdentifier:r,options:i})=>{const o=t.getProvider("app").getImmediate(),a=new Pi(new KA(t.getProvider("auth-internal")),new JA(t.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new At(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bf(d.options.projectId,h)}(o,r),o);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),cl(ay,"3.13.0",n),cl(ay,"3.13.0","esm2017")}();var e9=Z(5625);cl("firebase","9.23.0","app");var V4=Z(7582);const r9=function Z4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},j4=new ph("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),CE=new hm("@firebase/auth");function EE(n,...e){CE.logLevel<=vr.ERROR&&CE.error(`Auth (${ef}): ${n}`,...e)}function gc(n,...e){throw TP(n,...e)}function nd(n,...e){return TP(n,...e)}function TP(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return j4.create(n,...e)}function on(n,e,...t){if(!n)throw TP(e,...t)}function rd(n){const e="INTERNAL ASSERTION FAILED: "+n;throw EE(e),new Error(e)}function hp(n,e){n||rd(e)}function fx(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function H4(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function s9(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function SP(){return"http:"===H4()||"https:"===H4()}()||function Y1(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class hx{constructor(e,t){this.shortDelay=e,this.longDelay=t,hp(t>e,"Short delay should be less than long delay!"),this.isMobile=function lm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ti())}()||function NS(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return s9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function AP(n,e){hp(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class $4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void rd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void rd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void rd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const a9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},c9=new hx(3e4,6e4);function rs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function vs(n,e,t,r){return MP.apply(this,arguments)}function MP(){return MP=(0,be.Z)(function*(n,e,t,r,i={}){return z4(n,i,(0,be.Z)(function*(){let o={},a={};r&&("GET"===e?a=r:o={body:JSON.stringify(r)});const d=_h(Object.assign({key:n.config.apiKey},a)).slice(1),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode),$4.fetch()(G4(n,n.config.apiHost,t,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))}))}),MP.apply(this,arguments)}function z4(n,e,t){return IP.apply(this,arguments)}function IP(){return IP=(0,be.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},a9),e);try{const i=new l9(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=yield o.json();if("needConfirmation"in a)throw px(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const d=o.ok?a.errorMessage:a.error.message,[h,p]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===h)throw px(n,"credential-already-in-use",a);if("EMAIL_EXISTS"===h)throw px(n,"email-already-in-use",a);if("USER_DISABLED"===h)throw px(n,"user-disabled",a);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw function q4(n,e,t){const r=Object.assign(Object.assign({},r9()),{[e]:t});return new ph("auth","Firebase",r).create(e,{appName:n.name})}(n,m,p);gc(n,m)}}catch(i){if(i instanceof al)throw i;gc(n,"network-request-failed",{message:String(i)})}}),IP.apply(this,arguments)}function PP(){return PP=(0,be.Z)(function*(n,e,t,r,i={}){const o=yield vs(n,e,t,r,i);return"mfaPendingCredential"in o&&gc(n,"multi-factor-auth-required",{_serverResponse:o}),o}),PP.apply(this,arguments)}function G4(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?AP(n.config,i):`${n.config.apiScheme}://${i}`}class l9{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nd(this.auth,"network-request-failed")),c9.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function px(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=nd(n,e,r);return i.customData._tokenResponse=t,i}function DP(){return DP=(0,be.Z)(function*(n,e){return vs(n,"POST","/v1/accounts:delete",e)}),DP.apply(this,arguments)}function OP(){return OP=(0,be.Z)(function*(n,e){return vs(n,"POST","/v1/accounts:lookup",e)}),OP.apply(this,arguments)}function gx(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function FP(){return FP=(0,be.Z)(function*(n,e=!1){const t=Eo(n),r=yield t.getIdToken(e),i=TE(r);on(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:gx(RP(i.auth_time)),issuedAtTime:gx(RP(i.iat)),expirationTime:gx(RP(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}),FP.apply(this,arguments)}function RP(n){return 1e3*Number(n)}function TE(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return EE("JWT malformed, contained fewer than 3 sections"),null;try{const i=am(t);return i?JSON.parse(i):(EE("Failed to decode base64 JWT payload"),null)}catch(i){return EE("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kf(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,be.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof al&&function g9({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),NP.apply(this,arguments)}class m9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,be.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,be.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class W4{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gx(this.lastLoginAt),this.creationTime=gx(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mx(n){return LP.apply(this,arguments)}function LP(){return LP=(0,be.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield kf(n,function f9(n,e){return OP.apply(this,arguments)}(t,{idToken:r}));on(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?function y9(n){return n.map(e=>{var{providerId:t}=e,r=(0,V4._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],d=function v9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(n.providerData,a),m=!!n.isAnonymous&&!(n.email&&o.passwordHash||d?.length),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new W4(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,y)}),LP.apply(this,arguments)}function UP(){return UP=(0,be.Z)(function*(n){const e=Eo(n);yield mx(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),UP.apply(this,arguments)}function BP(){return BP=(0,be.Z)(function*(n,e){const t=yield z4(n,{},(0,be.Z)(function*(){const r=_h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=G4(n,i,"/v1/token",`key=${o}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",$4.fetch()(a,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),BP.apply(this,arguments)}class _x{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){on(e.idToken,"internal-error"),on(typeof e.idToken<"u","internal-error"),on(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function p9(n){const e=TE(n);return on(e,"internal-error"),on(typeof e.exp<"u","internal-error"),on(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,be.Z)(function*(){return on(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,be.Z)(function*(){const{accessToken:i,refreshToken:o,expiresIn:a}=yield function x9(n,e){return BP.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(a))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new _x;return r&&(on("string"==typeof r,"internal-error",{appName:e}),a.refreshToken=r),i&&(on("string"==typeof i,"internal-error",{appName:e}),a.accessToken=i),o&&(on("number"==typeof o,"internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _x,this.toJSON())}_performRefresh(){return rd("not implemented")}}function pp(n,e){on("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class g0{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=(0,V4._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new m9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new W4(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,be.Z)(function*(){const r=yield kf(t,t.stsTokenManager.getToken(t.auth,e));return on(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function h9(n){return FP.apply(this,arguments)}(this,e)}reload(){return function _9(n){return UP.apply(this,arguments)}(this)}_assign(e){this!==e&&(on(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new g0(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,be.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield mx(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,be.Z)(function*(){const t=yield e.getIdToken();return yield kf(e,function u9(n,e){return DP.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,d,h,p,m;const y=null!==(r=t.displayName)&&void 0!==r?r:void 0,T=null!==(i=t.email)&&void 0!==i?i:void 0,M=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,R=null!==(a=t.photoURL)&&void 0!==a?a:void 0,D=null!==(d=t.tenantId)&&void 0!==d?d:void 0,U=null!==(h=t._redirectEventId)&&void 0!==h?h:void 0,J=null!==(p=t.createdAt)&&void 0!==p?p:void 0,ee=null!==(m=t.lastLoginAt)&&void 0!==m?m:void 0,{uid:W,emailVerified:pe,isAnonymous:Ae,providerData:Ve,stsTokenManager:ae}=t;on(W&&ae,e,"internal-error");const Re=_x.fromJSON(this.name,ae);on("string"==typeof W,e,"internal-error"),pp(y,e.name),pp(T,e.name),on("boolean"==typeof pe,e,"internal-error"),on("boolean"==typeof Ae,e,"internal-error"),pp(M,e.name),pp(R,e.name),pp(D,e.name),pp(U,e.name),pp(J,e.name),pp(ee,e.name);const ke=new g0({uid:W,auth:e,email:T,emailVerified:pe,displayName:y,isAnonymous:Ae,photoURL:R,phoneNumber:M,tenantId:D,stsTokenManager:Re,createdAt:J,lastLoginAt:ee});return Ve&&Array.isArray(Ve)&&(ke.providerData=Ve.map(Je=>Object.assign({},Je))),U&&(ke._redirectEventId=U),ke}static _fromIdTokenResponse(e,t,r=!1){return(0,be.Z)(function*(){const i=new _x;i.updateFromServerResponse(t);const o=new g0({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield mx(o),o})()}}const K4=new Map;function Of(n){hp(n instanceof Function,"Expected a class definition");let e=K4.get(n);return e?(hp(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,K4.set(n,e),e)}const Y4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,be.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,be.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,be.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,be.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function SE(n,e,t){return`firebase:${n}:${e}:${t}`}class X_{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=SE(this.userKey,i.apiKey,o),this.fullPersistenceKey=SE("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,be.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?g0._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,be.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,be.Z)(function*(){if(!t.length)return new X_(Of(Y4),e,r);const i=(yield Promise.all(t.map(function(){var p=(0,be.Z)(function*(m){if(yield m._isAvailable())return m});return function(m){return p.apply(this,arguments)}}()))).filter(p=>p);let o=i[0]||Of(Y4);const a=SE(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const m=yield p._get(a);if(m){const y=g0._fromJSON(e,m);p!==o&&(d=y),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return o._shouldAllowMigration&&h.length?(o=h[0],d&&(yield o._set(a,d.toJSON())),yield Promise.all(t.map(function(){var p=(0,be.Z)(function*(m){if(m!==o)try{yield m._remove(a)}catch{}});return function(m){return p.apply(this,arguments)}}())),new X_(o,e,r)):new X_(o,e,r)})()}}function J4(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nR(e))return"Blackberry";if(rR(e))return"Webos";if(VP(e))return"Safari";if((e.includes("chrome/")||X4(e))&&!e.includes("edge/"))return"Chrome";if(tR(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Q4(n=Ti()){return/firefox\//i.test(n)}function VP(n=Ti()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X4(n=Ti()){return/crios\//i.test(n)}function eR(n=Ti()){return/iemobile/i.test(n)}function tR(n=Ti()){return/android/i.test(n)}function nR(n=Ti()){return/blackberry/i.test(n)}function rR(n=Ti()){return/webos/i.test(n)}function AE(n=Ti()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function iR(n=Ti()){return AE(n)||tR(n)||rR(n)||nR(n)||/windows phone/i.test(n)||eR(n)}function sR(n,e=[]){let t;switch(n){case"Browser":t=J4(Ti());break;case"Worker":t=`${J4(Ti())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ef}/${r}`}function oR(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,be.Z)(function*(n,e){return vs(n,"GET","/v2/recaptchaConfig",rs(n,e))}),jP.apply(this,arguments)}function cR(n){return void 0!==n&&void 0!==n.enterprise}class lR{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(t=>"EMAIL_PASSWORD_PROVIDER"===t.provider&&"OFF"!==t.enforcementState)}}function qP(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=nd("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function T9(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}function uR(n){return`__${n}${Math.floor(1e6*Math.random())}`}const M9="NO_RECAPTCHA";class dR{constructor(e){this.type="recaptcha-enterprise",this.auth=Mo(e)}verify(e="verify",t=!1){var r=this;return(0,be.Z)(function*(){function o(){return o=(0,be.Z)(function*(d){if(!t){if(null==d.tenantId&&null!=d._agentRecaptchaConfig)return d._agentRecaptchaConfig.siteKey;if(null!=d.tenantId&&void 0!==d._tenantRecaptchaConfigs[d.tenantId])return d._tenantRecaptchaConfigs[d.tenantId].siteKey}return new Promise(function(){var h=(0,be.Z)(function*(p,m){oR(d,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(void 0!==y.recaptchaKey){const T=new lR(y);return null==d.tenantId?d._agentRecaptchaConfig=T:d._tenantRecaptchaConfigs[d.tenantId]=T,p(T.siteKey)}m(new Error("recaptcha Enterprise site key undefined"))}).catch(y=>{m(y)})});return function(p,m){return h.apply(this,arguments)}}())}),o.apply(this,arguments)}function a(d,h,p){const m=window.grecaptcha;cR(m)?m.enterprise.ready(()=>{m.enterprise.execute(d,{action:e}).then(y=>{h(y)}).catch(()=>{h(M9)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((d,h)=>{(function i(d){return o.apply(this,arguments)})(r.auth).then(p=>{if(!t&&cR(window.grecaptcha))a(p,d,h);else{if(typeof window>"u")return void h(new Error("RecaptchaVerifier is only supported in browser"));qP("https://www.google.com/recaptcha/enterprise.js?render="+p).then(()=>{a(p,d,h)}).catch(m=>{h(m)})}}).catch(p=>{h(p)})})})()}}class I9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((a,d)=>{try{a(e(o))}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,be.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class P9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fR(this),this.idTokenSubscription=new fR(this),this.beforeStateQueue=new I9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Of(t)),this._initializationPromise=this.queue((0,be.Z)(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield X_.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,be.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,be.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,h=o?._redirectEventId,p=yield t.tryRedirectSignIn(e);(!d||d===h)&&p?.user&&(o=p.user,a=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{yield t.beforeStateQueue.runMiddleware(o)}catch(d){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return on(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return(0,be.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,be.Z)(function*(){try{yield mx(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function o9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,be.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,be.Z)(function*(){const r=e?Eo(e):null;return r&&on(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,be.Z)(function*(){if(!r._deleted)return e&&on(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,be.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,be.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,be.Z)(function*(){yield t.assertedPersistence.setPersistence(Of(e))}))}initializeRecaptchaConfig(){var e=this;return(0,be.Z)(function*(){const t=yield oR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lR(t);null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.emailPasswordEnabled&&new dR(e).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ph("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,be.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,be.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Of(e)||t._popupRedirectResolver;on(r,t,"argument-error"),t.redirectPersistenceManager=yield X_.create(t,[Of(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,be.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,be.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,be.Z)(function*(){if(e===t.currentUser)return t.queue((0,be.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return on(a,this,"internal-error"),a.then(()=>o(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,be.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,be.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function i9(n,...e){CE.logLevel<=vr.WARN&&CE.warn(`Auth (${ef}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Mo(n){return Eo(n)}class fR{constructor(e){this.auth=e,this.observer=null,this.addObserver=function VS(n,e){const t=new ZS(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pR(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class N9{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rd("not implemented")}_getIdTokenResponse(e){return rd("not implemented")}_linkToIdToken(e,t){return rd("not implemented")}_getReauthenticationResolver(e){return rd("not implemented")}}function Ff(n,e){return oD.apply(this,arguments)}function oD(){return oD=(0,be.Z)(function*(n,e){return function Df(n,e,t,r){return PP.apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",rs(n,e))}),oD.apply(this,arguments)}class mp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Y9 extends mp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,be.Z)(function*(){const o=yield g0._fromIdTokenResponse(e,r,i),a=vR(r);return new El({user:o,providerId:a,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,be.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=vR(r);return new El({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function vR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class kE extends al{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,kE.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new kE(e,t,r,i)}}function yR(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?kE._fromErrorAndOperation(n,o,e,r):o})}function mD(){return mD=(0,be.Z)(function*(n,e,t=!1){const r=yield kf(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return El._forOperation(n,"link",r)}),mD.apply(this,arguments)}function vD(){return vD=(0,be.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const o=yield kf(n,yR(r,i,e,n),t);on(o.idToken,r,"internal-error");const a=TE(o.idToken);on(a,r,"internal-error");const{sub:d}=a;return on(n.uid===d,r,"user-mismatch"),El._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&gc(r,"user-mismatch"),o}}),vD.apply(this,arguments)}function yD(){return yD=(0,be.Z)(function*(n,e,t=!1){const r="signIn",i=yield yR(n,r,e),o=yield El._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o}),yD.apply(this,arguments)}const FE="__sak";class ER{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(FE,"1"),this.storage.removeItem(FE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const y7=(()=>{class n extends ER{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function m7(){const n=Ti();return VP(n)||AE(n)}()&&function C9(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=iR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((d,h,p)=>{this.notifyListeners(d,p)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const d=this.storage.getItem(i);if(t.newValue!==d)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const o=()=>{const d=this.storage.getItem(i);!r&&this.localCache[i]===d||this.notifyListeners(i,d)},a=this.storage.getItem(i);!function b9(){return function pb(){const n=Ti();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||a===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return(0,be.Z)(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,be.Z)(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return(0,be.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),TR=(()=>{class n extends ER{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let w7=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,be.Z)(function*(){const i=t,{eventId:o,eventType:a,data:d}=i.data,h=r.handlersMap[a];if(!h?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const p=Array.from(h).map(function(){var y=(0,be.Z)(function*(T){return T(i.origin,d)});return function(T){return y.apply(this,arguments)}}()),m=yield function x7(n){return Promise.all(n.map(function(){var e=(0,be.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(p);i.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:m})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function KD(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class b7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,be.Z)(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,d;return new Promise((h,p)=>{const m=KD("",20);o.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(T){const M=T;if(M.data.eventId===m)switch(M.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(M.data.response);break;default:clearTimeout(y),clearTimeout(a),p(new Error("invalid_response"))}}},i.handlers.add(d),o.port1.addEventListener("message",d.onMessage),i.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{d&&i.removeMessageHandler(d)})})()}}function Ks(){return window}function YD(){return typeof Ks().WorkerGlobalScope<"u"&&"function"==typeof Ks().importScripts}function JD(){return(JD=(0,be.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const SR="firebaseLocalStorageDb",A7=1,RE="firebaseLocalStorage",AR="fbase_key";class wx{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function NE(n,e){return n.transaction([RE],e?"readwrite":"readonly").objectStore(RE)}function QD(){const n=indexedDB.open(SR,A7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(RE,{keyPath:AR})}catch(i){t(i)}}),n.addEventListener("success",(0,be.Z)(function*(){const r=n.result;r.objectStoreNames.contains(RE)?e(r):(r.close(),yield function M7(){const n=indexedDB.deleteDatabase(SR);return new wx(n).toPromise()}(),e(yield QD()))}))})}function MR(n,e,t){return XD.apply(this,arguments)}function XD(){return XD=(0,be.Z)(function*(n,e,t){const r=NE(n,!0).put({[AR]:e,value:t});return new wx(r).toPromise()}),XD.apply(this,arguments)}function ek(){return ek=(0,be.Z)(function*(n,e){const t=NE(n,!1).get(e),r=yield new wx(t).toPromise();return void 0===r?null:r.value}),ek.apply(this,arguments)}function IR(n,e){const t=NE(n,!0).delete(e);return new wx(t).toPromise()}const k7=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,be.Z)(function*(){return t.db||(t.db=yield QD()),t.db})()}_withRetries(t){var r=this;return(0,be.Z)(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,be.Z)(function*(){return YD()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,be.Z)(function*(){t.receiver=w7._getInstance(function S7(){return YD()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,be.Z)(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,be.Z)(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,be.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function E7(){return JD.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new b7(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,be.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function T7(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,be.Z)(function*(){try{if(!indexedDB)return!1;const t=yield QD();return yield MR(t,FE,"1"),yield IR(t,FE),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,be.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,be.Z)(function*(){return i._withPendingWrite((0,be.Z)(function*(){return yield i._withRetries(o=>MR(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,be.Z)(function*(){const i=yield r._withRetries(o=>function I7(n,e){return ek.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,be.Z)(function*(){return r._withPendingWrite((0,be.Z)(function*(){return yield r._withRetries(i=>IR(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,be.Z)(function*(){const r=yield t._withRetries(a=>{const d=NE(a,!1).getAll();return new wx(d).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:a,value:d}of r)o.add(a),JSON.stringify(t.localCache[a])!==JSON.stringify(d)&&(t.notifyListeners(a,d),i.push(a));for(const a of Object.keys(t.localCache))t.localCache[a]&&!o.has(a)&&(t.notifyListeners(a,null),i.push(a));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,be.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();uR("rcb"),new hx(3e4,6e4);class lk extends N9{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ff(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ff(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ff(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function W7(n){return function bR(n,e){return yD.apply(this,arguments)}(n.auth,new lk(n),n.bypassAuthState)}function K7(n){const{auth:e,user:t}=n;return on(t,e,"internal-error"),function wR(n,e){return vD.apply(this,arguments)}(t,new lk(n),n.bypassAuthState)}function Y7(n){return uk.apply(this,arguments)}function uk(){return uk=(0,be.Z)(function*(n){const{auth:e,user:t}=n;return on(t,e,"internal-error"),function gD(n,e){return mD.apply(this,arguments)}(t,new lk(n),n.bypassAuthState)}),uk.apply(this,arguments)}class J7{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,be.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,be.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:a,error:d,type:h}=e;if(d)return void t.reject(d);const p={auth:t.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(h)(p))}catch(m){t.reject(m)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W7;case"linkViaPopup":case"linkViaRedirect":return Y7;case"reauthViaPopup":case"reauthViaRedirect":return K7;default:gc(this.auth,"internal-error")}}resolve(e){hp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new hx(2e3,1e4);const Q7="pendingRedirect",bx=new Map;class X7 extends J7{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,be.Z)(function*(){let r=bx.get(t.auth._key());if(!r){try{const o=(yield function eB(n,e){return gk.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}bx.set(t.auth._key(),r)}return t.bypassAuthState||bx.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,be.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,be.Z)(function*(){})()}cleanUp(){}}function gk(){return gk=(0,be.Z)(function*(n,e){const t=function kR(n){return SE(Q7,n.config.apiKey,n.name)}(e),r=function DR(n){return Of(n._redirectPersistence)}(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),gk.apply(this,arguments)}function tB(n,e){bx.set(n._key(),e)}function OR(n,e){return bk.apply(this,arguments)}function bk(){return bk=(0,be.Z)(function*(n,e,t=!1){const r=Mo(n),i=function _0(n,e){return e?Of(e):(on(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}(r,e),a=yield new X7(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a}),bk.apply(this,arguments)}class oB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function aB(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NR(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!NR(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(nd(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(RR(e))}saveEventToCache(e){this.cachedEventUids.add(RR(e)),this.lastProcessedEventTime=Date.now()}}function RR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NR({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function Ek(){return Ek=(0,be.Z)(function*(n,e={}){return vs(n,"GET","/v1/projects",e)}),Ek.apply(this,arguments)}const lB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uB=/^https?/;function Tk(){return Tk=(0,be.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield function cB(n){return Ek.apply(this,arguments)}(n);for(const t of e)try{if(fB(t))return}catch{}gc(n,"unauthorized-domain")}),Tk.apply(this,arguments)}function fB(n){const e=fx(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return""===a.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&a.hostname===r}if(!uB.test(t))return!1;if(lB.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hB=new hx(3e4,6e4);function LR(){const n=Ks().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let UE=null;const mB=new hx(5e3,15e3),_B="__/auth/iframe",vB="emulator/auth/iframe",yB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wB(n){const e=n.config;on(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?AP(e,vB):`https://${n.config.authDomain}/${_B}`,r={apiKey:e.apiKey,appName:n.name,v:ef},i=xB.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${_h(r).slice(1)}`}function Sk(){return Sk=(0,be.Z)(function*(n){const e=yield function gB(n){return UE=UE||function pB(n){return new Promise((e,t)=>{var r,i,o;function a(){LR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LR(),t(nd(n,"network-request-failed"))},timeout:hB.get()})}if(null!==(i=null===(r=Ks().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Ks().gapi)||void 0===o||!o.load){const d=uR("iframefcb");return Ks()[d]=()=>{gapi.load?a():t(nd(n,"network-request-failed"))},qP(`https://apis.google.com/js/api.js?onload=${d}`).catch(h=>t(h))}a()}}).catch(e=>{throw UE=null,e})}(n),UE}(n),t=Ks().gapi;return on(t,n,"internal-error"),e.open({where:document.body,url:wB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yB,dontclear:!0},r=>new Promise(function(){var i=(0,be.Z)(function*(o,a){yield r.restyle({setHideOnLeave:!1});const d=nd(n,"network-request-failed"),h=Ks().setTimeout(()=>{a(d)},mB.get());function p(){Ks().clearTimeout(h),o(r)}r.ping(p).then(p,()=>{a(d)})});return function(o,a){return i.apply(this,arguments)}}()))}),Sk.apply(this,arguments)}const CB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EB=500,TB=600,SB="_blank",AB="http://localhost";class UR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const PB="__/auth/handler",DB="emulator/auth/handler",kB=encodeURIComponent("fac");function BR(n,e,t,r,i,o){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,be.Z)(function*(n,e,t,r,i,o){on(n.config.authDomain,n,"auth-domain-config-required"),on(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ef,eventId:i};if(e instanceof mp){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",function _b(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries(o||{}))a[m]=y}if(e instanceof Y9){const m=e.getScopes().filter(y=>""!==y);m.length>0&&(a.scopes=m.join(","))}n.tenantId&&(a.tid=n.tenantId);const d=a;for(const m of Object.keys(d))void 0===d[m]&&delete d[m];const h=yield n._getAppCheckToken(),p=h?`#${kB}=${encodeURIComponent(h)}`:"";return`${function OB({config:n}){return n.emulator?AP(n,DB):`https://${n.authDomain}/${PB}`}(n)}?${_h(d).slice(1)}${p}`}),Ak.apply(this,arguments)}const Mk="webStorageSupport",RB=class FB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TR,this._completeRedirectFn=OR,this._overrideRedirectResult=tB}_openPopup(e,t,r,i){var o=this;return(0,be.Z)(function*(){var a;hp(null===(a=o.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");const d=yield BR(e,t,r,fx(),i);return function MB(n,e,t,r=EB,i=TB){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h=Object.assign(Object.assign({},CB),{width:r.toString(),height:i.toString(),top:o,left:a}),p=Ti().toLowerCase();t&&(d=X4(p)?SB:t),Q4(p)&&(e=e||AB,h.scrollbars="yes");const m=Object.entries(h).reduce((T,[M,R])=>`${T}${M}=${R},`,"");if(function w9(n=Ti()){var e;return AE(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(p)&&"_self"!==d)return function IB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",d),new UR(null);const y=window.open(e||"",d,m);on(y,n,"popup-blocked");try{y.focus()}catch{}return new UR(y)}(e,d,KD())})()}_openRedirect(e,t,r,i){var o=this;return(0,be.Z)(function*(){return yield o._originValidation(e),function C7(n){Ks().location.href=n}(yield BR(e,t,r,fx(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(hp(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,be.Z)(function*(){const r=yield function bB(n){return Sk.apply(this,arguments)}(e),i=new oB(e);return r.register("authEvent",o=>(on(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mk,{type:Mk},i=>{var o;const a=null===(o=i?.[0])||void 0===o?void 0:o[Mk];void 0!==a&&t(!!a),gc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function dB(n){return Tk.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return iR()||VP()||AE()}};var jR="@firebase/auth";class NB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,be.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const VB=cm("authIdTokenMaxAge")||300;let HR=null;const ZB=n=>function(){var e=(0,be.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>VB)return;const o=r?.token;HR!==o&&(HR=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function jB(n=Lb()){const e=dg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function D9(n,e){const t=dg(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(mh(t.getOptions(),e??{}))return i;gc(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:RB,persistence:[k7,y7,TR]}),r=cm("authTokenSyncURL");if(r){const o=ZB(r);(function d7(n,e,t){Eo(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function u7(n,e,t,r){Eo(n).onIdTokenChanged(e,t,r)}(t,a=>o(a))}const i=K1("auth");return i&&function O9(n,e,t){const r=Mo(n);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=hR(e),{host:a,port:d}=function F9(n){const e=hR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:pR(r.substr(o.length+1))}}{const[o,a]=r.split(":");return{host:o,port:pR(a)}}}(e);r.config.emulator={url:`${o}//${a}${null===d?"":`:${d}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function R9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function UB(n){Pu(new Kl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:d}=r.options;on(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sR(n)},p=new P9(r,i,o,h);return function k9(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Of);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pu(new Kl("auth-internal",e=>{const t=Mo(e.getProvider("auth").getImmediate());return new NB(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cl(jR,"0.23.2",function LB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),cl(jR,"0.23.2","esm2017")}("Browser");const $R="firebasestorage.googleapis.com",zR="storageBucket";class is extends al{constructor(e,t,r=0){super(Pk(e),`Firebase Storage: ${t} (${Pk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,is.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var wi=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(wi||(wi={})),wi))();function Pk(n){return"storage/"+n}function kk(n){return new is(wi.INVALID_ARGUMENT,n)}function YR(){return new is(wi.APP_DELETED,"The Firebase app was deleted.")}class Va{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Va.makeFromUrl(e,t)}catch{return new Va(e,"")}if(""===r.path)return r;throw function QB(n){return new is(wi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function p(pe){pe.path_=decodeURIComponent(pe.path)}const y=t.replace(/[.]/g,"\\."),W=[{regex:d,indices:{bucket:1,path:3},postModify:function o(pe){"/"===pe.path.charAt(pe.path.length-1)&&(pe.path_=pe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${y}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:p},{regex:new RegExp(`^https?://${t===$R?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:p}];for(let pe=0;pe<W.length;pe++){const Ae=W[pe],Ve=Ae.regex.exec(e);if(Ve){let Re=Ve[Ae.indices.path];Re||(Re=""),r=new Va(Ve[Ae.indices.bucket],Re),Ae.postModify(r);break}}if(null==r)throw function JB(n){return new is(wi.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class iV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Fk(n,e,t,r){if(r<e)throw kk(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw kk(`Invalid value for '${n}'. Expected ${t} or less.`)}var _p=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(_p||(_p={})),_p))();class uV{constructor(e,t,r,i,o,a,d,h,p,m,y,T=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=d,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=m,this.connectionFactory_=y,this.retry=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,R)=>{this.resolve_=M,this.reject_=R,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,a=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());!function aV(n){return void 0!==n}(h)?o():o(h)}catch(h){a(h)}else if(null!==d){const h=function Dk(){return new is(wi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}();h.serverResponse=d.getErrorText(),a(this.errorCallback_?this.errorCallback_(d,h):h)}else a(i.canceled?this.appDelete_?YR():function WR(){return new is(wi.CANCELED,"User canceled the upload/download.")}():function GR(){return new is(wi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new ZE(!1,null,!0)):this.backoffId_=function sV(n,e,t){let r=1,i=null,o=null,a=!1,d=0;function h(){return 2===d}let p=!1;function m(...U){p||(p=!0,e.apply(null,U))}function y(U){i=setTimeout(()=>{i=null,n(M,h())},U)}function T(){o&&clearTimeout(o)}function M(U,...J){if(p)return void T();if(U)return T(),void m.call(null,U,...J);if(h()||a)return T(),void m.call(null,U,...J);let W;r<64&&(r*=2),1===d?(d=2,W=0):W=1e3*(r+Math.random()),y(W)}let R=!1;function D(U){R||(R=!0,T(),!p&&(null!==i?(U||(d=2),clearTimeout(i),y(0)):U||(d=1)))}return y(0),o=setTimeout(()=>{a=!0,D(!0)},t),D}((r,i)=>{if(i)return void r(!1,new ZE(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const a=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const d=o.getErrorCode()===_p.NO_ERROR,h=o.getStatus();if(!d||function XR(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===_p.ABORT;return void r(!1,new ZE(!1,null,m))}const p=-1!==this.successCodes_.indexOf(h);r(!0,new ZE(p,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function oV(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ZE{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}class v0{constructor(e,t){this._service=e,this._location=t instanceof Va?t:Va.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new v0(e,t)}get root(){const e=new Va(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function iN(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function EV(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Va(this._location.bucket,e);return new v0(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function rV(n){return new is(wi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function yN(n,e){const t=e?.[zR];return null==t?null:Va.makeFromBucketSpec(t,n)}class Zk{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=$R,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Va.makeFromBucketSpec(i,this._host):yN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Va.makeFromBucketSpec(this._url,e):yN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new v0(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new iV(YR());{const a=function gV(n,e,t,r,i,o,a=!0){const d=function QR(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}(n.urlParams),h=n.url+d,p=Object.assign({},n.headers);return function hV(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function dV(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function fV(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,o),function pV(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new uV(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const xN="@firebase/storage",bN="storage";function dZ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Zk(t,r,i,e,ef)}!function fZ(){Pu(new Kl(bN,dZ,"PUBLIC").setMultipleInstances(!0)),cl(xN,"0.11.2",""),cl(xN,"0.11.2","esm2017")}();let hZ=(()=>{const e=class{constructor(){this.isOnline=new eg.X(navigator.onLine),this.connectionError=new eg.X(null);const r={apiKey:"AIzaSyChUzXY3pKybBbSwCWJ_jOLumcD9XmrKN4",authDomain:"dbmate-3ab07.firebaseapp.com",projectId:"dbmate-3ab07",storageBucket:"dbmate-3ab07.appspot.com",messagingSenderId:"90382236660",appId:"1:90382236660:web:21de7991aa52cd069d97a1"};try{const i=Nb(r);this.firestore=function CU(n,e){const r="string"==typeof n?n:e||"(default)",i=dg("object"==typeof n?n:Lb(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Au("firestore");o&&function xU(n,e,t,r={}){var i;const o=(n=Ar(n,ox))._getSettings(),a=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let d,h;if("string"==typeof r.mockUserToken)d=r.mockUserToken,h=Ds.MOCK_USER;else{d=hb(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new At(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ds(p)}n._authCredentials=new WA(new NC(d,h))}}(i,...o)}return i}(i),this.auth=jB(i),this.storage=function lZ(n=Lb(),e){const r=dg(n=Eo(n),bN).getImmediate({identifier:e}),i=Au("storage");return i&&function uZ(n,e,t,r={}){!function cZ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:hb(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}(i),this.enableOfflineSupport(),this.monitorConnection()}catch(i){console.error("Error initializing Firebase:",i),this.connectionError.next("Error al inicializar Firebase. Por favor, recarga la p\xe1gina.")}}enableOfflineSupport(){var r=this;return(0,be.Z)(function*(){try{yield function EU(n,e){!function y4(n){if(n._initialized||n._terminated)throw new At(et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(n=Ar(n,Pi));const t=Ws(n);if(t._uninitializedComponentsProvider)throw new At(et.FAILED_PRECONDITION,"SDK cache is already specified.");pl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new $_;return function v4(n,e,t){const r=new Mi;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield lE(n,t),yield sP(n,e),r.resolve()}catch(i){const o=i;if(!i4(o))throw o;pl("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}(t,i,new t4(i,r.cacheSizeBytes,e?.forceOwnership))}(r.firestore)}catch(i){"failed-precondition"===i.code?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):"unimplemented"===i.code&&console.warn("The current browser does not support all of the features required to enable persistence")}})()}monitorConnection(){window.addEventListener("online",()=>this.isOnline.next(!0)),window.addEventListener("offline",()=>this.isOnline.next(!1))}getFirestore(){return this.firestore}getAuth(){return this.auth}getStorage(){return this.storage}getOnlineStatus(){return this.isOnline.asObservable()}getConnectionError(){return this.connectionError.asObservable()}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),pZ=(()=>{const e=class{constructor(r){this.firebaseService=r,this.PRODUCTS_COLLECTION="products"}getProducts(){const r=this.firebaseService.getFirestore();return(0,me.D)(U4(hP(r,this.PRODUCTS_COLLECTION))).pipe((0,re.U)(i=>i.docs.map(o=>({id:o.id,...o.data()}))),(0,e9.X)(3),(0,ci.K)(i=>(console.error("Error fetching products:",i),(0,ri._)(()=>new Error("Error al cargar los productos. Por favor, intente nuevamente.")))))}addProduct(r){const i=this.firebaseService.getFirestore(),o={...r,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};return(0,me.D)(function jU(n,e){const t=Ar(n.firestore,Pi),r=hE(n),i=function CP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return dx(t,[_P(W_(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hi.exists(!1))]).then(()=>r)}(hP(i,this.PRODUCTS_COLLECTION),o)).pipe((0,re.U)(a=>a.id),(0,ci.K)(a=>(console.error("Error adding product:",a),(0,ri._)(()=>new Error("Error al agregar el producto. Por favor, intente nuevamente.")))))}updateProduct(r,i){const o=this.firebaseService.getFirestore(),a={...i,updatedAt:(new Date).toISOString()};return(0,me.D)(function VU(n,e,t,...r){n=Ar(n,Rs);const i=Ar(n.firestore,Pi),o=W_(i);let a;return a="string"==typeof(e=Eo(e))||e instanceof G_?function E4(n,e,t,r,i,o){const a=n.ya(1,e,t),d=[lx(e,r,t)],h=[i];if(o.length%2!=0)throw new At(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)d.push(lx(e,o[T])),h.push(o[T+1]);const p=[],m=Fs.empty();for(let T=d.length-1;T>=0;--T)if(!M4(p,d[T])){const M=d[T];let R=h[T];R=Eo(R);const D=a.da(M);if(R instanceof cx)p.push(M);else{const U=h0(R,D);null!=U&&(p.push(M),m.set(M,U))}}const y=new Zo(p);return new x4(m,y,a.fieldTransforms)}(o,"updateDoc",n._key,e,t,r):function C4(n,e,t,r){const i=n.ya(1,e,t);yP("Data must be an object, but it was:",i,r);const o=[],a=Fs.empty();nu(r,(h,p)=>{const m=gE(e,h,t);p=Eo(p);const y=i.da(m);if(p instanceof cx)o.push(m);else{const T=h0(p,y);null!=T&&(o.push(m),a.set(m,T))}});const d=new Zo(o);return new x4(a,d,i.fieldTransforms)}(o,"updateDoc",n._key,e),dx(i,[a.toMutation(n._key,hi.exists(!0))])}(hE(o,this.PRODUCTS_COLLECTION,r),a)).pipe((0,ci.K)(d=>(console.error("Error updating product:",d),(0,ri._)(()=>new Error("Error al actualizar el producto. Por favor, intente nuevamente.")))))}deleteProduct(r){const i=this.firebaseService.getFirestore();return(0,me.D)(function ZU(n){return dx(Ar(n.firestore,Pi),[new tp(n._key,hi.none())])}(hE(i,this.PRODUCTS_COLLECTION,r))).pipe((0,ci.K)(o=>(console.error("Error deleting product:",o),(0,ri._)(()=>new Error("Error al eliminar el producto. Por favor, intente nuevamente.")))))}getProductById(r){const i=this.firebaseService.getFirestore();return(0,me.D)(function BU(n){n=Ar(n,Rs);const e=Ar(n.firestore,Pi);return function c4(n,e,t={}){const r=new Mi;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,o,a,d,h){const p=new cE({next:y=>{o.enqueueAndForget(()=>II(i,m));const T=y.docs.has(a);!T&&y.fromCache?h.reject(new At(et.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&y.fromCache&&d&&"server"===d.source?h.reject(new At(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new kI(Gu(a.path),p,{includeMetadataChanges:!0,Ku:!0});return AI(i,m)}(yield z_(n),n.asyncQueue,e,t,r)})),r.promise}(Ws(e),n._key).then(t=>function EP(n,e,t){const r=t.docs.get(e._key),i=new fp(n);return new Y_(n,i,e._key,r,new p0(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}(hE(i,this.PRODUCTS_COLLECTION,r))).pipe((0,re.U)(o=>o.exists()?{id:o.id,...o.data()}:null),(0,ci.K)(o=>(console.error("Error fetching product:",o),(0,$l.of)(null))))}updateStock(r,i){return this.getProductById(r).pipe((0,Gd.w)(o=>{if(!o)return(0,ri._)(()=>new Error("Producto no encontrado"));const a=o.stock-i;return a<0?(0,ri._)(()=>new Error("Stock insuficiente")):this.updateProduct(r,{stock:a})}),(0,ci.K)(o=>(console.error("Error updating stock:",o),(0,ri._)(()=>o))))}searchProducts(r){const o=function FU(n,e,...t){let r=[];e instanceof wP&&r.push(e),r=r.concat(t),function(i){const o=i.filter(d=>d instanceof K_).length,a=i.filter(d=>d instanceof ux).length;if(o>1||o>0&&a>0)throw new At(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}(hP(this.firebaseService.getFirestore(),this.PRODUCTS_COLLECTION),D4("name",">=",r),D4("name","<=",r+"\uf8ff"),function RU(n){return function p4(n,e){if(e<=0)throw new At(et.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),vE._create("limit",n,"F")}(10));return(0,me.D)(U4(o)).pipe((0,re.U)(a=>a.docs.map(d=>({id:d.id,...d.data()}))),(0,ci.K)(a=>(console.error("Error searching products:",a),(0,$l.of)([]))))}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(hZ))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();const gZ=["fileInput"];function mZ(n,e){if(1&n&&(s.TgZ(0,"option",23),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t),s.xp6(1),s.Oqu(t)}}function _Z(n,e){if(1&n&&(s.TgZ(0,"p",24),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.Oqu(t.errorMessage)}}let vZ=(()=>{const e=class{constructor(r,i,o){this.firebaseProductService=r,this.imageService=i,this.router=o,this.product={name:"",description:"",price:0,image:"",category:"",stock:0},this.categories=["Mates","Bombillas","Yerba","Termos","Accesorios"],this.errorMessage="",this.imagePreview=null,this.selectedFile=null,this.isSubmitting=!1}onFileSelected(r){const i=r.target;if(i.files&&i.files[0]){this.selectedFile=i.files[0];const o=new FileReader;o.onload=a=>{this.imagePreview=a.target?.result},o.readAsDataURL(this.selectedFile)}}onSubmit(){var r=this;return(0,be.Z)(function*(){if(r.selectedFile){r.isSubmitting=!0,r.errorMessage="";try{const i=yield Gl(r.imageService.uploadImage(r.selectedFile)),o={name:r.product.name,description:r.product.description,price:r.product.price,image:i,category:r.product.category,stock:r.product.stock};yield Gl(r.firebaseProductService.addProduct(o)),r.router.navigate(["/productos"])}catch(i){console.error("Error al agregar producto:",i),r.errorMessage=i.message||"Error al agregar el producto. Por favor, intente nuevamente."}finally{r.isSubmitting=!1}}else r.errorMessage="Por favor, seleccione una imagen para el producto"})()}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(pZ),s.Y36(nm),s.Y36(k.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-add-product"]],viewQuery:function(i,o){if(1&i&&s.Gf(gZ,5),2&i){let a;s.iGM(a=s.CRH())&&(o.fileInput=a.first)}},decls:42,vars:9,consts:[[1,"add-product-container"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","description"],["id","description","name","description","required","",3,"ngModel","ngModelChange"],["for","price"],["type","number","id","price","name","price","required","",3,"ngModel","ngModelChange"],["for","image"],[1,"image-upload-container"],["type","file","id","image","accept","image/*",1,"file-input",3,"change"],["fileInput",""],[1,"upload-placeholder"],[1,"fas","fa-cloud-upload-alt"],["for","category"],["id","category","name","category","required","",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","stock"],["type","number","id","stock","name","stock","required","","min","0",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"],["class","error-message",4,"ngIf"],[3,"value"],[1,"error-message"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Agregar Nuevo Producto"),s.qZA(),s.TgZ(3,"form",1),s.NdJ("ngSubmit",function(){return o.onSubmit()}),s.TgZ(4,"div",2)(5,"label",3),s._uU(6,"Nombre del producto:"),s.qZA(),s.TgZ(7,"input",4),s.NdJ("ngModelChange",function(d){return o.product.name=d}),s.qZA()(),s.TgZ(8,"div",2)(9,"label",5),s._uU(10,"Descripci\xf3n:"),s.qZA(),s.TgZ(11,"textarea",6),s.NdJ("ngModelChange",function(d){return o.product.description=d}),s.qZA()(),s.TgZ(12,"div",2)(13,"label",7),s._uU(14,"Precio:"),s.qZA(),s.TgZ(15,"input",8),s.NdJ("ngModelChange",function(d){return o.product.price=d}),s.qZA()(),s.TgZ(16,"div",2)(17,"label",9),s._uU(18,"Imagen del producto:"),s.qZA(),s.TgZ(19,"div",10)(20,"input",11,12),s.NdJ("change",function(d){return o.onFileSelected(d)}),s.qZA(),s.TgZ(22,"div",13),s._UZ(23,"i",14),s.TgZ(24,"p"),s._uU(25,"Arrastra una imagen aqu\xed o haz clic para seleccionar"),s.qZA(),s.TgZ(26,"small"),s._uU(27,"Formatos soportados: JPG, PNG, WebP (m\xe1x. 5MB)"),s.qZA()()()(),s.TgZ(28,"div",2)(29,"label",15),s._uU(30,"Categor\xeda:"),s.qZA(),s.TgZ(31,"select",16),s.NdJ("ngModelChange",function(d){return o.product.category=d}),s.TgZ(32,"option",17),s._uU(33,"Seleccione una categor\xeda"),s.qZA(),s.YNc(34,mZ,2,2,"option",18),s.qZA()(),s.TgZ(35,"div",2)(36,"label",19),s._uU(37,"Stock:"),s.qZA(),s.TgZ(38,"input",20),s.NdJ("ngModelChange",function(d){return o.product.stock=d}),s.qZA()(),s.TgZ(39,"button",21),s._uU(40),s.qZA()(),s.YNc(41,_Z,2,1,"p",22),s.qZA()),2&i&&(s.xp6(7),s.Q6J("ngModel",o.product.name),s.xp6(4),s.Q6J("ngModel",o.product.description),s.xp6(4),s.Q6J("ngModel",o.product.price),s.xp6(16),s.Q6J("ngModel",o.product.category),s.xp6(3),s.Q6J("ngForOf",o.categories),s.xp6(4),s.Q6J("ngModel",o.product.stock),s.xp6(1),s.Q6J("disabled",o.isSubmitting),s.xp6(1),s.hij(" ",o.isSubmitting?"Agregando producto...":"Agregar Producto"," "),s.xp6(1),s.Q6J("ngIf",o.errorMessage))},dependencies:[te.sg,te.O5,xn,Bi,na,nt,go,cs,or,to,ra,mo,As,Ji],styles:[".add-product-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#2c3e50}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:1rem}textarea[_ngcontent-%COMP%]{height:100px;resize:vertical}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#3c9c36;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:disabled{background-color:#95a5a6;cursor:not-allowed}button[_ngcontent-%COMP%]:not(:disabled):hover{background-color:#2ecc71}.error-message[_ngcontent-%COMP%]{color:#e74c3c;text-align:center;margin-top:1rem}.image-upload-container[_ngcontent-%COMP%]{border:2px dashed #ddd;padding:1.5rem;border-radius:8px;text-align:center;margin-top:.5rem;background:repeating-conic-gradient(#f1f1f1 0% 25%,transparent 0% 50%) 50% / 20px 20px;transition:all .3s ease;max-width:300px;margin-left:auto;margin-right:auto;position:relative;cursor:pointer}.image-upload-container[_ngcontent-%COMP%]:hover{border-color:#3c9c36;background:repeating-conic-gradient(#e8f5e9 0% 25%,transparent 0% 50%) 50% / 20px 20px}.file-input[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer}.upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;padding:1rem;color:#7f8c8d;pointer-events:none}.upload-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#3c9c36}.upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}.upload-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#95a5a6;font-size:.8rem}.image-preview[_ngcontent-%COMP%]{margin-top:1rem;position:relative;max-width:200px;margin-left:auto;margin-right:auto;background:repeating-conic-gradient(#f8f9fa 0% 25%,transparent 0% 50%) 50% / 10px 10px;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block;mix-blend-mode:multiply}@media (max-width: 768px){.add-product-container[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem}.image-upload-container[_ngcontent-%COMP%]{max-width:100%}}"]}),n})();function yZ(n,e){if(1&n&&(s.TgZ(0,"div",13),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.hij(" ",t.errorMessage," ")}}let xZ=(()=>{const e=class{constructor(r,i){this.authService=r,this.router=i,this.email="",this.password="",this.errorMessage="",this.showPassword=!1}onSubmit(){var r=this;return(0,be.Z)(function*(){if(r.email&&r.password)try{yield r.authService.login(r.email,r.password),r.router.navigate(["/gestionar-productos"])}catch(i){console.error("Error logging in:",i),r.errorMessage="Credenciales inv\xe1lidas. Por favor, verifique e intente nuevamente."}else r.errorMessage="Por favor, complete todos los campos"})()}togglePasswordVisibility(){this.showPassword=!this.showPassword}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(Hl),s.Y36(k.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-login"]],decls:26,vars:6,consts:[[1,"auth-container"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Ingrese su correo",3,"ngModel","ngModelChange"],["for","password"],[1,"password-input-wrapper"],["id","password","name","password","required","","placeholder","Ingrese su contrase\xf1a",3,"type","ngModel","ngModelChange"],["type","button",1,"toggle-password",3,"click"],["type","submit",1,"submit-btn"],[1,"fas","fa-sign-in-alt"],["class","error-message",4,"ngIf"],[1,"admin-info"],[1,"error-message"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Iniciar Sesi\xf3n"),s.qZA(),s.TgZ(3,"form",1),s.NdJ("ngSubmit",function(){return o.onSubmit()}),s.TgZ(4,"div",2)(5,"label",3),s._uU(6,"Correo electr\xf3nico:"),s.qZA(),s.TgZ(7,"input",4),s.NdJ("ngModelChange",function(d){return o.email=d}),s.qZA()(),s.TgZ(8,"div",2)(9,"label",5),s._uU(10,"Contrase\xf1a:"),s.qZA(),s.TgZ(11,"div",6)(12,"input",7),s.NdJ("ngModelChange",function(d){return o.password=d}),s.qZA(),s.TgZ(13,"button",8),s.NdJ("click",function(){return o.togglePasswordVisibility()}),s._UZ(14,"i"),s.qZA()()(),s.TgZ(15,"button",9),s._UZ(16,"i",10),s._uU(17," Iniciar Sesi\xf3n "),s.qZA()(),s.YNc(18,yZ,2,1,"div",11),s.TgZ(19,"div",12)(20,"h3"),s._uU(21,"Credenciales de Administrador"),s.qZA(),s.TgZ(22,"p"),s._uU(23,"Email: admin@matetierra.com"),s.qZA(),s.TgZ(24,"p"),s._uU(25,"Contrase\xf1a: admin123"),s.qZA()()()),2&i&&(s.xp6(7),s.Q6J("ngModel",o.email),s.xp6(5),s.Q6J("type",o.showPassword?"text":"password")("ngModel",o.password),s.xp6(2),s.Tol(o.showPassword?"fas fa-eye-slash":"fas fa-eye"),s.xp6(4),s.Q6J("ngIf",o.errorMessage))},dependencies:[te.O5,xn,nt,or,to,ra,As,Ji],styles:[".auth-container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:2rem;background-color:#fff;border-radius:10px;box-shadow:0 4px 6px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#2c3e50;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .3s ease}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3c9c36;box-shadow:0 0 0 2px #3c9c361a}.password-input-wrapper[_ngcontent-%COMP%]{position:relative}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:#3c9c36;cursor:pointer;padding:5px;font-size:1rem}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#3c9c36;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#2ecc71}.error-message[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#fee2e2;border:1px solid #ef4444;color:#dc2626;border-radius:4px;text-align:center}.admin-info[_ngcontent-%COMP%]{margin-top:2rem;padding:1rem;background-color:#f1f8e9;border-radius:5px}.admin-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3c9c36;margin-bottom:.5rem;font-size:1rem}.admin-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;color:#2c3e50;font-size:.9rem}"]}),n})();function wZ(n,e){if(1&n&&(s.TgZ(0,"option",41),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.url),s.xp6(1),s.hij(" ",t.label," ")}}function bZ(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",37)(1,"span"),s._uU(2,"Elegir desde productos"),s.qZA(),s.TgZ(3,"select",38),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.selectedNewImageOption=i)})("change",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onImageSelectFromPicker(i.selectedNewImageOption,"new"))}),s.TgZ(4,"option",39),s._uU(5,"Seleccion\xe1 una imagen disponible"),s.qZA(),s.YNc(6,wZ,2,2,"option",40),s.qZA(),s.TgZ(7,"small"),s._uU(8,"Completamos autom\xe1ticamente el campo con la URL seleccionada."),s.qZA()()}if(2&n){const t=s.oxw();s.xp6(3),s.Q6J("ngModel",t.selectedNewImageOption),s.xp6(3),s.Q6J("ngForOf",t.productImageOptions)}}function CZ(n,e){if(1&n&&(s.TgZ(0,"div",42),s._UZ(1,"i",43),s._uU(2),s.qZA()),2&n){const t=s.oxw();s.xp6(2),s.hij(" ",t.errorMessage," ")}}function EZ(n,e){1&n&&(s.TgZ(0,"div",44),s._UZ(1,"i",45),s._uU(2," Consultando categor\xedas... "),s.qZA())}function TZ(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"article",48)(1,"figure"),s._UZ(2,"img",49),s.qZA(),s.TgZ(3,"div",50)(4,"header")(5,"h4"),s._uU(6),s.qZA(),s.TgZ(7,"span",51),s._uU(8),s.qZA()(),s.TgZ(9,"p",52),s._uU(10),s.qZA(),s.TgZ(11,"span",21),s._uU(12),s.qZA()(),s.TgZ(13,"footer",53)(14,"button",6),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.editCategory(o))}),s._UZ(15,"i",54),s._uU(16," Editar "),s.qZA(),s.TgZ(17,"button",55),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.deleteCategory(o.id))}),s._UZ(18,"i",56),s._uU(19," Eliminar "),s.qZA()()()}if(2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(2),s.Q6J("src",r.getImagePreview(t),s.LSH)("alt",t.name),s.xp6(4),s.Oqu(t.name),s.xp6(2),s.hij("",t.productCount||0," productos"),s.xp6(2),s.Oqu(t.description||"Sin descripci\xf3n definida."),s.xp6(2),s.hij("/",t.slug,"")}}function SZ(n,e){if(1&n&&(s.TgZ(0,"div",46),s.YNc(1,TZ,20,6,"article",47),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.filteredCategories)("ngForTrackBy",t.trackByCategoryId)}}function AZ(n,e){1&n&&(s.TgZ(0,"div",57),s._UZ(1,"i",58),s.TgZ(2,"p"),s._uU(3,"No encontramos categor\xedas con ese filtro."),s.qZA(),s.TgZ(4,"small"),s._uU(5,"Prob\xe1 limpiar la b\xfasqueda o cre\xe1 una nueva categor\xeda."),s.qZA()())}function MZ(n,e){if(1&n&&(s.TgZ(0,"option",41),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.url),s.xp6(1),s.hij(" ",t.label," ")}}function IZ(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",37)(1,"span"),s._uU(2,"Elegir desde productos"),s.qZA(),s.TgZ(3,"select",68),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.selectedEditImageOption=i)})("change",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.onImageSelectFromPicker(i.selectedEditImageOption,"edit"))}),s.TgZ(4,"option",39),s._uU(5,"Seleccion\xe1 una imagen disponible"),s.qZA(),s.YNc(6,MZ,2,2,"option",40),s.qZA(),s.TgZ(7,"small"),s._uU(8,"La URL se completar\xe1 con la imagen elegida."),s.qZA()()}if(2&n){const t=s.oxw(2);s.xp6(3),s.Q6J("ngModel",t.selectedEditImageOption),s.xp6(3),s.Q6J("ngForOf",t.productImageOptions)}}function PZ(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",59)(1,"div",60)(2,"header")(3,"h3"),s._uU(4,"Editar categor\xeda"),s.qZA(),s.TgZ(5,"button",6),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.editingCategory=null)}),s._UZ(6,"i",61),s.qZA()(),s.TgZ(7,"form",62),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.updateCategory())}),s.TgZ(8,"label",15)(9,"span"),s._uU(10,"Nombre"),s.qZA(),s.TgZ(11,"input",63),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.editingCategory.name=i)}),s.qZA()(),s.TgZ(12,"label",15)(13,"span"),s._uU(14,"Descripci\xf3n"),s.qZA(),s.TgZ(15,"textarea",64),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.editingCategory.description=i)}),s.qZA()(),s.TgZ(16,"label",15)(17,"span"),s._uU(18,"URL de imagen"),s.qZA(),s.TgZ(19,"input",65),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.editingCategory.image=i)}),s.qZA()(),s.YNc(20,IZ,9,2,"div",19),s.TgZ(21,"div",20)(22,"span",21),s._uU(23),s.qZA()(),s.TgZ(24,"div",66)(25,"button",25),s._UZ(26,"i",67),s._uU(27," Guardar cambios "),s.qZA(),s.TgZ(28,"button",6),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.editingCategory=null)}),s._uU(29," Cancelar "),s.qZA()()()()()}if(2&n){const t=s.oxw();s.xp6(11),s.Q6J("ngModel",t.editingCategory.name),s.xp6(4),s.Q6J("ngModel",t.editingCategory.description),s.xp6(4),s.Q6J("ngModel",t.editingCategory.image),s.xp6(1),s.Q6J("ngIf",t.productImageOptions.length),s.xp6(3),s.hij("Slug: ",t.generateSlug(t.editingCategory.name),""),s.xp6(2),s.Q6J("disabled",t.isLoading)}}let DZ=(()=>{const e=class{constructor(r,i){this.categoryService=r,this.productService=i,this.categories=[],this.filteredCategories=[],this.newCategory={id:"",name:"",image:"",productCount:0,slug:"",description:""},this.editingCategory=null,this.errorMessage="",this.isLoading=!1,this.searchTerm="",this.stats={totalCategories:0,totalProducts:0},this.productImageOptions=[],this.selectedNewImageOption="",this.selectedEditImageOption=""}ngOnInit(){this.loadCategories(),this.loadProductImages()}loadCategories(){this.isLoading=!0,this.categoryService.getCategories().subscribe({next:r=>{this.categories=r,this.updateStats(),this.applyFilter(),this.isLoading=!1},error:r=>{this.errorMessage=this.resolveErrorMessage(r,"Error al cargar las categor\xedas"),this.isLoading=!1}})}loadProductImages(){this.productService.getProducts().subscribe({next:r=>{this.productImageOptions=this.buildProductImageOptions(r)},error:r=>{console.error("Error loading product images:",r)}})}generateSlug(r){return r.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}onSubmit(){if(!this.validateCategory(this.newCategory))return;const r={...this.newCategory,id:"",slug:this.generateSlug(this.newCategory.name),productCount:this.newCategory.productCount||0};this.isLoading=!0,this.errorMessage="",this.categoryService.addCategory(r).subscribe({next:()=>{this.loadCategories(),this.resetNewCategory(),this.isLoading=!1},error:i=>{this.errorMessage=this.resolveErrorMessage(i,"Error al a\xf1adir la categor\xeda"),this.isLoading=!1}})}validateCategory(r){return!(!r.name||!r.image)||(this.errorMessage="El nombre y la imagen son obligatorios",!1)}resetNewCategory(){this.newCategory={id:"",name:"",image:"",productCount:0,slug:"",description:""},this.errorMessage="",this.selectedNewImageOption=""}editCategory(r){this.editingCategory={...r},this.selectedEditImageOption=""}updateCategory(){this.editingCategory&&this.validateCategory(this.editingCategory)&&(this.isLoading=!0,this.editingCategory.slug=this.generateSlug(this.editingCategory.name),this.categoryService.updateCategory(this.editingCategory.id,this.editingCategory).subscribe({next:()=>{this.loadCategories(),this.editingCategory=null,this.selectedEditImageOption="",this.isLoading=!1},error:r=>{this.errorMessage=this.resolveErrorMessage(r,"Error al actualizar la categor\xeda"),this.isLoading=!1}}))}deleteCategory(r){confirm("\xbfEst\xe1s seguro de que deseas eliminar esta categor\xeda?")&&(this.isLoading=!0,this.categoryService.deleteCategory(r).subscribe({next:()=>{this.loadCategories(),this.isLoading=!1},error:i=>{this.errorMessage=this.resolveErrorMessage(i,"Error al eliminar la categor\xeda"),this.isLoading=!1}}))}onSearchChange(r){this.searchTerm=r,this.applyFilter()}trackByCategoryId(r,i){return i.id}getImagePreview(r){return r.image||"https://via.placeholder.com/120?text=Sin+imagen"}onImageSelectFromPicker(r,i){if(r){if("new"===i)return this.newCategory.image=r,void(this.selectedNewImageOption="");"edit"===i&&this.editingCategory&&(this.editingCategory.image=r,this.selectedEditImageOption="")}}applyFilter(){const r=this.searchTerm.trim().toLowerCase();this.filteredCategories=r?this.categories.filter(i=>i.name.toLowerCase().includes(r)||(i.description||"").toLowerCase().includes(r)):[...this.categories]}updateStats(){this.stats.totalCategories=this.categories.length,this.stats.totalProducts=this.categories.reduce((r,i)=>r+(i.productCount||0),0)}buildProductImageOptions(r){const i=new Set,o=[];return r.forEach(a=>{const d=Array.isArray(a.image_urls)&&a.image_urls.length?a.image_urls:a.image?[a.image]:[];d.forEach((h,p)=>{h&&!i.has(h)&&(i.add(h),o.push({id:`${a.id}#${p}`,url:h,label:`${a.name}${d.length>1?` \xb7 imagen ${p+1}`:""}`}))})}),o}resolveErrorMessage(r,i){return r?"string"==typeof r?r:r.message?r.message:r.error?.message?r.error.message:i:i}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(Kd),s.Y36(ol.M))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-category-management"]],decls:86,vars:25,consts:[[1,"categories-page"],[1,"page-hero"],[1,"eyebrow"],[1,"hero-meta"],[1,"status-pill"],[1,"fas"],["type","button",1,"ghost-button",3,"click"],[1,"fas","fa-rotate"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-card","secondary"],[1,"management-grid"],[1,"panel","add-panel"],[1,"panel-header"],[1,"category-form",3,"ngSubmit"],[1,"form-field"],["type","text","name","name","placeholder","Ej: Kits de mate","required","",3,"ngModel","ngModelChange"],["name","description","rows","3","placeholder","Breve texto que se ver\xe1 en la web",3,"ngModel","ngModelChange"],["type","url","name","image","placeholder","https://","required","",3,"ngModel","ngModelChange"],["class","form-field image-picker",4,"ngIf"],[1,"form-meta"],[1,"slug"],[1,"preview-label"],[1,"preview-box"],["alt","Vista previa",3,"src"],["type","submit",1,"btn-primary",3,"disabled"],[1,"fas","fa-plus"],["class","error-inline",4,"ngIf"],[1,"panel","list-panel"],[1,"toolbar"],[1,"search-field"],[1,"fas","fa-search"],["type","text","placeholder","Buscar por nombre o descripci\xf3n",3,"value","input"],["class","loading",4,"ngIf"],["class","categories-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal",4,"ngIf"],[1,"form-field","image-picker"],["name","new-image-picker",3,"ngModel","ngModelChange","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"error-inline"],[1,"fas","fa-exclamation-triangle"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"categories-grid"],["class","category-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"category-card"],[3,"src","alt"],[1,"card-body"],[1,"badge"],[1,"description"],[1,"card-actions"],[1,"fas","fa-pen"],["type","button",1,"ghost-button","danger",3,"click"],[1,"fas","fa-trash"],[1,"empty-state"],[1,"fas","fa-inbox"],[1,"modal"],[1,"modal-content"],[1,"fas","fa-times"],[1,"modal-form",3,"ngSubmit"],["type","text","name","edit-name","required","",3,"ngModel","ngModelChange"],["name","edit-description","rows","3",3,"ngModel","ngModelChange"],["type","url","name","edit-image","required","",3,"ngModel","ngModelChange"],[1,"modal-actions"],[1,"fas","fa-save"],["name","edit-image-picker",3,"ngModel","ngModelChange","change"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"header",1)(2,"div")(3,"p",2),s._uU(4,"Cat\xe1logo"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Gesti\xf3n de categor\xedas"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Manten\xe9 tu tienda ordenada creando, editando o archivando categor\xedas que s\xed existan en el backend."),s.qZA()(),s.TgZ(9,"div",3)(10,"span",4),s._UZ(11,"i",5),s._uU(12),s.qZA(),s.TgZ(13,"button",6),s.NdJ("click",function(){return o.loadCategories()}),s._UZ(14,"i",7),s._uU(15," Refrescar "),s.qZA()()(),s.TgZ(16,"section",8)(17,"article",9)(18,"p"),s._uU(19,"Total de categor\xedas"),s.qZA(),s.TgZ(20,"h3"),s._uU(21),s.qZA(),s.TgZ(22,"small"),s._uU(23),s.qZA()(),s.TgZ(24,"article",9)(25,"p"),s._uU(26,"Productos asociados"),s.qZA(),s.TgZ(27,"h3"),s._uU(28),s.qZA(),s.TgZ(29,"small"),s._uU(30,"Datos proporcionados por el backend"),s.qZA()(),s.TgZ(31,"article",10)(32,"p"),s._uU(33,"Filtro activo"),s.qZA(),s.TgZ(34,"h3"),s._uU(35),s.qZA(),s.TgZ(36,"small"),s._uU(37),s.qZA()()(),s.TgZ(38,"section",11)(39,"article",12)(40,"div",13)(41,"div")(42,"h3"),s._uU(43,"Nueva categor\xeda"),s.qZA(),s.TgZ(44,"p"),s._uU(45,"Los campos obligatorios coinciden con lo disponible en el backend: nombre, imagen y descripci\xf3n."),s.qZA()()(),s.TgZ(46,"form",14),s.NdJ("ngSubmit",function(){return o.onSubmit()}),s.TgZ(47,"label",15)(48,"span"),s._uU(49,"Nombre"),s.qZA(),s.TgZ(50,"input",16),s.NdJ("ngModelChange",function(d){return o.newCategory.name=d}),s.qZA()(),s.TgZ(51,"label",15)(52,"span"),s._uU(53,"Descripci\xf3n"),s.qZA(),s.TgZ(54,"textarea",17),s.NdJ("ngModelChange",function(d){return o.newCategory.description=d}),s.qZA()(),s.TgZ(55,"label",15)(56,"span"),s._uU(57,"URL de imagen"),s.qZA(),s.TgZ(58,"input",18),s.NdJ("ngModelChange",function(d){return o.newCategory.image=d}),s.qZA()(),s.YNc(59,bZ,9,2,"div",19),s.TgZ(60,"div",20)(61,"span",21),s._uU(62),s.qZA(),s.TgZ(63,"span",22),s._uU(64,"Vista previa"),s.qZA()(),s.TgZ(65,"div",23),s._UZ(66,"img",24),s.qZA(),s.TgZ(67,"button",25),s._UZ(68,"i",26),s._uU(69," Guardar categor\xeda "),s.qZA(),s.YNc(70,CZ,3,1,"div",27),s.qZA()(),s.TgZ(71,"article",28)(72,"div",13)(73,"div")(74,"h3"),s._uU(75,"Categor\xedas activas"),s.qZA(),s.TgZ(76,"p"),s._uU(77,"Todo lo que ves ac\xe1 proviene del backend mockeado. Elimin\xe1 lo que no uses."),s.qZA()(),s.TgZ(78,"div",29)(79,"div",30),s._UZ(80,"i",31),s.TgZ(81,"input",32),s.NdJ("input",function(d){return o.onSearchChange(d.target.value)}),s.qZA()()()(),s.YNc(82,EZ,3,0,"div",33),s.YNc(83,SZ,2,2,"div",34),s.YNc(84,AZ,6,0,"div",35),s.qZA()(),s.YNc(85,PZ,30,6,"div",36),s.qZA()),2&i&&(s.xp6(10),s.ekj("success",!o.isLoading),s.xp6(1),s.ekj("fa-circle-notch",o.isLoading)("fa-check-circle",!o.isLoading),s.xp6(1),s.hij(" ",o.isLoading?"Sincronizando":"Sincronizado"," "),s.xp6(9),s.Oqu(o.stats.totalCategories),s.xp6(2),s.hij("",o.filteredCategories.length," visibles"),s.xp6(5),s.Oqu(o.stats.totalProducts),s.xp6(7),s.Oqu(o.searchTerm?"Personalizado":"Todos"),s.xp6(2),s.Oqu(o.searchTerm||"Sin filtros aplicados"),s.xp6(13),s.Q6J("ngModel",o.newCategory.name),s.xp6(4),s.Q6J("ngModel",o.newCategory.description),s.xp6(4),s.Q6J("ngModel",o.newCategory.image),s.xp6(1),s.Q6J("ngIf",o.productImageOptions.length),s.xp6(3),s.hij("Slug: ",o.newCategory.name?o.generateSlug(o.newCategory.name):"pendiente",""),s.xp6(4),s.Q6J("src",o.getImagePreview(o.newCategory),s.LSH),s.xp6(1),s.Q6J("disabled",o.isLoading),s.xp6(3),s.Q6J("ngIf",o.errorMessage),s.xp6(11),s.Q6J("value",o.searchTerm),s.xp6(1),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&o.filteredCategories.length),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.filteredCategories.length),s.xp6(1),s.Q6J("ngIf",o.editingCategory))},dependencies:[te.sg,te.O5,xn,Bi,na,nt,cs,or,to,ra,As,Ji],styles:[".categories-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2.5rem var(--gutter, 1.25rem) 3rem;display:flex;flex-direction:column;gap:2rem}.page-hero[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1.5rem;flex-wrap:wrap}.page-hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.35rem 0 0;font-size:clamp(2rem,3vw,2.6rem);color:#102b1c}.page-hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.35rem 0 0;color:#5b6b62;max-width:540px}.hero-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.status-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.35rem;padding:.4rem .9rem;border-radius:999px;font-size:.9rem;background:rgba(16,43,28,.08);color:#0c3d26}.status-pill.success[_ngcontent-%COMP%]{background:rgba(60,156,54,.12);color:#256d1a}.ghost-button[_ngcontent-%COMP%]{border:1px solid rgba(16,43,28,.15);background:transparent;color:#102b1c;border-radius:999px;padding:.45rem 1rem;font-weight:600;display:inline-flex;align-items:center;gap:.35rem;cursor:pointer;transition:all .2s ease}.ghost-button[_ngcontent-%COMP%]:hover{border-color:#102b1c}.ghost-button.danger[_ngcontent-%COMP%]{border-color:#c0392b59;color:#c0392b}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.stat-card[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;border-radius:18px;background:#fff;border:1px solid rgba(16,43,28,.08);box-shadow:0 18px 32px #102b1c14}.stat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-transform:uppercase;font-size:.8rem;letter-spacing:.08em;color:#6b7a70}.stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.35rem 0 0;font-size:2rem;color:#112417}.stat-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#859185}.stat-card.secondary[_ngcontent-%COMP%]{background:#102b1c;color:#f2fff7;border-color:transparent}.stat-card.secondary[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .stat-card.secondary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .stat-card.secondary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:inherit}.management-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(320px,420px) minmax(0,1fr);gap:1.5rem;align-items:start}.panel[_ngcontent-%COMP%]{background:#fff;border-radius:20px;border:1px solid rgba(16,43,28,.08);box-shadow:0 20px 45px #102b1c17;padding:1.75rem;display:flex;flex-direction:column;gap:1.25rem}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#102b1c}.panel-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.35rem 0 0;color:#5b6b62}.category-form[_ngcontent-%COMP%], .modal-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem;font-size:.95rem;color:#4d5b52}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:1px solid rgba(16,43,28,.12);border-radius:12px;padding:.85rem 1rem;font-size:1rem;font-family:inherit;transition:border .2s ease}.image-picker[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid rgba(16,43,28,.12);border-radius:12px;padding:.65rem .8rem;font-size:.95rem;background:#f9fbf8;width:100%}.image-picker[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#7a857c}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3c9c36}.form-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.85rem;color:#7a857c}.slug[_ngcontent-%COMP%]{font-family:JetBrains Mono,Courier New,monospace;font-size:.85rem;color:#5b6b62}.preview-label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.1em}.preview-box[_ngcontent-%COMP%]{border:1px dashed rgba(16,43,28,.2);border-radius:16px;display:flex;align-items:center;justify-content:center;min-height:140px;padding:1rem}.preview-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:240px;border-radius:12px;object-fit:cover}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0ec254,#3c9c36);border:none;border-radius:999px;color:#fff;padding:.85rem 1.5rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem;justify-content:center}.error-inline[_ngcontent-%COMP%]{color:#c0392b;font-size:.9rem;display:flex;align-items:center;gap:.35rem}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.search-field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:1px solid rgba(16,43,28,.15);border-radius:999px;padding:.35rem .9rem}.search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;font-size:.95rem;min-width:220px}.categories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1rem}.category-card[_ngcontent-%COMP%]{border:1px solid rgba(16,43,28,.08);border-radius:18px;overflow:hidden;display:flex;flex-direction:column;min-height:100%;background:#fff}.category-card[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{margin:0;height:160px;overflow:hidden}.category-card[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.category-card[_ngcontent-%COMP%]:hover   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05)}.card-body[_ngcontent-%COMP%]{padding:1rem 1.25rem;flex:1;display:flex;flex-direction:column;gap:.6rem}.card-body[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;gap:.5rem}.card-body[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#112417}.badge[_ngcontent-%COMP%]{font-size:.75rem;padding:.2rem .6rem;border-radius:999px;background:rgba(16,43,28,.1);color:#21402f}.description[_ngcontent-%COMP%]{margin:0;color:#5d6b62;font-size:.9rem}.card-actions[_ngcontent-%COMP%]{padding:.75rem 1.25rem 1.25rem;display:flex;justify-content:space-between;gap:.5rem}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{border:1px dashed rgba(16,43,28,.2);border-radius:14px;padding:2rem;text-align:center;color:#5d6b62}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:.5rem}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(10,16,22,.6);display:flex;align-items:center;justify-content:center;z-index:999}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:1.75rem;width:min(520px,90vw);box-shadow:0 40px 70px #0a101640;display:flex;flex-direction:column;gap:1rem}.modal-content[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}@media (max-width: 960px){.management-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 640px){.hero-meta[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.search-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:unset}.card-actions[_ngcontent-%COMP%]{flex-direction:column}}"]}),n})();var CN=Z(8421),EN=Z(5032);function Ax(n){return(0,Tu.e)((e,t)=>{(0,CN.Xf)(n).subscribe((0,cc.x)(t,()=>t.complete(),EN.Z)),!t.closed&&e.subscribe(t)})}var kZ=Z(1165),OZ=Z(3888),FZ=Z(9672);const RZ=(0,OZ.d)(n=>function(t=null){n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t});function LZ(n){throw new RZ(n)}var UZ=Z(8746),BZ=Z(2805),ZZ=Z(7272),$E=Z(5698),qZ=Z(9718),HZ=Z(5577);function TN(n,e){return e?t=>(0,ZZ.z)(e.pipe((0,$E.q)(1),function jZ(){return(0,Tu.e)((n,e)=>{n.subscribe((0,cc.x)(e,EN.Z))})}()),t.pipe(TN(n))):(0,HZ.z)((t,r)=>n(t,r).pipe((0,$E.q)(1),(0,qZ.h)(t)))}let Mx=(()=>{const e=class{constructor(r){this.supabase=r,this.MAX_RETRIES=3,this.RETRY_DELAY=1e3}handleError(r){return console.error("Sales service error:",r),429===r.status?(0,ri._)(()=>new Error("Too many requests. Please try again in a moment.")):"42501"===r.code||r.message?.includes("row-level security")?(0,ri._)(()=>new Error("You do not have permission to perform this action.")):(0,ri._)(()=>new Error("Error creating sale. Please try again."))}retryStrategy(){return function VZ(n){return(0,Tu.e)((e,t)=>{let r,o,i=!1;const a=()=>{r=e.subscribe((0,cc.x)(t,void 0,void 0,d=>{o||(o=new Yd.x,n(o).subscribe((0,cc.x)(t,()=>r?a():i=!0))),o&&o.next(d)})),i&&(r.unsubscribe(),r=null,i=!1,a())};a()})}(r=>r.pipe(TN(()=>(0,BZ.H)(this.RETRY_DELAY)),(0,$E.q)(this.MAX_RETRIES)))}getRecentCompletedSales(r=5){return(0,me.D)(this.supabase.client.from("sales").select("\n          *,\n          items:sale_items(\n            *,\n            product:products(name)\n          )\n        ").eq("status","completed").order("created_at",{ascending:!1}).limit(r)).pipe(this.retryStrategy(),(0,re.U)(({data:i,error:o})=>{if(o)throw o;return i?.map(a=>({...a,items:a.items?.map(d=>({...d,product_name:d.product?.name}))}))||[]}),(0,ci.K)(i=>this.handleError(i)))}getAllSales(r=20,i=0){const o=this.supabase.client.from("sales").select("*, items:sale_items(*, product:products(name))",{count:"exact"}).order("created_at",{ascending:!1}).range(i,i+r-1);return(0,me.D)(o).pipe(this.retryStrategy(),(0,re.U)(({data:a,error:d,count:h})=>{if(d)throw d;return{sales:a?.map(p=>({...p,items:p.items?.map(m=>({...m,product_name:m.product?.name}))}))||[],total:h||0}}),(0,ci.K)(a=>this.handleError(a)))}createSale(r,i,o,a){if(!o.split(",").every(y=>/^[a-z]+$/.test(y)))return(0,ri._)(()=>new Error("Invalid payment method format"));const p=i.reduce((y,T)=>y+T.price*T.quantity,0),m=a.reduce((y,T)=>y+T.amount,0);return Math.abs(p-m)>.01?(0,ri._)(()=>new Error("Payment splits total must match items total")):(0,me.D)(this.supabase.client.from("sales").insert([{user_id:r,payment_method:o,payment_splits:a,total_amount:p,status:"completed"}]).select().single()).pipe(this.retryStrategy(),(0,Gd.w)(({data:y,error:T})=>{if(T)throw T;if(!y)throw new Error("No data returned from sale creation");const M=i.map(R=>({sale_id:y.id,product_id:R.id,quantity:R.quantity,unit_price:R.price,original_price:R.originalPrice||R.price}));return(0,me.D)(this.supabase.client.from("sale_items").insert(M)).pipe((0,re.U)(()=>y))}),(0,ci.K)(y=>this.handleError(y)))}cancelSale(r){return(0,me.D)(this.supabase.client.from("sales").update({status:"cancelled"}).eq("id",r)).pipe(this.retryStrategy(),(0,re.U)(({error:i})=>{if(i)throw i}),(0,ci.K)(i=>this.handleError(i)))}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(kc.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),r1=(()=>{const e=class{constructor(r){this.supabase=r}getPaymentMethods(){return(0,me.D)(this.supabase.client.from("payment_methods").select("*").order("name")).pipe((0,re.U)(({data:r,error:i})=>{if(i)throw i;return r||[]}),(0,ci.K)(r=>(console.error("Error fetching payment methods:",r),(0,ri._)(()=>new Error("Error loading payment methods")))))}getActivePaymentMethods(){return(0,me.D)(this.supabase.client.from("payment_methods").select("*").eq("active",!0).order("name")).pipe((0,re.U)(({data:r,error:i})=>{if(i)throw i;return r||[]}),(0,ci.K)(r=>(console.error("Error fetching active payment methods:",r),(0,ri._)(()=>new Error("Error loading payment methods")))))}addPaymentMethod(r){return(0,me.D)(this.supabase.client.from("payment_methods").insert([r]).select().single()).pipe((0,re.U)(({data:i,error:o})=>{if(o)throw o;if(!i)throw new Error("No data returned");return i}),(0,ci.K)(i=>(console.error("Error adding payment method:",i),(0,ri._)(()=>new Error("Error adding payment method")))))}updatePaymentMethod(r,i){return(0,me.D)(this.supabase.client.from("payment_methods").update(i).eq("id",r).select().single()).pipe((0,re.U)(({data:o,error:a})=>{if(a)throw a;if(!o)throw new Error("Payment method not found");return o}),(0,ci.K)(o=>(console.error("Error updating payment method:",o),(0,ri._)(()=>new Error("Error updating payment method")))))}togglePaymentMethod(r,i){return this.updatePaymentMethod(r,{active:i})}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(kc.T))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();function $Z(n,e){if(1&n&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"date"),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.hij("\xdaltima venta: ",s.xi3(2,1,t.metrics.latestSaleDate,"short"),"")}}function zZ(n,e){if(1&n&&(s.TgZ(0,"div",13)(1,"article",14)(2,"p"),s._uU(3,"Completadas"),s.qZA(),s.TgZ(4,"h4"),s._uU(5),s.qZA(),s.TgZ(6,"small"),s._uU(7),s.qZA()(),s.TgZ(8,"article",14)(9,"p"),s._uU(10,"Ingresos 24h"),s.qZA(),s.TgZ(11,"h4"),s._uU(12),s.ALo(13,"currency"),s.qZA(),s.TgZ(14,"small"),s._uU(15),s.ALo(16,"currency"),s.qZA()(),s.TgZ(17,"article",15)(18,"p"),s._uU(19,"Canceladas"),s.qZA(),s.TgZ(20,"h4"),s._uU(21),s.qZA(),s.TgZ(22,"small"),s._uU(23,"Revisar motivos"),s.qZA()()()),2&n){const t=s.oxw();s.xp6(5),s.Oqu(t.metrics.completedCount),s.xp6(2),s.hij("",t.metrics.totalItems," art\xedculos"),s.xp6(5),s.Oqu(s.xi3(13,5,t.metrics.totalRevenue,"USD")),s.xp6(3),s.hij("Ticket medio ",s.xi3(16,8,t.metrics.averageTicket,"USD"),""),s.xp6(6),s.Oqu(t.metrics.cancelledCount)}}function GZ(n,e){1&n&&(s.TgZ(0,"div",16),s._UZ(1,"i",17),s._uU(2," Cargando ventas recientes... "),s.qZA())}function WZ(n,e){if(1&n&&(s.TgZ(0,"div",18),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.hij(" ",t.errorMessage," ")}}function KZ(n,e){1&n&&(s.TgZ(0,"div",19),s._UZ(1,"i",20),s.TgZ(2,"p"),s._uU(3,"No registraste ventas en las \xfaltimas horas."),s.qZA(),s.TgZ(4,"small"),s._uU(5,"Registr\xe1 una venta manual o generala desde el carrito para ver el detalle ac\xe1."),s.qZA()())}function YZ(n,e){if(1&n&&(s.TgZ(0,"li")(1,"strong"),s._uU(2),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.ALo(5,"currency"),s.qZA()()),2&n){const t=e.$implicit;s.xp6(2),s.Oqu((null==t.product?null:t.product.name)||t.product_name),s.xp6(2),s.AsE("",t.quantity," \xd7 ",s.xi3(5,3,t.unit_price,"USD"),"")}}function JZ(n,e){if(1&n&&(s.TgZ(0,"small"),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&n){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(s.xi3(2,1,t.amount,"USD"))}}function QZ(n,e){if(1&n&&(s.TgZ(0,"span",40),s._uU(1),s.YNc(2,JZ,3,4,"small",5),s.qZA()),2&n){const t=e.$implicit;s.xp6(1),s.hij(" ",t.name," "),s.xp6(1),s.Q6J("ngIf",t.amount)}}function XZ(n,e){if(1&n&&(s.TgZ(0,"p",41),s._uU(1),s.qZA()),2&n){const t=s.oxw().$implicit;s.xp6(1),s.hij(" Pagado en ",(null==t.sale.payment_splits?null:t.sale.payment_splits.length)||0," m\xe9todos ")}}function ej(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",42),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit,o=s.oxw(2);return s.KtG(o.onCancelSale(i.sale.id))}),s._UZ(1,"i",43),s._uU(2," Cancelar venta "),s.qZA()}}const tj=function(){return[]};function nj(n,e){if(1&n&&(s.TgZ(0,"article",23)(1,"div",24)(2,"div")(3,"span",25),s._uU(4),s.qZA(),s.TgZ(5,"p",26),s._uU(6),s.ALo(7,"date"),s.qZA()(),s.TgZ(8,"div",27)(9,"span",28),s._uU(10),s.qZA(),s.TgZ(11,"span",29),s._uU(12),s.ALo(13,"currency"),s.qZA()()(),s.TgZ(14,"div",30)(15,"div",31)(16,"h5"),s._uU(17,"Productos"),s.qZA(),s.TgZ(18,"ul"),s.YNc(19,YZ,6,6,"li",32),s.qZA()(),s.TgZ(20,"div",33)(21,"h5"),s._uU(22,"M\xe9todos de pago"),s.qZA(),s.TgZ(23,"div",34),s.YNc(24,QZ,3,2,"span",35),s.qZA(),s.YNc(25,XZ,2,1,"p",36),s.qZA()(),s.TgZ(26,"div",37)(27,"span",38),s._uU(28),s.qZA(),s.YNc(29,ej,3,0,"button",39),s.qZA()()),2&n){const t=e.$implicit;s.ekj("cancelled","cancelled"===t.sale.status),s.xp6(4),s.Oqu(t.shortId),s.xp6(2),s.Oqu(s.xi3(7,12,t.sale.created_at,"medium")),s.xp6(3),s.Q6J("ngClass",t.sale.status),s.xp6(1),s.hij(" ","completed"===t.sale.status?"Completada":"Cancelada"," "),s.xp6(2),s.Oqu(s.xi3(13,15,t.sale.total_amount,"USD")),s.xp6(7),s.Q6J("ngForOf",t.sale.items||s.DdM(18,tj)),s.xp6(5),s.Q6J("ngForOf",t.paymentSummaries),s.xp6(1),s.Q6J("ngIf",((null==t.sale.payment_splits?null:t.sale.payment_splits.length)||0)>1),s.xp6(3),s.Oqu(t.itemsLabel),s.xp6(1),s.Q6J("ngIf","cancelled"!==t.sale.status)}}function rj(n,e){if(1&n&&(s.TgZ(0,"div",21),s.YNc(1,nj,30,19,"article",22),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.Q6J("ngForOf",t.saleCards)("ngForTrackBy",t.trackBySaleId)}}let ij=(()=>{const e=class{constructor(){this.recentSales=[],this.isLoading=!1,this.errorMessage="",this.paymentMethods=[],this.cancelSale=new s.vpe,this.saleCards=[],this.metrics={completedCount:0,cancelledCount:0,totalRevenue:0,averageTicket:0,totalItems:0,latestSaleDate:null}}ngOnChanges(r){(r.recentSales||r.isLoading||r.paymentMethods)&&this.rebuildViewModel()}onCancelSale(r){this.cancelSale.emit(r)}trackBySaleId(r,i){return i.sale.id}rebuildViewModel(){if(this.isLoading)return void(this.saleCards=[]);const r=this.recentSales||[],i=this.paymentMethods||[],o=r.filter(y=>"completed"===y.status),a=r.filter(y=>"cancelled"===y.status).length,d=o.reduce((y,T)=>y+(T.total_amount||0),0),h=o.reduce((y,T)=>y+this.countItems(T),0);this.metrics={completedCount:o.length,cancelledCount:a,totalRevenue:d,averageTicket:o.length?d/o.length:0,totalItems:h,latestSaleDate:r.length&&r[0]?.created_at||null},this.saleCards=r.map(y=>({sale:y,shortId:this.formatSaleId(y.id),itemsLabel:this.formatItemsLabel(y),paymentSummaries:this.buildPaymentSummaries(y,i)}))}buildPaymentSummaries(r,i){return r?.payment_method?r.payment_method.split(",").map(a=>a.trim()).filter(Boolean).map((a,d)=>{const h=i?.find(m=>m.code===a),p=r.payment_splits?.[d];return{name:h?h.name:a,amount:p?p.amount:void 0}}):[]}countItems(r){return(r.items||[]).reduce((i,o)=>i+(o.quantity||0),0)}formatItemsLabel(r){const i=this.countItems(r);return 1===i?"1 art\xedculo":`${i} art\xedculos`}formatSaleId(r){return r?`#${r.slice(0,4)}\u2026${r.slice(-4)}`:""}};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-recent-sales"]],inputs:{recentSales:"recentSales",isLoading:"isLoading",errorMessage:"errorMessage",paymentMethods:"paymentMethods"},outputs:{cancelSale:"cancelSale"},features:[s.TTD],decls:19,vars:6,consts:[[1,"recent-sales-panel"],[1,"panel-header"],[1,"panel-copy"],[1,"eyebrow"],[1,"panel-meta"],[4,"ngIf"],["routerLink","/historial-ventas",1,"btn-view-all"],[1,"fas","fa-history"],["class","stats-grid",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","sales-list",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-card","warning"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"empty-state"],[1,"fas","fa-clipboard-list"],[1,"sales-list"],["class","sale-card",3,"cancelled",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sale-card"],[1,"sale-header"],[1,"sale-id"],[1,"sale-date"],[1,"sale-meta"],[1,"status-chip",3,"ngClass"],[1,"sale-total"],[1,"sale-body"],[1,"items-block"],[4,"ngFor","ngForOf"],[1,"payments-block"],[1,"method-chips"],["class","method-chip",4,"ngFor","ngForOf"],["class","split-note",4,"ngIf"],[1,"sale-footer"],[1,"items-count"],["class","btn-cancel",3,"click",4,"ngIf"],[1,"method-chip"],[1,"split-note"],[1,"btn-cancel",3,"click"],[1,"fas","fa-ban"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"header",1)(2,"div",2)(3,"p",3),s._uU(4,"Control de caja"),s.qZA(),s.TgZ(5,"h3"),s._uU(6,"Ventas recientes"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Mir\xe1 el pulso de las \xfaltimas operaciones y actu\xe1 r\xe1pido ante cualquier incidencia."),s.qZA()(),s.TgZ(9,"div",4),s.YNc(10,$Z,3,4,"span",5),s.TgZ(11,"a",6),s._UZ(12,"i",7),s._uU(13," Historial completo "),s.qZA()()(),s.YNc(14,zZ,24,11,"div",8),s.YNc(15,GZ,3,0,"div",9),s.YNc(16,WZ,2,1,"div",10),s.YNc(17,KZ,6,0,"div",11),s.YNc(18,rj,2,2,"div",12),s.qZA()),2&i&&(s.xp6(10),s.Q6J("ngIf",o.metrics.latestSaleDate),s.xp6(4),s.Q6J("ngIf",!o.isLoading),s.xp6(1),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.errorMessage&&0===o.saleCards.length),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&o.saleCards.length>0))},dependencies:[te.mk,te.sg,te.O5,k.rH,te.H9,te.uU],styles:[".recent-sales-panel[_ngcontent-%COMP%]{margin-top:2rem;padding:clamp(1.5rem,3vw,2.25rem);border-radius:var(--radius-xl);border:1px solid var(--surface-border);background:var(--surface);box-shadow:var(--shadow-soft);display:flex;flex-direction:column;gap:1.5rem}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap}.panel-copy[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.25rem 0;font-size:clamp(1.5rem,2.4vw,2.1rem);color:#122417}.panel-copy[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#4b5b50;max-width:460px}.panel-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;align-items:flex-end;font-size:.9rem;color:#5c6a60}.btn-view-all[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.65rem 1.15rem;border-radius:999px;border:1px solid rgba(18,36,23,.12);color:#12341f;text-decoration:none;font-weight:600;background:rgba(18,52,31,.06);transition:background .2s ease,transform .2s ease}.btn-view-all[_ngcontent-%COMP%]:hover{background:rgba(18,52,31,.1);transform:translateY(-1px)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem}.stat-card[_ngcontent-%COMP%]{border-radius:20px;padding:1rem 1.25rem;background:linear-gradient(160deg,#f5fbf2,#e7f4e4);border:1px solid rgba(18,52,31,.08)}.stat-card.warning[_ngcontent-%COMP%]{background:linear-gradient(160deg,#fff5f2,#ffe4de)}.stat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;text-transform:uppercase;letter-spacing:.08em;color:#687669}.stat-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:.35rem 0 0;font-size:1.8rem;color:#14341f}.stat-card[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c7b6f}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#4d5d51;font-style:italic}.error-message[_ngcontent-%COMP%]{color:#c0392b;padding:.75rem 1rem;border-radius:12px;border:1px solid rgba(192,57,43,.35);background:rgba(192,57,43,.08)}.empty-state[_ngcontent-%COMP%]{border-radius:20px;border:1px dashed rgba(18,36,23,.25);padding:1.5rem;text-align:center;background:rgba(18,36,23,.04);color:#2b3a31}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem;display:inline-block}.sales-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.sale-card[_ngcontent-%COMP%]{border:1px solid rgba(18,36,23,.08);border-radius:24px;padding:1.25rem 1.5rem;background:#fff;box-shadow:0 20px 35px #12241714;display:flex;flex-direction:column;gap:1rem}.sale-card.cancelled[_ngcontent-%COMP%]{opacity:.75}.sale-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap}.sale-id[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.8rem;letter-spacing:.1em;color:#9da9a1}.sale-date[_ngcontent-%COMP%]{margin:.15rem 0 0;color:#323f35}.sale-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.status-chip[_ngcontent-%COMP%]{padding:.35rem .85rem;border-radius:999px;font-size:.85rem;font-weight:600;text-transform:capitalize}.status-chip.completed[_ngcontent-%COMP%]{background:rgba(47,143,68,.15);color:#2f8f44}.status-chip.cancelled[_ngcontent-%COMP%]{background:rgba(192,57,43,.12);color:#c0392b}.sale-total[_ngcontent-%COMP%]{font-size:1.35rem;font-weight:700;color:#102b1c}.sale-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.items-block[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.35rem}.items-block[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.95rem;color:#314036}.items-block[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.payments-block[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .items-block[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 .35rem;font-size:.9rem;text-transform:uppercase;letter-spacing:.08em;color:#556257}.method-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.4rem}.method-chip[_ngcontent-%COMP%]{padding:.35rem .8rem;border-radius:999px;background:rgba(18,36,23,.07);font-size:.85rem;display:inline-flex;align-items:center;gap:.35rem}.method-chip[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:600;color:#102b1c}.split-note[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.85rem;color:#5b695f}.sale-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.75rem}.items-count[_ngcontent-%COMP%]{font-weight:600;color:#4c5b51}.btn-cancel[_ngcontent-%COMP%]{border:1px solid rgba(192,57,43,.4);color:#c0392b;background:transparent;border-radius:999px;padding:.55rem 1.1rem;font-weight:600;display:inline-flex;align-items:center;gap:.35rem;cursor:pointer;transition:background .2s ease,color .2s ease}.btn-cancel[_ngcontent-%COMP%]:hover{background:rgba(192,57,43,.08)}@media (max-width: 640px){.sale-card[_ngcontent-%COMP%]{padding:1rem}.sale-body[_ngcontent-%COMP%]{grid-template-columns:1fr}.panel-meta[_ngcontent-%COMP%]{align-items:flex-start}}"]}),n})(),sj=(()=>{const e=class{constructor(r,i,o,a){this.salesService=r,this.authService=i,this.paymentMethodsService=o,this.ngZone=a,this.paymentMethods=[],this.recentSales=[],this.errorMessage="",this.userId=null,this.isLoading=!0,this.destroy$=new Yd.x}ngOnInit(){this.authService.user$.pipe(Ax(this.destroy$)).subscribe(r=>{console.log("authService.user$ emiti\xf3:",r),r&&r.id&&r.id!==this.userId&&(this.userId=r.id,this.loadPaymentMethodsAndSales())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPaymentMethodsAndSales(){this.paymentMethodsService.getActivePaymentMethods().subscribe({next:r=>{this.paymentMethods=r,this.loadRecentSales()},error:r=>{console.error("Error loading payment methods:",r),this.errorMessage="Error al cargar los m\xe9todos de pago"}})}loadRecentSales(){console.log("Iniciando carga de ventas recientes..."),this.isLoading=!0,this.salesService.getRecentCompletedSales(5).pipe(function NZ(n,e){const{first:t,each:r,with:i=LZ,scheduler:o=e??ng.z,meta:a=null}=(0,kZ.q)(n)?{first:n}:"number"==typeof n?{each:n}:n;if(null==t&&null==r)throw new TypeError("No timeout provided.");return(0,Tu.e)((d,h)=>{let p,m,y=null,T=0;const M=R=>{m=(0,FZ.f)(h,o,()=>{try{p.unsubscribe(),(0,CN.Xf)(i({meta:a,lastValue:y,seen:T})).subscribe(h)}catch(D){h.error(D)}},R)};p=d.subscribe((0,cc.x)(h,R=>{m?.unsubscribe(),T++,h.next(y=R),r>0&&M(r)},void 0,void 0,()=>{m?.closed||m?.unsubscribe(),y=null})),!T&&M(null!=t?"number"==typeof t?t:+t-o.now():r)})}(5e3),Ax(this.destroy$),(0,UZ.x)(()=>{this.ngZone.run(()=>{this.isLoading=!1})}),(0,ci.K)(r=>(console.error("Error loading recent sales:",r),this.ngZone.run(()=>{this.errorMessage="Error al cargar las ventas recientes"}),(0,$l.of)([])))).subscribe({next:r=>{this.ngZone.run(()=>{console.log("Respuesta de getRecentCompletedSales:",r),this.recentSales=Array.isArray(r)?[...r]:[...r.sales||[]],console.log("recentSales final:",this.recentSales),this.recentSales.forEach((i,o)=>{console.log(`Venta #${o}:`,i,"items:",i.items)})})},complete:()=>{console.log("Carga de ventas recientes completada.")}})}cancelSale(r){this.salesService.cancelSale(r).subscribe({next:()=>{this.loadRecentSales()},error:i=>{console.error("Error cancelling sale:",i),this.errorMessage="Error al cancelar la venta"}})}getPaymentMethodsForSale(r){const i=r.payment_method.split(",");return i.map(o=>{const a=this.paymentMethods.find(h=>h.code===o),d=r.payment_splits?.[i.indexOf(o)];return{name:a?a.name:o,amount:d?d.amount:void 0}})}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(Mx),s.Y36(Hl),s.Y36(r1),s.Y36(s.R0b))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-sales"]],decls:13,vars:4,consts:[[1,"recent-sales-page"],[1,"recent-sales-header"],[1,"eyebrow"],["routerLink","/venta-actual",1,"btn-primary-link"],[1,"fas","fa-cash-register"],[3,"recentSales","isLoading","errorMessage","paymentMethods","cancelSale"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"header",1)(2,"div")(3,"p",2),s._uU(4,"Panel de caja"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Ventas recientes"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Revis\xe1 las \xfaltimas operaciones y gestion\xe1 cancelaciones desde un solo lugar."),s.qZA()(),s.TgZ(9,"a",3),s._UZ(10,"i",4),s._uU(11," Registrar nueva venta "),s.qZA()(),s.TgZ(12,"app-recent-sales",5),s.NdJ("cancelSale",function(d){return o.cancelSale(d)}),s.qZA()()),2&i&&(s.xp6(12),s.Q6J("recentSales",o.recentSales)("isLoading",o.isLoading)("errorMessage",o.errorMessage)("paymentMethods",o.paymentMethods))},dependencies:[k.rH,ij],styles:[".recent-sales-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:clamp(1.5rem,4vw,3rem) var(--gutter) 3rem;display:flex;flex-direction:column;gap:1.5rem}.recent-sales-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;flex-wrap:wrap}.recent-sales-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.2rem 0 .35rem;font-size:clamp(2rem,3vw,2.6rem);color:#112417}.recent-sales-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;max-width:520px;color:#4d5a51}.btn-primary-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.85rem 1.35rem;border-radius:999px;border:1px solid rgba(17,36,23,.12);background:linear-gradient(120deg,#2f8f44,#62c370);color:#fff;text-decoration:none;font-weight:600;box-shadow:0 12px 24px #2f8f4440;transition:transform .2s ease,box-shadow .2s ease}.btn-primary-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 18px 34px #12241740}@media (max-width: 768px){.recent-sales-page[_ngcontent-%COMP%]{padding:clamp(1.5rem,5vw,2.5rem) var(--gutter) 3rem}.recent-sales-header[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}}"]}),n})();var Ix={version:"0.18.5"},Zc=1200,y0=1252,oj=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],jk={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},zE=function(n){-1!=oj.indexOf(n)&&(y0=jk[0]=n)},Tl=function(n){Zc=n,zE(n)};var kr,Px=function(e){return String.fromCharCode(e)},qk=function(e){return String.fromCharCode(e)},ys=null,Dx=!0,vp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function kx(n){for(var e="",t=0,r=0,i=0,o=0,a=0,d=0,h=0,p=0;p<n.length;)o=(t=n.charCodeAt(p++))>>2,a=(3&t)<<4|(r=n.charCodeAt(p++))>>4,d=(15&r)<<2|(i=n.charCodeAt(p++))>>6,h=63&i,isNaN(r)?d=h=64:isNaN(i)&&(h=64),e+=vp.charAt(o)+vp.charAt(a)+vp.charAt(d)+vp.charAt(h);return e}function jc(n){var e="",o=0,a=0,d=0,h=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var p=0;p<n.length;)o=vp.indexOf(n.charAt(p++)),a=vp.indexOf(n.charAt(p++)),e+=String.fromCharCode(o<<2|a>>4),64!==(d=vp.indexOf(n.charAt(p++)))&&(e+=String.fromCharCode((15&a)<<4|d>>2)),64!==(h=vp.indexOf(n.charAt(p++)))&&(e+=String.fromCharCode((3&d)<<6|h));return e}var dr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Lf=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function yp(n){return dr?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function AN(n){return dr?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var qc=function(e){return dr?Lf(e,"binary"):e.split("").map(function(t){return 255&t.charCodeAt(0)})};function Ox(n){if(typeof ArrayBuffer>"u")return qc(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=255&n.charCodeAt(r);return e}function xp(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}var Io=dr?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:Lf(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if("string"==typeof n[e])throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(o){return Array.isArray(o)?o:[].slice.call(o)}))},ga=/\u0000/g,Fx=/[\u0001-\u0006]/g;function s1(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function au(n,e){var t=""+n;return t.length>=e?t:ws("0",e-t.length)+t}function $k(n,e){var t=""+n;return t.length>=e?t:ws(" ",e-t.length)+t}function KE(n,e){var t=""+n;return t.length>=e?t:t+ws(" ",e-t.length)}var MN=Math.pow(2,32);function o1(n,e){return n>MN||n<-MN?function dj(n,e){var t=""+Math.round(n);return t.length>=e?t:ws("0",e-t.length)+t}(n,e):function fj(n,e){var t=""+n;return t.length>=e?t:ws("0",e-t.length)+t}(Math.round(n),e)}function YE(n,e){return n.length>=7+(e=e||0)&&103==(32|n.charCodeAt(e))&&101==(32|n.charCodeAt(e+1))&&110==(32|n.charCodeAt(e+2))&&101==(32|n.charCodeAt(e+3))&&114==(32|n.charCodeAt(e+4))&&97==(32|n.charCodeAt(e+5))&&108==(32|n.charCodeAt(e+6))}var IN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],zk=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]],Un={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},PN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},pj={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function JE(n,e,t){for(var r=n<0?-1:1,i=n*r,o=0,a=1,d=0,h=1,p=0,m=0,y=Math.floor(i);p<e&&(d=(y=Math.floor(i))*a+o,m=y*p+h,!(i-y<5e-8));)i=1/(i-y),o=a,a=d,h=p,p=m;if(m>e&&(p>e?(m=h,d=o):(m=p,d=a)),!t)return[0,r*d,m];var T=Math.floor(r*d/m);return[T,r*d-T*m,m]}function wp(n,e,t){if(n>2958465||n<0)return null;var r=0|n,i=Math.floor(86400*(n-r)),o=0,a=[],d={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),e&&e.date1904&&(r+=1462),d.u>.9999&&(d.u=0,86400==++i&&(d.T=i=0,++r,++d.D)),60===r)a=t?[1317,10,29]:[1900,2,29],o=3;else if(0===r)a=t?[1317,8,29]:[1900,1,0],o=6;else{r>60&&--r;var h=new Date(1900,0,1);h.setDate(h.getDate()+r-1),a=[h.getFullYear(),h.getMonth()+1,h.getDate()],o=h.getDay(),r<60&&(o=(o+6)%7),t&&(o=function xj(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}(h,a))}return d.y=a[0],d.m=a[1],d.d=a[2],d.S=i%60,i=Math.floor(i/60),d.M=i%60,i=Math.floor(i/60),d.H=i,d.q=o,d}var DN=new Date(1899,11,31,0,0,0),gj=DN.getTime(),mj=new Date(1900,2,1,0,0,0);function kN(n,e){var t=n.getTime();return e?t-=1262304e5:n>=mj&&(t+=864e5),(t-(gj+6e4*(n.getTimezoneOffset()-DN.getTimezoneOffset())))/864e5}function Gk(n){return-1==n.indexOf(".")?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function x0(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(0|n)===n?n.toString(10):function Rx(n){var t,e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E);return t=e>=-4&&e<=-1?n.toPrecision(10+e):Math.abs(e)<=9?function vj(n){var e=n<0?12:11,t=Gk(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10)).length<=e?t:n.toExponential(5)}(n):10===e?n.toFixed(10).substr(0,12):function yj(n){var e=Gk(n.toFixed(11));return e.length>(n<0?12:11)||"0"===e||"-0"===e?n.toPrecision(6):e}(n),Gk(function _j(n){return-1==n.indexOf("E")?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}(n);case"undefined":return"";case"object":if(null==n)return"";if(n instanceof Date)return Hc(14,kN(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function wj(n,e,t,r){var h,i="",o=0,a=0,d=t.y,p=0;switch(n){case 98:d=t.y+543;case 121:switch(e.length){case 1:case 2:h=d%100,p=2;break;default:h=d%1e4,p=4}break;case 109:switch(e.length){case 1:case 2:h=t.m,p=e.length;break;case 3:return zk[t.m-1][1];case 5:return zk[t.m-1][0];default:return zk[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:h=t.d,p=e.length;break;case 3:return IN[t.q][0];default:return IN[t.q][1]}break;case 104:switch(e.length){case 1:case 2:h=1+(t.H+11)%12,p=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:h=t.H,p=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:h=t.M,p=e.length;break;default:throw"bad minute format: "+e}break;case 115:if("s"!=e&&"ss"!=e&&".0"!=e&&".00"!=e&&".000"!=e)throw"bad second format: "+e;return 0!==t.u||"s"!=e&&"ss"!=e?(a=r>=2?3===r?1e3:100:1===r?10:1,(o=Math.round(a*(t.S+t.u)))>=60*a&&(o=0),"s"===e?0===o?"0":""+o/a:(i=au(o,2+r),"ss"===e?i.substr(0,2):"."+i.substr(2,e.length-1))):au(t.S,e.length);case 90:switch(e){case"[h]":case"[hh]":h=24*t.D+t.H;break;case"[m]":case"[mm]":h=60*(24*t.D+t.H)+t.M;break;case"[s]":case"[ss]":h=60*(60*(24*t.D+t.H)+t.M)+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}p=3===e.length?1:2;break;case 101:h=d,p=1}return p>0?au(h,p):""}function bp(n){if(n.length<=3)return n;for(var t=n.length%3,r=n.substr(0,t);t!=n.length;t+=3)r+=(r.length>0?",":"")+n.substr(t,3);return r}var ON=/%/g;function FN(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(0==e)return"0.0E+0";if(e<0)return"-"+FN(n,-e);var i=n.indexOf(".");-1===i&&(i=n.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%i;if(o<0&&(o+=i),-1===(t=(e/Math.pow(10,o)).toPrecision(r+1+(i+o)%i)).indexOf("e")){var a=Math.floor(Math.log(e)*Math.LOG10E);for(-1===t.indexOf(".")?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+o):t+="E+"+(a-o);"0."===t.substr(0,2);)t=(t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,h,p,m){return h+p+m.substr(0,(i+o)%i)+"."+m.substr(o)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var RN=/# (\?+)( ?)\/( ?)(\d+)/,NN=/^#*0*\.([0#]+)/,LN=/\).*[0#]/,UN=/\(###\) ###\\?-####/;function ja(n){for(var t,e="",r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function BN(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function VN(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function Sl(n,e,t){if(40===n.charCodeAt(0)&&!e.match(LN)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Sl("n",r,t):"("+Sl("n",r,-t)+")"}if(44===e.charCodeAt(e.length-1))return function Cj(n,e,t){for(var r=e.length-1;44===e.charCodeAt(r-1);)--r;return Uf(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}(n,e,t);if(-1!==e.indexOf("%"))return function bj(n,e,t){var r=e.replace(ON,""),i=e.length-r.length;return Uf(n,r,t*Math.pow(10,2*i))+ws("%",i)}(n,e,t);if(-1!==e.indexOf("E"))return FN(e,t);if(36===e.charCodeAt(0))return"$"+Sl(n,e.substr(" "==e.charAt(1)?2:1),t);var i,o,a,d,h=Math.abs(t),p=t<0?"-":"";if(e.match(/^00+$/))return p+o1(h,e.length);if(e.match(/^[#?]+$/))return"0"===(i=o1(t,0))&&(i=""),i.length>e.length?i:ja(e.substr(0,e.length-i.length))+i;if(o=e.match(RN))return function Ej(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),o=Math.floor(i/r),a=i-o*r,d=r;return t+(0===o?"":""+o)+" "+(0===a?ws(" ",n[1].length+1+n[4].length):$k(a,n[1].length)+n[2]+"/"+n[3]+au(d,n[4].length))}(o,h,p);if(e.match(/^#+0+$/))return p+o1(h,e.length-e.indexOf("0"));if(o=e.match(NN))return i=BN(t,o[1].length).replace(/^([^\.]+)$/,"$1."+ja(o[1])).replace(/\.$/,"."+ja(o[1])).replace(/\.(\d*)$/,function(R,D){return"."+D+ws("0",ja(o[1]).length-D.length)}),-1!==e.indexOf("0.")?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return p+BN(h,o[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return p+bp(o1(h,0));if(o=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Sl(n,e,-t):bp(""+(Math.floor(t)+function Sj(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}(t,o[1].length)))+"."+au(VN(t,o[1].length),o[1].length);if(o=e.match(/^#,#*,#0/))return Sl(n,e.replace(/^#,#*,/,""),t);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=s1(Sl(n,e.replace(/[\\-]/g,""),t)),a=0,s1(s1(e.replace(/\\/g,"")).replace(/[0#]/g,function(R){return a<i.length?i.charAt(a++):"0"===R?"0":""}));if(e.match(UN))return"("+(i=Sl(n,"##########",t)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var m="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),d=JE(h,Math.pow(10,a)-1,!1),i=""+p," "==(m=Uf("n",o[1],d[1])).charAt(m.length-1)&&(m=m.substr(0,m.length-1)+"0"),i+=m+o[2]+"/"+o[3],(m=KE(d[2],a)).length<o[4].length&&(m=ja(o[4].substr(o[4].length-m.length))+m),i+=m;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),p+((d=JE(h,Math.pow(10,a)-1,!0))[0]||(d[1]?"":"0"))+" "+(d[1]?$k(d[1],a)+o[2]+"/"+o[3]+KE(d[2],a):ws(" ",2*a+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return i=o1(t,0),e.length<=i.length?i:ja(e.substr(0,e.length-i.length))+i;if(o=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var y=e.indexOf(".")-a,T=e.length-i.length-y;return ja(e.substr(0,y)+i+e.substr(e.length-T))}if(o=e.match(/^00,000\.([#0]*0)$/))return a=VN(t,o[1].length),t<0?"-"+Sl(n,e,-t):bp(function Aj(n){return n<2147483647&&n>-2147483648?""+(n>=0?0|n:n-1|0):""+Math.floor(n)}(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?au(0,3-R.length):"")+R})+"."+au(a,o[1].length);switch(e){case"###,##0.00":return Sl(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var M=bp(o1(h,0));return"0"!==M?p+M:"";case"###,###.00":return Sl(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Sl(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function ZN(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(0==e)return"0.0E+0";if(e<0)return"-"+ZN(n,-e);var i=n.indexOf(".");-1===i&&(i=n.indexOf("E"));var o=Math.floor(Math.log(e)*Math.LOG10E)%i;if(o<0&&(o+=i),!(t=(e/Math.pow(10,o)).toPrecision(r+1+(i+o)%i)).match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);-1===t.indexOf(".")?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+o):t+="E+"+(a-o),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,h,p,m){return h+p+m.substr(0,(i+o)%i)+"."+m.substr(o)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function od(n,e,t){if(40===n.charCodeAt(0)&&!e.match(LN)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?od("n",r,t):"("+od("n",r,-t)+")"}if(44===e.charCodeAt(e.length-1))return function Mj(n,e,t){for(var r=e.length-1;44===e.charCodeAt(r-1);)--r;return Uf(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}(n,e,t);if(-1!==e.indexOf("%"))return function Ij(n,e,t){var r=e.replace(ON,""),i=e.length-r.length;return Uf(n,r,t*Math.pow(10,2*i))+ws("%",i)}(n,e,t);if(-1!==e.indexOf("E"))return ZN(e,t);if(36===e.charCodeAt(0))return"$"+od(n,e.substr(" "==e.charAt(1)?2:1),t);var i,o,a,d,h=Math.abs(t),p=t<0?"-":"";if(e.match(/^00+$/))return p+au(h,e.length);if(e.match(/^[#?]+$/))return i=""+t,0===t&&(i=""),i.length>e.length?i:ja(e.substr(0,e.length-i.length))+i;if(o=e.match(RN))return function Tj(n,e,t){return t+(0===e?"":""+e)+ws(" ",n[1].length+2+n[4].length)}(o,h,p);if(e.match(/^#+0+$/))return p+au(h,e.length-e.indexOf("0"));if(o=e.match(NN))return i=(i=(""+t).replace(/^([^\.]+)$/,"$1."+ja(o[1])).replace(/\.$/,"."+ja(o[1]))).replace(/\.(\d*)$/,function(R,D){return"."+D+ws("0",ja(o[1]).length-D.length)}),-1!==e.indexOf("0.")?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),o=e.match(/^(0*)\.(#*)$/))return p+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,o[1].length?"0.":".");if(o=e.match(/^#{1,3},##0(\.?)$/))return p+bp(""+h);if(o=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+od(n,e,-t):bp(""+t)+"."+ws("0",o[1].length);if(o=e.match(/^#,#*,#0/))return od(n,e.replace(/^#,#*,/,""),t);if(o=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=s1(od(n,e.replace(/[\\-]/g,""),t)),a=0,s1(s1(e.replace(/\\/g,"")).replace(/[0#]/g,function(R){return a<i.length?i.charAt(a++):"0"===R?"0":""}));if(e.match(UN))return"("+(i=od(n,"##########",t)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var m="";if(o=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(o[4].length,7),d=JE(h,Math.pow(10,a)-1,!1),i=""+p," "==(m=Uf("n",o[1],d[1])).charAt(m.length-1)&&(m=m.substr(0,m.length-1)+"0"),i+=m+o[2]+"/"+o[3],(m=KE(d[2],a)).length<o[4].length&&(m=ja(o[4].substr(o[4].length-m.length))+m),i+=m;if(o=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(o[1].length,o[4].length),7),p+((d=JE(h,Math.pow(10,a)-1,!0))[0]||(d[1]?"":"0"))+" "+(d[1]?$k(d[1],a)+o[2]+"/"+o[3]+KE(d[2],a):ws(" ",2*a+1+o[2].length+o[3].length));if(o=e.match(/^[#0?]+$/))return e.length<=(i=""+t).length?i:ja(e.substr(0,e.length-i.length))+i;if(o=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(o[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var y=e.indexOf(".")-a,T=e.length-i.length-y;return ja(e.substr(0,y)+i+e.substr(e.length-T))}if(o=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+od(n,e,-t):bp(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?au(0,3-R.length):"")+R})+"."+au(0,o[1].length);switch(e){case"###,###":case"##,###":case"#,###":var M=bp(""+h);return"0"!==M?p+M:"";default:if(e.match(/\.[0#?]*$/))return od(n,e.slice(0,e.lastIndexOf(".")),t)+ja(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Uf(n,e,t){return(0|t)===t?od(n,e,t):Sl(n,e,t)}var jN=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function a1(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":YE(n,e)&&(e+=6),e++;break;case'"':for(;34!==n.charCodeAt(++e)&&e<n.length;);++e;break;case"\\":case"_":e+=2;break;case"@":++e;break;case"B":case"b":if("1"===n.charAt(e+1)||"2"===n.charAt(e+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===n.substr(e,3).toUpperCase()||"AM/PM"===n.substr(e,5).toUpperCase()||"\u4e0a\u5348/\u4e0b\u5348"===n.substr(e,5).toUpperCase())return!0;++e;break;case"[":for(r=t;"]"!==n.charAt(e++)&&e<n.length;)r+=n.charAt(e);if(r.match(jN))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||"\\"==t&&"-"==n.charAt(e+1)&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(" "==n.charAt(e)||"*"==n.charAt(e))&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;default:++e}return!1}var qN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function HN(n,e){if(null==e)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0}return!1}function Hc(n,e,t){null==t&&(t={});var r="";switch(typeof n){case"string":r="m/d/yy"==n&&t.dateNF?t.dateNF:n;break;case"number":null==(r=14==n&&t.dateNF?t.dateNF:(null!=t.table?t.table:Un)[n])&&(r=t.table&&t.table[PN[n]]||Un[PN[n]]),null==r&&(r=pj[n]||"General")}if(YE(r,0))return x0(e,t);e instanceof Date&&(e=kN(e,t.date1904));var i=function kj(n,e){var t=function Pj(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),!0===t)throw new Error("Format |"+n+"| unterminated string ");return e}(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if("number"!=typeof e)return[4,4===t.length||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"]}var o=e>0?t[0]:e<0?t[1]:t[2];if(-1===t[0].indexOf("[")&&-1===t[1].indexOf("["))return[r,o];if(null!=t[0].match(/\[[=<>]/)||null!=t[1].match(/\[[=<>]/)){var a=t[0].match(qN),d=t[1].match(qN);return HN(e,a)?[r,t[0]]:HN(e,d)?[r,t[1]]:[r,t[null!=a&&null!=d?2:1]]}return[r,o]}(r,e);if(YE(i[1]))return x0(e,t);if(!0===e)e="TRUE";else if(!1===e)e="FALSE";else if(""===e||null==e)return"";return function Dj(n,e,t,r){for(var p,m,y,i=[],o="",a=0,d="",h="t",T="H";a<n.length;)switch(d=n.charAt(a)){case"G":if(!YE(n,a))throw new Error("unrecognized character "+d+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(o="";34!==(y=n.charCodeAt(++a))&&a<n.length;)o+=String.fromCharCode(y);i[i.length]={t:"t",v:o},++a;break;case"\\":var M=n.charAt(++a);i[i.length]={t:"("===M||")"===M?M:"t",v:M},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if("1"===n.charAt(a+1)||"2"===n.charAt(a+1)){if(null==p&&null==(p=wp(e,t,"2"===n.charAt(a+1))))return"";i[i.length]={t:"X",v:n.substr(a,2)},h=d,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||null==p&&null==(p=wp(e,t)))return"";for(o=d;++a<n.length&&n.charAt(a).toLowerCase()===d;)o+=d;"m"===d&&"h"===h.toLowerCase()&&(d="M"),"h"===d&&(d=T),i[i.length]={t:d,v:o},h=d;break;case"A":case"a":case"\u4e0a":var D={t:d,v:d};if(null==p&&(p=wp(e,t)),"A/P"===n.substr(a,3).toUpperCase()?(null!=p&&(D.v=p.H>=12?"P":"A"),D.t="T",T="h",a+=3):"AM/PM"===n.substr(a,5).toUpperCase()?(null!=p&&(D.v=p.H>=12?"PM":"AM"),D.t="T",a+=5,T="h"):"\u4e0a\u5348/\u4e0b\u5348"===n.substr(a,5).toUpperCase()?(null!=p&&(D.v=p.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),D.t="T",a+=5,T="h"):(D.t="t",++a),null==p&&"T"===D.t)return"";i[i.length]=D,h=d;break;case"[":for(o=d;"]"!==n.charAt(a++)&&a<n.length;)o+=n.charAt(a);if("]"!==o.slice(-1))throw'unterminated "[" block: |'+o+"|";if(o.match(jN)){if(null==p&&null==(p=wp(e,t)))return"";i[i.length]={t:"Z",v:o.toLowerCase()},h=o.charAt(1)}else o.indexOf("$")>-1&&(o=(o.match(/\$([^-\[\]]*)/)||[])[1]||"$",a1(n)||(i[i.length]={t:"t",v:o}));break;case".":if(null!=p){for(o=d;++a<n.length&&"0"===(d=n.charAt(a));)o+=d;i[i.length]={t:"s",v:o};break}case"0":case"#":for(o=d;++a<n.length&&"0#?.,E+-%".indexOf(d=n.charAt(a))>-1;)o+=d;i[i.length]={t:"n",v:o};break;case"?":for(o=d;n.charAt(++a)===d;)o+=d;i[i.length]={t:d,v:o},h=d;break;case"*":++a,(" "==n.charAt(a)||"*"==n.charAt(a))&&++a;break;case"(":case")":i[i.length]={t:1===r?"t":d,v:d},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(o=d;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)o+=n.charAt(a);i[i.length]={t:"D",v:o};break;case" ":i[i.length]={t:d,v:d},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(d))throw new Error("unrecognized character "+d+" in "+n);i[i.length]={t:"t",v:d},++a}var ee,U=0,J=0;for(a=i.length-1,h="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=T,h="h",U<1&&(U=1);break;case"s":(ee=i[a].v.match(/\.0+$/))&&(J=Math.max(J,ee[0].length-1)),U<3&&(U=3);case"d":case"y":case"M":case"e":h=i[a].t;break;case"m":"s"===h&&(i[a].t="M",U<2&&(U=2));break;case"X":break;case"Z":U<1&&i[a].v.match(/[Hh]/)&&(U=1),U<2&&i[a].v.match(/[Mm]/)&&(U=2),U<3&&i[a].v.match(/[Ss]/)&&(U=3)}switch(U){case 0:break;case 1:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M),p.M>=60&&(p.M=0,++p.H);break;case 2:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M)}var pe,W="";for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=wj(i[a].t.charCodeAt(0),i[a].v,p,J),i[a].t="t";break;case"n":case"?":for(pe=a+1;null!=i[pe]&&("?"===(d=i[pe].t)||"D"===d||(" "===d||"t"===d)&&null!=i[pe+1]&&("?"===i[pe+1].t||"t"===i[pe+1].t&&"/"===i[pe+1].v)||"("===i[a].t&&(" "===d||"n"===d||")"===d)||"t"===d&&("/"===i[pe].v||" "===i[pe].v&&null!=i[pe+1]&&"?"==i[pe+1].t));)i[a].v+=i[pe].v,i[pe]={v:"",t:";"},++pe;W+=i[a].v,a=pe-1;break;case"G":i[a].t="t",i[a].v=x0(e,t)}var Ve,ae,Ae="";if(W.length>0){40==W.charCodeAt(0)?(Ve=e<0&&45===W.charCodeAt(0)?-e:e,ae=Uf("n",W,Ve)):(ae=Uf("n",W,Ve=e<0&&r>1?-e:e),Ve<0&&i[0]&&"t"==i[0].t&&(ae=ae.substr(1),i[0].v="-"+i[0].v)),pe=ae.length-1;var Re=i.length;for(a=0;a<i.length;++a)if(null!=i[a]&&"t"!=i[a].t&&i[a].v.indexOf(".")>-1){Re=a;break}var ke=i.length;if(Re===i.length&&-1===ae.indexOf("E")){for(a=i.length-1;a>=0;--a)null==i[a]||-1==="n?".indexOf(i[a].t)||(pe>=i[a].v.length-1?i[a].v=ae.substr(1+(pe-=i[a].v.length),i[a].v.length):pe<0?i[a].v="":(i[a].v=ae.substr(0,pe+1),pe=-1),i[a].t="t",ke=a);pe>=0&&ke<i.length&&(i[ke].v=ae.substr(0,pe+1)+i[ke].v)}else if(Re!==i.length&&-1===ae.indexOf("E")){for(pe=ae.indexOf(".")-1,a=Re;a>=0;--a)if(null!=i[a]&&-1!=="n?".indexOf(i[a].t)){for(m=i[a].v.indexOf(".")>-1&&a===Re?i[a].v.indexOf(".")-1:i[a].v.length-1,Ae=i[a].v.substr(m+1);m>=0;--m)pe>=0&&("0"===i[a].v.charAt(m)||"#"===i[a].v.charAt(m))&&(Ae=ae.charAt(pe--)+Ae);i[a].v=Ae,i[a].t="t",ke=a}for(pe>=0&&ke<i.length&&(i[ke].v=ae.substr(0,pe+1)+i[ke].v),pe=ae.indexOf(".")+1,a=Re;a<i.length;++a)if(null!=i[a]&&(-1!=="n?(".indexOf(i[a].t)||a===Re)){for(m=i[a].v.indexOf(".")>-1&&a===Re?i[a].v.indexOf(".")+1:0,Ae=i[a].v.substr(0,m);m<i[a].v.length;++m)pe<ae.length&&(Ae+=ae.charAt(pe++));i[a].v=Ae,i[a].t="t",ke=a}}}for(a=0;a<i.length;++a)null!=i[a]&&"n?".indexOf(i[a].t)>-1&&(i[a].v=Uf(i[a].t,i[a].v,Ve=r>1&&e<0&&a>0&&"-"===i[a-1].v?-e:e),i[a].t="t");var Je="";for(a=0;a!==i.length;++a)null!=i[a]&&(Je+=i[a].v);return Je}(i[1],e,t,i[0])}function ad(n,e){if("number"!=typeof e){e=+e||-1;for(var t=0;t<392;++t)if(null!=Un[t]){if(Un[t]==n){e=t;break}}else e<0&&(e=t);e<0&&(e=391)}return Un[e]=n,e}function Nx(n){for(var e=0;392!=e;++e)void 0!==n[e]&&ad(n[e],e)}function c1(){Un=function hj(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',n}()}var $N=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g,Lj=function(){var n={version:"1.2.0"},t=function e(){for(var ae=0,Re=new Array(256),ke=0;256!=ke;++ke)Re[ke]=ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=1&(ae=ke)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1)?-306674912^ae>>>1:ae>>>1;return typeof Int32Array<"u"?new Int32Array(Re):Re}(),i=function r(ae){var Re=0,ke=0,Je=0,at=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Je=0;256!=Je;++Je)at[Je]=ae[Je];for(Je=0;256!=Je;++Je)for(ke=ae[Je],Re=256+Je;Re<4096;Re+=256)ke=at[Re]=ke>>>8^ae[255&ke];var Be=[];for(Je=1;16!=Je;++Je)Be[Je-1]=typeof Int32Array<"u"?at.subarray(256*Je,256*Je+256):at.slice(256*Je,256*Je+256);return Be}(t),o=i[0],a=i[1],d=i[2],h=i[3],p=i[4],m=i[5],y=i[6],T=i[7],M=i[8],R=i[9],D=i[10],U=i[11],J=i[12],ee=i[13],W=i[14];return n.table=t,n.bstr=function pe(ae,Re){for(var ke=-1^Re,Je=0,at=ae.length;Je<at;)ke=ke>>>8^t[255&(ke^ae.charCodeAt(Je++))];return~ke},n.buf=function Ae(ae,Re){for(var ke=-1^Re,Je=ae.length-15,at=0;at<Je;)ke=W[ae[at++]^255&ke]^ee[ae[at++]^ke>>8&255]^J[ae[at++]^ke>>16&255]^U[ae[at++]^ke>>>24]^D[ae[at++]]^R[ae[at++]]^M[ae[at++]]^T[ae[at++]]^y[ae[at++]]^m[ae[at++]]^p[ae[at++]]^h[ae[at++]]^d[ae[at++]]^a[ae[at++]]^o[ae[at++]]^t[ae[at++]];for(Je+=15;at<Je;)ke=ke>>>8^t[255&(ke^ae[at++])];return~ke},n.str=function Ve(ae,Re){for(var ke=-1^Re,Je=0,at=ae.length,Be=0,Ut=0;Je<at;)(Be=ae.charCodeAt(Je++))<128?ke=ke>>>8^t[255&(ke^Be)]:Be<2048?ke=(ke=ke>>>8^t[255&(ke^(192|Be>>6&31))])>>>8^t[255&(ke^(128|63&Be))]:Be>=55296&&Be<57344?(Be=64+(1023&Be),Ut=1023&ae.charCodeAt(Je++),ke=(ke=(ke=(ke=ke>>>8^t[255&(ke^(240|Be>>8&7))])>>>8^t[255&(ke^(128|Be>>2&63))])>>>8^t[255&(ke^(128|Ut>>6&15|(3&Be)<<4))])>>>8^t[255&(ke^(128|63&Ut))]):ke=(ke=(ke=ke>>>8^t[255&(ke^(224|Be>>12&15))])>>>8^t[255&(ke^(128|Be>>6&63))])>>>8^t[255&(ke^(128|63&Be))];return~ke},n}(),Nn=function(){var h,e={};function r(Y){if("/"==Y.charAt(Y.length-1))return-1===Y.slice(0,-1).indexOf("/")?Y:r(Y.slice(0,-1));var ce=Y.lastIndexOf("/");return-1===ce?Y:Y.slice(0,ce+1)}function i(Y){if("/"==Y.charAt(Y.length-1))return i(Y.slice(0,-1));var ce=Y.lastIndexOf("/");return-1===ce?Y:Y.slice(ce+1)}function o(Y,ce){"string"==typeof ce&&(ce=new Date(ce));var ne=ce.getHours();ne=(ne=ne<<6|ce.getMinutes())<<5|ce.getSeconds()>>>1,Y.write_shift(2,ne);var se=ce.getFullYear()-1980;se=(se=se<<4|ce.getMonth()+1)<<5|ce.getDate(),Y.write_shift(2,se)}function d(Y){Go(Y,0);for(var ce={},ne=0;Y.l<=Y.length-4;){var se=Y.read_shift(2),ue=Y.read_shift(2),de=Y.l+ue,Ye={};21589===se&&(1&(ne=Y.read_shift(1))&&(Ye.mtime=Y.read_shift(4)),ue>5&&(2&ne&&(Ye.atime=Y.read_shift(4)),4&ne&&(Ye.ctime=Y.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(1e3*Ye.mtime))),Y.l=de,ce[se]=Ye}return ce}function p(){return h||(h={})}function m(Y,ce){if(80==Y[0]&&75==Y[1])return KL(Y,ce);if(109==(32|Y[0])&&105==(32|Y[1]))return function rte(Y,ce){if("mime-version:"!=Dt(Y.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var ne=ce&&ce.root||"",se=(dr&&Buffer.isBuffer(Y)?Y.toString("binary"):Dt(Y)).split("\r\n"),ue=0,de="";for(ue=0;ue<se.length;++ue)if(/^Content-Location:/i.test(de=se[ue])&&(de=de.slice(de.indexOf("file")),ne||(ne=de.slice(0,de.lastIndexOf("/")+1)),de.slice(0,ne.length)!=ne))for(;ne.length>0&&(ne=(ne=ne.slice(0,ne.length-1)).slice(0,ne.lastIndexOf("/")+1),de.slice(0,ne.length)!=ne););var Ye=(se[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ht="--"+(Ye[1]||""),rt={FileIndex:[],FullPaths:[]};ae(rt);var Zt,Qt=0;for(ue=0;ue<se.length;++ue){var An=se[ue];An!==ht&&An!==ht+"--"||(Qt++&&nte(rt,se.slice(Zt,ue),ne),Zt=ue)}return rt}(Y,ce);if(Y.length<512)throw new Error("CFB file size "+Y.length+" < 512");var ne,ue,de,Ye,ht,tt,se=512,Qe=[],rt=Y.slice(0,512);Go(rt,0);var Zt=function y(Y){if(80==Y[Y.l]&&75==Y[Y.l+1])return[0,0];Y.chk(tn,"Header Signature: "),Y.l+=16;var ce=Y.read_shift(2,"u");return[Y.read_shift(2,"u"),ce]}(rt);switch(ne=Zt[0]){case 3:se=512;break;case 4:se=4096;break;case 0:if(0==Zt[1])return KL(Y,ce);default:throw new Error("Major Version: Expected 3 or 4 saw "+ne)}512!==se&&Go(rt=Y.slice(0,se),28);var Qt=Y.slice(0,se);!function T(Y,ce){var ne;switch(Y.l+=2,ne=Y.read_shift(2)){case 9:if(3!=ce)throw new Error("Sector Shift: Expected 9 saw "+ne);break;case 12:if(4!=ce)throw new Error("Sector Shift: Expected 12 saw "+ne);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ne)}Y.chk("0600","Mini Sector Shift: "),Y.chk("000000000000","Reserved: ")}(rt,ne);var An=rt.read_shift(4,"i");if(3===ne&&0!==An)throw new Error("# Directory Sectors: Expected 0 saw "+An);rt.l+=4,Ye=rt.read_shift(4,"i"),rt.l+=4,rt.chk("00100000","Mini Stream Cutoff Size: "),ht=rt.read_shift(4,"i"),ue=rt.read_shift(4,"i"),tt=rt.read_shift(4,"i"),de=rt.read_shift(4,"i");for(var Xt=-1,dn=0;dn<109&&!((Xt=rt.read_shift(4,"i"))<0);++dn)Qe[dn]=Xt;var Xn=function M(Y,ce){for(var ne=Math.ceil(Y.length/ce)-1,se=[],ue=1;ue<ne;++ue)se[ue-1]=Y.slice(ue*ce,(ue+1)*ce);return se[ne-1]=Y.slice(ne*ce),se}(Y,se);U(tt,de,Xn,se,Qe);var Oi=function ee(Y,ce,ne,se){var ue=Y.length,de=[],Ye=[],ht=[],tt=[],Qe=se-1,rt=0,Zt=0,Qt=0,An=0;for(rt=0;rt<ue;++rt)if(ht=[],(Qt=rt+ce)>=ue&&(Qt-=ue),!Ye[Qt]){tt=[];var Xt=[];for(Zt=Qt;Zt>=0;){Xt[Zt]=!0,Ye[Zt]=!0,ht[ht.length]=Zt,tt.push(Y[Zt]);var dn=ne[Math.floor(4*Zt/se)];if(se<4+(An=4*Zt&Qe))throw new Error("FAT boundary crossed: "+Zt+" 4 "+se);if(!Y[dn]||Xt[Zt=b0(Y[dn],An)])break}de[Qt]={nodes:ht,data:h5([tt])}}return de}(Xn,Ye,Qe,se);Oi[Ye].name="!Directory",ue>0&&ht!==Ut&&(Oi[ht].name="!MiniFAT"),Oi[Qe[0]].name="!FAT",Oi.fat_addrs=Qe,Oi.ssz=se;var eo=[],Wc=[],dw=[];(function W(Y,ce,ne,se,ue,de,Ye,ht){for(var An,tt=0,Qe=se.length?2:0,rt=ce[Y].data,Zt=0,Qt=0;Zt<rt.length;Zt+=128){var Xt=rt.slice(Zt,Zt+128);Go(Xt,64),Qt=Xt.read_shift(2),An=nT(Xt,0,Qt-Qe),se.push(An);var dn={name:An,type:Xt.read_shift(1),color:Xt.read_shift(1),L:Xt.read_shift(4,"i"),R:Xt.read_shift(4,"i"),C:Xt.read_shift(4,"i"),clsid:Xt.read_shift(16),state:Xt.read_shift(4,"i"),start:0,size:0};0!==Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2)&&(dn.ct=pe(Xt,Xt.l-8)),0!==Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2)&&(dn.mt=pe(Xt,Xt.l-8)),dn.start=Xt.read_shift(4,"i"),dn.size=Xt.read_shift(4,"i"),dn.size<0&&dn.start<0&&(dn.size=dn.type=0,dn.start=Ut,dn.name=""),5===dn.type?(tt=dn.start,ue>0&&tt!==Ut&&(ce[tt].name="!StreamData")):dn.size>=4096?(dn.storage="fat",void 0===ce[dn.start]&&(ce[dn.start]=J(ne,dn.start,ce.fat_addrs,ce.ssz)),ce[dn.start].name=dn.name,dn.content=ce[dn.start].data.slice(0,dn.size)):(dn.storage="minifat",dn.size<0?dn.size=0:tt!==Ut&&dn.start!==Ut&&ce[tt]&&(dn.content=D(dn,ce[tt].data,(ce[ht]||{}).data))),dn.content&&Go(dn.content,0),de[An]=dn,Ye.push(dn)}})(Ye,Oi,Xn,eo,ue,{},Wc,ht),function R(Y,ce,ne){for(var se=0,ue=0,de=0,Ye=0,ht=0,tt=ne.length,Qe=[],rt=[];se<tt;++se)Qe[se]=rt[se]=se,ce[se]=ne[se];for(;ht<rt.length;++ht)ue=Y[se=rt[ht]].L,de=Y[se].R,Ye=Y[se].C,Qe[se]===se&&(-1!==ue&&Qe[ue]!==ue&&(Qe[se]=Qe[ue]),-1!==de&&Qe[de]!==de&&(Qe[se]=Qe[de])),-1!==Ye&&(Qe[Ye]=se),-1!==ue&&se!=Qe[se]&&(Qe[ue]=Qe[se],rt.lastIndexOf(ue)<ht&&rt.push(ue)),-1!==de&&se!=Qe[se]&&(Qe[de]=Qe[se],rt.lastIndexOf(de)<ht&&rt.push(de));for(se=1;se<tt;++se)Qe[se]===se&&(-1!==de&&Qe[de]!==de?Qe[se]=Qe[de]:-1!==ue&&Qe[ue]!==ue&&(Qe[se]=Qe[ue]));for(se=1;se<tt;++se)if(0!==Y[se].type){if((ht=se)!=Qe[ht])do{ce[se]=ce[ht=Qe[ht]]+"/"+ce[se]}while(0!==ht&&-1!==Qe[ht]&&ht!=Qe[ht]);Qe[se]=-1}for(ce[0]+="/",se=1;se<tt;++se)2!==Y[se].type&&(ce[se]+="/")}(Wc,dw,eo),eo.shift();var fw={FileIndex:Wc,FullPaths:dw};return ce&&ce.raw&&(fw.raw={header:Qt,sectors:Xn}),fw}function D(Y,ce,ne){for(var ue=Y.size,de=[],Ye=Y.start;ne&&ue>0&&Ye>=0;)de.push(ce.slice(Ye*Be,Ye*Be+Be)),ue-=Be,Ye=b0(ne,4*Ye);return 0===de.length?dt(0):Io(de).slice(0,Y.size)}function U(Y,ce,ne,se,ue){var de=Ut;if(Y===Ut){if(0!==ce)throw new Error("DIFAT chain shorter than expected")}else if(-1!==Y){var Ye=ne[Y],ht=(se>>>2)-1;if(!Ye)return;for(var tt=0;tt<ht&&(de=b0(Ye,4*tt))!==Ut;++tt)ue.push(de);U(b0(Ye,se-4),ce-1,ne,se,ue)}}function J(Y,ce,ne,se,ue){var de=[],Ye=[];ue||(ue=[]);var ht=se-1,tt=0,Qe=0;for(tt=ce;tt>=0;){ue[tt]=!0,de[de.length]=tt,Ye.push(Y[tt]);var rt=ne[Math.floor(4*tt/se)];if(se<4+(Qe=4*tt&ht))throw new Error("FAT boundary crossed: "+tt+" 4 "+se);if(!Y[rt])break;tt=b0(Y[rt],Qe)}return{nodes:de,data:h5([Ye])}}function pe(Y,ce){return new Date(1e3*(Do(Y,ce+4)/1e7*Math.pow(2,32)+Do(Y,ce)/1e7-11644473600))}function ae(Y,ce){var ne=ce||{},se=ne.root||"Root Entry";if(Y.FullPaths||(Y.FullPaths=[]),Y.FileIndex||(Y.FileIndex=[]),Y.FullPaths.length!==Y.FileIndex.length)throw new Error("inconsistent CFB structure");0===Y.FullPaths.length&&(Y.FullPaths[0]=se+"/",Y.FileIndex[0]={name:se,type:5}),ne.CLSID&&(Y.FileIndex[0].clsid=ne.CLSID),function Re(Y){var ce="\x01Sh33tJ5";if(!Nn.find(Y,"/"+ce)){var ne=dt(4);ne[0]=55,ne[1]=ne[3]=50,ne[2]=54,Y.FileIndex.push({name:ce,type:2,content:ne,size:4,L:69,R:69,C:69}),Y.FullPaths.push(Y.FullPaths[0]+ce),ke(Y)}}(Y)}function ke(Y,ce){ae(Y);for(var ne=!1,se=!1,ue=Y.FullPaths.length-1;ue>=0;--ue){var de=Y.FileIndex[ue];switch(de.type){case 0:se?ne=!0:(Y.FileIndex.pop(),Y.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(de.R*de.L*de.C)&&(ne=!0),de.R>-1&&de.L>-1&&de.R==de.L&&(ne=!0);break;default:ne=!0}}if(ne||ce){var Ye=new Date(1987,1,19),ht=0,tt=Object.create?Object.create(null):{},Qe=[];for(ue=0;ue<Y.FullPaths.length;++ue)tt[Y.FullPaths[ue]]=!0,0!==Y.FileIndex[ue].type&&Qe.push([Y.FullPaths[ue],Y.FileIndex[ue]]);for(ue=0;ue<Qe.length;++ue){var rt=r(Qe[ue][0]);(se=tt[rt])||(Qe.push([rt,{name:i(rt).replace("/",""),type:1,clsid:wt,ct:Ye,mt:Ye,content:null}]),tt[rt]=!0)}for(Qe.sort(function(An,Xt){return function t(Y,ce){for(var ne=Y.split("/"),se=ce.split("/"),ue=0,de=0,Ye=Math.min(ne.length,se.length);ue<Ye;++ue){if(de=ne[ue].length-se[ue].length)return de;if(ne[ue]!=se[ue])return ne[ue]<se[ue]?-1:1}return ne.length-se.length}(An[0],Xt[0])}),Y.FullPaths=[],Y.FileIndex=[],ue=0;ue<Qe.length;++ue)Y.FullPaths[ue]=Qe[ue][0],Y.FileIndex[ue]=Qe[ue][1];for(ue=0;ue<Qe.length;++ue){var Zt=Y.FileIndex[ue],Qt=Y.FullPaths[ue];if(Zt.name=i(Qt).replace("/",""),Zt.L=Zt.R=Zt.C=-(Zt.color=1),Zt.size=Zt.content?Zt.content.length:0,Zt.start=0,Zt.clsid=Zt.clsid||wt,0===ue)Zt.C=Qe.length>1?1:-1,Zt.size=0,Zt.type=5;else if("/"==Qt.slice(-1)){for(ht=ue+1;ht<Qe.length&&r(Y.FullPaths[ht])!=Qt;++ht);for(Zt.C=ht>=Qe.length?-1:ht,ht=ue+1;ht<Qe.length&&r(Y.FullPaths[ht])!=r(Qt);++ht);Zt.R=ht>=Qe.length?-1:ht,Zt.type=1}else r(Y.FullPaths[ue+1]||"")==r(Qt)&&(Zt.R=ue+1),Zt.type=2}}}function Je(Y,ce){var ne=ce||{};if("mad"==ne.fileType)return function ite(Y,ce){for(var ne=ce||{},se=ne.boundary||"SheetJS",ue=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(se="------="+se).slice(2)+'"',"","",""],de=Y.FullPaths[0],Ye=de,ht=Y.FileIndex[0],tt=1;tt<Y.FullPaths.length;++tt)if(Ye=Y.FullPaths[tt].slice(de.length),(ht=Y.FileIndex[tt]).size&&ht.content&&"\x01Sh33tJ5"!=Ye){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Xn){return"_x"+Xn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Xn){return"_u"+Xn.charCodeAt(0).toString(16)+"_"});for(var Qe=ht.content,rt=dr&&Buffer.isBuffer(Qe)?Qe.toString("binary"):Dt(Qe),Zt=0,Qt=Math.min(1024,rt.length),An=0,Xt=0;Xt<=Qt;++Xt)(An=rt.charCodeAt(Xt))>=32&&An<128&&++Zt;var dn=Zt>=4*Qt/5;ue.push(se),ue.push("Content-Location: "+(ne.root||"file:///C:/SheetJS/")+Ye),ue.push("Content-Transfer-Encoding: "+(dn?"quoted-printable":"base64")),ue.push("Content-Type: "+Qee(ht,Ye)),ue.push(""),ue.push(dn?ete(rt):Xee(rt))}return ue.push(se+"--\r\n"),ue.join("\r\n")}(Y,ne);if("zip"===(ke(Y),ne.fileType))return function Jee(Y,ce){var ne=ce||{},se=[],ue=[],de=dt(1),Ye=ne.compression?8:0,ht=0,Qe=0,rt=0,Zt=0,Qt=0,An=Y.FullPaths[0],Xt=An,dn=Y.FileIndex[0],Xn=[],Oi=0;for(Qe=1;Qe<Y.FullPaths.length;++Qe)if(Xt=Y.FullPaths[Qe].slice(An.length),(dn=Y.FileIndex[Qe]).size&&dn.content&&"\x01Sh33tJ5"!=Xt){var vc=Zt,eo=dt(Xt.length);for(rt=0;rt<Xt.length;++rt)eo.write_shift(1,127&Xt.charCodeAt(rt));eo=eo.slice(0,eo.l),Xn[Qt]=Lj.buf(dn.content,0);var Wc=dn.content;8==Ye&&(Wc=xe(Wc)),(de=dt(30)).write_shift(4,67324752),de.write_shift(2,20),de.write_shift(2,ht),de.write_shift(2,Ye),dn.mt?o(de,dn.mt):de.write_shift(4,0),de.write_shift(-4,8&ht?0:Xn[Qt]),de.write_shift(4,8&ht?0:Wc.length),de.write_shift(4,8&ht?0:dn.content.length),de.write_shift(2,eo.length),de.write_shift(2,0),Zt+=de.length,se.push(de),Zt+=eo.length,se.push(eo),Zt+=Wc.length,se.push(Wc),8&ht&&((de=dt(12)).write_shift(-4,Xn[Qt]),de.write_shift(4,Wc.length),de.write_shift(4,dn.content.length),Zt+=de.l,se.push(de)),(de=dt(46)).write_shift(4,33639248),de.write_shift(2,0),de.write_shift(2,20),de.write_shift(2,ht),de.write_shift(2,Ye),de.write_shift(4,0),de.write_shift(-4,Xn[Qt]),de.write_shift(4,Wc.length),de.write_shift(4,dn.content.length),de.write_shift(2,eo.length),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(4,0),de.write_shift(4,vc),Oi+=de.l,ue.push(de),Oi+=eo.length,ue.push(eo),++Qt}return(de=dt(22)).write_shift(4,101010256),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,Qt),de.write_shift(2,Qt),de.write_shift(4,Oi),de.write_shift(4,Zt),de.write_shift(2,0),Io([Io(se),Io(ue),de])}(Y,ne);var se=function(An){for(var Xt=0,dn=0,Xn=0;Xn<An.FileIndex.length;++Xn){var Oi=An.FileIndex[Xn];if(Oi.content){var vc=Oi.content.length;vc>0&&(vc<4096?Xt+=vc+63>>6:dn+=vc+511>>9)}}for(var eo=An.FullPaths.length+3>>2,dw=Xt+127>>7,fw=(Xt+7>>3)+dn+eo+dw,L0=fw+127>>7,o3=L0<=109?0:Math.ceil((L0-109)/127);fw+L0+o3+127>>7>L0;)o3=++L0<=109?0:Math.ceil((L0-109)/127);var Gf=[1,o3,L0,dw,eo,dn,Xt,0];return An.FileIndex[0].size=Xt<<6,Gf[7]=(An.FileIndex[0].start=Gf[0]+Gf[1]+Gf[2]+Gf[3]+Gf[4]+Gf[5])+(Gf[6]+7>>3),Gf}(Y),ue=dt(se[7]<<9),de=0,Ye=0;for(de=0;de<8;++de)ue.write_shift(1,$t[de]);for(de=0;de<8;++de)ue.write_shift(2,0);for(ue.write_shift(2,62),ue.write_shift(2,3),ue.write_shift(2,65534),ue.write_shift(2,9),ue.write_shift(2,6),de=0;de<3;++de)ue.write_shift(2,0);for(ue.write_shift(4,0),ue.write_shift(4,se[2]),ue.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),ue.write_shift(4,0),ue.write_shift(4,4096),ue.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:Ut),ue.write_shift(4,se[3]),ue.write_shift(-4,se[1]?se[0]-1:Ut),ue.write_shift(4,se[1]),de=0;de<109;++de)ue.write_shift(-4,de<se[2]?se[1]+de:-1);if(se[1])for(Ye=0;Ye<se[1];++Ye){for(;de<236+127*Ye;++de)ue.write_shift(-4,de<se[2]?se[1]+de:-1);ue.write_shift(-4,Ye===se[1]-1?Ut:Ye+1)}var ht=function(An){for(Ye+=An;de<Ye-1;++de)ue.write_shift(-4,de+1);An&&(++de,ue.write_shift(-4,Ut))};for(Ye=de=0,Ye+=se[1];de<Ye;++de)ue.write_shift(-4,Ct.DIFSECT);for(Ye+=se[2];de<Ye;++de)ue.write_shift(-4,Ct.FATSECT);ht(se[3]),ht(se[4]);for(var tt=0,Qe=0,rt=Y.FileIndex[0];tt<Y.FileIndex.length;++tt)(rt=Y.FileIndex[tt]).content&&!((Qe=rt.content.length)<4096)&&(rt.start=Ye,ht(Qe+511>>9));for(ht(se[6]+7>>3);511&ue.l;)ue.write_shift(-4,Ct.ENDOFCHAIN);for(Ye=de=0,tt=0;tt<Y.FileIndex.length;++tt)(rt=Y.FileIndex[tt]).content&&(Qe=rt.content.length)&&!(Qe>=4096)&&(rt.start=Ye,ht(Qe+63>>6));for(;511&ue.l;)ue.write_shift(-4,Ct.ENDOFCHAIN);for(de=0;de<se[4]<<2;++de){var Zt=Y.FullPaths[de];if(Zt&&0!==Zt.length){rt=Y.FileIndex[de],0===de&&(rt.start=rt.size?rt.start-1:Ut);var Qt=0===de&&ne.root||rt.name;if(Qe=2*(Qt.length+1),ue.write_shift(64,Qt,"utf16le"),ue.write_shift(2,Qe),ue.write_shift(1,rt.type),ue.write_shift(1,rt.color),ue.write_shift(-4,rt.L),ue.write_shift(-4,rt.R),ue.write_shift(-4,rt.C),rt.clsid)ue.write_shift(16,rt.clsid,"hex");else for(tt=0;tt<4;++tt)ue.write_shift(4,0);ue.write_shift(4,rt.state||0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,rt.start),ue.write_shift(4,rt.size),ue.write_shift(4,0)}else{for(tt=0;tt<17;++tt)ue.write_shift(4,0);for(tt=0;tt<3;++tt)ue.write_shift(4,-1);for(tt=0;tt<12;++tt)ue.write_shift(4,0)}}for(de=1;de<Y.FileIndex.length;++de)if((rt=Y.FileIndex[de]).size>=4096)if(ue.l=rt.start+1<<9,dr&&Buffer.isBuffer(rt.content))rt.content.copy(ue,ue.l,0,rt.size),ue.l+=rt.size+511&-512;else{for(tt=0;tt<rt.size;++tt)ue.write_shift(1,rt.content[tt]);for(;511&tt;++tt)ue.write_shift(1,0)}for(de=1;de<Y.FileIndex.length;++de)if((rt=Y.FileIndex[de]).size>0&&rt.size<4096)if(dr&&Buffer.isBuffer(rt.content))rt.content.copy(ue,ue.l,0,rt.size),ue.l+=rt.size+63&-64;else{for(tt=0;tt<rt.size;++tt)ue.write_shift(1,rt.content[tt]);for(;63&tt;++tt)ue.write_shift(1,0)}if(dr)ue.l=ue.length;else for(;ue.l<ue.length;)ue.write_shift(1,0);return ue}e.version="1.2.1";var bt,Be=64,Ut=-2,tn="d0cf11e0a1b11ae1",$t=[208,207,17,224,161,177,26,225],wt="00000000000000000000000000000000",Ct={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Ut,FREESECT:-1,HEADER_SIGNATURE:tn,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:wt,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Dt(Y){for(var ce=new Array(Y.length),ne=0;ne<Y.length;++ne)ce[ne]=String.fromCharCode(Y[ne]);return ce.join("")}function xe(Y){return bt?bt.deflateRawSync(Y):mr(Y)}for(var Y,ce,Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],mt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Bt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Lt=typeof Uint8Array<"u",St=Lt?new Uint8Array(256):[],Qn=0;Qn<256;++Qn)St[Qn]=(void 0,255&((ce=139536&((Y=Qn)<<1|Y<<11)|558144&(Y<<5|Y<<15))>>16|ce>>8|ce));function ye(Y,ce){var ne=St[255&Y];return ce<=8?ne>>>8-ce:(ne=ne<<8|St[Y>>8&255],ce<=16?ne>>>16-ce:(ne=ne<<8|St[Y>>16&255])>>>24-ce)}function Xr(Y,ce){var ne=7&ce,se=ce>>>3;return(Y[se]|(ne<=6?0:Y[se+1]<<8))>>>ne&3}function yr(Y,ce){var ne=7&ce,se=ce>>>3;return(Y[se]|(ne<=5?0:Y[se+1]<<8))>>>ne&7}function xr(Y,ce){var ne=7&ce,se=ce>>>3;return(Y[se]|(ne<=3?0:Y[se+1]<<8))>>>ne&31}function _n(Y,ce){var ne=7&ce,se=ce>>>3;return(Y[se]|(ne<=1?0:Y[se+1]<<8))>>>ne&127}function Us(Y,ce,ne){var se=7&ce,ue=ce>>>3,Ye=Y[ue]>>>se;return ne<8-se||(Ye|=Y[ue+1]<<8-se,ne<16-se)||(Ye|=Y[ue+2]<<16-se,ne<24-se)||(Ye|=Y[ue+3]<<24-se),Ye&(1<<ne)-1}function Ol(Y,ce,ne){var se=7&ce,ue=ce>>>3;return se<=5?Y[ue]|=(7&ne)<<se:(Y[ue]|=ne<<se&255,Y[ue+1]=(7&ne)>>8-se),ce+3}function pd(Y,ce,ne){return Y[ce>>>3]|=ne=(1&ne)<<(7&ce),ce+1}function $f(Y,ce,ne){var ue=ce>>>3;return Y[ue]|=255&(ne<<=7&ce),Y[ue+1]=ne>>>=8,ce+8}function lw(Y,ce,ne){var ue=ce>>>3;return Y[ue]|=255&(ne<<=7&ce),Y[ue+1]=255&(ne>>>=8),Y[ue+2]=ne>>>8,ce+16}function Dp(Y,ce){var ne=Y.length,se=2*ne>ce?2*ne:ce+5,ue=0;if(ne>=ce)return Y;if(dr){var de=AN(se);if(Y.copy)Y.copy(de);else for(;ue<Y.length;++ue)de[ue]=Y[ue];return de}if(Lt){var Ye=new Uint8Array(se);if(Ye.set)Ye.set(Y);else for(;ue<ne;++ue)Ye[ue]=Y[ue];return Ye}return Y.length=se,Y}function Gc(Y){for(var ce=new Array(Y),ne=0;ne<Y;++ne)ce[ne]=0;return ce}function zf(Y,ce,ne){var se=1,ue=0,de=0,Ye=0,ht=0,tt=Y.length,Qe=Lt?new Uint16Array(32):Gc(32);for(de=0;de<32;++de)Qe[de]=0;for(de=tt;de<ne;++de)Y[de]=0;tt=Y.length;var rt=Lt?new Uint16Array(tt):Gc(tt);for(de=0;de<tt;++de)Qe[ue=Y[de]]++,se<ue&&(se=ue),rt[de]=0;for(Qe[0]=0,de=1;de<=se;++de)Qe[de+16]=ht=ht+Qe[de-1]<<1;for(de=0;de<tt;++de)0!=(ht=Y[de])&&(rt[de]=Qe[ht+16]++);var Zt=0;for(de=0;de<tt;++de)if(0!=(Zt=Y[de]))for(ht=ye(rt[de],se)>>se-Zt,Ye=(1<<se+4-Zt)-1;Ye>=0;--Ye)ce[ht|Ye<<Zt]=15&Zt|de<<4;return se}var kp=Lt?new Uint16Array(512):Gc(512),uw=Lt?new Uint16Array(32):Gc(32);if(!Lt){for(var za=0;za<512;++za)kp[za]=0;for(za=0;za<32;++za)uw[za]=0}!function(){for(var Y=[],ce=0;ce<32;ce++)Y.push(5);zf(Y,uw,32);var ne=[];for(ce=0;ce<=143;ce++)ne.push(8);for(;ce<=255;ce++)ne.push(9);for(;ce<=279;ce++)ne.push(7);for(;ce<=287;ce++)ne.push(8);zf(ne,kp,288)}();var gd=function(){for(var ce=Lt?new Uint8Array(32768):[],ne=0,se=0;ne<Bt.length-1;++ne)for(;se<Bt[ne+1];++se)ce[se]=ne;for(;se<32768;++se)ce[se]=29;var ue=Lt?new Uint8Array(259):[];for(ne=0,se=0;ne<mt.length-1;++ne)for(;se<mt[ne+1];++se)ue[se]=ne;return function(tt,Qe){return tt.length<8?function de(ht,tt){for(var Qe=0;Qe<ht.length;){var rt=Math.min(65535,ht.length-Qe);for(tt.write_shift(1,+(Qe+rt==ht.length)),tt.write_shift(2,rt),tt.write_shift(2,65535&~rt);rt-- >0;)tt[tt.l++]=ht[Qe++]}return tt.l}(tt,Qe):function Ye(ht,tt){for(var Qe=0,rt=0,Zt=Lt?new Uint16Array(32768):[];rt<ht.length;){var Qt=Math.min(65535,ht.length-rt);if(Qt<10){for(7&(Qe=Ol(tt,Qe,+(rt+Qt==ht.length)))&&(Qe+=8-(7&Qe)),tt.l=Qe/8|0,tt.write_shift(2,Qt),tt.write_shift(2,65535&~Qt);Qt-- >0;)tt[tt.l++]=ht[rt++];Qe=8*tt.l}else{Qe=Ol(tt,Qe,+(rt+Qt==ht.length)+2);for(var An=0;Qt-- >0;){var Xt=ht[rt],dn=-1,Xn=0;if((dn=Zt[An=32767&(An<<5^Xt)])&&((dn|=-32768&rt)>rt&&(dn-=32768),dn<rt))for(;ht[dn+Xn]==ht[rt+Xn]&&Xn<250;)++Xn;if(Xn>2){(Xt=ue[Xn])<=22?Qe=$f(tt,Qe,St[Xt+1]>>1)-1:($f(tt,Qe,3),$f(tt,Qe+=5,St[Xt-23]>>5),Qe+=3);var Oi=Xt<8?0:Xt-4>>2;Oi>0&&(lw(tt,Qe,Xn-mt[Xt]),Qe+=Oi),Qe=$f(tt,Qe,St[Xt=ce[rt-dn]]>>3),Qe-=3;var vc=Xt<4?0:Xt-2>>1;vc>0&&(lw(tt,Qe,rt-dn-Bt[Xt]),Qe+=vc);for(var eo=0;eo<Xn;++eo)Zt[An]=32767&rt,An=32767&(An<<5^ht[rt]),++rt;Qt-=Xn-1}else Xt<=143?Xt+=48:Qe=pd(tt,Qe,1),Qe=$f(tt,Qe,St[Xt]),Zt[An]=32767&rt,++rt}Qe=$f(tt,Qe,0)-1}}return tt.l=(Qe+7)/8|0,tt.l}(tt,Qe)}}();function mr(Y){var ce=dt(50+Math.floor(1.1*Y.length)),ne=gd(Y,ce);return ce.slice(0,ne)}var Bs=Lt?new Uint16Array(32768):Gc(32768),Fl=Lt?new Uint16Array(32768):Gc(32768),co=Lt?new Uint16Array(128):Gc(128),N0=1,zL=1;function Wee(Y,ce){var ne=xr(Y,ce)+257,se=xr(Y,ce+=5)+1,ue=function ei(Y,ce){var ne=7&ce,se=ce>>>3;return(Y[se]|(ne<=4?0:Y[se+1]<<8))>>>ne&15}(Y,ce+=5)+4;ce+=4;for(var de=0,Ye=Lt?new Uint8Array(19):Gc(19),ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tt=1,Qe=Lt?new Uint8Array(8):Gc(8),rt=Lt?new Uint8Array(8):Gc(8),Zt=Ye.length,Qt=0;Qt<ue;++Qt)Ye[Ee[Qt]]=de=yr(Y,ce),tt<de&&(tt=de),Qe[de]++,ce+=3;var An=0;for(Qe[0]=0,Qt=1;Qt<=tt;++Qt)rt[Qt]=An=An+Qe[Qt-1]<<1;for(Qt=0;Qt<Zt;++Qt)0!=(An=Ye[Qt])&&(ht[Qt]=rt[An]++);var Xt=0;for(Qt=0;Qt<Zt;++Qt)if(0!=(Xt=Ye[Qt])){An=St[ht[Qt]]>>8-Xt;for(var dn=(1<<7-Xt)-1;dn>=0;--dn)co[An|dn<<Xt]=7&Xt|Qt<<3}var Xn=[];for(tt=1;Xn.length<ne+se;)switch(An=co[_n(Y,ce)],ce+=7&An,An>>>=3){case 16:for(de=3+Xr(Y,ce),ce+=2,An=Xn[Xn.length-1];de-- >0;)Xn.push(An);break;case 17:for(de=3+yr(Y,ce),ce+=3;de-- >0;)Xn.push(0);break;case 18:for(de=11+_n(Y,ce),ce+=7;de-- >0;)Xn.push(0);break;default:Xn.push(An),tt<An&&(tt=An)}var Oi=Xn.slice(0,ne),vc=Xn.slice(ne);for(Qt=ne;Qt<286;++Qt)Oi[Qt]=0;for(Qt=se;Qt<30;++Qt)vc[Qt]=0;return N0=zf(Oi,Bs,286),zL=zf(vc,Fl,30),ce}function GL(Y,ce){var se=function Kee(Y,ce){if(3==Y[0]&&!(3&Y[1]))return[yp(ce),2];for(var ne=0,se=0,ue=AN(ce||1<<18),de=0,Ye=ue.length>>>0,ht=0,tt=0;!(1&se);)if(se=yr(Y,ne),ne+=3,se>>>1)for(se>>1==1?(ht=9,tt=5):(ne=Wee(Y,ne),ht=N0,tt=zL);;){!ce&&Ye<de+32767&&(Ye=(ue=Dp(ue,de+32767)).length);var rt=Us(Y,ne,ht),Zt=se>>>1==1?kp[rt]:Bs[rt];if(ne+=15&Zt,(Zt>>>=4)>>>8&255){if(256==Zt)break;var Qt=(Zt-=257)<8?0:Zt-4>>2;Qt>5&&(Qt=0);var An=de+mt[Zt];Qt>0&&(An+=Us(Y,ne,Qt),ne+=Qt),rt=Us(Y,ne,tt),ne+=15&(Zt=se>>>1==1?uw[rt]:Fl[rt]);var Xt=(Zt>>>=4)<4?0:Zt-2>>1,dn=Bt[Zt];for(Xt>0&&(dn+=Us(Y,ne,Xt),ne+=Xt),!ce&&Ye<An&&(Ye=(ue=Dp(ue,An+100)).length);de<An;)ue[de]=ue[de-dn],++de}else ue[de++]=Zt}else{7&ne&&(ne+=8-(7&ne));var Qe=Y[ne>>>3]|Y[1+(ne>>>3)]<<8;if(ne+=32,Qe>0)for(!ce&&Ye<de+Qe&&(Ye=(ue=Dp(ue,de+Qe)).length);Qe-- >0;)ue[de++]=Y[ne>>>3],ne+=8}return ce?[ue,ne+7>>>3]:[ue.slice(0,de),ne+7>>>3]}(Y.slice(Y.l||0),ce);return Y.l+=se[1],se[0]}function WL(Y,ce){if(!Y)throw new Error(ce);typeof console<"u"&&console.error(ce)}function KL(Y,ce){var ne=Y;Go(ne,0);var de={FileIndex:[],FullPaths:[]};ae(de,{root:ce.root});for(var Ye=ne.length-4;(80!=ne[Ye]||75!=ne[Ye+1]||5!=ne[Ye+2]||6!=ne[Ye+3])&&Ye>=0;)--Ye;ne.l=Ye+4,ne.l+=4;var ht=ne.read_shift(2);ne.l+=6;var tt=ne.read_shift(4);for(ne.l=tt,Ye=0;Ye<ht;++Ye){ne.l+=20;var Qe=ne.read_shift(4),rt=ne.read_shift(4),Zt=ne.read_shift(2),Qt=ne.read_shift(2),An=ne.read_shift(2);ne.l+=8;var Xt=ne.read_shift(4),dn=d(ne.slice(ne.l+Zt,ne.l+Zt+Qt));ne.l+=Zt+Qt+An;var Xn=ne.l;ne.l=Xt+4,Yee(ne,Qe,rt,de,dn),ne.l=Xn}return de}function Yee(Y,ce,ne,se,ue){Y.l+=2;var de=Y.read_shift(2),Ye=Y.read_shift(2),ht=function a(Y){var ce=65535&Y.read_shift(2),ne=65535&Y.read_shift(2),se=new Date,ue=31&ne,de=15&(ne>>>=5);ne>>>=4,se.setMilliseconds(0),se.setFullYear(ne+1980),se.setMonth(de-1),se.setDate(ue);var Ye=31&ce,ht=63&(ce>>>=5);return se.setHours(ce>>>=6),se.setMinutes(ht),se.setSeconds(Ye<<1),se}(Y);if(8257&de)throw new Error("Unsupported ZIP encryption");Y.read_shift(4);for(var Qe=Y.read_shift(4),rt=Y.read_shift(4),Zt=Y.read_shift(2),Qt=Y.read_shift(2),An="",Xt=0;Xt<Zt;++Xt)An+=String.fromCharCode(Y[Y.l++]);if(Qt){var dn=d(Y.slice(Y.l,Y.l+Qt));(dn[21589]||{}).mt&&(ht=dn[21589].mt),((ue||{})[21589]||{}).mt&&(ht=ue[21589].mt)}Y.l+=Qt;var Xn=Y.slice(Y.l,Y.l+Qe);switch(Ye){case 8:Xn=function Ge(Y,ce){if(!bt)return GL(Y,ce);var se=new(0,bt.InflateRaw),ue=se._processChunk(Y.slice(Y.l),se._finishFlushFlag);return Y.l+=se.bytesRead,ue}(Y,rt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var Oi=!1;8&de&&(134695760==Y.read_shift(4)&&(Y.read_shift(4),Oi=!0),Qe=Y.read_shift(4),rt=Y.read_shift(4)),Qe!=ce&&WL(Oi,"Bad compressed size: "+ce+" != "+Qe),rt!=ne&&WL(Oi,"Bad uncompressed size: "+ne+" != "+rt),s3(se,An,Xn,{unsafe:!0,mt:ht})}var AT={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Qee(Y,ce){if(Y.ctype)return Y.ctype;var ne=Y.name||"",se=ne.match(/\.([^\.]+)$/);return se&&AT[se[1]]||ce&&(se=(ne=ce).match(/[\.\\]([^\.\\])+$/))&&AT[se[1]]?AT[se[1]]:"application/octet-stream"}function Xee(Y){for(var ce=kx(Y),ne=[],se=0;se<ce.length;se+=76)ne.push(ce.slice(se,se+76));return ne.join("\r\n")+"\r\n"}function ete(Y){var ce=Y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Qe){var rt=Qe.charCodeAt(0).toString(16).toUpperCase();return"="+(1==rt.length?"0"+rt:rt)});"\n"==(ce=ce.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(ce="=0D"+ce.slice(1));for(var ne=[],se=(ce=ce.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),ue=0;ue<se.length;++ue){var de=se[ue];if(0!=de.length)for(var Ye=0;Ye<de.length;){var ht=76,tt=de.slice(Ye,Ye+ht);"="==tt.charAt(ht-1)?ht--:"="==tt.charAt(ht-2)?ht-=2:"="==tt.charAt(ht-3)&&(ht-=3),tt=de.slice(Ye,Ye+ht),(Ye+=ht)<de.length&&(tt+="="),ne.push(tt)}else ne.push("")}return ne.join("\r\n")}function nte(Y,ce,ne){for(var Ye,se="",ue="",de="",ht=0;ht<10;++ht){var tt=ce[ht];if(!tt||tt.match(/^\s*$/))break;var Qe=tt.match(/^(.*?):\s*([^\s].*)$/);if(Qe)switch(Qe[1].toLowerCase()){case"content-location":se=Qe[2].trim();break;case"content-type":de=Qe[2].trim();break;case"content-transfer-encoding":ue=Qe[2].trim()}}switch(++ht,ue.toLowerCase()){case"base64":Ye=qc(jc(ce.slice(ht).join("")));break;case"quoted-printable":Ye=function tte(Y){for(var ce=[],ne=0;ne<Y.length;++ne){for(var se=Y[ne];ne<=Y.length&&"="==se.charAt(se.length-1);)se=se.slice(0,se.length-1)+Y[++ne];ce.push(se)}for(var ue=0;ue<ce.length;++ue)ce[ue]=ce[ue].replace(/[=][0-9A-Fa-f]{2}/g,function(de){return String.fromCharCode(parseInt(de.slice(1),16))});return qc(ce.join("\r\n"))}(ce.slice(ht));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ue)}var rt=s3(Y,se.slice(ne.length),Ye,{unsafe:!0});de&&(rt.ctype=de)}function s3(Y,ce,ne,se){var ue=se&&se.unsafe;ue||ae(Y);var de=!ue&&Nn.find(Y,ce);if(!de){var Ye=Y.FullPaths[0];ce.slice(0,Ye.length)==Ye?Ye=ce:("/"!=Ye.slice(-1)&&(Ye+="/"),Ye=(Ye+ce).replace("//","/")),de={name:i(ce),type:2},Y.FileIndex.push(de),Y.FullPaths.push(Ye),ue||Nn.utils.cfb_gc(Y)}return de.content=ne,de.size=ne?ne.length:0,se&&(se.CLSID&&(de.clsid=se.CLSID),se.mt&&(de.mt=se.mt),se.ct&&(de.ct=se.ct)),de}return e.find=function at(Y,ce){var ne=Y.FullPaths.map(function(tt){return tt.toUpperCase()}),se=ne.map(function(tt){var Qe=tt.split("/");return Qe[Qe.length-("/"==tt.slice(-1)?2:1)]}),ue=!1;47===ce.charCodeAt(0)?(ue=!0,ce=ne[0].slice(0,-1)+ce):ue=-1!==ce.indexOf("/");var de=ce.toUpperCase(),Ye=!0===ue?ne.indexOf(de):se.indexOf(de);if(-1!==Ye)return Y.FileIndex[Ye];var ht=!de.match(Fx);for(de=de.replace(ga,""),ht&&(de=de.replace(Fx,"!")),Ye=0;Ye<ne.length;++Ye)if((ht?ne[Ye].replace(Fx,"!"):ne[Ye]).replace(ga,"")==de||(ht?se[Ye].replace(Fx,"!"):se[Ye]).replace(ga,"")==de)return Y.FileIndex[Ye];return null},e.read=function Ve(Y,ce){var ne=ce&&ce.type;switch(ne||dr&&Buffer.isBuffer(Y)&&(ne="buffer"),ne||"base64"){case"file":return function Ae(Y,ce){return p(),m(h.readFileSync(Y),ce)}(Y,ce);case"base64":return m(qc(jc(Y)),ce);case"binary":return m(qc(Y),ce)}return m(Y,ce)},e.parse=m,e.write=function bn(Y,ce){var ne=Je(Y,ce);switch(ce&&ce.type||"buffer"){case"file":return p(),h.writeFileSync(ce.filename,ne),ne;case"binary":return"string"==typeof ne?ne:Dt(ne);case"base64":return kx("string"==typeof ne?ne:Dt(ne));case"buffer":if(dr)return Buffer.isBuffer(ne)?ne:Lf(ne);case"array":return"string"==typeof ne?qc(ne):ne}return ne},e.writeFile=function Gt(Y,ce,ne){p();var se=Je(Y,ne);h.writeFileSync(ce,se)},e.utils={cfb_new:function ste(Y){var ce={};return ae(ce,Y),ce},cfb_add:s3,cfb_del:function ote(Y,ce){ae(Y);var ne=Nn.find(Y,ce);if(ne)for(var se=0;se<Y.FileIndex.length;++se)if(Y.FileIndex[se]==ne)return Y.FileIndex.splice(se,1),Y.FullPaths.splice(se,1),!0;return!1},cfb_mov:function ate(Y,ce,ne){ae(Y);var se=Nn.find(Y,ce);if(se)for(var ue=0;ue<Y.FileIndex.length;++ue)if(Y.FileIndex[ue]==se)return Y.FileIndex[ue].name=i(ne),Y.FullPaths[ue]=ne,!0;return!1},cfb_gc:function cte(Y){ke(Y,!0)},ReadShift:Zx,CheckField:T5,prep_blob:Go,bconcat:Io,use_zlib:function he(Y){try{var ne=new(0,Y.InflateRaw);if(ne._processChunk(new Uint8Array([3,0]),ne._finishFlushFlag),!ne.bytesRead)throw new Error("zlib does not expose bytesRead");bt=Y}catch(se){console.error("cannot use native zlib: "+(se.message||se))}},_deflateRaw:mr,_inflateRaw:GL,consts:Ct},e}();let Cp;function Uj(n){return"string"==typeof n?Ox(n):Array.isArray(n)?function lj(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}(n):n}function Lx(n,e,t){if(typeof Cp<"u"&&Cp.writeFileSync)return t?Cp.writeFileSync(n,e,t):Cp.writeFileSync(n,e);if(typeof Deno<"u"){if(t&&"string"==typeof e)switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=Ox(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r="utf8"==t?ld(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([Uj(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var o=URL.createObjectURL(i);if("object"==typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),chrome.downloads.download({url:o,filename:n,saveAs:!0});var a=document.createElement("a");if(null!=a.download)return a.download=n,a.href=o,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(o)},6e4),o}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(n);return d.open("w"),d.encoding="binary",Array.isArray(e)&&(e=xp(e)),d.write(e),d.close(),e}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+n)}function xs(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function zN(n,e){for(var t=[],r=xs(n),i=0;i!==r.length;++i)null==t[n[r[i]][e]]&&(t[n[r[i]][e]]=r[i]);return t}function QE(n){for(var e=[],t=xs(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function XE(n){for(var e=[],t=xs(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}var eT=new Date(1899,11,30,0,0,0);function Po(n,e){var t=n.getTime();return e&&(t-=1263168e5),(t-(eT.getTime()+6e4*(n.getTimezoneOffset()-eT.getTimezoneOffset())))/864e5}var GN=new Date,Zj=eT.getTime()+6e4*(GN.getTimezoneOffset()-eT.getTimezoneOffset()),WN=GN.getTimezoneOffset();function Wk(n){var e=new Date;return e.setTime(24*n*60*60*1e3+Zj),e.getTimezoneOffset()!==WN&&e.setTime(e.getTime()+6e4*(e.getTimezoneOffset()-WN)),e}var KN=new Date("2017-02-19T19:06:09.000Z"),YN=isNaN(KN.getFullYear())?new Date("2/19/17"):KN,qj=2017==YN.getFullYear();function ss(n,e){var t=new Date(n);if(qj)return e>0?t.setTime(t.getTime()+60*t.getTimezoneOffset()*1e3):e<0&&t.setTime(t.getTime()-60*t.getTimezoneOffset()*1e3),t;if(n instanceof Date)return n;if(1917==YN.getFullYear()&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],o=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(o=new Date(o.getTime()-60*o.getTimezoneOffset()*1e3)),o}function w0(n,e){if(dr&&Buffer.isBuffer(n)){if(e){if(255==n[0]&&254==n[1])return ld(n.slice(2).toString("utf16le"));if(254==n[1]&&255==n[2])return ld(function SN(n){for(var e=[],t=0;t<n.length>>1;++t)e[t]=String.fromCharCode(n.charCodeAt(2*t+1)+(n.charCodeAt(2*t)<<8));return e.join("")}(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(255==n[0]&&254==n[1])return ld(new TextDecoder("utf-16le").decode(n.slice(2)));if(254==n[0]&&255==n[1])return ld(new TextDecoder("utf-16be").decode(n.slice(2)))}var t={"\u20ac":"\x80","\u201a":"\x82",\u0192:"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87",\u02c6:"\x88","\u2030":"\x89",\u0160:"\x8a","\u2039":"\x8b",\u0152:"\x8c",\u017d:"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99",\u0161:"\x9a","\u203a":"\x9b",\u0153:"\x9c",\u017e:"\x9e",\u0178:"\x9f"};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(o){return t[o]||o})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function pi(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if("object"!=typeof n||null==n)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=pi(n[t]));return e}function ws(n,e){for(var t="";t.length<e;)t+=n;return t}function cu(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return isNaN(e=Number(r))&&(r=r.replace(/[(](.*)[)]/,function(i,o){return t=-t,o}),isNaN(e=Number(r)))?e:e/t}var Hj=["january","february","march","april","may","june","july","august","september","october","november","december"];function l1(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),o=e.getDate();if(isNaN(o))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Hj.indexOf(a))return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||o>1)&&101!=r?e:n.match(/[^-0-9:,\/\\]/)?t:e}function cr(n,e,t){if(n.FullPaths){var r;if("string"==typeof t)return r=dr?Lf(t):function uj(n){for(var e=[],t=0,r=n.length+250,i=yp(n.length+255),o=0;o<n.length;++o){var a=n.charCodeAt(o);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var d=1023&n.charCodeAt(++o);i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|d>>6&15|(3&a)<<4,i[t++]=128|63&d}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|63&a;t>r&&(e.push(i.slice(0,t)),t=0,i=yp(65535),r=65530)}return e.push(i.slice(0,t)),Io(e)}(t),Nn.utils.cfb_add(n,e,r);Nn.utils.cfb_add(n,e,t)}else n.file(e,t)}function Yk(){return Nn.utils.cfb_new()}var bs='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',Jk=QE({"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"}),Qk=/[&<>'"]/g,Qj=/[\u0000-\u0008\u000b-\u001f]/g;function Qr(n){return(n+"").replace(Qk,function(t){return Jk[t]}).replace(Qj,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function r5(n){return Qr(n).replace(/ /g,"_x0020_")}var i5=/[\u0000-\u001f]/g;function s5(n){return(n+"").replace(Qk,function(t){return Jk[t]}).replace(/\n/g,"<br/>").replace(i5,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Xk(n){for(var e="",t=0,r=0,i=0,o=0,a=0,d=0;t<n.length;)(r=n.charCodeAt(t++))<128?e+=String.fromCharCode(r):(i=n.charCodeAt(t++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,e+=String.fromCharCode(a)):(o=n.charCodeAt(t++),r<240?e+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o):(d=((7&r)<<18|(63&i)<<12|(63&o)<<6|63&(a=n.charCodeAt(t++)))-65536,e+=String.fromCharCode(55296+(d>>>10&1023)),e+=String.fromCharCode(56320+(1023&d)))));return e}function a5(n){var t,r,d,e=yp(2*n.length),i=1,o=0,a=0;for(r=0;r<n.length;r+=i)i=1,(d=n.charCodeAt(r))<128?t=d:d<224?(t=64*(31&d)+(63&n.charCodeAt(r+1)),i=2):d<240?(t=4096*(15&d)+64*(63&n.charCodeAt(r+1))+(63&n.charCodeAt(r+2)),i=3):(i=4,t=262144*(7&d)+4096*(63&n.charCodeAt(r+1))+64*(63&n.charCodeAt(r+2))+(63&n.charCodeAt(r+3)),a=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==a&&(e[o++]=255&a,e[o++]=a>>>8,a=0),e[o++]=t%256,e[o++]=t>>>8;return e.slice(0,o).toString("ucs2")}function c5(n){return Lf(n,"binary").toString("utf8")}var tT="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Di=dr&&(c5(tT)==Xk(tT)&&c5||a5(tT)==Xk(tT)&&a5)||Xk,ld=dr?function(n){return Lf(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(63&i)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(63&r)))}return e.join("")},l5=function(){var n=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}}(),d5=/(^\s|\s$|\n)/;function zo(n,e){return"<"+n+(e.match(d5)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Bx(n){return xs(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function zt(n,e,t){return"<"+n+(null!=t?Bx(t):"")+(null!=e?(e.match(d5)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function eO(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}var Js={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ep=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],zc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"},f5=function(n){for(var e=[],r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,o=n[0][r].length;i<o;i+=10240)e.push.apply(e,n[0][r].slice(i,i+10240));return e},h5=dr?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:Lf(e)})):f5(n)}:f5,p5=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(Bf(n,i)));return r.join("").replace(ga,"")},nT=dr?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(ga,""):p5(n,e,t)}:p5,g5=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},m5=dr?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):g5(n,e,t)}:g5,_5=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(d1(n,i)));return r.join("")},u1=dr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):_5(e,t,r)}:_5,v5=function(n,e){var t=Do(n,e);return t>0?u1(n,e+4,e+4+t-1):""},nO=v5,y5=function(n,e){var t=Do(n,e);return t>0?u1(n,e+4,e+4+t-1):""},rO=y5,x5=function(n,e){var t=2*Do(n,e);return t>0?u1(n,e+4,e+4+t-1):""},iO=x5,w5=function(e,t){var r=Do(e,t);return r>0?nT(e,t+4,t+4+r):""},sO=w5,b5=function(n,e){var t=Do(n,e);return t>0?u1(n,e+4,e+4+t):""},oO=b5,C5=function(n,e){return function oq(n,e){for(var t=1-2*(n[e+7]>>>7),r=((127&n[e+7])<<4)+(n[e+6]>>>4&15),i=15&n[e+6],o=5;o>=0;--o)i=256*i+n[e+o];return 2047==r?0==i?t*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}(n,e)},rT=C5,aO=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};dr&&(nO=function(e,t){if(!Buffer.isBuffer(e))return v5(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},rO=function(e,t){if(!Buffer.isBuffer(e))return y5(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},iO=function(e,t){if(!Buffer.isBuffer(e))return x5(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},sO=function(e,t){if(!Buffer.isBuffer(e))return w5(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},oO=function(e,t){if(!Buffer.isBuffer(e))return b5(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},rT=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):C5(e,t)},aO=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array}),typeof kr<"u"&&function E5(){nT=function(n,e,t){return kr.utils.decode(1200,n.slice(e,t)).replace(ga,"")},u1=function(n,e,t){return kr.utils.decode(65001,n.slice(e,t))},nO=function(n,e){var t=Do(n,e);return t>0?kr.utils.decode(y0,n.slice(e+4,e+4+t-1)):""},rO=function(n,e){var t=Do(n,e);return t>0?kr.utils.decode(Zc,n.slice(e+4,e+4+t-1)):""},iO=function(n,e){var t=2*Do(n,e);return t>0?kr.utils.decode(1200,n.slice(e+4,e+4+t-1)):""},sO=function(n,e){var t=Do(n,e);return t>0?kr.utils.decode(1200,n.slice(e+4,e+4+t)):""},oO=function(n,e){var t=Do(n,e);return t>0?kr.utils.decode(65001,n.slice(e+4,e+4+t)):""}}();var d1=function(n,e){return n[e]},Bf=function(n,e){return 256*n[e+1]+n[e]},cq=function(n,e){var t=256*n[e+1]+n[e];return t<32768?t:-1*(65535-t+1)},Do=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},b0=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},lq=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Zx(n,e){var r,i,a,d,h,p,t="",o=[];switch(e){case"dbcs":if(p=this.l,dr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(h=0;h<n;++h)t+=String.fromCharCode(Bf(this,p)),p+=2;n*=2;break;case"utf8":t=u1(this,this.l,this.l+n);break;case"utf16le":t=nT(this,this.l,this.l+(n*=2));break;case"wstr":if(!(typeof kr<"u"))return Zx.call(this,n,"dbcs");t=kr.utils.decode(Zc,this.slice(this.l,this.l+2*n)),n*=2;break;case"lpstr-ansi":t=nO(this,this.l),n=4+Do(this,this.l);break;case"lpstr-cp":t=rO(this,this.l),n=4+Do(this,this.l);break;case"lpwstr":t=iO(this,this.l),n=4+2*Do(this,this.l);break;case"lpp4":n=4+Do(this,this.l),t=sO(this,this.l),2&n&&(n+=2);break;case"8lpp4":n=4+Do(this,this.l),t=oO(this,this.l),3&n&&(n+=4-(3&n));break;case"cstr":for(n=0,t="";0!==(a=d1(this,this.l+n++));)o.push(Px(a));t=o.join("");break;case"_wstr":for(n=0,t="";0!==(a=Bf(this,this.l+n));)o.push(Px(a)),n+=2;n+=2,t=o.join("");break;case"dbcs-cont":for(t="",p=this.l,h=0;h<n;++h){if(this.lens&&-1!==this.lens.indexOf(p))return a=d1(this,p),this.l=p+1,d=Zx.call(this,n-h,a?"dbcs-cont":"sbcs-cont"),o.join("")+d;o.push(Px(Bf(this,p))),p+=2}t=o.join(""),n*=2;break;case"cpstr":if(typeof kr<"u"){t=kr.utils.decode(Zc,this.slice(this.l,this.l+n));break}case"sbcs-cont":for(t="",p=this.l,h=0;h!=n;++h){if(this.lens&&-1!==this.lens.indexOf(p))return a=d1(this,p),this.l=p+1,d=Zx.call(this,n-h,a?"dbcs-cont":"sbcs-cont"),o.join("")+d;o.push(Px(d1(this,p))),p+=1}t=o.join("");break;default:switch(n){case 1:return r=d1(this,this.l),this.l++,r;case 2:return r=("i"===e?cq:Bf)(this,this.l),this.l+=2,r;case 4:case-4:return"i"!==e&&128&this[this.l+3]?(i=Do(this,this.l),this.l+=4,i):(r=(n>0?b0:lq)(this,this.l),this.l+=4,r);case 8:case-8:if("f"===e)return i=8==n?rT(this,this.l):rT([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=m5(this,this.l,n)}}return this.l+=n,t}var uq=function(n,e,t){n[t]=255&e,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},dq=function(n,e,t){n[t]=255&e,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},fq=function(n,e,t){n[t]=255&e,n[t+1]=e>>>8&255};function hq(n,e,t){var r=0,i=0;if("dbcs"===t){for(i=0;i!=e.length;++i)fq(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if("sbcs"===t){if(typeof kr<"u"&&874==y0)for(i=0;i!=e.length;++i){var o=kr.utils.encode(y0,e.charAt(i));this[this.l+i]=o[0]}else for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=255&e.charCodeAt(i);r=e.length}else{if("hex"===t){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===t){var a=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var d=e.charCodeAt(i);this[this.l++]=255&d,this[this.l++]=d>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(n){case 1:r=1,this[this.l]=255&e;break;case 2:r=2,this[this.l]=255&e,this[this.l+1]=255&(e>>>=8);break;case 3:r=3,this[this.l]=255&e,this[this.l+1]=255&(e>>>=8),this[this.l+2]=255&(e>>>=8);break;case 4:r=4,uq(this,e,this.l);break;case 8:if(r=8,"f"===t){!function aq(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,o=0,a=r?-e:e;isFinite(a)?0==a?i=o=0:(i=Math.floor(Math.log(a)/Math.LN2),o=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(o)||o<Math.pow(2,52))?i=-1022:(o-=Math.pow(2,52),i+=1023)):(i=2047,o=isNaN(e)?26985:0);for(var d=0;d<=5;++d,o/=256)n[t+d]=255&o;n[t+6]=(15&i)<<4|15&o,n[t+7]=i>>4|r}(this,e,this.l);break}case 16:break;case-4:r=4,dq(this,e,this.l)}}return this.l+=r,this}function T5(n,e){var t=m5(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Go(n,e){n.l=e,n.read_shift=Zx,n.chk=T5,n.write_shift=hq}function _a(n,e){n.l+=e}function dt(n){var e=yp(n);return Go(e,0),e}function qa(){var n=[],e=dr?256:2048,t=function(p){var m=dt(p);return Go(m,0),m},r=t(e),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&n.push(r),r=null)},o=function(p){return r&&p<r.length-r.l?r:(i(),r=t(Math.max(p+1,e)))};return{next:o,push:function(p){i(),null==(r=p).l&&(r.l=r.length),o(e)},end:function(){return i(),Io(n)},_bufs:n}}function It(n,e,t,r){var o,i=+e;if(!isNaN(i)){r||(r=sw[i].p||(t||[]).length||0),o=1+(i>=128?1:0)+1,r>=128&&++o,r>=16384&&++o,r>=2097152&&++o;var a=n.next(o);i<=127?a.write_shift(1,i):(a.write_shift(1,128+(127&i)),a.write_shift(1,i>>7));for(var d=0;4!=d;++d){if(!(r>=128)){a.write_shift(1,r);break}a.write_shift(1,128+(127&r)),r>>=7}r>0&&aO(t)&&n.push(t)}}function jx(n,e,t){var r=pi(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function S5(n,e,t){var r=pi(n);return r.s=jx(r.s,e.s,t),r.e=jx(r.e,e.s,t),r}function qx(n,e){if(n.cRel&&n.c<0)for(n=pi(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=pi(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=Hn(n);return!n.cRel&&null!=n.cRel&&(t=function mq(n){return n.replace(/^([A-Z])/,"$$$1")}(t)),!n.rRel&&null!=n.rRel&&(t=function pq(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(t)),t}function cO(n,e){return 0!=n.s.r||n.s.rRel||n.e.r!=(e.biff>=12?1048575:e.biff>=8?65536:16384)||n.e.rRel?0!=n.s.c||n.s.cRel||n.e.c!=(e.biff>=12?16383:255)||n.e.cRel?qx(n.s,e.biff)+":"+qx(n.e,e.biff):(n.s.rRel?"":"$")+Cs(n.s.r)+":"+(n.e.rRel?"":"$")+Cs(n.e.r):(n.s.cRel?"":"$")+ki(n.s.c)+":"+(n.e.cRel?"":"$")+ki(n.e.c)}function lO(n){return parseInt(function gq(n){return n.replace(/\$(\d+)$/,"$1")}(n),10)-1}function Cs(n){return""+(n+1)}function uO(n){for(var e=function _q(n){return n.replace(/^\$([A-Z])/,"$1")}(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function ki(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function Ns(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function Hn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Ha(n){var e=n.indexOf(":");return-1==e?{s:Ns(n),e:Ns(n)}:{s:Ns(n.slice(0,e)),e:Ns(n.slice(e+1))}}function ir(n,e){return typeof e>"u"||"number"==typeof e?ir(n.s,n.e):("string"!=typeof n&&(n=Hn(n)),"string"!=typeof e&&(e=Hn(e)),n==e?n:n+":"+e)}function Mr(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,o=n.length;for(t=0;r<o&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<o&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===o||10!=i)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=o&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=o&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function ud(n,e,t){return null==n||null==n.t||"z"==n.t?"":void 0!==n.w?n.w:("d"==n.t&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),"e"==n.t?Zf[n.v]||n.v:function A5(n,e){var t="d"==n.t&&e instanceof Date;if(null!=n.z)try{return n.w=Hc(n.z,t?Po(e):e)}catch{}try{return n.w=Hc((n.XF||{}).numFmtId||(t?14:0),t?Po(e):e)}catch{return""+e}}(n,null==e?n.v:e))}function Tp(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function M5(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense;null!=ys&&null==i&&(i=ys);var o=n||(i?[]:{}),a=0,d=0;if(o&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var h="string"==typeof r.origin?Ns(r.origin):r.origin;a=h.r,d=h.c}o["!ref"]||(o["!ref"]="A1:A1")}var p={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(o["!ref"]){var m=Mr(o["!ref"]);p.s.c=m.s.c,p.s.r=m.s.r,p.e.c=Math.max(p.e.c,m.e.c),p.e.r=Math.max(p.e.r,m.e.r),-1==a&&(p.e.r=a=m.e.r+1)}for(var y=0;y!=e.length;++y)if(e[y]){if(!Array.isArray(e[y]))throw new Error("aoa_to_sheet expects an array of arrays");for(var T=0;T!=e[y].length;++T)if(!(typeof e[y][T]>"u")){var M={v:e[y][T]},R=a+y,D=d+T;if(p.s.r>R&&(p.s.r=R),p.s.c>D&&(p.s.c=D),p.e.r<R&&(p.e.r=R),p.e.c<D&&(p.e.c=D),!e[y][T]||"object"!=typeof e[y][T]||Array.isArray(e[y][T])||e[y][T]instanceof Date)if(Array.isArray(M.v)&&(M.f=e[y][T][1],M.v=M.v[0]),null===M.v)if(M.f)M.t="n";else if(r.nullError)M.t="e",M.v=0;else{if(!r.sheetStubs)continue;M.t="z"}else"number"==typeof M.v?M.t="n":"boolean"==typeof M.v?M.t="b":M.v instanceof Date?(M.z=r.dateNF||Un[14],r.cellDates?(M.t="d",M.w=Hc(M.z,Po(M.v))):(M.t="n",M.v=Po(M.v),M.w=Hc(M.z,M.v))):M.t="s";else M=e[y][T];if(i)o[R]||(o[R]=[]),o[R][D]&&o[R][D].z&&(M.z=o[R][D].z),o[R][D]=M;else{var U=Hn({c:D,r:R});o[U]&&o[U].z&&(M.z=o[U].z),o[U]=M}}}return p.s.c<1e7&&(o["!ref"]=ir(p)),o}function f1(n,e){return M5(null,n,e)}function lu(n,e){return e||(e=dt(4)),e.write_shift(4,n),e}function va(n){var e=n.read_shift(4);return 0===e?"":n.read_shift(e,"dbcs")}function ko(n,e){var t=!1;return null==e&&(t=!0,e=dt(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function xq(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function dO(n,e){var t=n.l,r=n.read_shift(1),i=va(n),o=[],a={t:i,h:i};if(1&r){for(var d=n.read_shift(4),h=0;h!=d;++h)o.push(xq(n));a.r=o}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}var Cq=dO;function Ml(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function C0(n,e){return null==e&&(e=dt(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function E0(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function T0(n,e){return null==e&&(e=dt(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Tq=va,I5=ko;function fO(n){var e=n.read_shift(4);return 0===e||4294967295===e?"":n.read_shift(e,"dbcs")}function iT(n,e){var t=!1;return null==e&&(t=!0,e=dt(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var Sq=va,hO=fO,pO=iT;function gO(n){var e=n.slice(n.l,n.l+4),t=1&e[0],r=2&e[0];n.l+=4;var i=0===r?rT([0,0,0,0,252&e[0],e[1],e[2],e[3]],0):b0(e,0)>>2;return t?i/100:i}function P5(n,e){null==e&&(e=dt(4));var t=0,r=0,i=100*n;if(n==(0|n)&&n>=-(1<<29)&&n<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,t=1),!r)throw new Error("unsupported RkNumber "+n);e.write_shift(-4,((t?i:n)<<2)+(t+2))}function D5(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}var S0=D5,h1=function Aq(n,e){return e||(e=dt(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e};function ya(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function A0(n,e){return(e||dt(8)).write_shift(8,n,"f")}function sT(n,e){if(e||(e=dt(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;null!=n.index?(e.write_shift(1,2),e.write_shift(1,n.index)):null!=n.theme?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),n.rgb&&null==n.theme){var r=n.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}else e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);return e}var _O={1:{n:"CodePage",t:2},2:{n:"Category",t:80},3:{n:"PresentationFormat",t:80},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:80},15:{n:"Company",t:80},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:80},27:{n:"ContentStatus",t:80},28:{n:"Language",t:80},29:{n:"Version",t:80},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},vO={1:{n:"CodePage",t:2},2:{n:"Title",t:80},3:{n:"Subject",t:80},4:{n:"Author",t:80},5:{n:"Keywords",t:80},6:{n:"Comments",t:80},7:{n:"Template",t:80},8:{n:"LastAuthor",t:80},9:{n:"RevNumber",t:80},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:80},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function Bq(n){return n.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var M0=pi(Bq([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Zf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},yO={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},lT={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function N5(n,e){var i,t=function Vj(n){for(var e=[],t=xs(n),r=0;r!==t.length;++r)null==e[n[t[r]]]&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}(yO),r=[];r[r.length]=bs,r[r.length]=zt("Types",null,{xmlns:Js.CT,"xmlns:xsd":Js.xsd,"xmlns:xsi":Js.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return zt("Default",null,{Extension:h[0],ContentType:h[1]})}));var o=function(h){n[h]&&n[h].length>0&&(r[r.length]=zt("Override",null,{PartName:("/"==(i=n[h][0])[0]?"":"/")+i,ContentType:lT[h][e.bookType]||lT[h].xlsx}))},a=function(h){(n[h]||[]).forEach(function(p){r[r.length]=zt("Override",null,{PartName:("/"==p[0]?"":"/")+p,ContentType:lT[h][e.bookType]||lT[h].xlsx})})},d=function(h){(n[h]||[]).forEach(function(p){r[r.length]=zt("Override",null,{PartName:("/"==p[0]?"":"/")+p,ContentType:t[h][0]})})};return o("workbooks"),a("sheets"),a("charts"),d("themes"),["strs","styles"].forEach(o),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),a("metadata"),d("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var sr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Hx(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function p1(n){var e=[bs,zt("Relationships",null,{xmlns:Js.RELS})];return xs(n["!id"]).forEach(function(t){e[e.length]=zt("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function zr(n,e,t,r,i,o){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,o?i.TargetMode=o:[sr.HLINK,sr.XPATH,sr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function L5(n,e,t){return['  <rdf:Description rdf:about="'+n+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+'"/>\n',"  </rdf:Description>\n"].join("")}function zq(n,e){return['  <rdf:Description rdf:about="'+n+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+'"/>\n',"  </rdf:Description>\n"].join("")}function U5(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Ix.version+"</meta:generator></office:meta></office:document-meta>"}var jf=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function wO(n,e,t,r,i){null!=i[n]||null==e||""===e||(i[n]=e,e=Qr(e),r[r.length]=t?zt(n,e,t):zo(n,e))}function V5(n,e){var t=e||{},r=[bs,zt("cp:coreProperties",null,{"xmlns:cp":Js.CORE_PROPS,"xmlns:dc":Js.dc,"xmlns:dcterms":Js.dcterms,"xmlns:dcmitype":Js.dcmitype,"xmlns:xsi":Js.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(null!=n.CreatedDate&&wO("dcterms:created","string"==typeof n.CreatedDate?n.CreatedDate:eO(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=n.ModifiedDate&&wO("dcterms:modified","string"==typeof n.ModifiedDate?n.ModifiedDate:eO(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var o=0;o!=jf.length;++o){var a=jf[o],d=t.Props&&null!=t.Props[a[1]]?t.Props[a[1]]:n?n[a[1]]:null;!0===d?d="1":!1===d?d="0":"number"==typeof d&&(d=String(d)),null!=d&&wO(a[0],d,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var I0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Z5=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function q5(n){var e=[],t=zt;return n||(n={}),n.Application="SheetJS",e[e.length]=bs,e[e.length]=zt("Properties",null,{xmlns:Js.EXT_PROPS,"xmlns:vt":Js.vt}),I0.forEach(function(r){if(void 0!==n[r[1]]){var i;switch(r[2]){case"string":i=Qr(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false"}void 0!==i&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Qr(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function H5(n){var e=[bs,zt("Properties",null,{xmlns:Js.CUST_PROPS,"xmlns:vt":Js.vt})];if(!n)return e.join("");var t=1;return xs(n).forEach(function(i){++t,e[e.length]=zt("property",function sq(n,e){switch(typeof n){case"string":var t=zt("vt:lpwstr",Qr(n));return e&&(t=t.replace(/&quot;/g,"_x0022_")),t;case"number":return zt((0|n)==n?"vt:i4":"vt:r8",Qr(String(n)));case"boolean":return zt("vt:bool",n?"true":"false")}if(n instanceof Date)return zt("vt:filetime",eO(n));throw new Error("Unable to serialize "+n)}(n[i],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Qr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var bO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Y5(n,e){var t=dt(4),r=dt(4);switch(t.write_shift(4,80==n?31:n),n){case 3:r.write_shift(-4,e);break;case 5:(r=dt(8)).write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=function tH(n){var t=("string"==typeof n?new Date(Date.parse(n)):n).getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);i*=1e7;var o=(r*=1e7)/Math.pow(2,32)|0;o>0&&(r%=Math.pow(2,32),i+=o);var a=dt(8);return a.write_shift(4,r),a.write_shift(4,i),a}(e);break;case 31:case 80:for((r=dt(4+2*(e.length+1)+(e.length%2?0:2))).write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return Io([t,r])}var Q5=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function cH(n){switch(typeof n){case"boolean":return 11;case"number":return(0|n)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64}return-1}function X5(n,e,t){var r=dt(8),i=[],o=[],a=8,d=0,h=dt(8),p=dt(8);if(h.write_shift(4,2),h.write_shift(4,1200),p.write_shift(4,1),o.push(h),i.push(p),a+=8+h.length,!e){(p=dt(8)).write_shift(4,0),i.unshift(p);var m=[dt(4)];for(m[0].write_shift(4,n.length),d=0;d<n.length;++d){var y=n[d][0];for((h=dt(8+2*(y.length+1)+(y.length%2?0:2))).write_shift(4,d+2),h.write_shift(4,y.length+1),h.write_shift(0,y,"dbcs");h.l!=h.length;)h.write_shift(1,0);m.push(h)}h=Io(m),o.unshift(h),a+=8+h.length}for(d=0;d<n.length;++d)if((!e||e[n[d][0]])&&!(Q5.indexOf(n[d][0])>-1||Z5.indexOf(n[d][0])>-1)&&null!=n[d][1]){var T=n[d][1],M=0;if(e){var R=t[M=+e[n[d][0]]];if("version"==R.p&&"string"==typeof T){var D=T.split(".");T=(+D[0]<<16)+(+D[1]||0)}h=Y5(R.t,T)}else{var U=cH(T);-1==U&&(U=31,T=String(T)),h=Y5(U,T)}o.push(h),(p=dt(8)).write_shift(4,e?M:2+d),i.push(p),a+=8+h.length}var J=8*(o.length+1);for(d=0;d<o.length;++d)i[d].write_shift(4,J),J+=o[d].length;return r.write_shift(4,a),r.write_shift(4,o.length),Io([r].concat(i).concat(o))}function t6(n,e,t,r,i,o){var a=dt(i?68:48),d=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Nn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var h=X5(n,t,r);if(d.push(h),i){var p=X5(i,null,null);a.write_shift(16,o,"hex"),a.write_shift(4,68+h.length),d.push(p)}return Io(d)}function $a(n,e){return e||(e=dt(2)),e.write_shift(2,+!!n),e}function Qs(n){return n.read_shift(2,"u")}function Il(n,e){return e||(e=dt(2)),e.write_shift(2,n),e}function r6(n,e,t){return t||(t=dt(2)),t.write_shift(1,"e"==e?+n:+!!n),t.write_shift(1,"e"==e?1:0),t}function zx(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont",o=Zc;t&&t.biff>=8&&(Zc=1200),t&&8!=t.biff?12==t.biff&&(i="wstr"):n.read_shift(1)&&(i="dbcs-cont"),t.biff>=2&&t.biff<=5&&(i="cpstr");var d=r?n.read_shift(r,i):"";return Zc=o,d}function hH(n){var e=n.t||"",r=dt(3);r.write_shift(2,e.length),r.write_shift(1,1);var i=dt(2*e.length);return i.write_shift(2*e.length,e,"utf16le"),Io([r,i])}function i6(n,e,t){return t||(t=dt(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function s6(n,e){e||(e=dt(6+2*n.length)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function yH(n){var e=dt(512),t=0,r=n.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),o=i>-1?31:23;switch(r.charAt(0)){case"#":o=28;break;case".":o&=-3}e.write_shift(4,2),e.write_shift(4,o);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(28==o)s6(r=r.slice(1),e);else if(2&o){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var d=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(d.length+1)),t=0;t<d.length;++t)e.write_shift(2,d.charCodeAt(t));e.write_shift(2,0),8&o&&s6(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var h=0;"../"==r.slice(3*h,3*h+3)||"..\\"==r.slice(3*h,3*h+3);)++h;for(e.write_shift(2,h),e.write_shift(4,r.length-3*h+1),t=0;t<r.length-3*h;++t)e.write_shift(1,255&r.charCodeAt(t+3*h));for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function k0(n,e,t,r){return r||(r=dt(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function bH(n,e,t){var r=t.biff>8?4:2;return[n.read_shift(r),n.read_shift(r,"i"),n.read_shift(r,"i")]}function fT(n){var e=n.read_shift(2),t=n.read_shift(2);return{s:{c:n.read_shift(2),r:e},e:{c:n.read_shift(2),r:t}}}function l6(n,e){return e||(e=dt(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function SO(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var o=dt(i);return o.write_shift(2,r),o.write_shift(2,e),i>4&&o.write_shift(2,29282),i>6&&o.write_shift(2,1997),i>8&&(o.write_shift(2,49161),o.write_shift(2,1),o.write_shift(2,1798),o.write_shift(2,0)),o}function FH(n,e){var t=!e||e.biff>=8?2:1,r=dt(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function XH(n,e,t,r){var i=t&&5==t.biff;r||(r=dt(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var o=r.length>r.l?r.slice(0,r.l):r;return null==o.l&&(o.l=o.length),o}function p6(n,e,t,r){var i=t&&5==t.biff;r||(r=dt(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var o=0;return n.numFmtId>0&&i&&(o|=1024),r.write_shift(4,o),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function A$(n){var e=dt(24),t=Ns(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Io([e,yH(n[1])])}function I$(n){var e=n[1].Tooltip,t=dt(10+2*(e.length+1));t.write_shift(2,2048);var r=Ns(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}var AO=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=QE({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(d,h){var p=h||{};p.dateNF||(p.dateNF="yyyymmdd");var m=f1(function t(d,h){var p=[],m=yp(1);switch(h.type){case"base64":m=qc(jc(d));break;case"binary":m=qc(d);break;case"buffer":case"array":m=d}Go(m,0);var y=m.read_shift(1),T=!!(136&y),M=!1,R=!1;switch(y){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:M=!0,T=!0;break;case 140:R=!0;break;default:throw new Error("DBF Unsupported Version: "+y.toString(16))}var D=0,U=521;2==y&&(D=m.read_shift(2)),m.l+=3,2!=y&&(D=m.read_shift(4)),D>1048576&&(D=1e6),2!=y&&(U=m.read_shift(2));var J=m.read_shift(2),ee=h.codepage||1252;2!=y&&(m.l+=16,m.read_shift(1),0!==m[m.l]&&(ee=n[m[m.l]]),m.l+=1,m.l+=2),R&&(m.l+=36);for(var W=[],pe={},Ae=Math.min(m.length,2==y?521:U-10-(M?264:0)),Ve=R?32:11;m.l<Ae&&13!=m[m.l];)switch(pe={},pe.name=kr.utils.decode(ee,m.slice(m.l,m.l+Ve)).replace(/[\u0000\r\n].*$/g,""),m.l+=Ve,pe.type=String.fromCharCode(m.read_shift(1)),2!=y&&!R&&(pe.offset=m.read_shift(4)),pe.len=m.read_shift(1),2==y&&(pe.offset=m.read_shift(2)),pe.dec=m.read_shift(1),pe.name.length&&W.push(pe),2!=y&&(m.l+=R?13:14),pe.type){case"B":(!M||8!=pe.len)&&h.WTF&&console.log("Skipping "+pe.name+":"+pe.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+pe.name+":"+pe.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+pe.type)}if(13!==m[m.l]&&(m.l=U-1),13!==m.read_shift(1))throw new Error("DBF Terminator not found "+m.l+" "+m[m.l]);m.l=U;var ae=0,Re=0;for(p[0]=[],Re=0;Re!=W.length;++Re)p[0][Re]=W[Re].name;for(;D-- >0;)if(42!==m[m.l])for(++m.l,p[++ae]=[],Re=0,Re=0;Re!=W.length;++Re){var ke=m.slice(m.l,m.l+W[Re].len);m.l+=W[Re].len,Go(ke,0);var Je=kr.utils.decode(ee,ke);switch(W[Re].type){case"C":Je.trim().length&&(p[ae][Re]=Je.replace(/\s+$/,""));break;case"D":p[ae][Re]=8===Je.length?new Date(+Je.slice(0,4),+Je.slice(4,6)-1,+Je.slice(6,8)):Je;break;case"F":p[ae][Re]=parseFloat(Je.trim());break;case"+":case"I":p[ae][Re]=R?2147483648^ke.read_shift(-4,"i"):ke.read_shift(4,"i");break;case"L":switch(Je.trim().toUpperCase()){case"Y":case"T":p[ae][Re]=!0;break;case"N":case"F":p[ae][Re]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Je+"|")}break;case"M":if(!T)throw new Error("DBF Unexpected MEMO for type "+y.toString(16));p[ae][Re]="##MEMO##"+(R?parseInt(Je.trim(),10):ke.read_shift(4));break;case"N":(Je=Je.replace(/\u0000/g,"").trim())&&"."!=Je&&(p[ae][Re]=+Je||0);break;case"@":p[ae][Re]=new Date(ke.read_shift(-8,"f")-621356832e5);break;case"T":p[ae][Re]=new Date(864e5*(ke.read_shift(4)-2440588)+ke.read_shift(4));break;case"Y":p[ae][Re]=ke.read_shift(4,"i")/1e4+ke.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":p[ae][Re]=-ke.read_shift(-8,"f");break;case"B":if(M&&8==W[Re].len){p[ae][Re]=ke.read_shift(8,"f");break}case"G":case"P":ke.l+=W[Re].len;break;case"0":if("_NullFlags"===W[Re].name)break;default:throw new Error("DBF Unsupported data type "+W[Re].type)}}else m.l+=J;if(2!=y&&m.l<m.length&&26!=m[m.l++])throw new Error("DBF EOF Marker missing "+(m.l-1)+" of "+m.length+" "+m[m.l-1].toString(16));return h&&h.sheetRows&&(p=p.slice(0,h.sheetRows)),h.DBF=W,p}(d,p),p);return m["!cols"]=p.DBF.map(function(y){return{wch:y.len,DBF:y}}),delete p.DBF,m}var o={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function i(d,h){try{return Tp(r(d,h),h)}catch(p){if(h&&h.WTF)throw p}return{SheetNames:[],Sheets:{}}},to_sheet:r,from_sheet:function a(d,h){var p=h||{};if(+p.codepage>=0&&Tl(+p.codepage),"string"==p.type)throw new Error("Cannot write DBF to JS string");var m=qa(),y=TT(d,{header:1,raw:!0,cellDates:!0}),T=y[0],M=y.slice(1),R=d["!cols"]||[],D=0,U=0,J=0,ee=1;for(D=0;D<T.length;++D)if(((R[D]||{}).DBF||{}).name)T[D]=R[D].DBF.name,++J;else if(null!=T[D]){if(++J,"number"==typeof T[D]&&(T[D]=T[D].toString(10)),"string"!=typeof T[D])throw new Error("DBF Invalid column name "+T[D]+" |"+typeof T[D]+"|");if(T.indexOf(T[D])!==D)for(U=0;U<1024;++U)if(-1==T.indexOf(T[D]+"_"+U)){T[D]+="_"+U;break}}var W=Mr(d["!ref"]),pe=[],Ae=[],Ve=[];for(D=0;D<=W.e.c-W.s.c;++D){var ae="",Re="",ke=0,Je=[];for(U=0;U<M.length;++U)null!=M[U][D]&&Je.push(M[U][D]);if(0!=Je.length&&null!=T[D]){for(U=0;U<Je.length;++U){switch(typeof Je[U]){case"number":Re="B";break;case"string":default:Re="C";break;case"boolean":Re="L";break;case"object":Re=Je[U]instanceof Date?"D":"C"}ke=Math.max(ke,String(Je[U]).length),ae=ae&&ae!=Re?"C":Re}ke>250&&(ke=250),"C"==(Re=((R[D]||{}).DBF||{}).type)&&R[D].DBF.len>ke&&(ke=R[D].DBF.len),"B"==ae&&"N"==Re&&(ae="N",Ve[D]=R[D].DBF.dec,ke=R[D].DBF.len),Ae[D]="C"==ae||"N"==Re?ke:o[ae]||0,ee+=Ae[D],pe[D]=ae}else pe[D]="?"}var at=m.next(32);for(at.write_shift(4,318902576),at.write_shift(4,M.length),at.write_shift(2,296+32*J),at.write_shift(2,ee),D=0;D<4;++D)at.write_shift(4,0);for(at.write_shift(4,0|(+e[y0]||3)<<8),D=0,U=0;D<T.length;++D)if(null!=T[D]){var Be=m.next(32),Ut=(T[D].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Be.write_shift(1,Ut,"sbcs"),Be.write_shift(1,"?"==pe[D]?"C":pe[D],"sbcs"),Be.write_shift(4,U),Be.write_shift(1,Ae[D]||o[pe[D]]||0),Be.write_shift(1,Ve[D]||0),Be.write_shift(1,2),Be.write_shift(4,0),Be.write_shift(1,0),Be.write_shift(4,0),Be.write_shift(4,0),U+=Ae[D]||o[pe[D]]||0}var tn=m.next(264);for(tn.write_shift(4,13),D=0;D<65;++D)tn.write_shift(4,0);for(D=0;D<M.length;++D){var $t=m.next(ee);for($t.write_shift(1,0),U=0;U<T.length;++U)if(null!=T[U])switch(pe[U]){case"L":$t.write_shift(1,null==M[D][U]?63:M[D][U]?84:70);break;case"B":$t.write_shift(8,M[D][U]||0,"f");break;case"N":var wt="0";for("number"==typeof M[D][U]&&(wt=M[D][U].toFixed(Ve[U]||0)),J=0;J<Ae[U]-wt.length;++J)$t.write_shift(1,32);$t.write_shift(1,wt,"sbcs");break;case"D":M[D][U]?($t.write_shift(4,("0000"+M[D][U].getFullYear()).slice(-4),"sbcs"),$t.write_shift(2,("00"+(M[D][U].getMonth()+1)).slice(-2),"sbcs"),$t.write_shift(2,("00"+M[D][U].getDate()).slice(-2),"sbcs")):$t.write_shift(8,"00000000","sbcs");break;case"C":var Ct=String(null!=M[D][U]?M[D][U]:"").slice(0,Ae[U]);for($t.write_shift(1,Ct,"sbcs"),J=0;J<Ae[U]-Ct.length;++J)$t.write_shift(1,32)}}return m.next(1).write_shift(1,26),m.end()}}}(),b6=function(){var n={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1bN("+xs(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(T,M){var R=n[M];return"number"==typeof R?qk(R):R},r=function(T,M,R){var D=M.charCodeAt(0)-32<<4|R.charCodeAt(0)-48;return 59==D?T:qk(D)};function o(T,M){var at,R=T.split(/[\n\r]+/),D=-1,U=-1,J=0,ee=0,W=[],pe=[],Ae=null,Ve={},ae=[],Re=[],ke=[],Je=0;for(+M.codepage>=0&&Tl(+M.codepage);J!==R.length;++J){Je=0;var $t,Be=R[J].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),Ut=Be.replace(/;;/g,"\0").split(";").map(function(Ee){return Ee.replace(/\u0000/g,";")});if(Be.length>0)switch(Ut[0]){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==Ut[1].charAt(0)&&pe.push(Be.slice(3).replace(/;;/g,";"));break;case"C":var wt=!1,Ct=!1,Gt=!1,Dt=!1,bn=-1,bt=-1;for(ee=1;ee<Ut.length;++ee)switch(Ut[ee].charAt(0)){case"A":case"G":break;case"X":U=parseInt(Ut[ee].slice(1))-1,Ct=!0;break;case"Y":for(D=parseInt(Ut[ee].slice(1))-1,Ct||(U=0),at=W.length;at<=D;++at)W[at]=[];break;case"K":'"'===($t=Ut[ee].slice(1)).charAt(0)?$t=$t.slice(1,$t.length-1):"TRUE"===$t?$t=!0:"FALSE"===$t?$t=!1:isNaN(cu($t))?isNaN(l1($t).getDate())||($t=ss($t)):($t=cu($t),null!==Ae&&a1(Ae)&&($t=Wk($t))),typeof kr<"u"&&"string"==typeof $t&&"string"!=(M||{}).type&&(M||{}).codepage&&($t=kr.utils.decode(M.codepage,$t)),wt=!0;break;case"E":Dt=!0;var he=_1(Ut[ee].slice(1),{r:D,c:U});W[D][U]=[W[D][U],he];break;case"S":Gt=!0,W[D][U]=[W[D][U],"S5S"];break;case"R":bn=parseInt(Ut[ee].slice(1))-1;break;case"C":bt=parseInt(Ut[ee].slice(1))-1;break;default:if(M&&M.WTF)throw new Error("SYLK bad record "+Be)}if(wt&&(W[D][U]&&2==W[D][U].length?W[D][U][0]=$t:W[D][U]=$t,Ae=null),Gt){if(Dt)throw new Error("SYLK shared formula cannot have own formula");var Ge=bn>-1&&W[bn][bt];if(!Ge||!Ge[1])throw new Error("SYLK shared formula cannot find base");W[D][U][1]=q6(Ge[1],{r:D-bn,c:U-bt})}break;case"F":var xe=0;for(ee=1;ee<Ut.length;++ee)switch(Ut[ee].charAt(0)){case"X":U=parseInt(Ut[ee].slice(1))-1,++xe;break;case"Y":for(D=parseInt(Ut[ee].slice(1))-1,at=W.length;at<=D;++at)W[at]=[];break;case"M":Je=parseInt(Ut[ee].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":Ae=pe[parseInt(Ut[ee].slice(1))];break;case"W":for(ke=Ut[ee].slice(1).split(" "),at=parseInt(ke[0],10);at<=parseInt(ke[1],10);++at)Je=parseInt(ke[2],10),Re[at-1]=0===Je?{hidden:!0}:{wch:Je},Ap(Re[at-1]);break;case"C":Re[U=parseInt(Ut[ee].slice(1))-1]||(Re[U]={});break;case"R":ae[D=parseInt(Ut[ee].slice(1))-1]||(ae[D]={}),Je>0?(ae[D].hpt=Je,ae[D].hpx=mT(Je)):0===Je&&(ae[D].hidden=!0);break;default:if(M&&M.WTF)throw new Error("SYLK bad record "+Be)}xe<1&&(Ae=null);break;default:if(M&&M.WTF)throw new Error("SYLK bad record "+Be)}}return ae.length>0&&(Ve["!rows"]=ae),Re.length>0&&(Ve["!cols"]=Re),M&&M.sheetRows&&(W=W.slice(0,M.sheetRows)),[W,Ve]}function a(T,M){var R=function i(T,M){switch(M.type){case"base64":return o(jc(T),M);case"binary":return o(T,M);case"buffer":return o(dr&&Buffer.isBuffer(T)?T.toString("binary"):xp(T),M);case"array":return o(w0(T),M)}throw new Error("Unrecognized type "+M.type)}(T,M),U=R[1],J=f1(R[0],M);return xs(U).forEach(function(ee){J[ee]=U[ee]}),J}function h(T,M,R,D){var U="C;Y"+(R+1)+";X"+(D+1)+";K";switch(T.t){case"n":U+=T.v||0,T.f&&!T.F&&(U+=";E"+FO(T.f,{r:R,c:D}));break;case"b":U+=T.v?"TRUE":"FALSE";break;case"e":U+=T.w||T.v;break;case"d":U+='"'+(T.w||T.v)+'"';break;case"s":U+='"'+T.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return U}return n["|"]=254,{to_workbook:function d(T,M){return Tp(a(T,M),M)},to_sheet:a,from_sheet:function y(T,M){var J,R=["ID;PWXL;N;E"],D=[],U=Mr(T["!ref"]),ee=Array.isArray(T),W="\r\n";R.push("P;PGeneral"),R.push("F;P0;DG0G8;M255"),T["!cols"]&&function p(T,M){M.forEach(function(R,D){var U="F;W"+(D+1)+" "+(D+1)+" ";R.hidden?U+="0":("number"==typeof R.width&&!R.wpx&&(R.wpx=Kx(R.width)),"number"==typeof R.wpx&&!R.wch&&(R.wch=Yx(R.wpx)),"number"==typeof R.wch&&(U+=Math.round(R.wch)))," "!=U.charAt(U.length-1)&&T.push(U)})}(R,T["!cols"]),T["!rows"]&&function m(T,M){M.forEach(function(R,D){var U="F;";R.hidden?U+="M0;":R.hpt?U+="M"+20*R.hpt+";":R.hpx&&(U+="M"+20*Jx(R.hpx)+";"),U.length>2&&T.push(U+"R"+(D+1))})}(R,T["!rows"]),R.push("B;Y"+(U.e.r-U.s.r+1)+";X"+(U.e.c-U.s.c+1)+";D"+[U.s.c,U.s.r,U.e.c,U.e.r].join(" "));for(var pe=U.s.r;pe<=U.e.r;++pe)for(var Ae=U.s.c;Ae<=U.e.c;++Ae){var Ve=Hn({r:pe,c:Ae});(J=ee?(T[pe]||[])[Ae]:T[Ve])&&(null!=J.v||J.f&&!J.F)&&D.push(h(J,0,pe,Ae))}return R.join(W)+W+D.join(W)+W+"E"+W}}}(),C6=function(){function e(o,a){for(var d=o.split("\n"),h=-1,p=-1,m=0,y=[];m!==d.length;++m)if("BOT"!==d[m].trim()){if(!(h<0)){for(var T=d[m].trim().split(","),M=T[0],R=T[1],D=d[++m]||"";1&(D.match(/["]/g)||[]).length&&m<d.length-1;)D+="\n"+d[++m];switch(D=D.trim(),+M){case-1:if("BOT"===D){y[++h]=[],p=0;continue}if("EOD"!==D)throw new Error("Unrecognized DIF special command "+D);break;case 0:y[h][p]="TRUE"===D||"FALSE"!==D&&(isNaN(cu(R))?isNaN(l1(R).getDate())?R:ss(R):cu(R)),++p;break;case 1:D=(D=D.slice(1,D.length-1)).replace(/""/g,'"'),Dx&&D&&D.match(/^=".*"$/)&&(D=D.slice(2,-1)),y[h][p++]=""!==D?D:null}if("EOD"===D)break}}else y[++h]=[],p=0;return a&&a.sheetRows&&(y=y.slice(0,a.sheetRows)),y}function t(o,a){return f1(function n(o,a){switch(a.type){case"base64":return e(jc(o),a);case"binary":return e(o,a);case"buffer":return e(dr&&Buffer.isBuffer(o)?o.toString("binary"):xp(o),a);case"array":return e(w0(o),a)}throw new Error("Unrecognized type "+a.type)}(o,a),a)}return{to_workbook:function r(o,a){return Tp(t(o,a),a)},to_sheet:t,from_sheet:function(){var o=function(h,p,m,y,T){h.push(p),h.push(m+","+y),h.push('"'+T.replace(/"/g,'""')+'"')},a=function(h,p,m,y){h.push(p+","+m),h.push(1==p?'"'+y.replace(/"/g,'""')+'"':y)};return function(h){var y,p=[],m=Mr(h["!ref"]),T=Array.isArray(h);o(p,"TABLE",0,1,"sheetjs"),o(p,"VECTORS",0,m.e.r-m.s.r+1,""),o(p,"TUPLES",0,m.e.c-m.s.c+1,""),o(p,"DATA",0,0,"");for(var M=m.s.r;M<=m.e.r;++M){a(p,-1,0,"BOT");for(var R=m.s.c;R<=m.e.c;++R){var D=Hn({r:M,c:R});if(y=T?(h[M]||[])[R]:h[D])switch(y.t){case"n":var U=Dx?y.w:y.v;!U&&null!=y.v&&(U=y.v),null==U?a(p,1,0,Dx&&y.f&&!y.F?"="+y.f:""):a(p,0,U,"V");break;case"b":a(p,0,y.v?1:0,y.v?"TRUE":"FALSE");break;case"s":a(p,1,0,!Dx||isNaN(y.v)?y.v:'="'+y.v+'"');break;case"d":y.w||(y.w=Hc(y.z||Un[14],Po(ss(y.v)))),Dx?a(p,0,y.w,"V"):a(p,1,0,y.w);break;default:a(p,1,0,"")}else a(p,1,0,"")}}return a(p,-1,0,"EOD"),p.join("\r\n")}}()}}(),E6=function(){function n(y){return y.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function e(y){return y.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(y,T){return f1(function t(y,T){for(var M=y.split("\n"),R=-1,D=-1,U=0,J=[];U!==M.length;++U){var ee=M[U].trim().split(":");if("cell"===ee[0]){var W=Ns(ee[1]);if(J.length<=W.r)for(R=J.length;R<=W.r;++R)J[R]||(J[R]=[]);switch(R=W.r,D=W.c,ee[2]){case"t":J[R][D]=n(ee[3]);break;case"v":J[R][D]=+ee[3];break;case"vtf":var pe=ee[ee.length-1];case"vtc":J[R][D]="nl"===ee[3]?!!+ee[4]:+ee[4],"vtf"==ee[2]&&(J[R][D]=[J[R][D],pe])}}}return T&&T.sheetRows&&(J=J.slice(0,T.sheetRows)),J}(y,T),T)}var o=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),h="--SocialCalcSpreadsheetControlSave--";function p(y){if(!y||!y["!ref"])return"";for(var R,T=[],M=[],D="",U=Ha(y["!ref"]),J=Array.isArray(y),ee=U.s.r;ee<=U.e.r;++ee)for(var W=U.s.c;W<=U.e.c;++W)if(D=Hn({r:ee,c:W}),(R=J?(y[ee]||[])[W]:y[D])&&null!=R.v&&"z"!==R.t){switch(M=["cell",D,"t"],R.t){case"s":case"str":M.push(e(R.v));break;case"n":R.f?(M[2]="vtf",M[3]="n",M[4]=R.v,M[5]=e(R.f)):(M[2]="v",M[3]=R.v);break;case"b":M[2]="vt"+(R.f?"f":"c"),M[3]="nl",M[4]=R.v?"1":"0",M[5]=e(R.f||(R.v?"TRUE":"FALSE"));break;case"d":var pe=Po(ss(R.v));M[2]="vtc",M[3]="nd",M[4]=""+pe,M[5]=R.w||Hc(R.z||Un[14],pe);break;case"e":continue}T.push(M.join(":"))}return T.push("sheet:c:"+(U.e.c-U.s.c+1)+":r:"+(U.e.r-U.s.r+1)+":tvf:1"),T.push("valueformat:1:text-wiki"),T.join("\n")}return{to_workbook:function i(y,T){return Tp(r(y,T),T)},to_sheet:r,from_sheet:function m(y){return[o,a,d,a,p(y),h].join("\n")}}}(),g1=function(){function n(m,y,T,M,R){R.raw?y[T][M]=m:""===m||(y[T][M]="TRUE"===m||"FALSE"!==m&&(isNaN(cu(m))?isNaN(l1(m).getDate())?m:ss(m):cu(m)))}var t={44:",",9:"\t",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(m){for(var y={},T=!1,M=0,R=0;M<m.length;++M)34==(R=m.charCodeAt(M))?T=!T:!T&&R in t&&(y[R]=(y[R]||0)+1);for(M in R=[],y)Object.prototype.hasOwnProperty.call(y,M)&&R.push([y[M],M]);if(!R.length)for(M in y=r)Object.prototype.hasOwnProperty.call(y,M)&&R.push([y[M],M]);return R.sort(function(D,U){return D[0]-U[0]||r[D[1]]-r[U[1]]}),t[R.pop()[1]]||44}function a(m,y){return!y||!y.PRN||y.FS||"sep="==m.slice(0,4)||m.indexOf("\t")>=0||m.indexOf(",")>=0||m.indexOf(";")>=0?function o(m,y){var T=y||{},M="";null!=ys&&null==T.dense&&(T.dense=ys);var R=T.dense?[]:{},D={s:{c:0,r:0},e:{c:0,r:0}};"sep="==m.slice(0,4)?13==m.charCodeAt(5)&&10==m.charCodeAt(6)?(M=m.charAt(4),m=m.slice(7)):13==m.charCodeAt(5)||10==m.charCodeAt(5)?(M=m.charAt(4),m=m.slice(6)):M=i(m.slice(0,1024)):M=T&&T.FS?T.FS:i(m.slice(0,1024));var U=0,J=0,ee=0,W=0,pe=0,Ae=M.charCodeAt(0),Ve=!1,ae=0,Re=m.charCodeAt(0);m=m.replace(/\r\n/gm,"\n");var ke=null!=T.dateNF?function Rj(n){var e="number"==typeof n?Un[n]:n;return e=e.replace($N,"(\\d+)"),new RegExp("^"+e+"$")}(T.dateNF):null;function Je(){var at=m.slice(W,pe),Be={};if('"'==at.charAt(0)&&'"'==at.charAt(at.length-1)&&(at=at.slice(1,-1).replace(/""/g,'"')),0===at.length)Be.t="z";else if(T.raw)Be.t="s",Be.v=at;else if(0===at.trim().length)Be.t="s",Be.v=at;else if(61==at.charCodeAt(0))34==at.charCodeAt(1)&&34==at.charCodeAt(at.length-1)?(Be.t="s",Be.v=at.slice(2,-1).replace(/""/g,'"')):function sW(n){return 1!=n.length}(at)?(Be.t="n",Be.f=at.slice(1)):(Be.t="s",Be.v=at);else if("TRUE"==at)Be.t="b",Be.v=!0;else if("FALSE"==at)Be.t="b",Be.v=!1;else if(isNaN(ee=cu(at)))if(!isNaN(l1(at).getDate())||ke&&at.match(ke)){Be.z=T.dateNF||Un[14];var Ut=0;ke&&at.match(ke)&&(at=function Nj(n,e,t){var r=-1,i=-1,o=-1,a=-1,d=-1,h=-1;(e.match($N)||[]).forEach(function(y,T){var M=parseInt(t[T+1],10);switch(y.toLowerCase().charAt(0)){case"y":r=M;break;case"d":o=M;break;case"h":a=M;break;case"s":h=M;break;case"m":a>=0?d=M:i=M}}),h>=0&&-1==d&&i>=0&&(d=i,i=-1);var p=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(o>=1?o:1)).slice(-2);7==p.length&&(p="0"+p),8==p.length&&(p="20"+p);var m=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return-1==a&&-1==d&&-1==h?p:-1==r&&-1==i&&-1==o?m:p+"T"+m}(0,T.dateNF,at.match(ke)||[]),Ut=1),T.cellDates?(Be.t="d",Be.v=ss(at,Ut)):(Be.t="n",Be.v=Po(ss(at,Ut))),!1!==T.cellText&&(Be.w=Hc(Be.z,Be.v instanceof Date?Po(Be.v):Be.v)),T.cellNF||delete Be.z}else Be.t="s",Be.v=at;else Be.t="n",!1!==T.cellText&&(Be.w=at),Be.v=ee;if("z"==Be.t||(T.dense?(R[U]||(R[U]=[]),R[U][J]=Be):R[Hn({c:J,r:U})]=Be),Re=m.charCodeAt(W=pe+1),D.e.c<J&&(D.e.c=J),D.e.r<U&&(D.e.r=U),ae==Ae)++J;else if(J=0,++U,T.sheetRows&&T.sheetRows<=U)return!0}e:for(;pe<m.length;++pe)switch(ae=m.charCodeAt(pe)){case 34:34===Re&&(Ve=!Ve);break;case Ae:case 10:case 13:if(!Ve&&Je())break e}return pe-W>0&&Je(),R["!ref"]=ir(D),R}(m,y):f1(function e(m,y){var T=y||{},M=[];if(!m||0===m.length)return M;for(var R=m.split(/[\r\n]/),D=R.length-1;D>=0&&0===R[D].length;)--D;for(var U=10,J=0,ee=0;ee<=D;++ee)-1==(J=R[ee].indexOf(" "))?J=R[ee].length:J++,U=Math.max(U,J);for(ee=0;ee<=D;++ee){M[ee]=[];var W=0;for(n(R[ee].slice(0,U).trim(),M,ee,W,T),W=1;W<=(R[ee].length-U)/10+1;++W)n(R[ee].slice(U+10*(W-1),U+10*W).trim(),M,ee,W,T)}return T.sheetRows&&(M=M.slice(0,T.sheetRows)),M}(m,y),y)}function d(m,y){var T="",M="string"==y.type?[0,0,0,0]:function JO(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=jc(n.slice(0,12));break;case"binary":t=n;break;default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}(m,y);switch(y.type){case"base64":T=jc(m);break;case"binary":case"string":T=m;break;case"buffer":T=65001==y.codepage?m.toString("utf8"):y.codepage&&typeof kr<"u"?kr.utils.decode(y.codepage,m):dr&&Buffer.isBuffer(m)?m.toString("binary"):xp(m);break;case"array":T=w0(m);break;default:throw new Error("Unrecognized type "+y.type)}return 239==M[0]&&187==M[1]&&191==M[2]?T=Di(T.slice(3)):"string"!=y.type&&"buffer"!=y.type&&65001==y.codepage?T=Di(T):"binary"==y.type&&typeof kr<"u"&&y.codepage&&(T=kr.utils.decode(y.codepage,kr.utils.encode(28591,T))),"socialcalc:version:"==T.slice(0,19)?E6.to_sheet("string"==y.type?T:Di(T),y):a(T,y)}return{to_workbook:function h(m,y){return Tp(d(m,y),y)},to_sheet:d,from_sheet:function p(m){for(var M,y=[],T=Mr(m["!ref"]),R=Array.isArray(m),D=T.s.r;D<=T.e.r;++D){for(var U=[],J=T.s.c;J<=T.e.c;++J){var ee=Hn({r:D,c:J});if((M=R?(m[D]||[])[J]:m[ee])&&null!=M.v){for(var W=(M.w||(ud(M),M.w)||"").slice(0,10);W.length<10;)W+=" ";U.push(W+(0===J?" ":""))}else U.push("          ")}y.push(U.join(""))}return y.join("\n")}}}(),O0=function(){function n(he,Ge,xe){if(he){Go(he,he.l||0);for(var Ee=xe.Enum||bn;he.l<he.length;){var mt=he.read_shift(2),Bt=Ee[mt]||Ee[65535],Vt=he.read_shift(2),Lt=he.l+Vt,St=Bt.f&&Bt.f(he,Vt,xe);if(he.l=Lt,Ge(St,Bt,mt))return}}}function t(he,Ge){if(!he)return he;var xe=Ge||{};null!=ys&&null==xe.dense&&(xe.dense=ys);var Ee=xe.dense?[]:{},mt="Sheet1",Bt="",Vt=0,Lt={},St=[],Qn=[],ye={s:{r:0,c:0},e:{r:0,c:0}},Xr=xe.sheetRows||0;if(0==he[2]&&(8==he[3]||9==he[3])&&he.length>=16&&5==he[14]&&108===he[15])throw new Error("Unsupported Works 3 for Mac file");if(2==he[2])xe.Enum=bn,n(he,function(_n,Us,Ol){switch(Ol){case 0:xe.vers=_n,_n>=4096&&(xe.qpro=!0);break;case 6:ye=_n;break;case 204:_n&&(Bt=_n);break;case 222:Bt=_n;break;case 15:case 51:xe.qpro||(_n[1].v=_n[1].v.slice(1));case 13:case 14:case 16:14==Ol&&112==(112&_n[2])&&(15&_n[2])>1&&(15&_n[2])<15&&(_n[1].z=xe.dateNF||Un[14],xe.cellDates&&(_n[1].t="d",_n[1].v=Wk(_n[1].v))),xe.qpro&&_n[3]>Vt&&(Ee["!ref"]=ir(ye),Lt[mt]=Ee,St.push(mt),Ee=xe.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},Vt=_n[3],mt=Bt||"Sheet"+(Vt+1),Bt="");var pd=xe.dense?(Ee[_n[0].r]||[])[_n[0].c]:Ee[Hn(_n[0])];if(pd){pd.t=_n[1].t,pd.v=_n[1].v,null!=_n[1].z&&(pd.z=_n[1].z),null!=_n[1].f&&(pd.f=_n[1].f);break}xe.dense?(Ee[_n[0].r]||(Ee[_n[0].r]=[]),Ee[_n[0].r][_n[0].c]=_n[1]):Ee[Hn(_n[0])]=_n[1]}},xe);else{if(26!=he[2]&&14!=he[2])throw new Error("Unrecognized LOTUS BOF "+he[2]);xe.Enum=bt,14==he[2]&&(xe.qpro=!0,he.l=0),n(he,function(_n,Us,Ol){switch(Ol){case 204:mt=_n;break;case 22:_n[1].v=_n[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(_n[3]>Vt&&(Ee["!ref"]=ir(ye),Lt[mt]=Ee,St.push(mt),Ee=xe.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},mt="Sheet"+((Vt=_n[3])+1)),Xr>0&&_n[0].r>=Xr)break;xe.dense?(Ee[_n[0].r]||(Ee[_n[0].r]=[]),Ee[_n[0].r][_n[0].c]=_n[1]):Ee[Hn(_n[0])]=_n[1],ye.e.c<_n[0].c&&(ye.e.c=_n[0].c),ye.e.r<_n[0].r&&(ye.e.r=_n[0].r);break;case 27:_n[14e3]&&(Qn[_n[14e3][0]]=_n[14e3][1]);break;case 1537:Qn[_n[0]]=_n[1],_n[0]==Vt&&(mt=_n[1])}},xe)}if(Ee["!ref"]=ir(ye),Lt[Bt||mt]=Ee,St.push(Bt||mt),!Qn.length)return{SheetNames:St,Sheets:Lt};for(var yr={},ei=[],xr=0;xr<Qn.length;++xr)Lt[St[xr]]?(ei.push(Qn[xr]||St[xr]),yr[Qn[xr]]=Lt[Qn[xr]]||Lt[St[xr]]):(ei.push(Qn[xr]),yr[Qn[xr]]={"!ref":"A1"});return{SheetNames:ei,Sheets:yr}}function p(he,Ge,xe){var Ee=[{c:0,r:0},{t:"n",v:0},0,0];return xe.qpro&&20768!=xe.vers?(Ee[0].c=he.read_shift(1),Ee[3]=he.read_shift(1),Ee[0].r=he.read_shift(2),he.l+=2):(Ee[2]=he.read_shift(1),Ee[0].c=he.read_shift(2),Ee[0].r=he.read_shift(2)),Ee}function m(he,Ge,xe){var Ee=he.l+Ge,mt=p(he,0,xe);if(mt[1].t="s",20768==xe.vers){he.l++;var Bt=he.read_shift(1);return mt[1].v=he.read_shift(Bt,"utf8"),mt}return xe.qpro&&he.l++,mt[1].v=he.read_shift(Ee-he.l,"cstr"),mt}function y(he,Ge,xe){var Ee=dt(7+xe.length);Ee.write_shift(1,255),Ee.write_shift(2,Ge),Ee.write_shift(2,he),Ee.write_shift(1,39);for(var mt=0;mt<Ee.length;++mt){var Bt=xe.charCodeAt(mt);Ee.write_shift(1,Bt>=128?95:Bt)}return Ee.write_shift(1,0),Ee}function M(he,Ge,xe){var Ee=dt(7);return Ee.write_shift(1,255),Ee.write_shift(2,Ge),Ee.write_shift(2,he),Ee.write_shift(2,xe,"i"),Ee}function D(he,Ge,xe){var Ee=dt(13);return Ee.write_shift(1,255),Ee.write_shift(2,Ge),Ee.write_shift(2,he),Ee.write_shift(8,xe,"f"),Ee}function J(he,Ge,xe){var Ee=32768&Ge;return Ge=(Ee?he:0)+((Ge&=-32769)>=8192?Ge-16384:Ge),(Ee?"":"$")+(xe?ki(Ge):Cs(Ge))}var ee={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},W=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Ae(he){var Ge=[{c:0,r:0},{t:"n",v:0},0];return Ge[0].r=he.read_shift(2),Ge[3]=he[he.l++],Ge[0].c=he[he.l++],Ge}function ae(he,Ge,xe,Ee){var mt=dt(6+Ee.length);mt.write_shift(2,he),mt.write_shift(1,xe),mt.write_shift(1,Ge),mt.write_shift(1,39);for(var Bt=0;Bt<Ee.length;++Bt){var Vt=Ee.charCodeAt(Bt);mt.write_shift(1,Vt>=128?95:Vt)}return mt.write_shift(1,0),mt}function ke(he,Ge){var xe=Ae(he),Ee=he.read_shift(4),mt=he.read_shift(4),Bt=he.read_shift(2);if(65535==Bt)return 0===Ee&&3221225472===mt?(xe[1].t="e",xe[1].v=15):0===Ee&&3489660928===mt?(xe[1].t="e",xe[1].v=42):xe[1].v=0,xe;var Vt=32768&Bt;return Bt=(32767&Bt)-16446,xe[1].v=(1-2*Vt)*(mt*Math.pow(2,Bt+32)+Ee*Math.pow(2,Bt)),xe}function Je(he,Ge,xe,Ee){var mt=dt(14);if(mt.write_shift(2,he),mt.write_shift(1,xe),mt.write_shift(1,Ge),0==Ee)return mt.write_shift(4,0),mt.write_shift(4,0),mt.write_shift(2,65535),mt;var Bt=0,Vt=0,St=0;return Ee<0&&(Bt=1,Ee=-Ee),Vt=0|Math.log2(Ee),2147483648&(St=(Ee/=Math.pow(2,Vt-31))>>>0)||(++Vt,St=(Ee/=2)>>>0),Ee-=St,St|=2147483648,St>>>=0,Ee*=Math.pow(2,32),mt.write_shift(4,Ee>>>0),mt.write_shift(4,St),mt.write_shift(2,Vt+=16383+(Bt?32768:0)),mt}function Ut(he,Ge){var xe=Ae(he),Ee=he.read_shift(8,"f");return xe[1].v=Ee,xe}function $t(he,Ge){return 0==he[he.l+Ge-1]?he.read_shift(Ge,"cstr"):""}function Dt(he,Ge){var xe=dt(5+he.length);xe.write_shift(2,14e3),xe.write_shift(2,Ge);for(var Ee=0;Ee<he.length;++Ee){var mt=he.charCodeAt(Ee);xe[xe.l++]=mt>127?95:mt}return xe[xe.l++]=0,xe}var bn={0:{n:"BOF",f:Qs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function d(he,Ge,xe){var Ee={s:{c:0,r:0},e:{c:0,r:0}};return 8==Ge&&xe.qpro?(Ee.s.c=he.read_shift(1),he.l++,Ee.s.r=he.read_shift(2),Ee.e.c=he.read_shift(1),he.l++,Ee.e.r=he.read_shift(2),Ee):(Ee.s.c=he.read_shift(2),Ee.s.r=he.read_shift(2),12==Ge&&xe.qpro&&(he.l+=2),Ee.e.c=he.read_shift(2),Ee.e.r=he.read_shift(2),12==Ge&&xe.qpro&&(he.l+=2),65535==Ee.s.c&&(Ee.s.c=Ee.e.c=Ee.s.r=Ee.e.r=0),Ee)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function T(he,Ge,xe){var Ee=p(he,0,xe);return Ee[1].v=he.read_shift(2,"i"),Ee}},14:{n:"NUMBER",f:function R(he,Ge,xe){var Ee=p(he,0,xe);return Ee[1].v=he.read_shift(8,"f"),Ee}},15:{n:"LABEL",f:m},16:{n:"FORMULA",f:function U(he,Ge,xe){var Ee=he.l+Ge,mt=p(he,0,xe);if(mt[1].v=he.read_shift(8,"f"),xe.qpro)he.l=Ee;else{var Bt=he.read_shift(2);(function pe(he,Ge){Go(he,0);for(var xe=[],Ee=0,mt="",Bt="",Vt="",Lt="";he.l<he.length;){var St=he[he.l++];switch(St){case 0:xe.push(he.read_shift(8,"f"));break;case 1:Bt=J(Ge[0].c,he.read_shift(2),!0),mt=J(Ge[0].r,he.read_shift(2),!1),xe.push(Bt+mt);break;case 2:var Qn=J(Ge[0].c,he.read_shift(2),!0),ye=J(Ge[0].r,he.read_shift(2),!1);Bt=J(Ge[0].c,he.read_shift(2),!0),mt=J(Ge[0].r,he.read_shift(2),!1),xe.push(Qn+ye+":"+Bt+mt);break;case 3:if(he.l<he.length)return void console.error("WK1 premature formula end");break;case 4:xe.push("("+xe.pop()+")");break;case 5:xe.push(he.read_shift(2));break;case 6:for(var Xr="";St=he[he.l++];)Xr+=String.fromCharCode(St);xe.push('"'+Xr.replace(/"/g,'""')+'"');break;case 8:xe.push("-"+xe.pop());break;case 23:xe.push("+"+xe.pop());break;case 22:xe.push("NOT("+xe.pop()+")");break;case 20:case 21:Lt=xe.pop(),Vt=xe.pop(),xe.push(["AND","OR"][St-20]+"("+Vt+","+Lt+")");break;default:if(St<32&&W[St])Lt=xe.pop(),Vt=xe.pop(),xe.push(Vt+W[St]+Lt);else{if(!ee[St])return St<=7?console.error("WK1 invalid opcode "+St.toString(16)):St<=24?console.error("WK1 unsupported op "+St.toString(16)):St<=30?console.error("WK1 invalid opcode "+St.toString(16)):St<=115?console.error("WK1 unsupported function opcode "+St.toString(16)):console.error("WK1 unrecognized opcode "+St.toString(16));if(69==(Ee=ee[St][1])&&(Ee=he[he.l++]),Ee>xe.length)return void console.error("WK1 bad formula parse 0x"+St.toString(16)+":|"+xe.join("|")+"|");var yr=xe.slice(-Ee);xe.length-=Ee,xe.push(ee[St][0]+"("+yr.join(",")+")")}}}1==xe.length?Ge[1].f=""+xe[0]:console.error("WK1 bad formula parse |"+xe.join("|")+"|")})(he.slice(he.l,he.l+Bt),mt),he.l+=Bt}return mt}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:m},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:$t},222:{n:"SHEETNAMELP",f:function wt(he,Ge){var xe=he[he.l++];xe>Ge-1&&(xe=Ge-1);for(var Ee="";Ee.length<xe;)Ee+=String.fromCharCode(he[he.l++]);return Ee}},65535:{n:""}},bt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function Ve(he,Ge){var xe=Ae(he);return xe[1].t="s",xe[1].v=he.read_shift(Ge-4,"cstr"),xe}},23:{n:"NUMBER17",f:ke},24:{n:"NUMBER18",f:function Re(he,Ge){var xe=Ae(he);xe[1].v=he.read_shift(2);var Ee=xe[1].v>>1;if(1&xe[1].v)switch(7&Ee){case 0:Ee=5e3*(Ee>>3);break;case 1:Ee=500*(Ee>>3);break;case 2:Ee=(Ee>>3)/20;break;case 3:Ee=(Ee>>3)/200;break;case 4:Ee=(Ee>>3)/2e3;break;case 5:Ee=(Ee>>3)/2e4;break;case 6:Ee=(Ee>>3)/16;break;case 7:Ee=(Ee>>3)/64}return xe[1].v=Ee,xe}},25:{n:"FORMULA19",f:function at(he,Ge){var xe=ke(he);return he.l+=Ge-14,xe}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function Gt(he,Ge){for(var xe={},Ee=he.l+Ge;he.l<Ee;){var mt=he.read_shift(2);if(14e3==mt){for(xe[mt]=[0,""],xe[mt][0]=he.read_shift(2);he[he.l];)xe[mt][1]+=String.fromCharCode(he[he.l]),he.l++;he.l++}}return xe}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function Be(he,Ge){var xe=Ae(he),Ee=he.read_shift(4);return xe[1].v=Ee>>6,xe}},38:{n:"??"},39:{n:"NUMBER27",f:Ut},40:{n:"FORMULA28",f:function tn(he,Ge){var xe=Ut(he);return he.l+=Ge-10,xe}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:$t},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function Ct(he,Ge,xe){if(xe.qpro&&!(Ge<21)){var Ee=he.read_shift(1);return he.l+=17,he.l+=1,he.l+=2,[Ee,he.read_shift(Ge-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function r(he,Ge){var xe=Ge||{};if(+xe.codepage>=0&&Tl(+xe.codepage),"string"==xe.type)throw new Error("Cannot write WK1 to JS string");var Ee=qa(),mt=Mr(he["!ref"]),Bt=Array.isArray(he),Vt=[];Yt(Ee,0,function o(he){var Ge=dt(2);return Ge.write_shift(2,he),Ge}(1030)),Yt(Ee,6,function h(he){var Ge=dt(8);return Ge.write_shift(2,he.s.c),Ge.write_shift(2,he.s.r),Ge.write_shift(2,he.e.c),Ge.write_shift(2,he.e.r),Ge}(mt));for(var Lt=Math.min(mt.e.r,8191),St=mt.s.r;St<=Lt;++St)for(var Qn=Cs(St),ye=mt.s.c;ye<=mt.e.c;++ye){St===mt.s.r&&(Vt[ye]=ki(ye));var yr=Bt?(he[St]||[])[ye]:he[Vt[ye]+Qn];yr&&"z"!=yr.t&&("n"==yr.t?(0|yr.v)==yr.v&&yr.v>=-32768&&yr.v<=32767?Yt(Ee,13,M(St,ye,yr.v)):Yt(Ee,14,D(St,ye,yr.v)):Yt(Ee,15,y(St,ye,ud(yr).slice(0,239))))}return Yt(Ee,1),Ee.end()},book_to_wk3:function i(he,Ge){var xe=Ge||{};if(+xe.codepage>=0&&Tl(+xe.codepage),"string"==xe.type)throw new Error("Cannot write WK3 to JS string");var Ee=qa();Yt(Ee,0,function a(he){var Ge=dt(26);Ge.write_shift(2,4096),Ge.write_shift(2,4),Ge.write_shift(4,0);for(var xe=0,Ee=0,mt=0,Bt=0;Bt<he.SheetNames.length;++Bt){var Lt=he.Sheets[he.SheetNames[Bt]];if(Lt&&Lt["!ref"]){++mt;var St=Ha(Lt["!ref"]);xe<St.e.r&&(xe=St.e.r),Ee<St.e.c&&(Ee=St.e.c)}}return xe>8191&&(xe=8191),Ge.write_shift(2,xe),Ge.write_shift(1,mt),Ge.write_shift(1,Ee),Ge.write_shift(2,0),Ge.write_shift(2,0),Ge.write_shift(1,1),Ge.write_shift(1,2),Ge.write_shift(4,0),Ge.write_shift(4,0),Ge}(he));for(var mt=0,Bt=0;mt<he.SheetNames.length;++mt)(he.Sheets[he.SheetNames[mt]]||{})["!ref"]&&Yt(Ee,27,Dt(he.SheetNames[mt],Bt++));var Vt=0;for(mt=0;mt<he.SheetNames.length;++mt){var Lt=he.Sheets[he.SheetNames[mt]];if(Lt&&Lt["!ref"]){for(var St=Mr(Lt["!ref"]),Qn=Array.isArray(Lt),ye=[],Xr=Math.min(St.e.r,8191),yr=St.s.r;yr<=Xr;++yr)for(var ei=Cs(yr),xr=St.s.c;xr<=St.e.c;++xr){yr===St.s.r&&(ye[xr]=ki(xr));var Us=Qn?(Lt[yr]||[])[xr]:Lt[ye[xr]+ei];Us&&"z"!=Us.t&&("n"==Us.t?Yt(Ee,23,Je(yr,xr,Vt,Us.v)):Yt(Ee,22,ae(yr,xr,Vt,ud(Us).slice(0,239))))}++Vt}}return Yt(Ee,1),Ee.end()},to_workbook:function e(he,Ge){switch(Ge.type){case"base64":return t(qc(jc(he)),Ge);case"binary":return t(qc(he),Ge);case"buffer":case"array":return t(he,Ge)}throw"Unsupported type "+Ge.type}}}(),cz=/^\s|\s$|[\t\n\r]/;function S6(n,e){if(!e.bookSST)return"";var t=[bs];t[t.length]=zt("sst",null,{xmlns:Ep[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(null!=n[r]){var i=n[r],o="<si>";i.r?o+=i.r:(o+="<t",i.t||(i.t=""),i.t.match(cz)&&(o+=' xml:space="preserve"'),o+=">"+Qr(i.t)+"</t>"),t[t.length]=o+="</si>"}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}var fz=function bq(n,e){var t=!1;return null==e&&(t=!0,e=dt(15+4*n.t.length)),e.write_shift(1,0),ko(n.t,e),t?e.slice(0,e.l):e};function hz(n){var e=qa();It(e,159,function dz(n,e){return e||(e=dt(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}(n));for(var t=0;t<n.length;++t)It(e,19,fz(n[t]));return It(e,160),e.end()}function MO(n){var t,o,e=0,r=function A6(n){if(typeof kr<"u")return kr.utils.encode(y0,n);for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}(n),i=r.length+1;for((t=yp(i))[0]=r.length,o=1;o!=i;++o)t[o]=r[o-1];for(o=i-1;o>=0;--o)e=((16384&e?1:0)|e<<1&32767)^t[o];return 52811^e}var D6=function(){function n(i,o){switch(o.type){case"base64":return e(jc(i),o);case"binary":return e(i,o);case"buffer":return e(dr&&Buffer.isBuffer(i)?i.toString("binary"):xp(i),o);case"array":return e(w0(i),o)}throw new Error("Unrecognized type "+o.type)}function e(i,o){var d=(o||{}).dense?[]:{},h=i.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var p={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(m,y){Array.isArray(d)&&(d[y]=[]);for(var R,T=/\\\w+\b/g,M=0,D=-1;R=T.exec(m);){if("\\cell"===R[0]){var U=m.slice(M,T.lastIndex-R[0].length);if(" "==U[0]&&(U=U.slice(1)),++D,U.length){var J={v:U,t:"s"};Array.isArray(d)?d[y][D]=J:d[Hn({r:y,c:D})]=J}}M=T.lastIndex}D>p.e.c&&(p.e.c=D)}),d["!ref"]=ir(p),d}return{to_workbook:function t(i,o){return Tp(n(i,o),o)},to_sheet:n,from_sheet:function r(i){for(var d,o=["{\\rtf1\\ansi"],a=Mr(i["!ref"]),h=Array.isArray(i),p=a.s.r;p<=a.e.r;++p){o.push("\\trowd\\trautofit1");for(var m=a.s.c;m<=a.e.c;++m)o.push("\\cellx"+(m+1));for(o.push("\\pard\\intbl"),m=a.s.c;m<=a.e.c;++m){var y=Hn({r:p,c:m});(d=h?(i[p]||[])[m]:i[y])&&(null!=d.v||d.f&&!d.F)&&(o.push(" "+(d.w||(ud(d),d.w))),o.push("\\cell"))}o.push("\\pard\\intbl\\row")}return o.join("")+"}"}}}();function Wx(n){for(var e=0,t=1;3!=e;++e)t=256*t+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var wa=6;function Kx(n){return Math.floor((n+Math.round(128/wa)/256)*wa)}function Yx(n){return Math.floor((n-5)/wa*100+.5)/100}function gT(n){return Math.round((n*wa+5)/wa*256)/256}function Ap(n){n.width?(n.wpx=Kx(n.width),n.wch=Yx(n.wpx),n.MDW=wa):n.wpx?(n.wch=Yx(n.wpx),n.width=gT(n.wch),n.MDW=wa):"number"==typeof n.wch&&(n.width=gT(n.wch),n.wpx=Kx(n.width),n.MDW=wa),n.customWidth&&delete n.customWidth}var O6=96;function Jx(n){return 96*n/O6}function mT(n){return n*O6/96}function F6(n,e){var r,t=[bs,zt("styleSheet",null,{xmlns:Ep[0],"xmlns:vt":Js.vt})];return n.SSF&&null!=(r=function Uz(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)null!=n[r]&&(e[e.length]=zt("numFmt",null,{numFmtId:r,formatCode:Qr(n[r])}))}),1===e.length?"":(e[e.length]="</numFmts>",e[0]=zt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}(n.SSF))&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=function Bz(n){var e=[];return e[e.length]=zt("cellXfs",null),n.forEach(function(t){e[e.length]=zt("xf",null,t)}),e[e.length]="</cellXfs>",2===e.length?"":(e[0]=zt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function jz(n,e,t){t||(t=dt(6+4*e.length)),t.write_shift(2,n),ko(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return null==t.l&&(t.l=t.length),r}var DO,$z=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],zz=_a;function R6(n,e){e||(e=dt(84)),DO||(DO=QE($z));var t=DO[n.patternType];null==t&&(t=40),e.write_shift(4,t);var r=0;if(40!=t)for(sT({auto:1},e),sT({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function N6(n,e,t){return t||(t=dt(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Qx(n,e){return e||(e=dt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Wz=_a;function cG(n,e){var t=qa();return It(t,278),function Xz(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=e[i]&&++t}),0!=t&&(It(n,615,lu(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=e[i]&&It(n,44,jz(i,e[i]))}),It(n,616))}}(t,n.SSF),function eG(n){It(n,611,lu(1)),It(n,43,function Hz(n,e){e||(e=dt(153)),e.write_shift(2,20*n.sz),function Pq(n,e){e||(e=dt(2)),e.write_shift(1,(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0)),e.write_shift(1,0)}(n,e),e.write_shift(2,n.bold?700:400);var t=0;"superscript"==n.vertAlign?t=1:"subscript"==n.vertAlign&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),sT(n.color,e);var r=0;return"major"==n.scheme&&(r=1),"minor"==n.scheme&&(r=2),e.write_shift(1,r),ko(n.name,e),e.length>e.l?e.slice(0,e.l):e}({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),It(n,612)}(t),function tG(n){It(n,603,lu(2)),It(n,45,R6({patternType:"none"})),It(n,45,R6({patternType:"gray125"})),It(n,604)}(t),function nG(n){It(n,613,lu(1)),It(n,46,function Kz(n,e){return e||(e=dt(51)),e.write_shift(1,0),Qx(0,e),Qx(0,e),Qx(0,e),Qx(0,e),Qx(0,e),e.length>e.l?e.slice(0,e.l):e}()),It(n,614)}(t),function rG(n){It(n,626,lu(1)),It(n,47,N6({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),It(n,627)}(t),function iG(n,e){It(n,617,lu(e.length)),e.forEach(function(t){It(n,47,N6(t,0))}),It(n,618)}(t,e.cellXfs),function sG(n){It(n,619,lu(1)),It(n,48,function Yz(n,e){return e||(e=dt(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,+n.builtinId),e.write_shift(1,0),iT(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}({xfId:0,builtinId:0,name:"Normal"})),It(n,620)}(t),function oG(n){It(n,505,lu(0)),It(n,506)}(t),function aG(n){It(n,508,function Jz(n,e,t){var r=dt(2052);return r.write_shift(4,n),iT(e,r),iT(t,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),It(n,509)}(t),It(t,279),t.end()}function kO(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&"string"==typeof n.raw)return n.raw;var t=[bs];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',t[t.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',t[t.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',t[t.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',t[t.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',t[t.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',t[t.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function FG(){var n=qa();return It(n,332),It(n,334,lu(1)),It(n,335,function AG(n){var e=dt(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),ko(n.name,e),e.slice(0,e.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),It(n,336),It(n,339,function PG(n,e){var t=dt(8+2*e.length);return t.write_shift(4,n),ko(e,t),t.slice(0,t.l)}(1,"XLDAPR")),It(n,52),It(n,35,lu(514)),It(n,4096,lu(0)),It(n,4097,Il(1)),It(n,36),It(n,53),It(n,340),It(n,337,function kG(n,e){var t=dt(8);return t.write_shift(4,n),t.write_shift(4,e?1:0),t}(1,!0)),It(n,51,function IG(n){var e=dt(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}([[1,0]])),It(n,338),It(n,333),n.end()}function U6(){var n=[bs];return n.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),n.join("")}var m1=1024;function B6(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[zt("xml",null,{"xmlns:v":zc.v,"xmlns:o":zc.o,"xmlns:x":zc.x,"xmlns:mv":zc.mv}).replace(/\/>/,">"),zt("o:shapelayout",zt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),zt("v:shapetype",[zt("v:stroke",null,{joinstyle:"miter"}),zt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];m1<1e3*n;)m1+=1e3;return e.forEach(function(o){var a=Ns(o[0]),d={color2:"#BEFF82",type:"gradient"};"gradient"==d.type&&(d.angle="-180");var h="gradient"==d.type?zt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,p=zt("v:fill",h,d);++m1,i=i.concat(["<v:shape"+Bx({id:"_x0000_s"+m1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(o[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",p,zt("v:shadow",null,{on:"t",obscured:"t"}),zt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",zo("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),zo("x:AutoFill","False"),zo("x:Row",String(a.r)),zo("x:Column",String(a.c)),o[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function Z6(n){var e=[bs,zt("comments",null,{xmlns:Ep[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var o=Qr(i.a);-1==t.indexOf(o)&&(t.push(o),e.push("<author>"+o+"</author>")),i.T&&i.ID&&-1==t.indexOf("tc="+i.ID)&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),0==t.length&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,o=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(h){h.a&&(i=t.indexOf(Qr(h.a))),o.push(h.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),o.length<=1)e.push(zo("t",Qr(o[0]||"")));else{for(var a="Comment:\n    "+o[0]+"\n",d=1;d<o.length;++d)a+="Reply:\n    "+o[d]+"\n";e.push(zo("t",Qr(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function qG(n,e,t){var r=[bs,zt("ThreadedComments",null,{xmlns:Js.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var o="";(i[1]||[]).forEach(function(a,d){if(a.T){a.a&&-1==e.indexOf(a.a)&&e.push(a.a);var h={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};0==d?o=h.id:h.parentId=o,a.ID=h.id,a.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(zt("threadedComment",zo("text",a.t||""),h))}else delete a.ID})}),r.push("</ThreadedComments>"),r.join("")}var WG=va;function JG(n){var e=qa(),t=[];return It(e,628),It(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),It(e,632,function KG(n){return ko(n.slice(0,54))}(i.a)))})}),It(e,631),It(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var o={s:Ns(r[0]),e:Ns(r[0])};It(e,635,function GG(n,e){return null==e&&(e=dt(36)),e.write_shift(4,n[1].iauthor),h1(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}([o,i])),i.t&&i.t.length>0&&It(e,637,function Eq(n,e){var t=!1;return null==e&&(t=!0,e=dt(23+4*n.t.length)),e.write_shift(1,1),ko(n.t,e),e.write_shift(4,1),function wq(n,e){e||(e=dt(4)),e.write_shift(2,n.ich||0),e.write_shift(2,n.ifnt||0)}({ich:0,ifnt:0},e),t?e.slice(0,e.l):e}(i)),It(e,636),delete i.iauthor})}),It(e,634),It(e,629),e.end()}var j6=["xlsb","xlsm","xlam","biff8","xla"],_1=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,o,a){var d=!1,h=!1;0==o.length?h=!0:"["==o.charAt(0)&&(h=!0,o=o.slice(1,-1)),0==a.length?d=!0:"["==a.charAt(0)&&(d=!0,a=a.slice(1,-1));var p=o.length>0?0|parseInt(o,10):0,m=a.length>0?0|parseInt(a,10):0;return d?m+=e.c:--m,h?p+=e.r:--p,i+(d?"":"$")+ki(m)+(h?"":"$")+Cs(p)}return function(i,o){return e=o,i.replace(n,t)}}(),OO=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,FO=function(){return function(e,t){return e.replace(OO,function(r,i,o,a,d,h){var p=uO(a)-(o?0:t.c),m=lO(h)-(d?0:t.r);return i+"R"+(0==m?"":d?m+1:"["+m+"]")+"C"+(0==p?"":o?p+1:"["+p+"]")})}}();function q6(n,e){return n.replace(OO,function(t,r,i,o,a,d){return r+("$"==i?i+o:ki(uO(o)+e.c))+("$"==a?a+d:Cs(lO(d)+e.r))})}function Xs(n){n.l+=1}function Mp(n,e){var t=n.read_shift(1==e?1:2);return[16383&t,t>>14&1,t>>15&1]}function H6(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return $6(n);12==t.biff&&(r=4)}var i=n.read_shift(r),o=n.read_shift(r),a=Mp(n,2),d=Mp(n,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:o,c:d[0],cRel:d[1],rRel:d[2]}}}function $6(n){var e=Mp(n,2),t=Mp(n,2),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function z6(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return function aW(n){var e=Mp(n,2),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}(n);var r=n.read_shift(t&&12==t.biff?4:2),i=Mp(n,2);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function cW(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:255&t,fQuoted:!!(16384&t),cRel:t>>15,rRel:t>>15}}function G6(n){var e=1&n[n.l+1];return n.l+=4,[e,1]}function W6(n){return[n.read_shift(1),n.read_shift(1)]}function LW(n,e){var t=[n.read_shift(1)];if(12==e)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2}switch(t[0]){case 4:t[1]=function Ls(n,e){return 1===n.read_shift(e)}(n,1)?"TRUE":"FALSE",12!=e&&(n.l+=7);break;case 37:case 16:t[1]=Zf[n[n.l]],n.l+=12==e?4:8;break;case 0:n.l+=8;break;case 1:t[1]=ya(n);break;case 2:t[1]=function D0(n,e,t){if(t.biff>5)return function Gx(n,e,t){var r=n.read_shift(t&&2==t.biff?1:2);return 0===r?(n.l++,""):function P0(n,e,t){if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return n.read_shift(e,0===i?"sbcs-cont":"dbcs-cont")}(n,r,t)}(n,0,t);var r=n.read_shift(1);return 0===r?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function UW(n,e,t){for(var r=n.read_shift(12==t.biff?4:2),i=[],o=0;o!=r;++o)i.push((12==t.biff?S0:fT)(n,8));return i}function BW(n,e,t){var r=0,i=0;12==t.biff?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,0==--i&&(i=256));for(var o=0,a=[];o!=r&&(a[o]=[]);++o)for(var d=0;d!=i;++d)a[o][d]=LW(n,t.biff);return a}function Xx(n,e,t){return n.l+=2,[cW(n)]}function RO(n){return n.l+=6,[]}function K6(n){return n.l+=2,[Qs(n),1&n.read_shift(2)]}var sK=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"],Y6={1:{n:"PtgExp",f:function DW(n,e,t){return n.l++,t&&12==t.biff?[n.read_shift(4,"i"),0]:[n.read_shift(2),n.read_shift(t&&2==t.biff?1:2)]}},2:{n:"PtgTbl",f:_a},3:{n:"PtgAdd",f:Xs},4:{n:"PtgSub",f:Xs},5:{n:"PtgMul",f:Xs},6:{n:"PtgDiv",f:Xs},7:{n:"PtgPower",f:Xs},8:{n:"PtgConcat",f:Xs},9:{n:"PtgLt",f:Xs},10:{n:"PtgLe",f:Xs},11:{n:"PtgEq",f:Xs},12:{n:"PtgGe",f:Xs},13:{n:"PtgGt",f:Xs},14:{n:"PtgNe",f:Xs},15:{n:"PtgIsect",f:Xs},16:{n:"PtgUnion",f:Xs},17:{n:"PtgRange",f:Xs},18:{n:"PtgUplus",f:Xs},19:{n:"PtgUminus",f:Xs},20:{n:"PtgPercent",f:Xs},21:{n:"PtgParen",f:Xs},22:{n:"PtgMissArg",f:Xs},23:{n:"PtgStr",f:function NW(n,e,t){return n.l++,zx(n,0,t)}},26:{n:"PtgSheet",f:function cK(n,e,t){return n.l+=5,n.l+=2,n.l+=2==t.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function lK(n,e,t){return n.l+=2==t.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function kW(n){return n.l++,Zf[n.read_shift(1)]}},29:{n:"PtgBool",f:function FW(n){return n.l++,0!==n.read_shift(1)}},30:{n:"PtgInt",f:function OW(n){return n.l++,n.read_shift(2)}},31:{n:"PtgNum",f:function RW(n){return n.l++,ya(n)}},32:{n:"PtgArray",f:function mW(n,e,t){var r=(96&n[n.l++])>>5;return n.l+=2==t.biff?6:12==t.biff?14:7,[r]}},33:{n:"PtgFunc",f:function AW(n,e,t){var r=(96&n[n.l])>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[PK[i],X6[i],r]}},34:{n:"PtgFuncVar",f:function MW(n,e,t){var r=n[n.l++],i=n.read_shift(1),o=t&&t.biff<=3?[88==r?-1:0,n.read_shift(1)]:function IW(n){return[n[n.l+1]>>7,32767&n.read_shift(2)]}(n);return[i,(0===o[0]?X6:IK)[o[1]]]}},35:{n:"PtgName",f:function VW(n,e,t){var r=n.read_shift(1)>>>5&3,o=n.read_shift(!t||t.biff>=8?4:2);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12}return[r,0,o]}},36:{n:"PtgRef",f:function EW(n,e,t){var r=(96&n[n.l])>>5;return n.l+=1,[r,z6(n,0,t)]}},37:{n:"PtgArea",f:function dW(n,e,t){return[(96&n[n.l++])>>5,H6(n,0,t)]}},38:{n:"PtgMemArea",f:function qW(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=t&&2==t.biff?3:4,[r,n.read_shift(t&&2==t.biff?1:2)]}},39:{n:"PtgMemErr",f:_a},40:{n:"PtgMemNoMem",f:_a},41:{n:"PtgMemFunc",f:function HW(n,e,t){return[n.read_shift(1)>>>5&3,n.read_shift(t&&2==t.biff?1:2)]}},42:{n:"PtgRefErr",f:function $W(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,12==t.biff&&(n.l+=2),[r]}},43:{n:"PtgAreaErr",f:function hW(n,e,t){var r=(96&n[n.l++])>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function TW(n,e,t){var r=(96&n[n.l])>>5;n.l+=1;var i=function lW(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return function uW(n){var e=n.read_shift(2),t=n.read_shift(1),r=(32768&e)>>15,i=(16384&e)>>14;return e&=16383,1==r&&e>=8192&&(e-=16384),1==i&&t>=128&&(t-=256),{r:e,c:t,cRel:i,rRel:r}}(n);var i=n.read_shift(r>=12?4:2),o=n.read_shift(2),a=(16384&o)>>14,d=(32768&o)>>15;if(o&=16383,1==d)for(;i>524287;)i-=1048576;if(1==a)for(;o>8191;)o-=16384;return{r:i,c:o,cRel:a,rRel:d}}(n,0,t);return[r,i]}},45:{n:"PtgAreaN",f:function gW(n,e,t){var r=(96&n[n.l++])>>5,i=function oW(n,e,t){if(t.biff<8)return $6(n);var r=n.read_shift(12==t.biff?4:2),i=n.read_shift(12==t.biff?4:2),o=Mp(n,2),a=Mp(n,2);return{s:{r,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}(n,0,t);return[r,i]}},46:{n:"PtgMemAreaN",f:function uK(n){return[n.read_shift(1)>>>5&3,n.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function dK(n){return[n.read_shift(1)>>>5&3,n.read_shift(2)]}},57:{n:"PtgNameX",f:function ZW(n,e,t){return 5==t.biff?function jW(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}(n):[n.read_shift(1)>>>5&3,n.read_shift(2),n.read_shift(4)]}},58:{n:"PtgRef3d",f:function SW(n,e,t){var r=(96&n[n.l])>>5;n.l+=1;var i=n.read_shift(2);return t&&5==t.biff&&(n.l+=12),[r,i,z6(n,0,t)]}},59:{n:"PtgArea3d",f:function fW(n,e,t){var r=(96&n[n.l++])>>5,i=n.read_shift(2,"i");if(t&&5===t.biff)n.l+=12;return[r,i,H6(n,0,t)]}},60:{n:"PtgRefErr3d",f:function zW(n,e,t){var r=(96&n[n.l++])>>5,i=n.read_shift(2),o=4;if(t)switch(t.biff){case 5:o=15;break;case 12:o=6}return n.l+=o,[r,i]}},61:{n:"PtgAreaErr3d",f:function pW(n,e,t){var r=(96&n[n.l++])>>5,i=n.read_shift(2),o=8;if(t)switch(t.biff){case 5:n.l+=12,o=6;break;case 12:o=12}return n.l+=o,[r,i]}},255:{}},hK={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},pK={1:{n:"PtgElfLel",f:K6},2:{n:"PtgElfRw",f:Xx},3:{n:"PtgElfCol",f:Xx},6:{n:"PtgElfRwV",f:Xx},7:{n:"PtgElfColV",f:Xx},10:{n:"PtgElfRadical",f:Xx},11:{n:"PtgElfRadicalS",f:RO},13:{n:"PtgElfColS",f:RO},15:{n:"PtgElfColSV",f:RO},16:{n:"PtgElfRadicalLel",f:K6},25:{n:"PtgList",f:function oK(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),o=n.read_shift(2);return{ixti:e,coltype:3&t,rt:sK[t>>2&31],idx:r,c:i,C:o}}},29:{n:"PtgSxName",f:function aK(n){return n.l+=2,[n.read_shift(4)]}},255:{}},gK={0:{n:"PtgAttrNoop",f:function fK(n){return n.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function wW(n,e,t){var r=255&n[n.l+1]?1:0;return n.l+=t&&2==t.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function yW(n,e,t){var r=255&n[n.l+1]?1:0;return n.l+=2,[r,n.read_shift(t&&2==t.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function _W(n,e,t){n.l+=2;for(var r=n.read_shift(t&&2==t.biff?1:2),i=[],o=0;o<=r;++o)i.push(n.read_shift(t&&2==t.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function vW(n,e,t){var r=255&n[n.l+1]?1:0;return n.l+=2,[r,n.read_shift(t&&2==t.biff?1:2)]}},16:{n:"PtgAttrSum",f:function PW(n,e,t){n.l+=t&&2==t.biff?3:4}},32:{n:"PtgAttrBaxcel",f:G6},33:{n:"PtgAttrBaxcel",f:G6},64:{n:"PtgAttrSpace",f:function bW(n){return n.read_shift(2),W6(n)}},65:{n:"PtgAttrSpaceSemi",f:function CW(n){return n.read_shift(2),W6(n)}},128:{n:"PtgAttrIfError",f:function xW(n){var e=255&n[n.l+1]?1:0;return n.l+=2,[e,n.read_shift(2)]}},255:{}};function ew(n,e,t,r){if(r.biff<8)return _a(n,e);for(var i=n.l+e,o=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=BW(n,0,r),o.push(t[a][1]);break;case"PtgMemArea":t[a][2]=UW(n,0,r),o.push(t[a][2]);break;case"PtgExp":r&&12==r.biff&&(t[a][1][1]=n.read_shift(4),o.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return 0!=(e=i-n.l)&&o.push(_a(n,e)),o}function mK(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],o=0;o<r.length;++o){var a=r[o];i.push(a?2===a[0]?'"'+a[1].replace(/"/g,'""')+'"':a[1]:"")}e.push(i.join(","))}return e.join(";")}var _K={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function J6(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),0==e?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=-1==r[1]?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return null!=t.SID?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(o){return o.Name}).join(";;");default:return n[r[0]][0][3]?(i=-1==r[1]?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Q6(n,e,t){var r=J6(n,e,t);return"#REF"==r?r:function vK(n,e){if(!(n||e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}(r,t)}function ba(n,e,t,r,i){var h,p,m,M,o=i&&i.biff||8,a={s:{c:0,r:0},e:{c:0,r:0}},d=[],y=0,T=0,R="";if(!n[0]||!n[0][0])return"";for(var D=-1,U="",J=0,ee=n[0].length;J<ee;++J){var W=n[0][J];switch(W[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=d.pop(),p=d.pop(),D>=0){switch(n[0][D][1][0]){case 0:U=ws(" ",n[0][D][1][1]);break;case 1:U=ws("\r",n[0][D][1][1]);break;default:if(U="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][D][1][0])}p+=U,D=-1}d.push(p+_K[W[0]]+h);break;case"PtgIsect":h=d.pop(),p=d.pop(),d.push(p+" "+h);break;case"PtgUnion":h=d.pop(),p=d.pop(),d.push(p+","+h);break;case"PtgRange":h=d.pop(),p=d.pop(),d.push(p+":"+h);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":m=jx(W[1][1],a,i),d.push(qx(m,o));break;case"PtgRefN":m=t?jx(W[1][1],t,i):W[1][1],d.push(qx(m,o));break;case"PtgRef3d":y=W[1][1],m=jx(W[1][2],a,i),R=Q6(r,y,i),d.push(R+"!"+qx(m,o));break;case"PtgFunc":case"PtgFuncVar":var Ae=W[1][0],Ve=W[1][1];Ae||(Ae=0);var ae=0==(Ae&=127)?[]:d.slice(-Ae);d.length-=Ae,"User"===Ve&&(Ve=ae.shift()),d.push(Ve+"("+ae.join(",")+")");break;case"PtgBool":d.push(W[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":d.push(W[1]);break;case"PtgNum":d.push(String(W[1]));break;case"PtgStr":d.push('"'+W[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":M=S5(W[1][1],t?{s:t}:a,i),d.push(cO(M,i));break;case"PtgArea":M=S5(W[1][1],a,i),d.push(cO(M,i));break;case"PtgArea3d":M=W[1][2],R=Q6(r,y=W[1][1],i),d.push(R+"!"+cO(M,i));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgName":var Re=(r.names||[])[(T=W[1][2])-1]||(r[0]||[])[T],ke=Re?Re.Name:"SH33TJSNAME"+String(T);ke&&"_xlfn."==ke.slice(0,6)&&!i.xlfn&&(ke=ke.slice(6)),d.push(ke);break;case"PtgNameX":var at,Je=W[1][1];if(T=W[1][2],!(i.biff<=5)){var Be="";if(14849==((r[Je]||[])[0]||[])[0]||(1025==((r[Je]||[])[0]||[])[0]?r[Je][T]&&r[Je][T].itab>0&&(Be=r.SheetNames[r[Je][T].itab-1]+"!"):Be=r.SheetNames[T-1]+"!"),r[Je]&&r[Je][T])Be+=r[Je][T].Name;else if(r[0]&&r[0][T])Be+=r[0][T].Name;else{var Ut=(J6(r,Je,i)||"").split(";;");Ut[T-1]?Be=Ut[T-1]:Be+="SH33TJSERRX"}d.push(Be);break}Je<0&&(Je=-Je),r[Je]&&(at=r[Je][T]),at||(at={Name:"SH33TJSERRY"}),d.push(at.Name);break;case"PtgParen":var tn="(",$t=")";if(D>=0){switch(U="",n[0][D][1][0]){case 2:tn=ws(" ",n[0][D][1][1])+tn;break;case 3:tn=ws("\r",n[0][D][1][1])+tn;break;case 4:$t=ws(" ",n[0][D][1][1])+$t;break;case 5:$t=ws("\r",n[0][D][1][1])+$t;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][D][1][0])}D=-1}d.push(tn+d.pop()+$t);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":d.push("#REF!");break;case"PtgExp":var wt={c:t.c,r:t.r};if(r.sharedf[Hn(m={c:W[1][1],r:W[1][0]})]){var Ct=r.sharedf[Hn(m)];d.push(ba(Ct,0,wt,r,i))}else{var Gt=!1;for(h=0;h!=r.arrayf.length;++h)if(!(m.c<(p=r.arrayf[h])[0].s.c||m.c>p[0].e.c||m.r<p[0].s.r||m.r>p[0].e.r)){d.push(ba(p[1],0,wt,r,i)),Gt=!0;break}Gt||d.push(W[1])}break;case"PtgArray":d.push("{"+mK(W[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":D=J;break;case"PtgMissArg":d.push("");break;case"PtgList":d.push("Table"+W[1].idx+"[#"+W[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(W))}if(3!=i.biff&&D>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(n[0][J][0])){var bn=!0;switch((W=n[0][D])[1][0]){case 4:bn=!1;case 0:U=ws(" ",W[1][1]);break;case 5:bn=!1;case 1:U=ws("\r",W[1][1]);break;default:if(U="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+W[1][0])}d.push((bn?U:"")+d.pop()+(bn?"":U)),D=-1}}if(d.length>1&&i.WTF)throw new Error("bad formula stack");return d[0]}function yT(n,e,t){var r=n.read_shift(4),i=function tw(n,e,t){for(var i,o,r=n.l+e,a=[];r!=n.l;)e=r-n.l,i=Y6[o=n[n.l]]||Y6[hK[o]],(24===o||25===o)&&(i=(24===o?pK:gK)[n[n.l+1]]),i&&i.f?a.push([i.n,i.f(n,e,t)]):_a(n,e);return a}(n,r,t),o=n.read_shift(4);return[i,o>0?ew(n,o,i,t):null]}var SK=yT,xT=yT,AK=yT,MK=yT,IK={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},X6={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},PK={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function DK(n){return("of:="+n.replace(OO,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function kK(n){return n.replace(/\./,"!")}var nw=typeof Map<"u";function UO(n,e,t){var r=0,i=n.length;if(t){if(nw?t.has(e):Object.prototype.hasOwnProperty.call(t,e))for(var o=nw?t.get(e):t[e];r<o.length;++r)if(n[o[r]].t===e)return n.Count++,o[r]}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(nw?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function bT(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(wa=e.MDW),null!=e.width?t.customWidth=1:null!=e.wpx?r=Yx(e.wpx):null!=e.wch&&(r=e.wch),r>-1?(t.width=gT(r),t.customWidth=1):null!=e.width&&(t.width=e.width),e.hidden&&(t.hidden=!0),null!=e.level&&(t.outlineLevel=t.level=e.level),t}function F0(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];"xlml"==e&&(t=[1,1,1,1,.5,.5]),null==n.left&&(n.left=t[0]),null==n.right&&(n.right=t[1]),null==n.top&&(n.top=t[2]),null==n.bottom&&(n.bottom=t[3]),null==n.header&&(n.header=t[4]),null==n.footer&&(n.footer=t[5])}}function Ip(n,e,t){var r=t.revssf[null!=e.z?e.z:"General"],i=60,o=n.length;if(null==r&&t.ssf)for(;i<392;++i)if(null==t.ssf[i]){ad(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}for(i=0;i!=o;++i)if(n[i].numFmtId===r)return i;return n[o]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},o}function FK(n,e,t){if(n&&n["!ref"]){var r=Mr(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}var KK=["objects","scenarios","selectLockedCells","selectUnlockedCells"],YK=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function cY(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),void 0===n.v&&"string"!=typeof n.f||"z"===n.t&&!n.f)return"";var i="",o=n.t,a=n.v;if("z"!==n.t)switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=Zf[n.v];break;case"d":r&&r.cellDates?i=ss(n.v,-1).toISOString():((n=pi(n)).t="n",i=""+(n.v=Po(ss(n.v)))),typeof n.z>"u"&&(n.z=Un[14]);break;default:i=n.v}var d=zo("v",Qr(i)),h={r:e},p=Ip(r.cellXfs,n,r);switch(0!==p&&(h.s=p),n.t){case"n":case"z":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;default:if(null==n.v){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){d=zo("v",""+UO(r.Strings,n.v,r.revStrings)),h.t="s";break}h.t="str"}if(n.t!=o&&(n.t=o,n.v=a),"string"==typeof n.f&&n.f){var m=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;d=zt("f",Qr(n.f),m)+(null!=n.v?d:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(h.cm=1),zt("c",d,h)}function nL(n,e,t,r){var a,i=[bs,zt("worksheet",null,{xmlns:Ep[0],"xmlns:r":Js.r})],d="",h=t.Sheets[t.SheetNames[n]];null==h&&(h={});var p=h["!ref"]||"A1",m=Mr(p);if(m.e.c>16383||m.e.r>1048575){if(e.WTF)throw new Error("Range "+p+" exceeds format limit A1:XFD1048576");m.e.c=Math.min(m.e.c,16383),m.e.r=Math.min(m.e.c,1048575),p=ir(m)}r||(r={}),h["!comments"]=[];var y=[];(function WK(n,e,t,r,i){var o=!1,a={},d=null;if("xlsx"!==r.bookType&&e.vbaraw){var h=e.SheetNames[t];try{e.Workbook&&(h=e.Workbook.Sheets[t].CodeName||h)}catch{}o=!0,a.codeName=ld(Qr(h))}if(n&&n["!outline"]){var p={summaryBelow:1,summaryRight:1};n["!outline"].above&&(p.summaryBelow=0),n["!outline"].left&&(p.summaryRight=0),d=(d||"")+zt("outlinePr",null,p)}!o&&!d||(i[i.length]=zt("sheetPr",d,a))})(h,t,n,e,i),i[i.length]=zt("dimension",null,{ref:p}),i[i.length]=function aY(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),zt("sheetViews",zt("sheetView",null,i),{})}(0,0,0,t),e.sheetFormat&&(i[i.length]=zt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),null!=h["!cols"]&&h["!cols"].length>0&&(i[i.length]=function nY(n,e){for(var r,t=["<cols>"],i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=zt("col",null,bT(i,r)));return t[t.length]="</cols>",t.join("")}(0,h["!cols"])),i[a=i.length]="<sheetData/>",h["!links"]=[],null!=h["!ref"]&&(d=function uY(n,e,t,r){var h,U,i=[],o=[],a=Mr(n["!ref"]),d="",p="",m=[],y=0,T=0,M=n["!rows"],R=Array.isArray(n),D={r:p},J=-1;for(T=a.s.c;T<=a.e.c;++T)m[T]=ki(T);for(y=a.s.r;y<=a.e.r;++y){for(o=[],p=Cs(y),T=a.s.c;T<=a.e.c;++T){h=m[T]+p;var ee=R?(n[y]||[])[T]:n[h];void 0!==ee&&null!=(d=cY(ee,h,n,e))&&o.push(d)}(o.length>0||M&&M[y])&&(D={r:p},M&&M[y]&&((U=M[y]).hidden&&(D.hidden=1),J=-1,U.hpx?J=Jx(U.hpx):U.hpt&&(J=U.hpt),J>-1&&(D.ht=J,D.customHeight=1),U.level&&(D.outlineLevel=U.level)),i[i.length]=zt("row",o.join(""),D))}if(M)for(;y<M.length;++y)M&&M[y]&&(D={r:y+1},(U=M[y]).hidden&&(D.hidden=1),J=-1,U.hpx?J=Jx(U.hpx):U.hpt&&(J=U.hpt),J>-1&&(D.ht=J,D.customHeight=1),U.level&&(D.outlineLevel=U.level),i[i.length]=zt("row","",D));return i.join("")}(h,e),d.length>0&&(i[i.length]=d)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),h["!protect"]&&(i[i.length]=function JK(n){var e={sheet:1};return KK.forEach(function(t){null!=n[t]&&n[t]&&(e[t]="1")}),YK.forEach(function(t){null!=n[t]&&!n[t]&&(e[t]="0")}),n.password&&(e.password=MO(n.password).toString(16).toUpperCase()),zt("sheetProtection",null,e)}(h["!protect"])),null!=h["!autofilter"]&&(i[i.length]=function iY(n,e,t,r){var i="string"==typeof n.ref?n.ref:ir(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var o=t.Workbook.Names,a=Ha(i);a.s.r==a.e.r&&(a.e.r=Ha(e["!ref"]).e.r,i=ir(a));for(var d=0;d<o.length;++d){var h=o[d];if("_xlnm._FilterDatabase"==h.Name&&h.Sheet==r){h.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return d==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),zt("autoFilter",null,{ref:i})}(h["!autofilter"],h,t,n)),null!=h["!merges"]&&h["!merges"].length>0&&(i[i.length]=function zK(n){if(0===n.length)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+ir(n[t])+'"/>';return e+"</mergeCells>"}(h["!merges"]));var M,T=-1,R=-1;return h["!links"].length>0&&(i[i.length]="<hyperlinks>",h["!links"].forEach(function(D){D[1].Target&&(M={ref:D[0]},"#"!=D[1].Target.charAt(0)&&(R=zr(r,-1,Qr(D[1].Target).replace(/#.*$/,""),sr.HLINK),M["r:id"]="rId"+R),(T=D[1].Target.indexOf("#"))>-1&&(M.location=Qr(D[1].Target.slice(T+1))),D[1].Tooltip&&(M.tooltip=Qr(D[1].Tooltip)),i[i.length]=zt("hyperlink",null,M))}),i[i.length]="</hyperlinks>"),delete h["!links"],null!=h["!margins"]&&(i[i.length]=function eY(n){return F0(n),zt("pageMargins",null,n)}(h["!margins"])),(!e||e.ignoreEC||null==e.ignoreEC)&&(i[i.length]=zo("ignoredErrors",zt("ignoredError",null,{numberStoredAsText:1,sqref:p}))),y.length>0&&(R=zr(r,-1,"../drawings/drawing"+(n+1)+".xml",sr.DRAW),i[i.length]=zt("drawing",null,{"r:id":"rId"+R}),h["!drawing"]=y),h["!comments"].length>0&&(R=zr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",sr.VML),i[i.length]=zt("legacyDrawing",null,{"r:id":"rId"+R}),h["!legacy"]=R),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function hY(n,e,t,r){var i=function fY(n,e,t){var r=dt(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var o=320;i.hpx?o=20*Jx(i.hpx):i.hpt&&(o=20*i.hpt),r.write_shift(2,o),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var d=0,h=r.l;r.l+=4;for(var p={r:n,c:0},m=0;m<16;++m)if(!(e.s.c>m+1<<10||e.e.c<m<<10)){for(var y=-1,T=-1,M=m<<10;M<m+1<<10;++M)p.c=M,(Array.isArray(t)?(t[p.r]||[])[p.c]:t[Hn(p)])&&(y<0&&(y=M),T=M);y<0||(++d,r.write_shift(4,y),r.write_shift(4,T))}var D=r.l;return r.l=h,r.write_shift(4,d),r.l=D,r.length>r.l?r.slice(0,r.l):r}(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&It(n,0,i)}var pY=S0,gY=h1;var JY=S0,QY=h1,iL=["left","right","top","bottom","header","footer"];function gJ(n,e,t,r,i,o,a){if(void 0===e.v)return!1;var d="";switch(e.t){case"b":d=e.v?"1":"0";break;case"d":(e=pi(e)).z=e.z||Un[14],e.v=Po(ss(e.v)),e.t="n";break;case"n":case"e":d=""+e.v;break;default:d=e.v}var h={r:t,c:r};switch(h.s=Ip(i.cellXfs,e,i),e.l&&o["!links"].push([Hn(h),e.l]),e.c&&o["!comments"].push([Hn(h),e.c]),e.t){case"s":case"str":return i.bookSST?(d=UO(i.Strings,e.v,i.revStrings),h.t="s",h.v=d,a?It(n,18,function FY(n,e,t){return null==t&&(t=dt(8)),T0(e,t),t.write_shift(4,e.v),t}(0,h)):It(n,7,function kY(n,e,t){return null==t&&(t=dt(12)),C0(e,t),t.write_shift(4,e.v),t}(0,h))):(h.t="str",a?It(n,17,function zY(n,e,t){return null==t&&(t=dt(8+4*n.v.length)),T0(e,t),ko(n.v,t),t.length>t.l?t.slice(0,t.l):t}(e,h)):It(n,6,function HY(n,e,t){return null==t&&(t=dt(12+4*n.v.length)),C0(e,t),ko(n.v,t),t.length>t.l?t.slice(0,t.l):t}(e,h))),!0;case"n":return e.v==(0|e.v)&&e.v>-1e3&&e.v<1e3?a?It(n,13,function ZY(n,e,t){return null==t&&(t=dt(8)),T0(e,t),P5(n.v,t),t}(e,h)):It(n,2,function BY(n,e,t){return null==t&&(t=dt(12)),C0(e,t),P5(n.v,t),t}(e,h)):a?It(n,16,function LY(n,e,t){return null==t&&(t=dt(12)),T0(e,t),A0(n.v,t),t}(e,h)):It(n,5,function NY(n,e,t){return null==t&&(t=dt(16)),C0(e,t),A0(n.v,t),t}(e,h)),!0;case"b":return h.t="b",a?It(n,15,function SY(n,e,t){return null==t&&(t=dt(5)),T0(e,t),t.write_shift(1,n.v?1:0),t}(e,h)):It(n,4,function EY(n,e,t){return null==t&&(t=dt(9)),C0(e,t),t.write_shift(1,n.v?1:0),t}(e,h)),!0;case"e":return h.t="e",a?It(n,14,function PY(n,e,t){return null==t&&(t=dt(8)),T0(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}(e,h)):It(n,3,function MY(n,e,t){return null==t&&(t=dt(9)),C0(e,t),t.write_shift(1,n.v),t}(e,h)),!0}return a?It(n,12,function bY(n,e,t){return null==t&&(t=dt(4)),T0(e,t)}(0,h)):It(n,1,function xY(n,e,t){return null==t&&(t=dt(8)),C0(e,t)}(0,h)),!0}function TJ(n,e,t,r){var i=qa(),o=t.SheetNames[n],a=t.Sheets[o]||{},d=o;try{t&&t.Workbook&&(d=t.Workbook.Sheets[n].CodeName||d)}catch{}var h=Mr(a["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],It(i,129),(t.vbaraw||a["!outline"])&&It(i,147,function vY(n,e,t){null==t&&(t=dt(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return sT({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),I5(n,t),t.slice(0,t.l)}(d,a["!outline"])),It(i,148,gY(h)),function CJ(n,e,t){It(n,133),It(n,137,function lJ(n,e,t){null==t&&(t=dt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}(0,t)),It(n,138),It(n,134)}(i,0,t.Workbook),function vJ(n,e){!e||!e["!cols"]||(It(n,390),e["!cols"].forEach(function(t,r){t&&It(n,60,function sJ(n,e,t){null==t&&(t=dt(18));var r=bT(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,256*(r.width||10)),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}(r,t))}),It(n,391))}(i,a),function mJ(n,e,t,r){var i=Mr(e["!ref"]||"A1"),a="",d=[];It(n,145);var h=Array.isArray(e),p=i.e.r;e["!rows"]&&(p=Math.max(i.e.r,e["!rows"].length-1));for(var m=i.s.r;m<=p;++m){a=Cs(m),hY(n,e,i,m);var y=!1;if(m<=i.e.r)for(var T=i.s.c;T<=i.e.c;++T){m===i.s.r&&(d[T]=ki(T));var M=h?(e[m]||[])[T]:e[d[T]+a];y=!!M&&gJ(n,M,m,T,r,e,y)}}It(n,146)}(i,a,0,e),function EJ(n,e){e["!protect"]&&It(n,535,function dJ(n,e){return null==e&&(e=dt(66)),e.write_shift(2,n.password?MO(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){e.write_shift(4,t[1]?null==n[t[0]]||n[t[0]]?0:1:null!=n[t[0]]&&n[t[0]]?0:1)}),e}(e["!protect"]))}(i,a),function bJ(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],o="string"==typeof i.ref?i.ref:ir(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,d=Ha(o);d.s.r==d.e.r&&(d.e.r=Ha(e["!ref"]).e.r,o=ir(d));for(var h=0;h<a.length;++h){var p=a[h];if("_xlnm._FilterDatabase"==p.Name&&p.Sheet==r){p.Ref="'"+t.SheetNames[r]+"'!"+o;break}}h==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+o}),It(n,161,h1(Mr(o))),It(n,162)}}(i,a,t,n),function _J(n,e){!e||!e["!merges"]||(It(n,177,function XY(n,e){return null==e&&(e=dt(4)),e.write_shift(4,n),e}(e["!merges"].length)),e["!merges"].forEach(function(t){It(n,176,QY(t))}),It(n,178))}(i,a),function xJ(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=zr(t,-1,r[1].Target.replace(/#.*$/,""),sr.HLINK);It(n,494,function tJ(n,e){var t=dt(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));h1({s:Ns(n[0]),e:Ns(n[0])},t),pO("rId"+e,t);var r=n[1].Target.indexOf("#");return ko((-1==r?"":n[1].Target.slice(r+1))||"",t),ko(n[1].Tooltip||"",t),ko("",t),t.slice(0,t.l)}(r,i))}}),delete e["!links"]}(i,a,r),a["!margins"]&&It(i,476,function aJ(n,e){return null==e&&(e=dt(48)),F0(n),iL.forEach(function(t){A0(n[t],e)}),e}(a["!margins"])),(!e||e.ignoreEC||null==e.ignoreEC)&&function yJ(n,e){!e||!e["!ref"]||(It(n,648),It(n,649,function uJ(n){var e=dt(24);return e.write_shift(4,4),e.write_shift(4,1),h1(n,e),e}(Mr(e["!ref"]))),It(n,650))}(i,a),function wJ(n,e,t,r){if(e["!comments"].length>0){var i=zr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",sr.VML);It(n,551,pO("rId"+i)),e["!legacy"]=i}}(i,a,n,r),It(i,130),i.end()}var VO=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],LJ="][*?/\\".split("");function cL(n,e){if(n.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var t=!0;return LJ.forEach(function(r){if(-1!=n.indexOf(r)){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");t=!1}}),t}function uL(n){var e=[bs];e[e.length]=zt("workbook",null,{xmlns:Ep[0],"xmlns:r":Js.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(VO.forEach(function(d){null!=n.Workbook.WBProps[d[0]]&&n.Workbook.WBProps[d[0]]!=d[1]&&(r[d[0]]=n.Workbook.WBProps[d[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=zt("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],o=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",o=0;o!=n.SheetNames.length&&i[o]&&i[o].Hidden;++o);o==n.SheetNames.length&&(o=0),e[e.length]='<workbookView firstSheet="'+o+'" activeTab="'+o+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",o=0;o!=n.SheetNames.length;++o){var a={name:Qr(n.SheetNames[o].slice(0,31))};if(a.sheetId=""+(o+1),a["r:id"]="rId"+(o+1),i[o])switch(i[o].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden"}e[e.length]=zt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(d){var h={name:d.Name};d.Comment&&(h.comment=d.Comment),null!=d.Sheet&&(h.localSheetId=""+d.Sheet),d.Hidden&&(h.hidden="1"),d.Ref&&(e[e.length]=zt("definedName",Qr(d.Ref),h))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function jJ(n,e){return e||(e=dt(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),pO(n.strRelID,e),ko(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function QJ(n,e){var t=qa();return It(t,131),It(t,128,function KJ(n,e){e||(e=dt(127));for(var t=0;4!=t;++t)e.write_shift(4,0);return ko("SheetJS",e),ko(Ix.version,e),ko(Ix.version,e),ko("7262",e),e.length>e.l?e.slice(0,e.l):e}()),It(t,153,function HJ(n,e){e||(e=dt(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),I5(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}(n.Workbook&&n.Workbook.WBProps||null)),function JJ(n,e){if(e.Workbook&&e.Workbook.Sheets){for(var t=e.Workbook.Sheets,r=0,i=-1,o=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&-1==i?i=r:1==t[r].Hidden&&-1==o&&(o=r);o>i||(It(n,135),It(n,158,function YJ(n,e){return e||(e=dt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n),e.write_shift(1,120),e.length>e.l?e.slice(0,e.l):e}(i)),It(n,136))}}(t,n),function WJ(n,e){It(n,143);for(var t=0;t!=e.SheetNames.length;++t)It(n,156,jJ({Hidden:e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]}));It(n,144)}(t,n),It(t,132),t.end()}function fQ(n,e,t,r,i){return(".bin"===e.slice(-4)?TJ:nL)(n,t,r,i)}function gQ(n,e,t){return(".bin"===e.slice(-4)?JG:Z6)(n,t)}function hL(n){return zt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+FO(n.Ref,{r:0,c:0})})}function DQ(n,e,t,r,i,o,a){if(!n||null==n.v&&null==n.f)return"";var d={};if(n.f&&(d["ss:Formula"]="="+Qr(FO(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var h=Ns(n.F.slice(e.length+1));d["ss:ArrayRange"]="RC:R"+(h.r==a.r?"":"["+(h.r-a.r)+"]")+"C"+(h.c==a.c?"":"["+(h.c-a.c)+"]")}if(n.l&&n.l.Target&&(d["ss:HRef"]=Qr(n.l.Target),n.l.Tooltip&&(d["x:HRefScreenTip"]=Qr(n.l.Tooltip))),t["!merges"])for(var p=t["!merges"],m=0;m!=p.length;++m)p[m].s.c!=a.c||p[m].s.r!=a.r||(p[m].e.c>p[m].s.c&&(d["ss:MergeAcross"]=p[m].e.c-p[m].s.c),p[m].e.r>p[m].s.r&&(d["ss:MergeDown"]=p[m].e.r-p[m].s.r));var y="",T="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":y="Number",T=String(n.v);break;case"b":y="Boolean",T=n.v?"1":"0";break;case"e":y="Error",T=Zf[n.v];break;case"d":y="DateTime",T=new Date(n.v).toISOString(),null==n.z&&(n.z=n.z||Un[14]);break;case"s":y="String",T=function Xj(n){return(n+"").replace(Qk,function(t){return Jk[t]}).replace(i5,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}(n.v||"")}var M=Ip(r.cellXfs,n,r);d["ss:StyleID"]="s"+(21+M),d["ss:Index"]=a.c+1;var D="z"==n.t?"":'<Data ss:Type="'+y+'">'+(null!=n.v?T:"")+"</Data>";return(n.c||[]).length>0&&(D+=function PQ(n){return n.map(function(e){var t=function eq(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}(e.t||""),r=zt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return zt("Comment",r,{"ss:Author":e.a})}).join("")}(n.c)),zt("Cell",D,d)}function kQ(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=mT(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function FQ(n,e,t){var r=[],o=t.Sheets[t.SheetNames[n]],a=o?function MQ(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,o=[],a=0;a<i.length;++a){var d=i[a];d.Sheet==t&&(d.Name.match(/^_xlfn\./)||o.push(hL(d)))}return o.join("")}(o,0,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=o?function OQ(n,e,t,r){if(!n["!ref"])return"";var i=Mr(n["!ref"]),o=n["!merges"]||[],a=0,d=[];n["!cols"]&&n["!cols"].forEach(function(U,J){Ap(U);var ee=!!U.width,W=bT(J,U),pe={"ss:Index":J+1};ee&&(pe["ss:Width"]=Kx(W.width)),U.hidden&&(pe["ss:Hidden"]="1"),d.push(zt("Column",null,pe))});for(var h=Array.isArray(n),p=i.s.r;p<=i.e.r;++p){for(var m=[kQ(p,(n["!rows"]||[])[p])],y=i.s.c;y<=i.e.c;++y){var T=!1;for(a=0;a!=o.length;++a)if(!(o[a].s.c>y||o[a].s.r>p||o[a].e.c<y||o[a].e.r<p)){(o[a].s.c!=y||o[a].s.r!=p)&&(T=!0);break}if(!T){var M={r:p,c:y},R=Hn(M);m.push(DQ(h?(n[p]||[])[y]:n[R],R,n,e,0,0,M))}}m.push("</Row>"),m.length>2&&d.push(m.join(""))}return d.join("")}(o,e):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(function IQ(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(zt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(zt("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(zt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(zt("Visible",1==r.Workbook.Sheets[t].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var o=0;o<t&&(!r.Workbook.Sheets[o]||r.Workbook.Sheets[o].Hidden);++o);o==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(zo("ProtectContents","True")),n["!protect"].objects&&i.push(zo("ProtectObjects","True")),n["!protect"].scenarios&&i.push(zo("ProtectScenarios","True")),null==n["!protect"].selectLockedCells||n["!protect"].selectLockedCells?null!=n["!protect"].selectUnlockedCells&&!n["!protect"].selectUnlockedCells&&i.push(zo("EnableSelection","UnlockedCells")):i.push(zo("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),0==i.length?"":zt("WorksheetOptions",i.join(""),{xmlns:zc.x})}(o,0,n,t)),r.join("")}function RQ(n,e){e||(e={}),n.SSF||(n.SSF=pi(Un)),n.SSF&&(c1(),Nx(n.SSF),e.revssf=XE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Ip(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(function EQ(n,e){var t=[];return n.Props&&t.push(function Xq(n,e){var t=[];return xs(bO).map(function(r){for(var i=0;i<jf.length;++i)if(jf[i][1]==r)return jf[i];for(i=0;i<I0.length;++i)if(I0[i][1]==r)return I0[i];throw r}).forEach(function(r){if(null!=n[r[1]]){var i=e&&e.Props&&null!=e.Props[r[1]]?e.Props[r[1]]:n[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(zo(bO[r[1]]||r[1],i))}}),zt("DocumentProperties",t.join(""),{xmlns:zc.o})}(n.Props,e)),n.Custprops&&t.push(function eH(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&xs(n).forEach(function(o){if(Object.prototype.hasOwnProperty.call(n,o)){for(var a=0;a<jf.length;++a)if(o==jf[a][1])return;for(a=0;a<I0.length;++a)if(o==I0[a][1])return;for(a=0;a<t.length;++a)if(o==t[a])return;var d=n[o],h="string";"number"==typeof d?(h="float",d=String(d)):!0===d||!1===d?(h="boolean",d=d?"1":"0"):d=String(d),i.push(zt(r5(o),d,{"dt:dt":h}))}}),e&&xs(e).forEach(function(o){if(Object.prototype.hasOwnProperty.call(e,o)&&(!n||!Object.prototype.hasOwnProperty.call(n,o))){var a=e[o],d="string";"number"==typeof a?(d="float",a=String(a)):!0===a||!1===a?(d="boolean",a=a?"1":"0"):a instanceof Date?(d="dateTime.tz",a=a.toISOString()):a=String(a),i.push(zt(r5(o),a,{"dt:dt":d}))}}),"<"+r+' xmlns="'+zc.o+'">'+i.join("")+"</"+r+">"}(n.Props,n.Custprops)),t.join("")}(n,e)),t.push(""),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(zt("Worksheet",FQ(r,e,n),{"ss:Name":Qr(n.SheetNames[r])}));return t[2]=function SQ(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var o=[];o.push(zt("NumberFormat",null,{"ss:Format":Qr(Un[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(zt("Style",o.join(""),a))}),zt("Styles",t.join(""))}(0,e),t[3]=function AQ(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||t.push(hL(i)))}return zt("Names",t.join(""))}(n),bs+zt("Workbook",t.join(""),{xmlns:zc.ss,"xmlns:o":zc.o,"xmlns:x":zc.x,"xmlns:ss":zc.ss,"xmlns:dt":zc.dt,"xmlns:html":zc.html})}var iw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};var sw={0:{f:function dY(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var o=n.read_shift(1);return n.l=r,7&o&&(t.level=7&o),16&o&&(t.hidden=!0),32&o&&(t.hpt=i/20),t}},1:{f:function yY(n){return[Ml(n)]}},2:{f:function UY(n){return[Ml(n),gO(n),"n"]}},3:{f:function AY(n){return[Ml(n),n.read_shift(1),"e"]}},4:{f:function CY(n){return[Ml(n),n.read_shift(1),"b"]}},5:{f:function RY(n){return[Ml(n),ya(n),"n"]}},6:{f:function qY(n){return[Ml(n),va(n),"str"]}},7:{f:function DY(n){return[Ml(n),n.read_shift(4),"s"]}},8:{f:function YY(n,e,t){var r=n.l+e,i=Ml(n);i.r=t["!row"];var a=[i,va(n),"str"];if(t.cellFormula){n.l+=2;var d=xT(n,r-n.l,t);a[3]=ba(d,0,i,t.supbooks,t)}else n.l=r;return a}},9:{f:function KY(n,e,t){var r=n.l+e,i=Ml(n);i.r=t["!row"];var a=[i,ya(n),"n"];if(t.cellFormula){n.l+=2;var d=xT(n,r-n.l,t);a[3]=ba(d,0,i,t.supbooks,t)}else n.l=r;return a}},10:{f:function GY(n,e,t){var r=n.l+e,i=Ml(n);i.r=t["!row"];var a=[i,n.read_shift(1),"b"];if(t.cellFormula){n.l+=2;var d=xT(n,r-n.l,t);a[3]=ba(d,0,i,t.supbooks,t)}else n.l=r;return a}},11:{f:function WY(n,e,t){var r=n.l+e,i=Ml(n);i.r=t["!row"];var a=[i,n.read_shift(1),"e"];if(t.cellFormula){n.l+=2;var d=xT(n,r-n.l,t);a[3]=ba(d,0,i,t.supbooks,t)}else n.l=r;return a}},12:{f:function wY(n){return[E0(n)]}},13:{f:function VY(n){return[E0(n),gO(n),"n"]}},14:{f:function IY(n){return[E0(n),n.read_shift(1),"e"]}},15:{f:function TY(n){return[E0(n),n.read_shift(1),"b"]}},16:{f:function rL(n){return[E0(n),ya(n),"n"]}},17:{f:function $Y(n){return[E0(n),va(n),"str"]}},18:{f:function OY(n){return[E0(n),n.read_shift(4),"s"]}},19:{f:dO},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function zJ(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),o=Sq(n),a=AK(n,0,t),d=fO(n);n.l=r;var h={Name:o,Ptg:a};return i<268435455&&(h.Sheet=i),d&&(h.Comment=d),h}},40:{},42:{},43:{f:function qz(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=function Iq(n){var e=n.read_shift(1);return n.l++,{fBold:1&e,fItalic:2&e,fUnderline:4&e,fStrikeout:8&e,fOutline:16&e,fShadow:32&e,fCondense:64&e,fExtend:128&e}}(n);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===n.read_shift(2)&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var a=n.read_shift(1);0!=a&&(r.underline=a);var d=n.read_shift(1);d>0&&(r.family=d);var h=n.read_shift(1);switch(h>0&&(r.charset=h),n.l++,r.color=function Mq(n){var e={},r=n.read_shift(1)>>>1,i=n.read_shift(1),o=n.read_shift(2,"i"),a=n.read_shift(1),d=n.read_shift(1),h=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var p=M0[i];p&&(e.rgb=Wx(p));break;case 2:e.rgb=Wx([a,d,h]);break;case 3:e.theme=i}return 0!=o&&(e.tint=o>0?o/32767:o/32768),e}(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=va(n),r}},44:{f:function Zz(n,e){return[n.read_shift(2),va(n)]}},45:{f:zz},46:{f:Wz},47:{f:function Gz(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}},48:{},49:{f:function yq(n){return n.read_shift(4,"i")}},50:{},51:{f:function MG(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:function w6(n,e,t){if(!t.cellStyles)return _a(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),o=n.read_shift(r),a=n.read_shift(r),d=n.read_shift(r),h=n.read_shift(2);2==r&&(n.l+=2);var p={s:i,e:o,w:a,ixfe:d,flags:h};return(t.biff>=5||!t.biff)&&(p.level=h>>8&7),p}},62:{f:function jY(n){return[Ml(n),dO(n),"is"]}},63:{f:function LG(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=Hn(t);var r=n.read_shift(1);return 2&r&&(e.l="1"),8&r&&(e.a="1"),e}},64:{f:function fJ(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:_a,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function cJ(n){var e=n.read_shift(2);return n.l+=28,{RTL:32&e}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function _Y(n,e){var t={},r=n[n.l];return++n.l,t.above=!(64&r),t.left=!(128&r),n.l+=18,t.name=Tq(n,e-19),t}},148:{f:pY,p:16},151:{f:function nJ(){}},152:{},153:{f:function qJ(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?va(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(65536&r),t.backupFile=!!(64&r),t.checkCompatibility=!!(4096&r),t.date1904=!!(1&r),t.filterPrivacy=!!(8&r),t.hidePivotFieldList=!!(1024&r),t.promptedSolutions=!!(16&r),t.publishItems=!!(2048&r),t.refreshAllConnections=!!(262144&r),t.saveExternalLinkValues=!!(128&r),t.showBorderUnselectedTables=!!(4&r),t.showInkAnnotation=!!(32&r),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(32768&r),t.updateLinks=["userSet","never","always"][r>>8&3],t}},154:{},155:{},156:{f:function ZJ(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=hO(n,e-8),t.name=va(n),t}},157:{},158:{},159:{T:1,f:function lz(n){return[n.read_shift(4),n.read_shift(4)]}},160:{T:-1},161:{T:1,f:S0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:JY},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function SG(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:va(n)}}},336:{T:-1},337:{f:function DG(n){return n.l+=4,0!=n.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:hO},357:{},358:{},359:{},360:{T:1},361:{},362:{f:function y6(n,e,t){if(t.biff<8)return function p$(n,e,t){3==n[n.l+1]&&n[n.l]++;var r=zx(n,0,t);return 3==r.charCodeAt(0)?r.slice(1):r}(n,0,t);for(var r=[],i=n.l+e,o=n.read_shift(t.biff>8?4:2);0!=o--;)r.push(bH(n,0,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function rJ(n,e,t){var r=n.l+e,i=D5(n),o=n.read_shift(1),a=[i];if(a[2]=o,t.cellFormula){var d=SK(n,r-n.l,t);a[1]=d}else n.l=r;return a}},427:{f:function iJ(n,e,t){var r=n.l+e,o=[S0(n,16)];if(t.cellFormula){var a=MK(n,r-n.l,t);o[1]=a,n.l=r}else n.l=r;return o}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function oJ(n){var e={};return iL.forEach(function(t){e[t]=ya(n)}),e}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function mY(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function eJ(n,e){var t=n.l+e,r=S0(n,16),i=fO(n),o=va(n),a=va(n),d=va(n);n.l=t;var h={rfx:r,relId:i,loc:o,display:d};return a&&(h.Tooltip=a),h}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:hO},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:WG},633:{T:1},634:{T:-1},635:{T:1,f:function zG(n){var e={};e.iauthor=n.read_shift(4);var t=S0(n,16);return e.rfx=t.s,e.ref=Hn(t.s),n.l+=16,e}},636:{T:-1},637:{f:Cq},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function PJ(n,e){return n.l+=10,{name:va(n)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function hJ(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Yt(n,e,t,r){var i=e;if(!isNaN(i)){var o=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,o),o>0&&aO(t)&&n.push(t)}}function ow(n,e,t){return n||(n=dt(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function zQ(n,e,t,r){if(null!=e.v)switch(e.t){case"d":case"n":var i="d"==e.t?Po(ss(e.v)):e.v;return void(i==(0|i)&&i>=0&&i<65536?Yt(n,2,function G$(n,e,t){var r=dt(9);return ow(r,n,e),r.write_shift(2,t),r}(t,r,i)):Yt(n,3,function $$(n,e,t){var r=dt(15);return ow(r,n,e),r.write_shift(8,t,"f"),r}(t,r,i)));case"b":case"e":return void Yt(n,5,function HQ(n,e,t,r){var i=dt(9);return ow(i,n,e),r6(t,r||"b",i),i}(t,r,e.v,e.t));case"s":case"str":return void Yt(n,4,function $Q(n,e,t){var r=dt(8+2*t.length);return ow(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(t,r,(e.v||"").slice(0,255)))}Yt(n,1,ow(null,t,r))}function tX(n,e,t,r,i){var o=16+Ip(i.cellXfs,e,i);if(null!=e.v||e.bf)if(e.bf)Yt(n,6,function TK(n,e,t,r,i){var o=k0(e,t,i),a=function EK(n){if(null==n){var e=dt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}return A0("number"==typeof n?n:0)}(n.v),d=dt(6);d.write_shift(2,33),d.write_shift(4,0);for(var p=dt(n.bf.length),m=0;m<n.bf.length;++m)p[m]=n.bf[m];return Io([o,a,d,p])}(e,t,r,0,o));else switch(e.t){case"d":case"n":Yt(n,515,function d$(n,e,t,r){var i=dt(14);return k0(n,e,r,i),A0(t,i),i}(t,r,"d"==e.t?Po(ss(e.v)):e.v,o));break;case"b":case"e":Yt(n,517,function l$(n,e,t,r,i,o){var a=dt(8);return k0(n,e,r,a),r6(t,o,a),a}(t,r,e.v,o,0,e.t));break;case"s":case"str":i.bookSST?Yt(n,253,function KH(n,e,t,r){var i=dt(10);return k0(n,e,r,i),i.write_shift(4,t),i}(t,r,UO(i.Strings,e.v,i.revStrings),o)):Yt(n,516,function JH(n,e,t,r,i){var o=!i||8==i.biff,a=dt(+o+8+(1+o)*t.length);return k0(n,e,r,a),a.write_shift(2,t.length),o&&a.write_shift(1,1),a.write_shift((1+o)*t.length,t,o?"utf16le":"sbcs"),a}(t,r,(e.v||"").slice(0,255),o,i));break;default:Yt(n,513,k0(t,r,o))}else Yt(n,513,k0(t,r,o))}function nX(n,e,t){var m,r=qa(),i=t.SheetNames[n],o=t.Sheets[i]||{},a=(t||{}).Workbook||{},d=(a.Sheets||[])[n]||{},h=Array.isArray(o),p=8==e.biff,y="",T=[],M=Mr(o["!ref"]||"A1"),R=p?65536:16384;if(M.e.c>255||M.e.r>=R){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:IV16384");M.e.c=Math.min(M.e.c,255),M.e.r=Math.min(M.e.c,R-1)}Yt(r,2057,SO(0,16,e)),Yt(r,13,Il(1)),Yt(r,12,Il(100)),Yt(r,15,$a(!0)),Yt(r,17,$a(!1)),Yt(r,16,A0(.001)),Yt(r,95,$a(!0)),Yt(r,42,$a(!1)),Yt(r,43,$a(!1)),Yt(r,130,Il(1)),Yt(r,128,function c$(n){var e=dt(8);return e.write_shift(4,0),e.write_shift(2,n[0]?n[0]+1:0),e.write_shift(2,n[1]?n[1]+1:0),e}([0,0])),Yt(r,131,$a(!1)),Yt(r,132,$a(!1)),p&&function eX(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&Yt(n,125,function R$(n,e){var t=dt(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,256*n.width),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),t.write_shift(1,r=n.level||0),t.write_shift(2,0),t}(bT(i,r),i))})}}(r,o["!cols"]),Yt(r,512,function t$(n,e){var t=8!=e.biff&&e.biff?2:4,r=dt(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}(M,e)),p&&(o["!links"]=[]);for(var D=M.s.r;D<=M.e.r;++D){y=Cs(D);for(var U=M.s.c;U<=M.e.c;++U){D===M.s.r&&(T[U]=ki(U)),m=T[U]+y;var J=h?(o[D]||[])[U]:o[m];J&&(tX(r,J,D,U,e),p&&J.l&&o["!links"].push([m,J.l]))}}var ee=d.CodeName||d.name||i;return p&&Yt(r,574,function HH(n){var e=dt(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}((a.Views||[])[0])),p&&(o["!merges"]||[]).length&&Yt(r,229,function w$(n){var e=dt(2+8*n.length);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)l6(n[t],e);return e}(o["!merges"])),p&&function XQ(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];Yt(n,440,A$(r)),r[1].Tooltip&&Yt(n,2048,I$(r))}delete e["!links"]}(r,o),Yt(r,442,i6(ee)),p&&function JQ(n,e){var t=dt(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),Yt(n,2151,t),(t=dt(39)).write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),l6(Mr(e["!ref"]||"A1"),t),t.write_shift(4,4),Yt(n,2152,t)}(r,o),Yt(r,10),r.end()}function rX(n,e,t){var r=qa(),i=(n||{}).Workbook||{},o=i.Sheets||[],a=i.WBProps||{},d=8==t.biff,h=5==t.biff;Yt(r,2057,SO(0,5,t)),"xla"==t.bookType&&Yt(r,135),Yt(r,225,d?Il(1200):null),Yt(r,193,function lH(n,e){e||(e=dt(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}(2)),h&&Yt(r,191),h&&Yt(r,192),Yt(r,226),Yt(r,92,function DH(n,e){var t=!e||8==e.biff,r=dt(t?112:54);for(r.write_shift(8==e.biff?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}(0,t)),Yt(r,66,Il(d?1200:1252)),d&&Yt(r,353,Il(0)),d&&Yt(r,448),Yt(r,317,function U$(n){for(var e=dt(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}(n.SheetNames.length)),d&&n.vbaraw&&Yt(r,211),d&&n.vbaraw&&Yt(r,442,i6(a.CodeName||"ThisWorkbook")),Yt(r,156,Il(17)),Yt(r,25,$a(!1)),Yt(r,18,$a(!1)),Yt(r,19,Il(0)),d&&Yt(r,431,$a(!1)),d&&Yt(r,444,Il(0)),Yt(r,61,function jH(){var n=dt(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}()),Yt(r,64,$a(!1)),Yt(r,141,Il(0)),Yt(r,34,$a("true"==function NJ(n){return n.Workbook&&n.Workbook.WBProps&&function zi(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}(n.Workbook.WBProps.date1904)?"true":"false"}(n))),Yt(r,14,$a(!0)),d&&Yt(r,439,$a(!1)),Yt(r,218,Il(0)),function KQ(n,e,t){Yt(n,49,function GH(n,e){var t=n.name||"Arial",r=e&&5==e.biff,o=dt(r?15+t.length:16+2*t.length);return o.write_shift(2,20*(n.sz||12)),o.write_shift(4,0),o.write_shift(2,400),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(1,t.length),r||o.write_shift(1,1),o.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),o}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},t))}(r,0,t),function YQ(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=e[i]&&Yt(n,1054,XH(i,e[i],t))})}(r,n.SSF,t),function QQ(n,e){for(var t=0;t<16;++t)Yt(n,224,p6({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Yt(n,224,p6(r,0,e))})}(r,t),d&&Yt(r,352,$a(!1));var m=r.end(),y=qa();d&&Yt(y,140,function D$(n){return n||(n=dt(4)),n.write_shift(2,1),n.write_shift(2,1),n}()),d&&t.Strings&&function qQ(n,e,t,r){var i=r||(t||[]).length||0;if(i<=8224)return Yt(n,e,t,i);var o=e;if(!isNaN(o)){for(var a=t.parts||[],d=0,h=0,p=0;p+(a[d]||8224)<=8224;)p+=a[d]||8224,d++;var m=n.next(4);for(m.write_shift(2,o),m.write_shift(2,p),n.push(t.slice(h,h+p)),h+=p;h<i;){for((m=n.next(4)).write_shift(2,60),p=0;p+(a[d]||8224)<=8224;)p+=a[d]||8224,d++;m.write_shift(2,p),n.push(t.slice(h,h+p)),h+=p}}}(y,252,function NH(n,e){var t=dt(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=hH(n[i]);var o=Io([t].concat(r));return o.parts=[t.length].concat(r.map(function(a){return a.length})),o}(t.Strings)),Yt(y,10);var T=y.end(),M=qa(),R=0,D=0;for(D=0;D<n.SheetNames.length;++D)R+=(d?12:11)+(d?2:1)*n.SheetNames[D].length;var U=m.length+R+T.length;for(D=0;D<n.SheetNames.length;++D)Yt(M,133,FH({pos:U,hs:(o[D]||{}).Hidden||0,dt:0,name:n.SheetNames[D]},t)),U+=e[D].length;var ee=M.end();if(R!=ee.length)throw new Error("BS8 "+R+" != "+ee.length);var W=[];return m.length&&W.push(m),ee.length&&W.push(ee),T.length&&W.push(T),Io(W)}function gL(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];r&&r["!ref"]&&Ha(r["!ref"]).e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}var o=e||{};switch(o.biff||2){case 8:case 5:return function iX(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=pi(Un)),n&&n.SSF&&(c1(),Nx(n.SSF),t.revssf=XE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,YO(t),t.cellXfs=[],Ip(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=nX(i,t,n);return r.unshift(rX(n,r,t)),Io(r)}(n,e);case 4:case 3:case 2:return function WQ(n,e){var t=e||{};null!=ys&&null==t.dense&&(t.dense=ys);for(var r=qa(),i=0,o=0;o<n.SheetNames.length;++o)n.SheetNames[o]==t.sheet&&(i=o);if(0==i&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return Yt(r,4==t.biff?1033:3==t.biff?521:9,SO(0,16,t)),function GQ(n,e,t,r){var a,i=Array.isArray(e),o=Mr(e["!ref"]||"A1"),d="",h=[];if(o.e.c>255||o.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");o.e.c=Math.min(o.e.c,255),o.e.r=Math.min(o.e.c,16383),a=ir(o)}for(var p=o.s.r;p<=o.e.r;++p){d=Cs(p);for(var m=o.s.c;m<=o.e.c;++m){p===o.s.r&&(h[m]=ki(m)),a=h[m]+d;var y=i?(e[p]||[])[m]:e[a];y&&zQ(n,y,p,m)}}}(r,n.Sheets[n.SheetNames[i]],0,t),Yt(r,10),r.end()}(n,e)}throw new Error("invalid type "+o.bookType+" for BIFF")}function _L(n,e,t,r){for(var i=n["!merges"]||[],o=[],a=e.s.c;a<=e.e.c;++a){for(var d=0,h=0,p=0;p<i.length;++p)if(!(i[p].s.r>t||i[p].s.c>a||i[p].e.r<t||i[p].e.c<a)){if(i[p].s.r<t||i[p].s.c<a){d=-1;break}d=i[p].e.r-i[p].s.r+1,h=i[p].e.c-i[p].s.c+1;break}if(!(d<0)){var m=Hn({r:t,c:a}),y=r.dense?(n[t]||[])[a]:n[m],T=y&&null!=y.v&&(y.h||s5(y.w||(ud(y),y.w)||""))||"",M={};d>1&&(M.rowspan=d),h>1&&(M.colspan=h),r.editable?T='<span contenteditable="true">'+T+"</span>":y&&(M["data-t"]=y&&y.t||"z",null!=y.v&&(M["data-v"]=y.v),null!=y.z&&(M["data-z"]=y.z),y.l&&"#"!=(y.l.Target||"#").charAt(0)&&(T='<a href="'+y.l.Target+'">'+T+"</a>")),M.id=(r.id||"sjs")+"-"+m,o.push(zt("td",T,M))}}return"<tr>"+o.join("")+"</tr>"}var vL='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yL="</body></html>";function wL(n,e){var t=e||{},i=null!=t.footer?t.footer:yL,o=[null!=t.header?t.header:vL],a=Ha(n["!ref"]);t.dense=Array.isArray(n),o.push(function xL(n,e,t){return[].join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}(0,0,t));for(var d=a.s.r;d<=a.e.r;++d)o.push(_L(n,a,d,t));return o.push("</table>"+i),o.join("")}function bL(n,e,t){var r=t||{};null!=ys&&(r.dense=ys);var i=0,o=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var a="string"==typeof r.origin?Ns(r.origin):r.origin;i=a.r,o=a.c}var d=e.getElementsByTagName("tr"),h=Math.min(r.sheetRows||1e7,d.length),p={s:{r:0,c:0},e:{r:i,c:o}};if(n["!ref"]){var m=Ha(n["!ref"]);p.s.r=Math.min(p.s.r,m.s.r),p.s.c=Math.min(p.s.c,m.s.c),p.e.r=Math.max(p.e.r,m.e.r),p.e.c=Math.max(p.e.c,m.e.c),-1==i&&(p.e.r=i=m.e.r+1)}var y=[],T=0,M=n["!rows"]||(n["!rows"]=[]),R=0,D=0,U=0,J=0,ee=0,W=0;for(n["!cols"]||(n["!cols"]=[]);R<d.length&&D<h;++R){var pe=d[R];if(EL(pe)){if(r.display)continue;M[D]={hidden:!0}}var Ae=pe.children;for(U=J=0;U<Ae.length;++U){var Ve=Ae[U];if(!r.display||!EL(Ve)){var ae=Ve.hasAttribute("data-v")?Ve.getAttribute("data-v"):Ve.hasAttribute("v")?Ve.getAttribute("v"):l5(Ve.innerHTML),Re=Ve.getAttribute("data-z")||Ve.getAttribute("z");for(T=0;T<y.length;++T){var ke=y[T];ke.s.c==J+o&&ke.s.r<D+i&&D+i<=ke.e.r&&(J=ke.e.c+1-o,T=-1)}W=+Ve.getAttribute("colspan")||1,((ee=+Ve.getAttribute("rowspan")||1)>1||W>1)&&y.push({s:{r:D+i,c:J+o},e:{r:D+i+(ee||1)-1,c:J+o+(W||1)-1}});var Je={t:"s",v:ae},at=Ve.getAttribute("data-t")||Ve.getAttribute("t")||"";null!=ae&&(0==ae.length?Je.t=at||"z":r.raw||0==ae.trim().length||"s"==at||("TRUE"===ae?Je={t:"b",v:!0}:"FALSE"===ae?Je={t:"b",v:!1}:isNaN(cu(ae))?isNaN(l1(ae).getDate())||(Je={t:"d",v:ss(ae)},r.cellDates||(Je={t:"n",v:Po(Je.v)}),Je.z=r.dateNF||Un[14]):Je={t:"n",v:cu(ae)})),void 0===Je.z&&null!=Re&&(Je.z=Re);var Be="",Ut=Ve.getElementsByTagName("A");if(Ut&&Ut.length)for(var tn=0;tn<Ut.length&&(!Ut[tn].hasAttribute("href")||"#"==(Be=Ut[tn].getAttribute("href")).charAt(0));++tn);Be&&"#"!=Be.charAt(0)&&(Je.l={Target:Be}),r.dense?(n[D+i]||(n[D+i]=[]),n[D+i][J+o]=Je):n[Hn({c:J+o,r:D+i})]=Je,p.e.c<J+o&&(p.e.c=J+o),J+=W}}++D}return y.length&&(n["!merges"]=(n["!merges"]||[]).concat(y)),p.e.r=Math.max(p.e.r,D-1+i),n["!ref"]=ir(p),D>=h&&(n["!fullref"]=ir((p.e.r=d.length-R+D-1+i,p))),n}function CL(n,e){return bL((e||{}).dense?[]:{},n,e)}function EL(n){var e="",t=function aX(n){return n.ownerDocument.defaultView&&"function"==typeof n.ownerDocument.defaultView.getComputedStyle?n.ownerDocument.defaultView.getComputedStyle:"function"==typeof getComputedStyle?getComputedStyle:null}(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),"none"===e}var lX=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Bx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return bs+e}}(),IL=function(){var n=function(o){return Qr(o).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e="          <table:table-cell />\n",r=function(o,a,d){var h=[];h.push('      <table:table table:name="'+Qr(a.SheetNames[d])+'" table:style-name="ta1">\n');var p=0,m=0,y=Ha(o["!ref"]||"A1"),T=o["!merges"]||[],M=0,R=Array.isArray(o);if(o["!cols"])for(m=0;m<=y.e.c;++m)h.push("        <table:table-column"+(o["!cols"][m]?' table:style-name="co'+o["!cols"][m].ods+'"':"")+"></table:table-column>\n");var U=o["!rows"]||[];for(p=0;p<y.s.r;++p)h.push("        <table:table-row"+(U[p]?' table:style-name="ro'+U[p].ods+'"':"")+"></table:table-row>\n");for(;p<=y.e.r;++p){for(h.push("        <table:table-row"+(U[p]?' table:style-name="ro'+U[p].ods+'"':"")+">\n"),m=0;m<y.s.c;++m)h.push(e);for(;m<=y.e.c;++m){var J=!1,ee={},W="";for(M=0;M!=T.length;++M)if(!(T[M].s.c>m||T[M].s.r>p||T[M].e.c<m||T[M].e.r<p)){(T[M].s.c!=m||T[M].s.r!=p)&&(J=!0),ee["table:number-columns-spanned"]=T[M].e.c-T[M].s.c+1,ee["table:number-rows-spanned"]=T[M].e.r-T[M].s.r+1;break}if(J)h.push("          <table:covered-table-cell/>\n");else{var pe=Hn({r:p,c:m}),Ae=R?(o[p]||[])[m]:o[pe];if(Ae&&Ae.f&&(ee["table:formula"]=Qr(DK(Ae.f)),Ae.F&&Ae.F.slice(0,pe.length)==pe)){var Ve=Ha(Ae.F);ee["table:number-matrix-columns-spanned"]=Ve.e.c-Ve.s.c+1,ee["table:number-matrix-rows-spanned"]=Ve.e.r-Ve.s.r+1}if(Ae){switch(Ae.t){case"b":W=Ae.v?"TRUE":"FALSE",ee["office:value-type"]="boolean",ee["office:boolean-value"]=Ae.v?"true":"false";break;case"n":W=Ae.w||String(Ae.v||0),ee["office:value-type"]="float",ee["office:value"]=Ae.v||0;break;case"s":case"str":W=null==Ae.v?"":Ae.v,ee["office:value-type"]="string";break;case"d":W=Ae.w||ss(Ae.v).toISOString(),ee["office:value-type"]="date",ee["office:date-value"]=ss(Ae.v).toISOString(),ee["table:style-name"]="ce1";break;default:h.push(e);continue}var ae=n(W);if(Ae.l&&Ae.l.Target){var Re=Ae.l.Target;"#"!=(Re="#"==Re.charAt(0)?"#"+kK(Re.slice(1)):Re).charAt(0)&&!Re.match(/^\w+:/)&&(Re="../"+Re),ae=zt("text:a",ae,{"xlink:href":Re.replace(/&/g,"&amp;")})}h.push("          "+zt("table:table-cell",zt("text:p",ae,{}),ee)+"\n")}else h.push(e)}}h.push("        </table:table-row>\n")}return h.push("      </table:table>\n"),h.join("")};return function(a,d){var h=[bs],p=Bx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),m=Bx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==d.bookType?(h.push("<office:document"+p+m+">\n"),h.push(U5().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+p+">\n"),function(o,a){o.push(" <office:automatic-styles>\n"),o.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),o.push('   <number:month number:style="long"/>\n'),o.push("   <number:text>/</number:text>\n"),o.push('   <number:day number:style="long"/>\n'),o.push("   <number:text>/</number:text>\n"),o.push("   <number:year/>\n"),o.push("  </number:date-style>\n");var d=0;a.SheetNames.map(function(p){return a.Sheets[p]}).forEach(function(p){if(p&&p["!cols"])for(var m=0;m<p["!cols"].length;++m)if(p["!cols"][m]){var y=p["!cols"][m];if(null==y.width&&null==y.wpx&&null==y.wch)continue;Ap(y),y.ods=d;var T=p["!cols"][m].wpx+"px";o.push('  <style:style style:name="co'+d+'" style:family="table-column">\n'),o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+T+'"/>\n'),o.push("  </style:style>\n"),++d}});var h=0;a.SheetNames.map(function(p){return a.Sheets[p]}).forEach(function(p){if(p&&p["!rows"])for(var m=0;m<p["!rows"].length;++m)if(p["!rows"][m]){p["!rows"][m].ods=h;var y=p["!rows"][m].hpx+"px";o.push('  <style:style style:name="ro'+h+'" style:family="table-row">\n'),o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+y+'"/>\n'),o.push("  </style:style>\n"),++h}}),o.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),o.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),o.push("  </style:style>\n"),o.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),o.push(" </office:automatic-styles>\n")}(h,a),h.push("  <office:body>\n"),h.push("    <office:spreadsheet>\n");for(var y=0;y!=a.SheetNames.length;++y)h.push(r(a.Sheets[a.SheetNames[y]],a,y));return h.push("    </office:spreadsheet>\n"),h.push("  </office:body>\n"),h.push("fods"==d.bookType?"</office:document>":"</office:document-content>"),h.join("")}}();function PL(n,e){if("fods"==e.bookType)return IL(n,e);var t=Yk(),r="",i=[],o=[];return cr(t,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),cr(t,r="content.xml",IL(n,e)),i.push([r,"text/xml"]),o.push([r,"ContentFile"]),cr(t,r="styles.xml",lX(n,e)),i.push([r,"text/xml"]),o.push([r,"StylesFile"]),cr(t,r="meta.xml",bs+U5()),i.push([r,"text/xml"]),o.push([r,"MetadataFile"]),cr(t,r="manifest.rdf",function Gq(n){var e=[bs];e.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var t=0;t!=n.length;++t)e.push(L5(n[t][0],n[t][1])),e.push(zq("",n[t][0]));return e.push(L5("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}(o)),i.push([r,"application/rdf+xml"]),cr(t,r="META-INF/manifest.xml",function $q(n){var e=[bs];e.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),e.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+'"/>\n');return e.push("</manifest:manifest>"),e.join("")}(i)),t}function R0(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function uX(n){return typeof TextEncoder<"u"?(new TextEncoder).encode(n):qc(ld(n))}function Pp(n){var e=n.reduce(function(i,o){return i+o.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function aw(n,e){var t=e?e[0]:0,r=127&n[t];e:if(n[t++]>=128&&(r|=(127&n[t])<<7,n[t++]<128||(r|=(127&n[t])<<14,n[t++]<128)||(r|=(127&n[t])<<21,n[t++]<128)||(r+=(127&n[t])*Math.pow(2,28),++t,n[t++]<128)||(r+=(127&n[t])*Math.pow(2,35),++t,n[t++]<128)||(r+=(127&n[t])*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Gr(n){var e=new Uint8Array(7);e[0]=127&n;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Es(n){var e=0,t=127&n[e];e:if(n[e++]>=128){if(t|=(127&n[e])<<7,n[e++]<128||(t|=(127&n[e])<<14,n[e++]<128)||(t|=(127&n[e])<<21,n[e++]<128))break e;t|=(127&n[e])<<28}return t}function Vr(n){for(var e=[],t=[0];t[0]<n.length;){var d,r=t[0],i=aw(n,t),o=7&i,a=0;if(0==(i=Math.floor(i/8)))break;switch(o){case 0:for(var h=t[0];n[t[0]++]>=128;);d=n.slice(h,t[0]);break;case 5:d=n.slice(t[0],t[0]+(a=4)),t[0]+=a;break;case 1:d=n.slice(t[0],t[0]+(a=8)),t[0]+=a;break;case 2:a=aw(n,t),d=n.slice(t[0],t[0]+a),t[0]+=a;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(i," at offset ").concat(r))}var p={data:d,type:o};null==e[i]?e[i]=[p]:e[i].push(p)}return e}function Fo(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(Gr(8*r+i.type)),2==i.type&&e.push(Gr(i.data.length)),e.push(i.data))})}),Pp(e)}function Pl(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=aw(n,r),o=Vr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Es(o[1][0].data),messages:[]};o[2].forEach(function(d){var h=Vr(d.data),p=Es(h[3][0].data);a.messages.push({meta:h,data:n.slice(r[0],r[0]+p)}),r[0]+=p}),null!=(e=o[3])&&e[0]&&(a.merge=Es(o[3][0].data)>>>0>0),t.push(a)}return t}function y1(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Gr(t.id),type:0}],r[2]=[],null!=t.merge&&(r[3]=[{data:Gr(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Gr(a.data.length)}],r[2].push({data:Fo(a.meta),type:2})});var o=Fo(r);e.push(Gr(o.length)),e.push(o),i.forEach(function(a){return e.push(a)})}),Pp(e)}function pX(n,e){if(0!=n)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=aw(e,t),i=[];t[0]<e.length;){var o=3&e[t[0]];if(0!=o){var h=0,p=0;if(1==o?(p=4+(e[t[0]]>>2&7),h=(224&e[t[0]++])<<3,h|=e[t[0]++]):(p=1+(e[t[0]++]>>2),2==o?(h=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(h=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[Pp(i)],0==h)throw new Error("Invalid offset 0");if(h>i[0].length)throw new Error("Invalid offset beyond length");if(p>=h)for(i.push(i[0].slice(-h)),p-=h;p>=i[i.length-1].length;)i.push(i[i.length-1]),p-=i[i.length-1].length;i.push(i[0].slice(-h,-h+p))}else{var a=e[t[0]++]>>2;if(a<60)++a;else{var d=a-59;a=e[t[0]],d>1&&(a|=e[t[0]+1]<<8),d>2&&(a|=e[t[0]+2]<<16),d>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=d}i.push(e.slice(t[0],t[0]+a)),t[0]+=a}}var m=Pp(i);if(m.length!=r)throw new Error("Unexpected length: ".concat(m.length," != ").concat(r));return m}function Dl(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;e.push(pX(r,n.slice(t+=3,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return Pp(e)}function x1(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var o=Gr(r),a=o.length;e.push(o),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=255&a,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return Pp(e)}function zO(n,e){var t=new Uint8Array(32),r=R0(t),i=12,o=0;switch(t[0]=5,n.t){case"n":t[1]=2,function hX(n,e,t){var r=Math.floor(0==t?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(127&r)<<1;for(var o=0;i>=1;++o,i/=256)n[e+o]=255&i;n[e+15]|=t>=0?0:128}(t,i,n.v),o|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),o|=2,i+=8;break;case"s":if(-1==e.indexOf(n.v))throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),o|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,o,!0),t.slice(0,i)}function GO(n,e){var t=new Uint8Array(32),r=R0(t),i=12,o=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),o|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),o|=32,i+=8;break;case"s":if(-1==e.indexOf(n.v))throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),o|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,o,!0),t.slice(0,i)}function Ca(n){return aw(Vr(n)[1][0].data)}function EX(n,e,t){var r,i,o,a;if(null==(r=n[6])||!r[0]||null==(i=n[7])||!i[0])throw"Mutation only works on post-BNC storages!";if((null==(a=null==(o=n[8])?void 0:o[0])?void 0:a.data)&&Es(n[8][0].data)>0)throw"Math only works with normal offsets";for(var h=0,p=R0(n[7][0].data),m=0,y=[],T=R0(n[4][0].data),M=0,R=[],D=0;D<e.length;++D)if(null!=e[D]){var U,J;switch(p.setUint16(2*D,m,!0),T.setUint16(2*D,M,!0),typeof e[D]){case"string":U=zO({t:"s",v:e[D]},t),J=GO({t:"s",v:e[D]},t);break;case"number":U=zO({t:"n",v:e[D]},t),J=GO({t:"n",v:e[D]},t);break;case"boolean":U=zO({t:"b",v:e[D]},t),J=GO({t:"b",v:e[D]},t);break;default:throw new Error("Unsupported value "+e[D])}y.push(U),m+=U.length,R.push(J),M+=J.length,++h}else p.setUint16(2*D,65535,!0),T.setUint16(2*D,65535);for(n[2][0].data=Gr(h);D<n[7][0].data.length/2;++D)p.setUint16(2*D,65535,!0),T.setUint16(2*D,65535,!0);return n[6][0].data=Pp(y),n[3][0].data=Pp(R),h}function YO(n){!function OL(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];void 0===t[i[0]]&&(t[i[0]]=i[1]),"n"===i[2]&&(t[i[0]]=Number(t[i[0]]))}}}([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function DX(n,e){return"ods"==e.bookType?PL(n,e):"numbers"==e.bookType?function TX(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Ha(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(ir(r)));var o=TT(t,{range:r,header:1}),a=["~Sh33tJ5~"];o.forEach(function(xe){return xe.forEach(function(Ee){"string"==typeof Ee&&a.push(Ee)})});var d={},h=[],p=Nn.read(e.numbers,{type:"base64"});p.FileIndex.map(function(xe,Ee){return[xe,p.FullPaths[Ee]]}).forEach(function(xe){var Ee=xe[0],mt=xe[1];2==Ee.type&&Ee.name.match(/\.iwa/)&&Pl(Dl(Ee.content)).forEach(function(St){h.push(St.id),d[St.id]={deps:[],location:mt,type:Es(St.messages[0].meta[1][0].data)}})}),h.sort(function(xe,Ee){return xe-Ee});var m=h.filter(function(xe){return xe>1}).map(function(xe){return[xe,Gr(xe)]});p.FileIndex.map(function(xe,Ee){return[xe,p.FullPaths[Ee]]}).forEach(function(xe){var Ee=xe[0];Ee.name.match(/\.iwa/)&&Pl(Dl(Ee.content)).forEach(function(Vt){Vt.messages.forEach(function(Lt){m.forEach(function(St){Vt.messages.some(function(Qn){return 11006!=Es(Qn.meta[1][0].data)&&function dX(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}(Qn.data,St[1])})&&d[St[0]].deps.push(Vt.id)})})})});for(var R,T=Nn.find(p,d[1].location),M=Pl(Dl(T.content)),D=0;D<M.length;++D){var U=M[D];1==U.id&&(R=U)}var J=Ca(Vr(R.messages[0].data)[1][0].data);for(M=Pl(Dl((T=Nn.find(p,d[J].location)).content)),D=0;D<M.length;++D)(U=M[D]).id==J&&(R=U);for(J=Ca(Vr(R.messages[0].data)[2][0].data),M=Pl(Dl((T=Nn.find(p,d[J].location)).content)),D=0;D<M.length;++D)(U=M[D]).id==J&&(R=U);for(J=Ca(Vr(R.messages[0].data)[2][0].data),M=Pl(Dl((T=Nn.find(p,d[J].location)).content)),D=0;D<M.length;++D)(U=M[D]).id==J&&(R=U);var ee=Vr(R.messages[0].data);ee[6][0].data=Gr(r.e.r+1),ee[7][0].data=Gr(r.e.c+1);for(var W=Ca(ee[46][0].data),pe=Nn.find(p,d[W].location),Ae=Pl(Dl(pe.content)),Ve=0;Ve<Ae.length&&Ae[Ve].id!=W;++Ve);if(Ae[Ve].id!=W)throw"Bad ColumnRowUIDMapArchive";var ae=Vr(Ae[Ve].messages[0].data);ae[1]=[],ae[2]=[],ae[3]=[];for(var Re=0;Re<=r.e.c;++Re){var ke=[];ke[1]=ke[2]=[{type:0,data:Gr(Re+420690)}],ae[1].push({type:2,data:Fo(ke)}),ae[2].push({type:0,data:Gr(Re)}),ae[3].push({type:0,data:Gr(Re)})}ae[4]=[],ae[5]=[],ae[6]=[];for(var Je=0;Je<=r.e.r;++Je)(ke=[])[1]=ke[2]=[{type:0,data:Gr(Je+726270)}],ae[4].push({type:2,data:Fo(ke)}),ae[5].push({type:0,data:Gr(Je)}),ae[6].push({type:0,data:Gr(Je)});Ae[Ve].messages[0].data=Fo(ae),pe.content=x1(y1(Ae)),pe.size=pe.content.length,delete ee[46];var at=Vr(ee[4][0].data);at[7][0].data=Gr(r.e.r+1);var Ut=Ca(Vr(at[1][0].data)[2][0].data);if((Ae=Pl(Dl((pe=Nn.find(p,d[Ut].location)).content)))[0].id!=Ut)throw"Bad HeaderStorageBucket";var tn=Vr(Ae[0].messages[0].data);for(Je=0;Je<o.length;++Je){var $t=Vr(tn[2][0].data);$t[1][0].data=Gr(Je),$t[4][0].data=Gr(o[Je].length),tn[2][Je]={type:tn[2][0].type,data:Fo($t)}}Ae[0].messages[0].data=Fo(tn),pe.content=x1(y1(Ae)),pe.size=pe.content.length;var wt=Ca(at[2][0].data);if((Ae=Pl(Dl((pe=Nn.find(p,d[wt].location)).content)))[0].id!=wt)throw"Bad HeaderStorageBucket";for(tn=Vr(Ae[0].messages[0].data),Re=0;Re<=r.e.c;++Re)($t=Vr(tn[2][0].data))[1][0].data=Gr(Re),$t[4][0].data=Gr(r.e.r+1),tn[2][Re]={type:tn[2][0].type,data:Fo($t)};Ae[0].messages[0].data=Fo(tn),pe.content=x1(y1(Ae)),pe.size=pe.content.length;var Ct=Ca(at[4][0].data);!function(){for(var mt,xe=Nn.find(p,d[Ct].location),Ee=Pl(Dl(xe.content)),Bt=0;Bt<Ee.length;++Bt){var Vt=Ee[Bt];Vt.id==Ct&&(mt=Vt)}var Lt=Vr(mt.messages[0].data);Lt[3]=[];var St=[];a.forEach(function(Xr,yr){St[1]=[{type:0,data:Gr(yr)}],St[2]=[{type:0,data:Gr(1)}],St[3]=[{type:2,data:uX(Xr)}],Lt[3].push({type:2,data:Fo(St)})}),mt.messages[0].data=Fo(Lt);var ye=x1(y1(Ee));xe.content=ye,xe.size=xe.content.length}();var Gt=Vr(at[3][0].data),Dt=Gt[1][0];delete Gt[2];var bn=Vr(Dt.data),bt=Ca(bn[2][0].data);!function(){for(var mt,xe=Nn.find(p,d[bt].location),Ee=Pl(Dl(xe.content)),Bt=0;Bt<Ee.length;++Bt){var Vt=Ee[Bt];Vt.id==bt&&(mt=Vt)}var Lt=Vr(mt.messages[0].data);delete Lt[6],delete Gt[7];var St=new Uint8Array(Lt[5][0].data);Lt[5]=[];for(var Qn=0,ye=0;ye<=r.e.r;++ye){var Xr=Vr(St);Qn+=EX(Xr,o[ye],a),Xr[1][0].data=Gr(ye),Lt[5].push({data:Fo(Xr),type:2})}Lt[1]=[{type:0,data:Gr(r.e.c+1)}],Lt[2]=[{type:0,data:Gr(r.e.r+1)}],Lt[3]=[{type:0,data:Gr(Qn)}],Lt[4]=[{type:0,data:Gr(r.e.r+1)}],mt.messages[0].data=Fo(Lt);var ei=x1(y1(Ee));xe.content=ei,xe.size=xe.content.length}(),Dt.data=Fo(bn),at[3][0].data=Fo(Gt),ee[4][0].data=Fo(at),R.messages[0].data=Fo(ee);var Ge=x1(y1(M));return T.content=Ge,T.size=T.content.length,p}(n,e):"xlsb"==e.bookType?function kX(n,e){m1=1024,n&&!n.SSF&&(n.SSF=pi(Un)),n&&n.SSF&&(c1(),Nx(n.SSF),e.revssf=XE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,nw?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xlsb"==e.bookType?"bin":"xml",r=j6.indexOf(e.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};YO(e=e||{});var o=Yk(),a="",d=0;if(e.cellXfs=[],Ip(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),cr(o,a="docProps/core.xml",V5(n.Props,e)),i.coreprops.push(a),zr(e.rels,2,a,sr.CORE_PROPS),a="docProps/app.xml",!n.Props||!n.Props.SheetNames)if(n.Workbook&&n.Workbook.Sheets){for(var h=[],p=0;p<n.SheetNames.length;++p)2!=(n.Workbook.Sheets[p]||{}).Hidden&&h.push(n.SheetNames[p]);n.Props.SheetNames=h}else n.Props.SheetNames=n.SheetNames;for(n.Props.Worksheets=n.Props.SheetNames.length,cr(o,a,q5(n.Props)),i.extprops.push(a),zr(e.rels,3,a,sr.EXT_PROPS),n.Custprops!==n.Props&&xs(n.Custprops||{}).length>0&&(cr(o,a="docProps/custom.xml",H5(n.Custprops)),i.custprops.push(a),zr(e.rels,4,a,sr.CUST_PROPS)),d=1;d<=n.SheetNames.length;++d){var m={"!id":{}},y=n.Sheets[n.SheetNames[d-1]];if(cr(o,a="xl/worksheets/sheet"+d+"."+t,fQ(d-1,a,e,n,m)),i.sheets.push(a),zr(e.wbrels,-1,"worksheets/sheet"+d+"."+t,sr.WS[0]),y){var M=y["!comments"],R=!1,D="";M&&M.length>0&&(cr(o,D="xl/comments"+d+"."+t,gQ(M,D,e)),i.comments.push(D),zr(m,-1,"../comments"+d+"."+t,sr.CMNT),R=!0),y["!legacy"]&&R&&cr(o,"xl/drawings/vmlDrawing"+d+".vml",B6(d,y["!comments"])),delete y["!comments"],delete y["!legacy"]}m["!id"].rId1&&cr(o,Hx(a),p1(m))}return null!=e.Strings&&e.Strings.length>0&&(cr(o,a="xl/sharedStrings."+t,function pQ(n,e,t){return(".bin"===e.slice(-4)?hz:S6)(n,t)}(e.Strings,a,e)),i.strs.push(a),zr(e.wbrels,-1,"sharedStrings."+t,sr.SST)),cr(o,a="xl/workbook."+t,function dQ(n,e,t){return(".bin"===e.slice(-4)?QJ:uL)(n,t)}(n,a,e)),i.workbooks.push(a),zr(e.rels,1,a,sr.WB),cr(o,a="xl/theme/theme1.xml",kO(n.Themes,e)),i.themes.push(a),zr(e.wbrels,-1,"theme/theme1.xml",sr.THEME),cr(o,a="xl/styles."+t,function hQ(n,e,t){return(".bin"===e.slice(-4)?cG:F6)(n,t)}(n,a,e)),i.styles.push(a),zr(e.wbrels,-1,"styles."+t,sr.STY),n.vbaraw&&r&&(cr(o,a="xl/vbaProject.bin",n.vbaraw),i.vba.push(a),zr(e.wbrels,-1,"vbaProject.bin",sr.VBA)),cr(o,a="xl/metadata."+t,function mQ(n){return(".bin"===n.slice(-4)?FG:U6)()}(a)),i.metadata.push(a),zr(e.wbrels,-1,"metadata."+t,sr.XLMETA),cr(o,"[Content_Types].xml",N5(i,e)),cr(o,"_rels/.rels",p1(e.rels)),cr(o,"xl/_rels/workbook."+t+".rels",p1(e.wbrels)),delete e.revssf,delete e.ssf,o}(n,e):function FL(n,e){m1=1024,n&&!n.SSF&&(n.SSF=pi(Un)),n&&n.SSF&&(c1(),Nx(n.SSF),e.revssf=XE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,nw?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=j6.indexOf(e.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};YO(e=e||{});var o=Yk(),a="",d=0;if(e.cellXfs=[],Ip(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),cr(o,a="docProps/core.xml",V5(n.Props,e)),i.coreprops.push(a),zr(e.rels,2,a,sr.CORE_PROPS),a="docProps/app.xml",!n.Props||!n.Props.SheetNames)if(n.Workbook&&n.Workbook.Sheets){for(var h=[],p=0;p<n.SheetNames.length;++p)2!=(n.Workbook.Sheets[p]||{}).Hidden&&h.push(n.SheetNames[p]);n.Props.SheetNames=h}else n.Props.SheetNames=n.SheetNames;n.Props.Worksheets=n.Props.SheetNames.length,cr(o,a,q5(n.Props)),i.extprops.push(a),zr(e.rels,3,a,sr.EXT_PROPS),n.Custprops!==n.Props&&xs(n.Custprops||{}).length>0&&(cr(o,a="docProps/custom.xml",H5(n.Custprops)),i.custprops.push(a),zr(e.rels,4,a,sr.CUST_PROPS));var m=["SheetJ5"];for(e.tcid=0,d=1;d<=n.SheetNames.length;++d){var y={"!id":{}},T=n.Sheets[n.SheetNames[d-1]];if(cr(o,a="xl/worksheets/sheet"+d+"."+t,nL(d-1,e,n,y)),i.sheets.push(a),zr(e.wbrels,-1,"worksheets/sheet"+d+"."+t,sr.WS[0]),T){var R=T["!comments"],D=!1,U="";if(R&&R.length>0){var J=!1;R.forEach(function(ee){ee[1].forEach(function(W){1==W.T&&(J=!0)})}),J&&(cr(o,U="xl/threadedComments/threadedComment"+d+"."+t,qG(R,m,e)),i.threadedcomments.push(U),zr(y,-1,"../threadedComments/threadedComment"+d+"."+t,sr.TCMNT)),cr(o,U="xl/comments"+d+"."+t,Z6(R)),i.comments.push(U),zr(y,-1,"../comments"+d+"."+t,sr.CMNT),D=!0}T["!legacy"]&&D&&cr(o,"xl/drawings/vmlDrawing"+d+".vml",B6(d,T["!comments"])),delete T["!comments"],delete T["!legacy"]}y["!id"].rId1&&cr(o,Hx(a),p1(y))}return null!=e.Strings&&e.Strings.length>0&&(cr(o,a="xl/sharedStrings."+t,S6(e.Strings,e)),i.strs.push(a),zr(e.wbrels,-1,"sharedStrings."+t,sr.SST)),cr(o,a="xl/workbook."+t,uL(n)),i.workbooks.push(a),zr(e.rels,1,a,sr.WB),cr(o,a="xl/theme/theme1.xml",kO(n.Themes,e)),i.themes.push(a),zr(e.wbrels,-1,"theme/theme1.xml",sr.THEME),cr(o,a="xl/styles."+t,F6(n,e)),i.styles.push(a),zr(e.wbrels,-1,"styles."+t,sr.STY),n.vbaraw&&r&&(cr(o,a="xl/vbaProject.bin",n.vbaraw),i.vba.push(a),zr(e.wbrels,-1,"vbaProject.bin",sr.VBA)),cr(o,a="xl/metadata."+t,U6()),i.metadata.push(a),zr(e.wbrels,-1,"metadata."+t,sr.XLMETA),m.length>1&&(cr(o,a="xl/persons/person.xml",function $G(n){var e=[bs,zt("personList",null,{xmlns:Js.TCMNT,"xmlns:x":Ep[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(zt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}(m)),i.people.push(a),zr(e.wbrels,-1,"persons/person.xml",sr.PEOPLE)),cr(o,"[Content_Types].xml",N5(i,e)),cr(o,"_rels/.rels",p1(e.rels)),cr(o,"xl/_rels/workbook.xml.rels",p1(e.wbrels)),delete e.revssf,delete e.ssf,o}(n,e)}function NL(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Lx(e.file,Nn.write(n,{type:dr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Nn.write(n,e)}function hd(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return kx(ld(r));case"binary":return ld(r);case"string":return n;case"file":return Lx(e.file,r,"utf8");case"buffer":return dr?Lf(r,"utf8"):typeof TextEncoder<"u"?(new TextEncoder).encode(r):hd(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ET(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return"base64"==e.type?kx(t):"string"==e.type?Di(t):t;case"file":return Lx(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function e3(n,e){(function GE(){Tl(1200),function aj(){zE(1252)}()})(),function lL(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");!function UJ(n,e,t){n.forEach(function(r,i){cL(r);for(var o=0;o<i;++o)if(r==n[o])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(95==a.charCodeAt(0)&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}(n.SheetNames,n.Workbook&&n.Workbook.Sheets||[],!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)FK(n.Sheets[n.SheetNames[t]],0,t)}(n);var t=pi(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),"array"==t.type){t.type="binary";var r=e3(n,t);return t.type="array",Ox(r)}var i=0;if(t.sheet&&(i="number"==typeof t.sheet?t.sheet:n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return hd(RQ(n,t),t);case"slk":case"sylk":return hd(b6.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return hd(wL(n.Sheets[n.SheetNames[i]],t),t);case"txt":return function ZX(n,e){switch(e.type){case"base64":return kx(n);case"binary":case"string":return n;case"file":return Lx(e.file,n,"binary");case"buffer":return dr?Lf(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}(qL(n.Sheets[n.SheetNames[i]],t),t);case"csv":return hd(n3(n.Sheets[n.SheetNames[i]],t),t,"\ufeff");case"dif":return hd(C6.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return ET(AO.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return hd(g1.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return hd(D6.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return hd(E6.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return hd(PL(n,t),t);case"wk1":return ET(O0.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return ET(O0.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),ET(gL(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),function VX(n,e){var t=e||{};return NL(function jQ(n,e){var t=e||{},r=Nn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Nn.utils.cfb_add(r,i,gL(n,t)),8==t.biff&&(n.Props||n.Custprops)&&function ZQ(n,e){var a,t=[],r=[],i=[],o=0,d=zN(_O,"n"),h=zN(vO,"n");if(n.Props)for(a=xs(n.Props),o=0;o<a.length;++o)(Object.prototype.hasOwnProperty.call(d,a[o])?t:Object.prototype.hasOwnProperty.call(h,a[o])?r:i).push([a[o],n.Props[a[o]]]);if(n.Custprops)for(a=xs(n.Custprops),o=0;o<a.length;++o)Object.prototype.hasOwnProperty.call(n.Props||{},a[o])||(Object.prototype.hasOwnProperty.call(d,a[o])?t:Object.prototype.hasOwnProperty.call(h,a[o])?r:i).push([a[o],n.Custprops[a[o]]]);var p=[];for(o=0;o<i.length;++o)Q5.indexOf(i[o][0])>-1||Z5.indexOf(i[o][0])>-1||null!=i[o][1]&&p.push(i[o]);r.length&&Nn.utils.cfb_add(e,"/\x05SummaryInformation",t6(r,iw.SI,h,vO)),(t.length||p.length)&&Nn.utils.cfb_add(e,"/\x05DocumentSummaryInformation",t6(t,iw.DSI,d,_O,p.length?p:null,iw.UDI))}(n,r),8==t.biff&&n.vbaraw&&function eW(n,e){e.FullPaths.forEach(function(t,r){if(0!=r){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&Nn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}(r,Nn.read(n.vbaraw,{type:"string"==typeof n.vbaraw?"binary":"buffer"})),r}(n,t),t)}(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function UX(n,e){var t=pi(e||{});return function LL(n,e){var t={},r=dr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Nn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&"string"==typeof i){if("binary"==e.type||"base64"==e.type)return i;i=new Uint8Array(Ox(i))}return e.password&&typeof encrypt_agile<"u"?NL(encrypt_agile(i,e.password),e):"file"===e.type?Lx(e.file,i):"string"==e.type?Di(i):i}(DX(n,t),t)}(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function BL(n,e,t){var r=t||{};return r.type="file",r.file=e,function t3(n){if(!n.bookType){var t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[n.bookType]||n.bookType}}(r),e3(n,r)}function VL(n,e,t,r,i,o,a,d){var h=Cs(t),p=d.defval,m=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),y=!0,T=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(T,"__rowNum__",{value:t,enumerable:!1})}catch{T.__rowNum__=t}else T.__rowNum__=t;if(!a||n[t])for(var M=e.s.c;M<=e.e.c;++M){var R=a?n[t][M]:n[r[M]+h];if(void 0!==R&&void 0!==R.t){var D=R.v;switch(R.t){case"z":if(null==D)break;continue;case"e":D=0==D?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+R.t)}if(null!=o[M]){if(null==D)if("e"==R.t&&null===D)T[o[M]]=null;else if(void 0!==p)T[o[M]]=p;else{if(!m||null!==D)continue;T[o[M]]=null}else T[o[M]]=m&&("n"!==R.t||"n"===R.t&&!1!==d.rawNumbers)?D:ud(R,D,d);null!=D&&(y=!1)}}else{if(void 0===p)continue;null!=o[M]&&(T[o[M]]=p)}}return{row:T,isempty:y}}function TT(n,e){if(null==n||null==n["!ref"])return[];var t={t:"n",v:0},r=0,i=1,o=[],a=0,d="",h={s:{r:0,c:0},e:{r:0,c:0}},p=e||{},m=null!=p.range?p.range:n["!ref"];switch(1===p.header?r=1:"A"===p.header?r=2:Array.isArray(p.header)?r=3:null==p.header&&(r=0),typeof m){case"string":h=Mr(m);break;case"number":(h=Mr(n["!ref"])).s.r=m;break;default:h=m}r>0&&(i=0);var y=Cs(h.s.r),T=[],M=[],R=0,D=0,U=Array.isArray(n),J=h.s.r,ee=0,W={};U&&!n[J]&&(n[J]=[]);var pe=p.skipHidden&&n["!cols"]||[],Ae=p.skipHidden&&n["!rows"]||[];for(ee=h.s.c;ee<=h.e.c;++ee)if(!(pe[ee]||{}).hidden)switch(T[ee]=ki(ee),t=U?n[J][ee]:n[T[ee]+y],r){case 1:o[ee]=ee-h.s.c;break;case 2:o[ee]=T[ee];break;case 3:o[ee]=p.header[ee-h.s.c];break;default:if(null==t&&(t={w:"__EMPTY",t:"s"}),d=a=ud(t,null,p),D=W[a]||0){do{d=a+"_"+D++}while(W[d]);W[a]=D,W[d]=1}else W[a]=1;o[ee]=d}for(J=h.s.r+i;J<=h.e.r;++J)if(!(Ae[J]||{}).hidden){var Ve=VL(n,h,J,T,r,o,U,p);(!1===Ve.isempty||(1===r?!1!==p.blankrows:p.blankrows))&&(M[R++]=Ve.row)}return M.length=R,M}var ZL=/"/g;function jL(n,e,t,r,i,o,a,d){for(var h=!0,p=[],m="",y=Cs(t),T=e.s.c;T<=e.e.c;++T)if(r[T]){var M=d.dense?(n[t]||[])[T]:n[r[T]+y];if(null==M)m="";else if(null!=M.v){h=!1,m=""+(d.rawNumbers&&"n"==M.t?M.v:ud(M,null,d));for(var R=0,D=0;R!==m.length;++R)if((D=m.charCodeAt(R))===i||D===o||34===D||d.forceQuotes){m='"'+m.replace(ZL,'""')+'"';break}"ID"==m&&(m='"ID"')}else null==M.f||M.F?m="":(h=!1,(m="="+M.f).indexOf(",")>=0&&(m='"'+m.replace(ZL,'""')+'"'));p.push(m)}return!1===d.blankrows&&h?null:p.join(a)}function n3(n,e){var t=[],r=e??{};if(null==n||null==n["!ref"])return"";var i=Mr(n["!ref"]),o=void 0!==r.FS?r.FS:",",a=o.charCodeAt(0),d=void 0!==r.RS?r.RS:"\n",h=d.charCodeAt(0),p=new RegExp(("|"==o?"\\|":o)+"+$"),m="",y=[];r.dense=Array.isArray(n);for(var T=r.skipHidden&&n["!cols"]||[],M=r.skipHidden&&n["!rows"]||[],R=i.s.c;R<=i.e.c;++R)(T[R]||{}).hidden||(y[R]=ki(R));for(var D=0,U=i.s.r;U<=i.e.r;++U)(M[U]||{}).hidden||null!=(m=jL(n,i,U,y,a,h,o,r))&&(r.strip&&(m=m.replace(p,"")),(m||!1!==r.blankrows)&&t.push((D++?d:"")+m));return delete r.dense,t.join("")}function qL(n,e){e||(e={}),e.FS="\t",e.RS="\n";var t=n3(n,e);if(typeof kr>"u"||"string"==e.type)return t;var r=kr.utils.encode(1200,t,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function HL(n,e,t){var r=t||{},i=+!r.skipHeader,o=n||{},a=0,d=0;if(o&&null!=r.origin)if("number"==typeof r.origin)a=r.origin;else{var h="string"==typeof r.origin?Ns(r.origin):r.origin;a=h.r,d=h.c}var p,m={s:{c:0,r:0},e:{c:d,r:a+e.length-1+i}};if(o["!ref"]){var y=Mr(o["!ref"]);m.e.c=Math.max(m.e.c,y.e.c),m.e.r=Math.max(m.e.r,y.e.r),-1==a&&(m.e.r=(a=y.e.r+1)+e.length-1+i)}else-1==a&&(a=0,m.e.r=e.length-1+i);var T=r.header||[],M=0;e.forEach(function(D,U){xs(D).forEach(function(J){-1==(M=T.indexOf(J))&&(T[M=T.length]=J);var ee=D[J],W="z",pe="",Ae=Hn({c:d+M,r:a+U+i});p=cw(o,Ae),!ee||"object"!=typeof ee||ee instanceof Date?("number"==typeof ee?W="n":"boolean"==typeof ee?W="b":"string"==typeof ee?W="s":ee instanceof Date?(W="d",r.cellDates||(W="n",ee=Po(ee)),pe=r.dateNF||Un[14]):null===ee&&r.nullError&&(W="e",ee=0),p?(p.t=W,p.v=ee,delete p.w,delete p.R,pe&&(p.z=pe)):o[Ae]=p={t:W,v:ee},pe&&(p.z=pe)):o[Ae]=ee})}),m.e.c=Math.max(m.e.c,d+T.length-1);var R=Cs(a);if(i)for(M=0;M<T.length;++M)o[ki(M+d)+R]={t:"s",v:T[M]};return o["!ref"]=ir(m),o}function cw(n,e,t){if("string"==typeof e){if(Array.isArray(n)){var r=Ns(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return cw(n,Hn("number"!=typeof e?e:{r:e,c:t||0}))}function $L(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}var w1={encode_col:ki,encode_row:Cs,encode_cell:Hn,encode_range:ir,decode_col:uO,decode_row:lO,split_cell:function vq(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Ns,decode_range:Ha,format_cell:ud,sheet_add_aoa:M5,sheet_add_json:HL,sheet_add_dom:bL,aoa_to_sheet:f1,json_to_sheet:function qX(n,e){return HL(null,n,e)},table_to_sheet:CL,table_to_book:function oX(n,e){return Tp(CL(n,e),e)},sheet_to_csv:n3,sheet_to_txt:qL,sheet_to_json:TT,sheet_to_html:wL,sheet_to_formulae:function jX(n){var t,e="",r="";if(null==n||null==n["!ref"])return[];var d,i=Mr(n["!ref"]),o="",a=[],h=[],p=Array.isArray(n);for(d=i.s.c;d<=i.e.c;++d)a[d]=ki(d);for(var m=i.s.r;m<=i.e.r;++m)for(o=Cs(m),d=i.s.c;d<=i.e.c;++d)if(e=a[d]+o,r="",void 0!==(t=p?(n[m]||[])[d]:n[e])){if(null!=t.F){if(e=t.F,!t.f)continue;r=t.f,-1==e.indexOf(":")&&(e=e+":"+e)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}h[h.length]=e+"="+r}return h},sheet_to_row_object_array:TT,sheet_get_cell:cw,book_new:function r3(){return{SheetNames:[],Sheets:{}}},book_append_sheet:function i3(n,e,t,r){var i=1;if(!t)for(;i<=65535&&-1!=n.SheetNames.indexOf(t="Sheet"+i);++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var o=t.match(/(^.*?)(\d+)$/);i=o&&+o[2]||0;var a=o&&o[1]||t;for(++i;i<=65535&&-1!=n.SheetNames.indexOf(t=a+i);++i);}if(cL(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t},book_set_sheet_visibility:function $X(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=function HX(n,e){if("number"==typeof e){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}if("string"==typeof e){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}throw new Error("Cannot find sheet |"+e+"|")}(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t},cell_set_number_format:function zX(n,e){return n.z=e,n},cell_set_hyperlink:$L,cell_set_internal_link:function GX(n,e,t){return $L(n,"#"+e,t)},cell_add_comment:function WX(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})},sheet_set_array_formula:function KX(n,e,t,r){for(var i="string"!=typeof e?e:Mr(e),o="string"==typeof e?e:ir(e),a=i.s.r;a<=i.e.r;++a)for(var d=i.s.c;d<=i.e.c;++d){var h=cw(n,a,d);h.t="n",h.F=o,delete h.v,a==i.s.r&&d==i.s.c&&(h.f=t,r&&(h.D=!0))}return n},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function eee(n,e){1&n&&(s.TgZ(0,"div",11),s._UZ(1,"i",12),s._uU(2," Cargando historial... "),s.qZA())}function tee(n,e){if(1&n&&(s.TgZ(0,"div",13),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.hij(" ",t.errorMessage," ")}}function nee(n,e){1&n&&(s.TgZ(0,"div",14),s._UZ(1,"i",15),s.TgZ(2,"p"),s._uU(3,"No encontramos ventas registradas todav\xeda."),s.qZA(),s.TgZ(4,"small"),s._uU(5,"Cuando registres operaciones aparecer\xe1n en este historial."),s.qZA()())}function ree(n,e){if(1&n&&(s.TgZ(0,"span",27),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&n){const t=s.oxw().$implicit;s.xp6(1),s.hij("(",s.xi3(2,1,t.amount,"USD"),")")}}function iee(n,e){if(1&n&&(s.TgZ(0,"span"),s._uU(1),s.YNc(2,ree,3,4,"span",26),s.qZA()),2&n){const t=e.$implicit;s.xp6(1),s.hij(" ",t.name," "),s.xp6(1),s.Q6J("ngIf",t.amount)}}function see(n,e){if(1&n&&(s.TgZ(0,"li"),s._uU(1),s.TgZ(2,"span",28),s._uU(3),s.ALo(4,"currency"),s.qZA()()),2&n){const t=e.$implicit;s.xp6(1),s.hij(" ",t.product_name," "),s.xp6(2),s.AsE(" (",t.quantity,"x ",s.xi3(4,3,t.unit_price,"USD"),") ")}}function oee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",29),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit,o=s.oxw(2);return s.KtG(o.cancelSale(i.sale.id))}),s._UZ(1,"i",30),s.qZA()}}function aee(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.ALo(3,"date"),s.qZA(),s.TgZ(4,"td")(5,"span",20),s._uU(6),s.qZA()(),s.TgZ(7,"td")(8,"div",21),s.YNc(9,iee,3,2,"span",22),s.qZA()(),s.TgZ(10,"td")(11,"ul",23),s.YNc(12,see,5,6,"li",22),s.qZA()(),s.TgZ(13,"td",24),s._uU(14),s.ALo(15,"currency"),s.qZA(),s.TgZ(16,"td"),s.YNc(17,oee,2,0,"button",25),s.qZA()()),2&n){const t=e.$implicit;s.ekj("cancelled","cancelled"===t.sale.status),s.xp6(2),s.Oqu(s.xi3(3,10,t.sale.created_at,"medium")),s.xp6(3),s.Tol(t.sale.status),s.xp6(1),s.hij(" ","completed"===t.sale.status?"Completada":"Cancelada"," "),s.xp6(3),s.Q6J("ngForOf",t.paymentSummaries),s.xp6(3),s.Q6J("ngForOf",t.items),s.xp6(2),s.Oqu(s.xi3(15,13,t.sale.total_amount,"USD")),s.xp6(3),s.Q6J("ngIf","completed"===t.sale.status)}}function cee(n,e){1&n&&s._UZ(0,"i",12)}function lee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",31)(1,"button",32),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.loadMore())}),s.YNc(2,cee,1,0,"i",33),s._uU(3," Cargar m\xe1s "),s.qZA(),s.TgZ(4,"span",34),s._uU(5),s.qZA()()}if(2&n){const t=s.oxw(2);s.xp6(1),s.Q6J("disabled",t.isLoadingMore),s.xp6(1),s.Q6J("ngIf",t.isLoadingMore),s.xp6(3),s.AsE(" Mostrando ",t.sales.length," de ",t.totalSales," ventas ")}}function uee(n,e){if(1&n&&(s.TgZ(0,"div",16)(1,"table",17)(2,"thead")(3,"tr")(4,"th"),s._uU(5,"Fecha"),s.qZA(),s.TgZ(6,"th"),s._uU(7,"Estado"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"M\xe9todos de Pago"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Productos"),s.qZA(),s.TgZ(12,"th"),s._uU(13,"Total"),s.qZA(),s.TgZ(14,"th"),s._uU(15,"Acciones"),s.qZA()()(),s.TgZ(16,"tbody"),s.YNc(17,aee,18,16,"tr",18),s.qZA()(),s.YNc(18,lee,6,4,"div",19),s.qZA()),2&n){const t=s.oxw();s.xp6(17),s.Q6J("ngForOf",t.historyRows)("ngForTrackBy",t.trackBySaleId),s.xp6(1),s.Q6J("ngIf",t.sales.length<t.totalSales)}}let dee=(()=>{const e=class{constructor(r,i){this.salesService=r,this.paymentMethodsService=i,this.sales=[],this.paymentMethods=[],this.errorMessage="",this.loading=!0,this.historyRows=[],this.page=1,this.pageSize=20,this.totalSales=0,this.isLoadingMore=!1}ngOnInit(){this.loadPaymentMethods(),this.loadSales(!0)}loadPaymentMethods(){this.paymentMethodsService.getPaymentMethods().subscribe({next:r=>{this.paymentMethods=r,this.rebuildRows()},error:r=>{console.error("Error loading payment methods:",r),this.errorMessage="Error al cargar los m\xe9todos de pago"}})}loadSales(r=!1){r&&(this.sales=[],this.page=1,this.totalSales=0,this.historyRows=[]),this.loading=1===this.page,this.isLoadingMore=this.page>1,this.salesService.getAllSales(this.pageSize,(this.page-1)*this.pageSize).subscribe({next:i=>{this.sales=[...this.sales,...i.sales],this.totalSales=i.total,this.rebuildRows(),this.loading=!1,this.isLoadingMore=!1},error:i=>{console.error("Error loading sales:",i),this.errorMessage="Error al cargar el historial de ventas",this.loading=!1,this.isLoadingMore=!1}})}cancelSale(r){this.salesService.cancelSale(r).subscribe({next:()=>{this.loadSales()},error:i=>{console.error("Error cancelling sale:",i),this.errorMessage="Error al cancelar la venta"}})}trackBySaleId(r,i){return i.sale.id}rebuildRows(){if(!this.sales||0===this.sales.length)return void(this.historyRows=[]);const r=this.paymentMethods||[];this.historyRows=this.sales.map(i=>({sale:i,items:i.items||[],paymentSummaries:this.buildPaymentSummaries(i,r)}))}buildPaymentSummaries(r,i){return r?.payment_method?r.payment_method.split(",").map(a=>a.trim()).filter(Boolean).map((a,d)=>{const h=i.find(m=>m.code===a),p=r.payment_splits?.[d];return{name:h?h.name:a,amount:p?p.amount:void 0}}):[]}exportToExcel(){const r=this.sales.map(d=>{const h=this.buildPaymentSummaries(d,this.paymentMethods).map(m=>`${m.name}${m.amount?` ($${m.amount})`:""}`).join(", "),p=(d.items||[]).map(m=>`${m.product_name} (${m.quantity}x $${m.unit_price})`).join(", ")||"";return{Fecha:new Date(d.created_at).toLocaleString(),Estado:"completed"===d.status?"Completada":"Cancelada","M\xe9todos de Pago":h,Productos:p,Total:`$${d.total_amount}`}}),i=w1.json_to_sheet(r),o=w1.book_new();w1.book_append_sheet(o,i,"Historial de Ventas"),BL(o,`historial_ventas_${(new Date).toISOString().split("T")[0]}.xlsx`)}loadMore(){this.sales.length<this.totalSales&&!this.isLoadingMore&&(this.page++,this.loadSales())}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(Mx),s.Y36(r1))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-sales-history"]],decls:15,vars:4,consts:[[1,"sales-history-container"],[1,"history-header"],[1,"header-actions"],["routerLink","/ventas",1,"btn-back"],[1,"fas","fa-arrow-left"],[1,"btn-export",3,"click"],[1,"fas","fa-file-excel"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"empty-state"],[1,"fas","fa-clipboard-list"],[1,"table-container"],[1,"sales-table"],[3,"cancelled",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-controls",4,"ngIf"],[1,"status-badge"],[1,"payment-methods-list"],[4,"ngFor","ngForOf"],[1,"products-list"],[1,"total-column"],["class","btn-cancel","title","Cancelar venta",3,"click",4,"ngIf"],["class","payment-amount",4,"ngIf"],[1,"payment-amount"],[1,"product-details"],["title","Cancelar venta",1,"btn-cancel",3,"click"],[1,"fas","fa-ban"],[1,"pagination-controls"],[1,"btn-load-more",3,"disabled","click"],["class","fas fa-spinner fa-spin",4,"ngIf"],[1,"pagination-info"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h2"),s._uU(3,"Historial Completo de Ventas"),s.qZA(),s.TgZ(4,"div",2)(5,"a",3),s._UZ(6,"i",4),s._uU(7," Volver a Ventas "),s.qZA(),s.TgZ(8,"button",5),s.NdJ("click",function(){return o.exportToExcel()}),s._UZ(9,"i",6),s._uU(10," Exportar a Excel "),s.qZA()()(),s.YNc(11,eee,3,0,"div",7),s.YNc(12,tee,2,1,"div",8),s.YNc(13,nee,6,0,"div",9),s.YNc(14,uee,19,3,"div",10),s.qZA()),2&i&&(s.xp6(11),s.Q6J("ngIf",o.loading),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(1),s.Q6J("ngIf",!o.loading&&0===o.historyRows.length&&!o.errorMessage),s.xp6(1),s.Q6J("ngIf",!o.loading&&o.historyRows.length>0))},dependencies:[te.sg,te.O5,k.rH,te.H9,te.uU],styles:[".sales-history-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.history-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}h2[_ngcontent-%COMP%]{color:#2c3e50;margin:0}.btn-back[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;text-decoration:none;padding:.75rem 1.5rem;border-radius:4px;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease}.btn-back[_ngcontent-%COMP%]:hover{background-color:#2980b9}.btn-export[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease;font-size:1rem}.btn-export[_ngcontent-%COMP%]:hover{background-color:#219a52}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#3c9c36;font-size:1.2rem}.empty-state[_ngcontent-%COMP%]{border:1px dashed rgba(44,62,80,.35);border-radius:12px;padding:2rem;text-align:center;color:#4b5563;background-color:#f8fafc;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:block;font-size:1.75rem;margin-bottom:.5rem;color:#3c9c36}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626;padding:1rem;border-radius:4px;margin-bottom:1rem}.table-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow-x:auto}.sales-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:800px}.sales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #edf2f7}.sales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;color:#2c3e50;font-weight:600;white-space:nowrap}.sales-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.sales-table[_ngcontent-%COMP%]   tr.cancelled[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#6b7280}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:500}.status-badge.completed[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.status-badge.cancelled[_ngcontent-%COMP%]{background-color:#fde8e8;color:#c0392b}.payment-methods-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.payment-methods-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.payment-amount[_ngcontent-%COMP%]{color:#3c9c36;font-weight:500}.products-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.products-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem}.product-details[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.total-column[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.btn-cancel[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;width:32px;height:32px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background-color .3s ease}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c0392b}@media (max-width: 768px){.sales-history-container[_ngcontent-%COMP%]{padding:1rem}.history-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.header-actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.btn-back[_ngcontent-%COMP%], .btn-export[_ngcontent-%COMP%]{width:100%;justify-content:center}.table-container[_ngcontent-%COMP%]{margin:0 -1rem;border-radius:0}}"]}),n})();function fee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",7),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.showAddForm=!0)}),s._UZ(1,"i",8),s._uU(2," Agregar M\xe9todo de Pago "),s.qZA()}}function hee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",9)(1,"h3"),s._uU(2,"Agregar Nuevo M\xe9todo de Pago"),s.qZA(),s.TgZ(3,"form",10),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onSubmit())}),s.TgZ(4,"div",11)(5,"label",12),s._uU(6,"Nombre:"),s.qZA(),s.TgZ(7,"input",13),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newPaymentMethod.name=i)}),s.qZA()(),s.TgZ(8,"div",11)(9,"label",14),s._uU(10,"C\xf3digo:"),s.qZA(),s.TgZ(11,"input",15),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newPaymentMethod.code=i)}),s.qZA(),s.TgZ(12,"small"),s._uU(13,"El c\xf3digo debe ser \xfanico y sin espacios (ej: cash, card, transfer)"),s.qZA()(),s.TgZ(14,"div",11)(15,"label")(16,"input",16),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newPaymentMethod.active=i)}),s.qZA(),s._uU(17," Activo "),s.qZA()(),s.TgZ(18,"div",17)(19,"button",18),s._UZ(20,"i",19),s._uU(21," Guardar "),s.qZA(),s.TgZ(22,"button",20),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.showAddForm=!1)}),s._UZ(23,"i",21),s._uU(24," Cancelar "),s.qZA()()()()}if(2&n){const t=s.oxw();s.xp6(7),s.Q6J("ngModel",t.newPaymentMethod.name),s.xp6(4),s.Q6J("ngModel",t.newPaymentMethod.code),s.xp6(5),s.Q6J("ngModel",t.newPaymentMethod.active)}}function pee(n,e){if(1&n&&(s.TgZ(0,"div",22),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.hij(" ",t.errorMessage," ")}}function gee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",26)(1,"div",27)(2,"h3"),s._uU(3),s.qZA(),s.TgZ(4,"p",28),s._uU(5),s.qZA(),s.TgZ(6,"span",29),s._uU(7),s.qZA()(),s.TgZ(8,"div",30)(9,"button",31),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit,o=s.oxw();return s.KtG(o.startEdit(i))}),s._UZ(10,"i",32),s.qZA(),s.TgZ(11,"button",33),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().$implicit,o=s.oxw();return s.KtG(o.toggleStatus(i))}),s._UZ(12,"i"),s.qZA()()()}if(2&n){const t=s.oxw().$implicit;s.xp6(3),s.Oqu(t.name),s.xp6(2),s.hij("C\xf3digo: ",t.code,""),s.xp6(1),s.ekj("active",t.active)("inactive",!t.active),s.xp6(1),s.hij(" ",t.active?"Activo":"Inactivo"," "),s.xp6(4),s.ekj("btn-activate",!t.active)("btn-deactivate",t.active),s.Q6J("title",t.active?"Desactivar":"Activar"),s.xp6(1),s.Tol(t.active?"fas fa-toggle-on":"fas fa-toggle-off")}}function mee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",34)(1,"div",11)(2,"label",35),s._uU(3,"Nombre:"),s.qZA(),s.TgZ(4,"input",36),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingPaymentMethod.name=i)}),s.qZA()(),s.TgZ(5,"div",11)(6,"label",37),s._uU(7,"C\xf3digo:"),s.qZA(),s.TgZ(8,"input",38),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingPaymentMethod.code=i)}),s.qZA()(),s.TgZ(9,"div",11)(10,"label")(11,"input",39),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.editingPaymentMethod.active=i)}),s.qZA(),s._uU(12," Activo "),s.qZA()(),s.TgZ(13,"div",17)(14,"button",40),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.saveEdit())}),s._UZ(15,"i",19),s._uU(16," Guardar "),s.qZA(),s.TgZ(17,"button",41),s.NdJ("click",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.cancelEdit())}),s._UZ(18,"i",21),s._uU(19," Cancelar "),s.qZA()()()}if(2&n){const t=s.oxw(2);s.xp6(4),s.Q6J("ngModel",null==t.editingPaymentMethod?null:t.editingPaymentMethod.name),s.xp6(4),s.Q6J("ngModel",null==t.editingPaymentMethod?null:t.editingPaymentMethod.code),s.xp6(3),s.Q6J("ngModel",null==t.editingPaymentMethod?null:t.editingPaymentMethod.active)}}function _ee(n,e){if(1&n&&(s.TgZ(0,"div",23),s.YNc(1,gee,13,14,"div",24),s.YNc(2,mee,20,3,"div",25),s.qZA()),2&n){const t=e.$implicit,r=s.oxw();s.xp6(1),s.Q6J("ngIf",(null==r.editingPaymentMethod?null:r.editingPaymentMethod.id)!==t.id),s.xp6(1),s.Q6J("ngIf",(null==r.editingPaymentMethod?null:r.editingPaymentMethod.id)===t.id)}}let vee=(()=>{const e=class{constructor(r){this.paymentMethodsService=r,this.paymentMethods=[],this.newPaymentMethod={name:"",code:"",active:!0},this.editingPaymentMethod=null,this.errorMessage="",this.showAddForm=!1}ngOnInit(){this.loadPaymentMethods()}loadPaymentMethods(){this.paymentMethodsService.getPaymentMethods().subscribe({next:r=>{this.paymentMethods=r,this.errorMessage=""},error:r=>{console.error("Error loading payment methods:",r),this.errorMessage="Error al cargar los m\xe9todos de pago"}})}onSubmit(){this.newPaymentMethod.name&&this.newPaymentMethod.code?this.paymentMethodsService.addPaymentMethod(this.newPaymentMethod).subscribe({next:()=>{this.loadPaymentMethods(),this.resetForm(),this.showAddForm=!1},error:r=>{console.error("Error adding payment method:",r),this.errorMessage="Error al agregar el m\xe9todo de pago"}}):this.errorMessage="Por favor complete todos los campos"}startEdit(r){this.editingPaymentMethod={...r}}cancelEdit(){this.editingPaymentMethod=null,this.errorMessage=""}saveEdit(){if(this.editingPaymentMethod){if(!this.editingPaymentMethod.name||!this.editingPaymentMethod.code)return void(this.errorMessage="Por favor complete todos los campos");this.paymentMethodsService.updatePaymentMethod(this.editingPaymentMethod.id,{name:this.editingPaymentMethod.name,code:this.editingPaymentMethod.code,active:this.editingPaymentMethod.active}).subscribe({next:()=>{this.loadPaymentMethods(),this.editingPaymentMethod=null,this.errorMessage=""},error:r=>{console.error("Error updating payment method:",r),this.errorMessage="Error al actualizar el m\xe9todo de pago"}})}}toggleStatus(r){this.paymentMethodsService.togglePaymentMethod(r.id,!r.active).subscribe({next:()=>{this.loadPaymentMethods()},error:i=>{console.error("Error toggling payment method status:",i),this.errorMessage="Error al cambiar el estado del m\xe9todo de pago"}})}resetForm(){this.newPaymentMethod={name:"",code:"",active:!0},this.errorMessage=""}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(r1))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-payment-methods"]],decls:9,vars:4,consts:[[1,"payment-methods-container"],[1,"add-method-section"],["class","btn-add",3,"click",4,"ngIf"],["class","add-method-form",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"methods-list"],["class","method-card",4,"ngFor","ngForOf"],[1,"btn-add",3,"click"],[1,"fas","fa-plus"],[1,"add-method-form"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","code"],["type","text","id","code","name","code","required","",3,"ngModel","ngModelChange"],["type","checkbox","name","active",3,"ngModel","ngModelChange"],[1,"form-actions"],["type","submit",1,"btn-save"],[1,"fas","fa-save"],["type","button",1,"btn-cancel",3,"click"],[1,"fas","fa-times"],[1,"error-message"],[1,"method-card"],["class","method-display",4,"ngIf"],["class","method-edit-form",4,"ngIf"],[1,"method-display"],[1,"method-info"],[1,"method-code"],[1,"method-status"],[1,"method-actions"],["title","Editar",1,"btn-edit",3,"click"],[1,"fas","fa-edit"],[3,"title","click"],[1,"method-edit-form"],["for","edit-name"],["type","text","id","edit-name","name","edit-name","required","",3,"ngModel","ngModelChange"],["for","edit-code"],["type","text","id","edit-code","name","edit-code","required","",3,"ngModel","ngModelChange"],["type","checkbox","name","edit-active",3,"ngModel","ngModelChange"],[1,"btn-save",3,"click"],[1,"btn-cancel",3,"click"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"h2"),s._uU(2,"Gesti\xf3n de M\xe9todos de Pago"),s.qZA(),s.TgZ(3,"div",1),s.YNc(4,fee,3,0,"button",2),s.YNc(5,hee,25,3,"div",3),s.qZA(),s.YNc(6,pee,2,1,"div",4),s.TgZ(7,"div",5),s.YNc(8,_ee,3,2,"div",6),s.qZA()()),2&i&&(s.xp6(4),s.Q6J("ngIf",!o.showAddForm),s.xp6(1),s.Q6J("ngIf",o.showAddForm),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(2),s.Q6J("ngForOf",o.paymentMethods))},dependencies:[te.sg,te.O5,xn,nt,Ce,or,to,ra,As,Ji],styles:[".payment-methods-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:2rem}.add-method-section[_ngcontent-%COMP%]{margin-bottom:2rem}.btn-add[_ngcontent-%COMP%]{background-color:#3c9c36;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:4px;cursor:pointer;font-size:1rem;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease}.btn-add[_ngcontent-%COMP%]:hover{background-color:#2ecc71}.add-method-form[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#2c3e50;font-weight:500}input[type=text][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem}small[_ngcontent-%COMP%]{display:block;color:#7f8c8d;margin-top:.25rem;font-size:.85rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem}.btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;cursor:pointer;font-size:1rem;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease}.btn-save[_ngcontent-%COMP%]{background-color:#3c9c36;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2ecc71}.btn-cancel[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c0392b}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626;padding:1rem;border-radius:4px;margin-bottom:1rem}.methods-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.method-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.method-display[_ngcontent-%COMP%]{padding:1.5rem;display:flex;justify-content:space-between;align-items:center}.method-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#2c3e50}.method-code[_ngcontent-%COMP%]{color:#7f8c8d;margin:0 0 .5rem}.method-status[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.85rem;font-weight:500}.method-status.active[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.method-status.inactive[_ngcontent-%COMP%]{background-color:#fde8e8;color:#c0392b}.method-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-edit[_ngcontent-%COMP%], .btn-activate[_ngcontent-%COMP%], .btn-deactivate[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;cursor:pointer;font-size:1.2rem;border-radius:4px;transition:all .3s ease}.btn-edit[_ngcontent-%COMP%]{color:#3498db}.btn-edit[_ngcontent-%COMP%]:hover{background-color:#ebf5fb}.btn-activate[_ngcontent-%COMP%]{color:#2ecc71}.btn-activate[_ngcontent-%COMP%]:hover{background-color:#e8f5e9}.btn-deactivate[_ngcontent-%COMP%]{color:#e74c3c}.btn-deactivate[_ngcontent-%COMP%]:hover{background-color:#fde8e8}.method-edit-form[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid #eee}@media (max-width: 768px){.payment-methods-container[_ngcontent-%COMP%]{padding:1rem}.method-display[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.method-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}}"]}),n})();function yee(n,e){1&n&&(s.TgZ(0,"div",13),s._UZ(1,"i",14),s._uU(2," Cargando datos... "),s.qZA())}function xee(n,e){if(1&n&&(s.TgZ(0,"div",15),s._uU(1),s.qZA()),2&n){const t=s.oxw();s.xp6(1),s.hij(" ",t.errorMessage," ")}}function wee(n,e){if(1&n&&(s.TgZ(0,"option",52),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.code),s.xp6(1),s.hij(" ",t.name," ")}}function bee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"article",53)(1,"div",54)(2,"span",55),s._uU(3),s.qZA(),s.TgZ(4,"small"),s._uU(5),s.ALo(6,"uppercase"),s.qZA()(),s.TgZ(7,"p",56),s._uU(8),s.ALo(9,"currency"),s.qZA(),s.TgZ(10,"div",57)(11,"span"),s._uU(12),s.qZA(),s.TgZ(13,"span"),s._uU(14),s.ALo(15,"number"),s.qZA()(),s.TgZ(16,"button",58),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(3);return s.KtG(a.onHistoryFilterChange(a.historyFilter===o.code?"all":o.code))}),s._uU(17),s.qZA()()}if(2&n){const t=e.$implicit,r=s.oxw(3);s.ekj("active-filter",r.historyFilter===t.code),s.xp6(3),s.Oqu(t.name),s.xp6(2),s.Oqu(s.lcZ(6,8,t.code)),s.xp6(3),s.Oqu(s.xi3(9,10,t.available,"USD")),s.xp6(4),s.hij("",t.sales," ventas"),s.xp6(2),s.hij("",s.xi3(15,13,t.percentage,"1.0-1"),"% del total"),s.xp6(3),s.hij(" ",r.historyFilter===t.code?"Quitar filtro":"Ver historial"," ")}}function Cee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"section",43)(1,"header")(2,"div")(3,"p",44),s._uU(4,"Detalle por m\xe9todo"),s.qZA(),s.TgZ(5,"h3"),s._uU(6,"Disponibilidad por medio de pago"),s.qZA()(),s.TgZ(7,"div",45)(8,"label",46),s._uU(9,"Filtrar historiales"),s.qZA(),s.TgZ(10,"select",47),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.historyFilter=i)})("ngModelChange",function(i){s.CHM(t);const o=s.oxw(2);return s.KtG(o.onHistoryFilterChange(i))}),s.TgZ(11,"option",48),s._uU(12,"Todos los m\xe9todos"),s.qZA(),s.YNc(13,wee,2,2,"option",49),s.qZA()()(),s.TgZ(14,"div",50),s.YNc(15,bee,18,16,"article",51),s.qZA()()}if(2&n){const t=s.oxw(2);s.xp6(10),s.Q6J("ngModel",t.historyFilter),s.xp6(3),s.Q6J("ngForOf",t.paymentMethods),s.xp6(2),s.Q6J("ngForOf",t.availabilityCards)}}function Eee(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"td",55),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td",59),s._uU(6),s.ALo(7,"currency"),s.qZA(),s.TgZ(8,"td",60),s._uU(9),s.ALo(10,"currency"),s.qZA(),s.TgZ(11,"td",59),s._uU(12),s.ALo(13,"currency"),s.qZA(),s.TgZ(14,"td",22),s._uU(15),s.ALo(16,"currency"),s.qZA(),s.TgZ(17,"td",22),s._uU(18),s.ALo(19,"currency"),s.qZA(),s.TgZ(20,"td")(21,"div",61),s._UZ(22,"div",62),s.TgZ(23,"span",63),s._uU(24),s.ALo(25,"number"),s.qZA()()(),s.TgZ(26,"td",64),s._uU(27),s.ALo(28,"date"),s.qZA(),s.TgZ(29,"td",64),s._uU(30),s.ALo(31,"date"),s.qZA()()),2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(2),s.Oqu(t.payment_method_name),s.xp6(2),s.Oqu(t.number_of_sales),s.xp6(2),s.Oqu(s.xi3(7,12,t.total_amount,"USD")),s.xp6(3),s.Oqu(s.xi3(10,15,t.total_withdrawals,"USD")),s.xp6(3),s.Oqu(s.xi3(13,18,t.total_incomes,"USD")),s.xp6(3),s.Oqu(s.xi3(16,21,t.available_amount,"USD")),s.xp6(3),s.Oqu(s.xi3(19,24,t.average_sale_amount,"USD")),s.xp6(4),s.Udp("width",r.getPercentage(t.total_amount),"%"),s.xp6(2),s.hij("",s.xi3(25,27,r.getPercentage(t.total_amount),"1.1-1"),"%"),s.xp6(3),s.Oqu(s.xi3(28,30,t.first_sale,"MMM d, y, h:mm a")),s.xp6(3),s.Oqu(s.xi3(31,33,t.last_sale,"MMM d, y, h:mm a"))}}function Tee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",36),s.NdJ("click",function(){const o=s.CHM(t).$implicit,a=s.oxw(2);return s.KtG(a.onHistoryFilterChange(o.code))}),s._uU(1),s.qZA()}if(2&n){const t=e.$implicit,r=s.oxw(2);s.ekj("active",r.historyFilter===t.code),s.xp6(1),s.hij(" ",t.name," ")}}function See(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"td",64),s._uU(2),s.ALo(3,"date"),s.qZA(),s.TgZ(4,"td",55),s._uU(5),s.qZA(),s.TgZ(6,"td",60),s._uU(7),s.ALo(8,"currency"),s.qZA(),s.TgZ(9,"td",65),s._uU(10),s.qZA()()),2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(2),s.Oqu(s.xi3(3,4,t.created_at,"MMM d, y, h:mm a")),s.xp6(3),s.Oqu(r.getPaymentMethodName(t.payment_method)),s.xp6(2),s.Oqu(s.xi3(8,7,t.amount,"USD")),s.xp6(3),s.Oqu(t.description)}}function Aee(n,e){1&n&&(s.TgZ(0,"tr")(1,"td",66),s._uU(2,"No hay retiros para este filtro."),s.qZA()())}function Mee(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"td",64),s._uU(2),s.ALo(3,"date"),s.qZA(),s.TgZ(4,"td",55),s._uU(5),s.qZA(),s.TgZ(6,"td",59),s._uU(7),s.ALo(8,"currency"),s.qZA(),s.TgZ(9,"td",65),s._uU(10),s.qZA()()),2&n){const t=e.$implicit,r=s.oxw(2);s.xp6(2),s.Oqu(s.xi3(3,4,t.created_at,"MMM d, y, h:mm a")),s.xp6(3),s.Oqu(r.getPaymentMethodName(t.payment_method)),s.xp6(2),s.Oqu(s.xi3(8,7,t.amount,"USD")),s.xp6(3),s.Oqu(t.description)}}function Iee(n,e){1&n&&(s.TgZ(0,"tr")(1,"td",66),s._uU(2,"No hay ingresos para este filtro."),s.qZA()())}function Pee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19),s._UZ(4,"i",20),s.qZA(),s.TgZ(5,"div",21)(6,"h3"),s._uU(7,"Total de Ventas"),s.qZA(),s.TgZ(8,"p",22),s._uU(9),s.ALo(10,"currency"),s.qZA(),s.TgZ(11,"p",23),s._uU(12),s.qZA()()(),s.TgZ(13,"div",24)(14,"div",19),s._UZ(15,"i",25),s.qZA(),s.TgZ(16,"div",21)(17,"h3"),s._uU(18,"Ingresos de Caja"),s.qZA(),s.TgZ(19,"p",22),s._uU(20),s.ALo(21,"currency"),s.qZA(),s.TgZ(22,"p",23),s._uU(23),s.qZA()()(),s.TgZ(24,"div",26)(25,"div",19),s._UZ(26,"i",8),s.qZA(),s.TgZ(27,"div",21)(28,"h3"),s._uU(29,"Total de Retiros"),s.qZA(),s.TgZ(30,"p",22),s._uU(31),s.ALo(32,"currency"),s.qZA(),s.TgZ(33,"p",23),s._uU(34),s.qZA()()(),s.TgZ(35,"div",27)(36,"div",19),s._UZ(37,"i",28),s.qZA(),s.TgZ(38,"div",21)(39,"h3"),s._uU(40,"Disponible en Caja"),s.qZA(),s.TgZ(41,"p",22),s._uU(42),s.ALo(43,"currency"),s.qZA(),s.TgZ(44,"p",23),s._uU(45,"Total neto"),s.qZA()()()(),s.YNc(46,Cee,16,3,"section",29),s.TgZ(47,"div",30)(48,"table",31)(49,"thead")(50,"tr")(51,"th"),s._uU(52,"M\xe9todo de Pago"),s.qZA(),s.TgZ(53,"th"),s._uU(54,"Ventas"),s.qZA(),s.TgZ(55,"th"),s._uU(56,"Total Ventas"),s.qZA(),s.TgZ(57,"th"),s._uU(58,"Total Retiros"),s.qZA(),s.TgZ(59,"th"),s._uU(60,"Total Ingresos"),s.qZA(),s.TgZ(61,"th"),s._uU(62,"Disponible"),s.qZA(),s.TgZ(63,"th"),s._uU(64,"Promedio"),s.qZA(),s.TgZ(65,"th"),s._uU(66,"% del Total"),s.qZA(),s.TgZ(67,"th"),s._uU(68,"Primera Venta"),s.qZA(),s.TgZ(69,"th"),s._uU(70,"\xdaltima Venta"),s.qZA()()(),s.TgZ(71,"tbody"),s.YNc(72,Eee,32,36,"tr",32),s.qZA(),s.TgZ(73,"tfoot")(74,"tr")(75,"td")(76,"strong"),s._uU(77,"Total"),s.qZA()(),s.TgZ(78,"td")(79,"strong"),s._uU(80),s.qZA()(),s.TgZ(81,"td",22)(82,"strong"),s._uU(83),s.ALo(84,"currency"),s.qZA()(),s.TgZ(85,"td",22)(86,"strong"),s._uU(87),s.ALo(88,"currency"),s.qZA()(),s.TgZ(89,"td",22)(90,"strong"),s._uU(91),s.ALo(92,"currency"),s.qZA()(),s.TgZ(93,"td",22)(94,"strong"),s._uU(95),s.ALo(96,"currency"),s.qZA()(),s._UZ(97,"td",33),s.qZA()()()(),s.TgZ(98,"div",34)(99,"h3"),s._uU(100,"Historial de movimientos"),s.qZA(),s.TgZ(101,"div",35)(102,"button",36),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.onHistoryFilterChange("all"))}),s._uU(103," Todos "),s.qZA(),s.YNc(104,Tee,2,3,"button",37),s.qZA()(),s.TgZ(105,"div",38)(106,"div",39)(107,"h4"),s._uU(108,"Retiros"),s.qZA(),s.TgZ(109,"span",40),s._uU(110),s.ALo(111,"currency"),s.qZA()(),s.TgZ(112,"div",30)(113,"table",41)(114,"thead")(115,"tr")(116,"th"),s._uU(117,"Fecha"),s.qZA(),s.TgZ(118,"th"),s._uU(119,"M\xe9todo de Pago"),s.qZA(),s.TgZ(120,"th"),s._uU(121,"Monto"),s.qZA(),s.TgZ(122,"th"),s._uU(123,"Descripci\xf3n"),s.qZA()()(),s.TgZ(124,"tbody"),s.YNc(125,See,11,10,"tr",32),s.YNc(126,Aee,3,0,"tr",42),s.qZA()()()(),s.TgZ(127,"div",38)(128,"div",39)(129,"h4"),s._uU(130,"Ingresos"),s.qZA(),s.TgZ(131,"span",40),s._uU(132),s.ALo(133,"currency"),s.qZA()(),s.TgZ(134,"div",30)(135,"table",41)(136,"thead")(137,"tr")(138,"th"),s._uU(139,"Fecha"),s.qZA(),s.TgZ(140,"th"),s._uU(141,"M\xe9todo de Pago"),s.qZA(),s.TgZ(142,"th"),s._uU(143,"Monto"),s.qZA(),s.TgZ(144,"th"),s._uU(145,"Descripci\xf3n"),s.qZA()()(),s.TgZ(146,"tbody"),s.YNc(147,Mee,11,10,"tr",32),s.YNc(148,Iee,3,0,"tr",42),s.qZA()()()()()}if(2&n){const t=s.oxw();s.xp6(9),s.Oqu(s.xi3(10,25,t.totalAmount,"USD")),s.xp6(3),s.hij("",t.totalSales," transacciones"),s.xp6(8),s.Oqu(s.xi3(21,28,t.totalIncomes,"USD")),s.xp6(3),s.hij("",t.incomes.length," registros"),s.xp6(8),s.Oqu(s.xi3(32,31,t.totalWithdrawals,"USD")),s.xp6(3),s.hij("",t.withdrawals.length," retiros"),s.xp6(8),s.Oqu(s.xi3(43,34,t.netAvailable,"USD")),s.xp6(4),s.Q6J("ngIf",t.availabilityCards.length),s.xp6(26),s.Q6J("ngForOf",t.paymentTotals),s.xp6(8),s.Oqu(t.totalSales),s.xp6(3),s.Oqu(s.xi3(84,37,t.totalAmount,"USD")),s.xp6(4),s.Oqu(s.xi3(88,40,t.totalWithdrawals,"USD")),s.xp6(4),s.Oqu(s.xi3(92,43,t.totalIncomes,"USD")),s.xp6(4),s.Oqu(s.xi3(96,46,t.totalAmount-t.totalWithdrawals+t.totalIncomes,"USD")),s.xp6(7),s.ekj("active","all"===t.historyFilter),s.xp6(2),s.Q6J("ngForOf",t.paymentMethods),s.xp6(6),s.AsE(" ",t.filteredWithdrawals.length," registros \xb7 ",s.xi3(111,49,t.totalWithdrawals,"USD")," "),s.xp6(15),s.Q6J("ngForOf",t.filteredWithdrawals),s.xp6(1),s.Q6J("ngIf",!t.filteredWithdrawals.length),s.xp6(6),s.AsE(" ",t.filteredIncomes.length," registros \xb7 ",s.xi3(133,52,t.totalIncomes,"USD")," "),s.xp6(15),s.Q6J("ngForOf",t.filteredIncomes),s.xp6(1),s.Q6J("ngIf",!t.filteredIncomes.length)}}function Dee(n,e){if(1&n&&(s.TgZ(0,"option",52),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&n){const t=e.$implicit,r=s.oxw(2);s.Q6J("value",t.code),s.xp6(1),s.AsE(" ",t.name," (Disponible: ",s.xi3(2,3,r.getAvailableAmount(t.code),"USD"),") ")}}function kee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",67)(1,"div",68)(2,"h3"),s._uU(3,"Registrar Retiro de Caja"),s.qZA(),s.TgZ(4,"form",69),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.registerWithdrawal())}),s.TgZ(5,"div",70)(6,"label",71),s._uU(7,"M\xe9todo de Pago:"),s.qZA(),s.TgZ(8,"select",72),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newWithdrawal.payment_method=i)}),s.TgZ(9,"option",73),s._uU(10,"Seleccione un m\xe9todo"),s.qZA(),s.YNc(11,Dee,3,6,"option",49),s.qZA()(),s.TgZ(12,"div",70)(13,"label",74),s._uU(14,"Monto:"),s.qZA(),s.TgZ(15,"input",75),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newWithdrawal.amount=i)}),s.qZA()(),s.TgZ(16,"div",70)(17,"label",76),s._uU(18,"Descripci\xf3n:"),s.qZA(),s.TgZ(19,"textarea",77),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newWithdrawal.description=i)}),s.qZA()(),s.TgZ(20,"div",78)(21,"button",79),s._UZ(22,"i",80),s._uU(23," Registrar Retiro "),s.qZA(),s.TgZ(24,"button",81),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.showWithdrawalForm=!1)}),s._UZ(25,"i",82),s._uU(26," Cancelar "),s.qZA()()()()()}if(2&n){const t=s.oxw();s.xp6(8),s.Q6J("ngModel",t.newWithdrawal.payment_method),s.xp6(3),s.Q6J("ngForOf",t.paymentMethods),s.xp6(4),s.Q6J("ngModel",t.newWithdrawal.amount)("max",t.newWithdrawal.payment_method?t.getAvailableAmount(t.newWithdrawal.payment_method):0),s.xp6(4),s.Q6J("ngModel",t.newWithdrawal.description)}}function Oee(n,e){if(1&n&&(s.TgZ(0,"option",52),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.code),s.xp6(1),s.hij(" ",t.name," ")}}function Fee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",67)(1,"div",68)(2,"h3"),s._uU(3,"Registrar Ingreso de Caja"),s.qZA(),s.TgZ(4,"form",69),s.NdJ("ngSubmit",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.registerIncome())}),s.TgZ(5,"div",70)(6,"label",83),s._uU(7,"M\xe9todo de Pago:"),s.qZA(),s.TgZ(8,"select",84),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newIncome.payment_method=i)}),s.TgZ(9,"option",73),s._uU(10,"Seleccione un m\xe9todo"),s.qZA(),s.YNc(11,Oee,2,2,"option",49),s.qZA()(),s.TgZ(12,"div",70)(13,"label",85),s._uU(14,"Monto:"),s.qZA(),s.TgZ(15,"input",86),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newIncome.amount=i)}),s.qZA()(),s.TgZ(16,"div",70)(17,"label",87),s._uU(18,"Descripci\xf3n:"),s.qZA(),s.TgZ(19,"textarea",88),s.NdJ("ngModelChange",function(i){s.CHM(t);const o=s.oxw();return s.KtG(o.newIncome.description=i)}),s.qZA()(),s.TgZ(20,"div",78)(21,"button",79),s._UZ(22,"i",80),s._uU(23," Registrar Ingreso "),s.qZA(),s.TgZ(24,"button",81),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.showIncomeForm=!1)}),s._UZ(25,"i",82),s._uU(26," Cancelar "),s.qZA()()()()()}if(2&n){const t=s.oxw();s.xp6(8),s.Q6J("ngModel",t.newIncome.payment_method),s.xp6(3),s.Q6J("ngForOf",t.paymentMethods),s.xp6(4),s.Q6J("ngModel",t.newIncome.amount),s.xp6(4),s.Q6J("ngModel",t.newIncome.description)}}let Ree=(()=>{const e=class{constructor(r,i,o,a,d){this.supabase=r,this.salesService=i,this.paymentMethodsService=o,this.authService=a,this.decimalPipe=d,this.paymentTotals=[],this.withdrawals=[],this.incomes=[],this.totalAmount=0,this.totalSales=0,this.totalWithdrawals=0,this.totalIncomes=0,this.isLoading=!0,this.errorMessage="",this.showWithdrawalForm=!1,this.showIncomeForm=!1,this.newWithdrawal={payment_method:"",amount:0,description:""},this.newIncome={payment_method:"",amount:0,description:""},this.paymentMethods=[],this.userId=null,this.availabilityCards=[],this.historyFilter="all",this.filteredWithdrawals=[],this.filteredIncomes=[],this.destroy$=new Yd.x,this.realtimeChannel=null}ngOnInit(){this.authService.user$.pipe(Ax(this.destroy$)).subscribe(r=>{r&&(this.userId=r.id,this.loadData(),this.loadPaymentMethods(),this.setupRealtimeSubscriptions())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.realtimeChannel&&this.realtimeChannel.unsubscribe()}setupRealtimeSubscriptions(){this.realtimeChannel&&this.realtimeChannel.unsubscribe(),this.realtimeChannel=this.supabase.client.channel("cash-register-changes").on("postgres_changes",{event:"*",schema:"public",table:"cash_withdrawals"},()=>{console.log("Withdrawal change detected"),this.loadData()}).on("postgres_changes",{event:"*",schema:"public",table:"cash_incomes"},()=>{console.log("Income change detected"),this.loadData()}).subscribe(r=>{console.log("Realtime subscription status:",r)})}loadPaymentMethods(){this.paymentMethodsService.getActivePaymentMethods().subscribe({next:r=>{this.paymentMethods=r,this.buildAvailabilityCards()},error:r=>{console.error("Error loading payment methods:",r),this.errorMessage="Error al cargar los m\xe9todos de pago"}})}loadData(){var r=this;return(0,be.Z)(function*(){r.isLoading=!0,r.errorMessage="";try{yield Promise.all([r.loadPaymentTotals(),r.loadWithdrawals(),r.loadIncomes()])}catch(i){console.error("Error loading data:",i),r.errorMessage=i.message||"Error al cargar los datos"}finally{r.isLoading=!1}})()}loadPaymentTotals(){var r=this;return(0,be.Z)(function*(){const{data:i,error:o}=yield r.supabase.client.from("payment_method_totals").select("*").order("total_amount",{ascending:!1});if(o)throw o;r.paymentTotals=i,r.calculateTotals(),r.buildAvailabilityCards()})()}loadWithdrawals(){var r=this;return(0,be.Z)(function*(){try{const{data:i,error:o}=yield r.supabase.client.from("cash_withdrawals").select("*").order("created_at",{ascending:!1});if(o)throw o;r.withdrawals=i||[],r.applyHistoryFilter()}catch(i){throw console.error("Error loading withdrawals:",i),i}})()}loadIncomes(){var r=this;return(0,be.Z)(function*(){try{const{data:i,error:o}=yield r.supabase.client.from("cash_incomes").select("*").order("created_at",{ascending:!1});if(o)throw o;r.incomes=i||[],r.applyHistoryFilter()}catch(i){throw console.error("Error loading incomes:",i),i}})()}calculateTotals(){this.totalAmount=this.paymentTotals.reduce((r,i)=>r+i.total_amount,0),this.totalSales=this.paymentTotals.reduce((r,i)=>r+i.number_of_sales,0),this.totalWithdrawals=this.paymentTotals.reduce((r,i)=>r+i.total_withdrawals,0),this.totalIncomes=this.paymentTotals.reduce((r,i)=>r+i.total_incomes,0)}get netAvailable(){return this.totalAmount-this.totalWithdrawals+this.totalIncomes}getPaymentMethodName(r){const i=this.paymentMethods.find(o=>o.code===r);return i?i.name:r}getAvailableAmount(r){const i=this.paymentTotals.find(o=>o.payment_method===r);return i?i.available_amount:0}registerWithdrawal(){var r=this;return(0,be.Z)(function*(){if(!r.userId)return void(r.errorMessage="Error de autenticaci\xf3n");if(!r.newWithdrawal.payment_method||r.newWithdrawal.amount<=0||!r.newWithdrawal.description)return void(r.errorMessage="Por favor, complete todos los campos correctamente");const i=r.getAvailableAmount(r.newWithdrawal.payment_method);if(r.newWithdrawal.amount>i)r.errorMessage="El monto excede el disponible en caja para este m\xe9todo de pago";else try{const{data:o,error:a}=yield r.supabase.client.from("cash_withdrawals").insert([{...r.newWithdrawal,created_by:r.userId}]).select().single();if(a)throw a;if(!o)throw new Error("No se pudo crear el retiro");r.showWithdrawalForm=!1,r.newWithdrawal={payment_method:"",amount:0,description:""},r.errorMessage="",yield r.loadData()}catch(o){console.error("Error registering withdrawal:",o),r.errorMessage=o.message||"Error al registrar el retiro de caja"}})()}registerIncome(){var r=this;return(0,be.Z)(function*(){if(r.userId)if(!r.newIncome.payment_method||r.newIncome.amount<=0||!r.newIncome.description)r.errorMessage="Por favor, complete todos los campos correctamente";else try{const{data:i,error:o}=yield r.supabase.client.from("cash_incomes").insert([{...r.newIncome,created_by:r.userId}]).select().single();if(o)throw o;if(!i)throw new Error("No se pudo registrar el ingreso");r.showIncomeForm=!1,r.newIncome={payment_method:"",amount:0,description:""},r.errorMessage="",yield r.loadData()}catch(i){console.error("Error registering income:",i),r.errorMessage=i.message||"Error al registrar el ingreso de caja"}else r.errorMessage="Error de autenticaci\xf3n"})()}getPercentage(r){return this.totalAmount?r/this.totalAmount*100:0}formatCurrency(r){return this.decimalPipe.transform(r,"1.2-2")||"0"}onHistoryFilterChange(r){this.historyFilter=r,this.applyHistoryFilter()}applyHistoryFilter(){if("all"===this.historyFilter)return this.filteredWithdrawals=[...this.withdrawals],void(this.filteredIncomes=[...this.incomes]);this.filteredWithdrawals=this.withdrawals.filter(r=>r.payment_method===this.historyFilter),this.filteredIncomes=this.incomes.filter(r=>r.payment_method===this.historyFilter)}buildAvailabilityCards(){this.availabilityCards=this.paymentTotals?this.paymentTotals.map(r=>{const i=r.payment_method_name||this.getPaymentMethodName(r.payment_method);return{code:r.payment_method,name:i,available:r.available_amount,sales:r.number_of_sales,percentage:this.totalAmount?r.total_amount/this.totalAmount*100:0}}):[]}exportToExcel(){const r=this.paymentTotals.map(d=>({"M\xe9todo de Pago":d.payment_method_name,"Cantidad de Ventas":d.number_of_sales,"Total Ventas":`$${this.formatCurrency(d.total_amount)}`,"Total Retiros":`$${this.formatCurrency(d.total_withdrawals)}`,"Total Ingresos":`$${this.formatCurrency(d.total_incomes)}`,Disponible:`$${this.formatCurrency(d.available_amount)}`,"Promedio por Venta":`$${this.formatCurrency(d.average_sale_amount)}`,"Porcentaje del Total":`${this.formatCurrency(this.getPercentage(d.total_amount))}%`,"Primera Venta":new Date(d.first_sale).toLocaleString(),"\xdaltima Venta":new Date(d.last_sale).toLocaleString()}));r.push({"M\xe9todo de Pago":"TOTAL","Cantidad de Ventas":this.totalSales,"Total Ventas":`$${this.formatCurrency(this.totalAmount)}`,"Total Retiros":`$${this.formatCurrency(this.totalWithdrawals)}`,"Total Ingresos":`$${this.formatCurrency(this.totalIncomes)}`,Disponible:`$${this.formatCurrency(this.totalAmount-this.totalWithdrawals+this.totalIncomes)}`,"Promedio por Venta":`$${this.formatCurrency(this.totalAmount/this.totalSales)}`,"Porcentaje del Total":"100%","Primera Venta":"","\xdaltima Venta":""});const i=w1.json_to_sheet(r),o=w1.book_new();w1.book_append_sheet(o,i,"Reporte de Caja"),BL(o,`reporte_caja_${(new Date).toISOString().split("T")[0]}.xlsx`)}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(kc.T),s.Y36(Mx),s.Y36(r1),s.Y36(Hl),s.Y36(te.JJ))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-cash-register"]],features:[s._Bn([te.JJ])],decls:19,vars:5,consts:[[1,"cash-register-container"],[1,"history-header"],[1,"header-actions"],[1,"btn-export",3,"click"],[1,"fas","fa-file-excel"],[1,"btn-withdrawal",3,"click"],[1,"fas","fa-money-bill-wave-alt"],[1,"btn-income",3,"click"],[1,"fas","fa-money-bill-wave"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","report-content",4,"ngIf"],["class","modal",4,"ngIf"],[1,"loading"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"report-content"],[1,"summary-cards"],[1,"summary-card","total-sales"],[1,"card-icon"],[1,"fas","fa-cash-register"],[1,"card-content"],[1,"amount"],[1,"detail"],[1,"summary-card","total-incomes"],[1,"fas","fa-arrow-trend-up"],[1,"summary-card","total-withdrawals"],[1,"summary-card","available-cash"],[1,"fas","fa-wallet"],["class","availability-section",4,"ngIf"],[1,"table-container"],[1,"payment-methods-table"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"history-toolbar"],[1,"history-filter-chips"],["type","button",1,"filter-chip",3,"click"],["type","button","class","filter-chip",3,"active","click",4,"ngFor","ngForOf"],[1,"withdrawals-section"],[1,"section-header"],[1,"section-meta"],[1,"withdrawals-table"],[4,"ngIf"],[1,"availability-section"],[1,"eyebrow"],[1,"filter-select"],["for","historyFilter"],["id","historyFilter",3,"ngModel","ngModelChange"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"availability-grid"],["class","availability-card",3,"active-filter",4,"ngFor","ngForOf"],[3,"value"],[1,"availability-card"],[1,"availability-card__header"],[1,"method-name"],[1,"availability-amount"],[1,"availability-meta"],["type","button",1,"availability-filter",3,"click"],[1,"amount","positive-amount"],[1,"amount","negative-amount"],[1,"percentage-bar"],[1,"bar"],[1,"percentage"],[1,"date-column"],[1,"description-column"],["colspan","4",1,"empty-row"],[1,"modal"],[1,"modal-content"],[3,"ngSubmit"],[1,"form-group"],["for","payment_method"],["id","payment_method","name","payment_method","required","",3,"ngModel","ngModelChange"],["value",""],["for","amount"],["type","number","id","amount","name","amount","step","0.01","required","",3,"ngModel","max","ngModelChange"],["for","description"],["id","description","name","description","required","",3,"ngModel","ngModelChange"],[1,"form-actions"],["type","submit",1,"btn-save"],[1,"fas","fa-save"],["type","button",1,"btn-cancel",3,"click"],[1,"fas","fa-times"],["for","income_payment_method"],["id","income_payment_method","name","payment_method","required","",3,"ngModel","ngModelChange"],["for","income_amount"],["type","number","id","income_amount","name","amount","step","0.01","min","0.01","required","",3,"ngModel","ngModelChange"],["for","income_description"],["id","income_description","name","description","required","","placeholder","Explique el motivo del ingreso",3,"ngModel","ngModelChange"]],template:function(i,o){1&i&&(s.TgZ(0,"div",0)(1,"div",1)(2,"h2"),s._uU(3,"Reporte de Caja"),s.qZA(),s.TgZ(4,"div",2)(5,"button",3),s.NdJ("click",function(){return o.exportToExcel()}),s._UZ(6,"i",4),s._uU(7," Exportar a Excel "),s.qZA(),s.TgZ(8,"button",5),s.NdJ("click",function(){return o.showWithdrawalForm=!0}),s._UZ(9,"i",6),s._uU(10," Registrar Retiro "),s.qZA(),s.TgZ(11,"button",7),s.NdJ("click",function(){return o.showIncomeForm=!0}),s._UZ(12,"i",8),s._uU(13," Registrar Ingreso "),s.qZA()()(),s.YNc(14,yee,3,0,"div",9),s.YNc(15,xee,2,1,"div",10),s.YNc(16,Pee,149,55,"div",11),s.YNc(17,kee,27,5,"div",12),s.YNc(18,Fee,27,4,"div",12),s.qZA()),2&i&&(s.xp6(14),s.Q6J("ngIf",o.isLoading),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(1),s.Q6J("ngIf",!o.isLoading&&!o.errorMessage),s.xp6(1),s.Q6J("ngIf",o.showWithdrawalForm),s.xp6(1),s.Q6J("ngIf",o.showIncomeForm))},dependencies:[te.sg,te.O5,xn,Bi,na,nt,go,cs,or,to,ra,mo,mu,As,Ji,te.gd,te.JJ,te.H9,te.uU],styles:[".cash-register-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:2rem}.history-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}h2[_ngcontent-%COMP%]{color:#2c3e50;margin:0}.btn-back[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;text-decoration:none;padding:.75rem 1.5rem;border-radius:4px;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease}.btn-back[_ngcontent-%COMP%]:hover{background-color:#2980b9}.btn-export[_ngcontent-%COMP%]{background-color:#27ae60;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease;font-size:1rem}.btn-export[_ngcontent-%COMP%]:hover{background-color:#219a52}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#3c9c36;font-size:1.2rem}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626;padding:1rem;border-radius:4px;margin-bottom:1rem}.table-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow-x:auto;margin-bottom:2rem}.sales-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;min-width:800px}.sales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .sales-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #edf2f7}.sales-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;color:#2c3e50;font-weight:600;white-space:nowrap}.sales-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8fafc}.sales-table[_ngcontent-%COMP%]   tr.cancelled[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#6b7280}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:20px;font-size:.875rem;font-weight:500}.status-badge.completed[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.status-badge.cancelled[_ngcontent-%COMP%]{background-color:#fde8e8;color:#c0392b}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}.total-incomes[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background-color:#f0f9ff;color:#0f62fe}.summary-card[_ngcontent-%COMP%]{background-color:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;align-items:center;gap:1.5rem}.card-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem}.total-sales[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.total-withdrawals[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background-color:#fde8e8;color:#c0392b}.available-cash[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.card-content[_ngcontent-%COMP%]{flex:1}.card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#64748b;margin-bottom:.5rem}.availability-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.75rem;box-shadow:0 12px 30px #14292214;margin-bottom:2rem;display:flex;flex-direction:column;gap:1.5rem}.availability-section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;flex-wrap:wrap;gap:1rem}.availability-section[_ngcontent-%COMP%]   .eyebrow[_ngcontent-%COMP%]{font-size:.75rem;letter-spacing:.15em;text-transform:uppercase;color:#3c9c36;margin:0}.availability-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.25rem 0 0;color:#16281f}.filter-select[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem;font-size:.9rem;color:#4a5568}.filter-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{min-width:220px;padding:.65rem .85rem;border-radius:8px;border:1px solid #d1d5db;font-size:.95rem}.availability-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.availability-card[_ngcontent-%COMP%]{border:1px solid rgba(22,40,31,.08);border-radius:14px;padding:1rem 1.2rem;background:#fdfefc;display:flex;flex-direction:column;gap:.5rem;transition:border-color .2s ease,transform .2s ease}.availability-card.active-filter[_ngcontent-%COMP%]{border-color:#3c9c36;transform:translateY(-2px);box-shadow:0 16px 30px #173a221f}.availability-card__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-weight:600;color:#1f2937}.availability-card__header[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#9ca3af;font-weight:500}.availability-amount[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;font-weight:700;color:#102b1c}.availability-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.85rem;color:#6b7280}.availability-filter[_ngcontent-%COMP%]{margin-top:.5rem;align-self:flex-start;border:none;background:rgba(60,156,54,.12);color:#256d1a;border-radius:999px;padding:.35rem .9rem;font-size:.85rem;cursor:pointer}.amount[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;margin:0}.detail[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;margin:.25rem 0 0}.percentage-bar[_ngcontent-%COMP%]{width:100%;height:8px;background-color:#edf2f7;border-radius:4px;overflow:hidden;position:relative;margin:8px 0}.bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#3C9C36 0%,#48bb78 100%);border-radius:4px;transition:width .5s ease}.percentage-bar[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{position:absolute;top:-18px;right:0;font-size:.875rem;color:#4a5568;font-weight:500}.btn-withdrawal[_ngcontent-%COMP%], .btn-income[_ngcontent-%COMP%]{background-color:#3c9c36;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:background-color .3s ease;font-size:1rem}.btn-withdrawal[_ngcontent-%COMP%]{background-color:#e74c3c}.btn-withdrawal[_ngcontent-%COMP%]:hover{background-color:#c0392b}.btn-income[_ngcontent-%COMP%]:hover{background-color:#219a52}.history-toolbar[_ngcontent-%COMP%]{margin:2.5rem 0 1.5rem;display:flex;flex-direction:column;gap:.75rem}.history-toolbar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1f2937}.history-filter-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.filter-chip[_ngcontent-%COMP%]{border:1px solid rgba(21,41,32,.2);border-radius:999px;padding:.4rem 1rem;background:#fff;cursor:pointer;font-size:.9rem;color:#1f2937;transition:all .2s ease}.filter-chip.active[_ngcontent-%COMP%], .filter-chip[_ngcontent-%COMP%]:hover{background:#16281f;color:#fff;border-color:#16281f}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:8px;width:100%;max-width:500px;box-shadow:0 4px 6px #0000001a}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#2c3e50}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#2c3e50;font-weight:500}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:4px;font-size:1rem;transition:border-color .3s ease}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3c9c36;box-shadow:0 0 0 2px #3c9c361a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn-save[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:none;border-radius:4px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:.5rem;transition:background-color .3s ease}.btn-save[_ngcontent-%COMP%]{background-color:#3c9c36;color:#fff}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2ecc71}.btn-cancel[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#c0392b}.payment-methods-table[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;background:white;border-radius:8px;overflow:hidden;margin-bottom:2rem}.payment-methods-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;color:#1a365d;font-weight:600;padding:1.25rem 1rem;text-transform:uppercase;font-size:.875rem;letter-spacing:.05em;border-bottom:2px solid #e2e8f0}.payment-methods-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1.25rem 1rem;border-bottom:1px solid #e2e8f0;color:#2d3748;font-size:.95rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline;gap:.5rem;margin-bottom:.75rem}.section-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1f2937}.section-meta[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280}.empty-row[_ngcontent-%COMP%]{text-align:center;padding:1.5rem 0;color:#94a3b8;font-style:italic}.payment-methods-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background-color:#f7fafc}.payment-methods-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-family:Monaco,Courier New,monospace;font-weight:600;color:#2d3748}.payment-methods-table[_ngcontent-%COMP%]   .positive-amount[_ngcontent-%COMP%]{color:#2f855a}.payment-methods-table[_ngcontent-%COMP%]   .negative-amount[_ngcontent-%COMP%]{color:#c53030}.payment-methods-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:700;border-top:2px solid #e2e8f0}.withdrawals-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2d3748;font-size:1.25rem;font-weight:600;margin:2rem 0 1rem;padding-bottom:.5rem;border-bottom:2px solid #e2e8f0}.date-column[_ngcontent-%COMP%]{white-space:nowrap;color:#718096;font-size:.875rem}.method-name[_ngcontent-%COMP%]{font-weight:500;color:#2d3748}.description-column[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 1024px){.payment-methods-table[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]{font-size:.875rem}.payment-methods-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payment-methods-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem .75rem}.description-column[_ngcontent-%COMP%]{max-width:200px}}@media (max-width: 768px){.cash-register-container[_ngcontent-%COMP%]{padding:1rem}.history-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.header-actions[_ngcontent-%COMP%]{width:100%;flex-direction:column}.btn-export[_ngcontent-%COMP%], .btn-withdrawal[_ngcontent-%COMP%], .btn-income[_ngcontent-%COMP%]{width:100%;justify-content:center}.summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.table-container[_ngcontent-%COMP%]{margin:0 -1rem;border-radius:0}.payment-methods-table[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]{font-size:.8125rem}.payment-methods-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .payment-methods-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .withdrawals-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.875rem .5rem}.description-column[_ngcontent-%COMP%]{max-width:150px}.availability-section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.filter-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;min-width:initial}.history-filter-chips[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-chip[_ngcontent-%COMP%]{width:100%;text-align:center}}"]}),n})();function Nee(n,e){1&n&&(s.TgZ(0,"div",8),s._uU(1," No hay productos en el carrito. Agreg\xe1 art\xedculos desde el cat\xe1logo. "),s.qZA())}function Lee(n,e){if(1&n&&(s.TgZ(0,"tr")(1,"td"),s._uU(2),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.ALo(7,"currency"),s.qZA(),s.TgZ(8,"td"),s._uU(9),s.ALo(10,"currency"),s.qZA()()),2&n){const t=e.$implicit;s.xp6(2),s.Oqu(t.name),s.xp6(2),s.Oqu(t.quantity),s.xp6(2),s.Oqu(s.xi3(7,4,t.price,"USD")),s.xp6(3),s.Oqu(s.xi3(10,7,t.price*t.quantity,"USD"))}}function Uee(n,e){if(1&n&&(s.TgZ(0,"option",36),s._uU(1),s.qZA()),2&n){const t=e.$implicit;s.Q6J("value",t.code),s.xp6(1),s.hij(" ",t.name," ")}}function Bee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"button",37),s.NdJ("click",function(){s.CHM(t);const i=s.oxw().index,o=s.oxw(2);return s.KtG(o.removePaymentSplit(i))}),s._UZ(1,"i",38),s.qZA()}}function Vee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",28)(1,"div",29)(2,"label",30),s._uU(3,"M\xe9todo"),s.qZA(),s.TgZ(4,"select",31),s.NdJ("ngModelChange",function(i){const a=s.CHM(t).$implicit;return s.KtG(a.method=i)}),s.TgZ(5,"option",32),s._uU(6,"Seleccion\xe1 un m\xe9todo"),s.qZA(),s.YNc(7,Uee,2,2,"option",33),s.qZA()(),s.TgZ(8,"div",29)(9,"label",30),s._uU(10,"Monto"),s.qZA(),s.TgZ(11,"input",34),s.NdJ("ngModelChange",function(i){const a=s.CHM(t).$implicit;return s.KtG(a.amount=i)})("ngModelChange",function(){s.CHM(t);const i=s.oxw(2);return s.KtG(i.updateRemainingAmount())}),s.qZA()(),s.YNc(12,Bee,2,0,"button",35),s.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=s.oxw(2);s.xp6(2),s.Q6J("for","paymentMethod"+r),s.xp6(2),s.Q6J("id","paymentMethod"+r)("ngModel",t.method),s.xp6(3),s.Q6J("ngForOf",i.paymentMethods),s.xp6(2),s.Q6J("for","amount"+r),s.xp6(2),s.Q6J("id","amount"+r)("ngModel",t.amount)("max",i.getMaxAmount(r)),s.xp6(1),s.Q6J("ngIf",r>0)}}function Zee(n,e){if(1&n&&(s.TgZ(0,"p",39),s._uU(1),s.qZA()),2&n){const t=s.oxw(2);s.xp6(1),s.Oqu(t.errorMessage)}}function jee(n,e){if(1&n){const t=s.EpF();s.TgZ(0,"div",9)(1,"table",10)(2,"thead")(3,"tr")(4,"th"),s._uU(5,"Producto"),s.qZA(),s.TgZ(6,"th"),s._uU(7,"Cantidad"),s.qZA(),s.TgZ(8,"th"),s._uU(9,"Precio Unitario"),s.qZA(),s.TgZ(10,"th"),s._uU(11,"Total"),s.qZA()()(),s.TgZ(12,"tbody"),s.YNc(13,Lee,11,10,"tr",11),s.qZA(),s.TgZ(14,"tfoot")(15,"tr")(16,"td",12),s._uU(17,"Total"),s.qZA(),s.TgZ(18,"td",13),s._uU(19),s.ALo(20,"currency"),s.qZA()()()(),s.TgZ(21,"div",14)(22,"div",15)(23,"div",16)(24,"h3"),s._uU(25,"M\xe9todos de pago"),s.qZA(),s.TgZ(26,"p"),s._uU(27,"Distribu\xed el total entre uno o m\xe1s m\xe9todos seg\xfan corresponda."),s.qZA()(),s.TgZ(28,"div",17),s.YNc(29,Vee,13,9,"div",18),s.qZA(),s.TgZ(30,"div",19)(31,"span"),s._uU(32,"Restante"),s.qZA(),s.TgZ(33,"strong"),s._uU(34),s.ALo(35,"currency"),s.qZA()(),s.TgZ(36,"div",20)(37,"button",21),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.addPaymentSplit())}),s._UZ(38,"i",22),s._uU(39," A\xf1adir m\xe9todo "),s.qZA()()(),s.TgZ(40,"div",23)(41,"div",24)(42,"span"),s._uU(43,"Total a cobrar"),s.qZA(),s.TgZ(44,"h3"),s._uU(45),s.ALo(46,"currency"),s.qZA()(),s.TgZ(47,"button",25),s.NdJ("click",function(){s.CHM(t);const i=s.oxw();return s.KtG(i.registerSale())}),s._UZ(48,"i",26),s._uU(49," Confirmar venta "),s.qZA(),s.YNc(50,Zee,2,1,"p",27),s.qZA()()()}if(2&n){const t=s.oxw();s.xp6(13),s.Q6J("ngForOf",t.cartItems),s.xp6(6),s.Oqu(s.xi3(20,10,t.getTotal(),"USD")),s.xp6(10),s.Q6J("ngForOf",t.paymentSplits),s.xp6(1),s.ekj("error",t.getRemainingAmount()<0),s.xp6(4),s.Oqu(s.xi3(35,13,t.getRemainingAmount(),"USD")),s.xp6(3),s.Q6J("disabled",!t.canAddMoreSplits()),s.xp6(8),s.Oqu(s.xi3(46,16,t.getTotal(),"USD")),s.xp6(2),s.Q6J("disabled",!t.canRegisterSale()),s.xp6(3),s.Q6J("ngIf",t.errorMessage)}}let qee=(()=>{const e=class{constructor(r,i,o,a){this.cartService=r,this.salesService=i,this.authService=o,this.paymentMethodsService=a,this.cartItems=[],this.paymentMethods=[],this.paymentSplits=[{method:"",amount:0}],this.errorMessage="",this.userId=null,this.destroy$=new Yd.x}ngOnInit(){this.cartService.getCart().pipe(Ax(this.destroy$)).subscribe(r=>{this.cartItems=r,this.updateInitialAmount()}),this.authService.user$.pipe(Ax(this.destroy$)).subscribe(r=>{r&&r.id&&r.id!==this.userId&&(this.userId=r.id,this.loadPaymentMethods())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadPaymentMethods(){this.paymentMethodsService.getActivePaymentMethods().subscribe({next:r=>{this.paymentMethods=r,this.updateInitialAmount()},error:r=>{console.error("Error loading payment methods:",r),this.errorMessage="Error al cargar los m\xe9todos de pago"}})}getTotal(){return this.cartItems.reduce((r,i)=>r+i.price*i.quantity,0)}updateInitialAmount(){this.paymentSplits.length>0&&(this.paymentSplits[0].amount=this.getTotal())}addPaymentSplit(){this.canAddMoreSplits()&&this.paymentSplits.push({method:"",amount:0})}removePaymentSplit(r){this.paymentSplits.splice(r,1),this.updateRemainingAmount()}updateRemainingAmount(){const o=this.getTotal()-this.paymentSplits.reduce((a,d)=>a+(d.amount||0),0);if(o<0){const a=this.paymentSplits[this.paymentSplits.length-1];a.amount=Math.max(0,a.amount+o)}}getRemainingAmount(){return this.getTotal()-this.paymentSplits.reduce((o,a)=>o+(a.amount||0),0)}getMaxAmount(r){return this.getTotal()-this.paymentSplits.reduce((a,d,h)=>h!==r?a+(d.amount||0):a,0)}canAddMoreSplits(){return this.paymentSplits.length<this.paymentMethods.length&&this.getRemainingAmount()>0}canRegisterSale(){const r=this.paymentSplits.every(o=>o.method&&o.amount>0),i=Math.abs(this.getRemainingAmount())<.01;return this.cartItems.length>0&&r&&i}registerSale(){if(!this.canRegisterSale())return void(this.errorMessage="Por favor, complete todos los m\xe9todos de pago correctamente");if(!this.userId)return void(this.errorMessage="Error de autenticaci\xf3n");const r=this.paymentSplits.map(i=>i.method).join(",");this.salesService.createSale(this.userId,this.cartItems,r,this.paymentSplits).subscribe({next:()=>{this.cartService.clearCart(),this.paymentSplits=[{method:"",amount:0}],this.errorMessage=""},error:i=>{console.error("Error registering sale:",i),this.errorMessage=i.message||"Error al registrar la venta"}})}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.Y36(zd),s.Y36(Mx),s.Y36(Hl),s.Y36(r1))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-current-sale"]],decls:15,vars:2,consts:[[1,"sales-container"],[1,"sales-header"],[1,"eyebrow"],["routerLink","/ventas",1,"btn-secondary-link"],[1,"fas","fa-history"],[1,"current-sale"],["class","empty-cart",4,"ngIf"],["class","current-sale-body",4,"ngIf"],[1,"empty-cart"],[1,"current-sale-body"],[1,"items-table"],[4,"ngFor","ngForOf"],["colspan","3",1,"total-label"],[1,"total-amount"],[1,"payment-section"],[1,"payment-methods"],[1,"section-title"],[1,"payment-splits"],["class","payment-split",4,"ngFor","ngForOf"],[1,"payment-summary"],[1,"payment-actions"],["type","button",1,"btn-add-split",3,"disabled","click"],[1,"fas","fa-plus"],[1,"register-panel"],[1,"total-highlight"],["type","button",1,"btn-register",3,"disabled","click"],[1,"fas","fa-cash-register"],["class","error-message",4,"ngIf"],[1,"payment-split"],[1,"form-group"],[3,"for"],[1,"payment-select",3,"id","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","number","step","0.01",1,"amount-input",3,"id","ngModel","max","ngModelChange"],["type","button","class","btn-remove-split","aria-label","Eliminar m\xe9todo",3,"click",4,"ngIf"],[3,"value"],["type","button","aria-label","Eliminar m\xe9todo",1,"btn-remove-split",3,"click"],[1,"fas","fa-times"],[1,"error-message"]],template:function(i,o){1&i&&(s.TgZ(0,"section",0)(1,"header",1)(2,"div")(3,"p",2),s._uU(4,"Venta en curso"),s.qZA(),s.TgZ(5,"h2"),s._uU(6,"Registrar venta"),s.qZA(),s.TgZ(7,"p"),s._uU(8,"Complet\xe1 los m\xe9todos de pago correspondientes y confirm\xe1 la operaci\xf3n."),s.qZA()(),s.TgZ(9,"a",3),s._UZ(10,"i",4),s._uU(11," Ver ventas recientes "),s.qZA()(),s.TgZ(12,"div",5),s.YNc(13,Nee,2,0,"div",6),s.YNc(14,jee,51,19,"div",7),s.qZA()()),2&i&&(s.xp6(13),s.Q6J("ngIf",0===o.cartItems.length),s.xp6(1),s.Q6J("ngIf",o.cartItems.length>0))},dependencies:[te.sg,te.O5,Bi,na,nt,go,cs,or,mu,As,k.rH,te.H9],styles:[".sales-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:clamp(1.5rem,4vw,3rem) var(--gutter) 3rem;display:flex;flex-direction:column;gap:1.75rem}.sales-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;flex-wrap:wrap}.sales-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:.25rem 0;font-size:clamp(2rem,3vw,2.6rem);color:#122417}.sales-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;max-width:520px;color:#4d5a51}.btn-secondary-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.45rem;padding:.75rem 1.2rem;border-radius:999px;border:1px solid rgba(17,36,23,.14);text-decoration:none;color:#132b1c;font-weight:600;background:rgba(17,36,23,.05);transition:background .2s ease,transform .2s ease}.btn-secondary-link[_ngcontent-%COMP%]:hover{background:rgba(17,36,23,.12);transform:translateY(-1px)}.current-sale-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.items-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-radius:18px;overflow:hidden;border:1px solid rgba(17,36,23,.08)}.items-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:rgba(17,36,23,.05)}.items-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.85rem 1rem;text-align:left;color:#1f2f23}.total-label[_ngcontent-%COMP%]{text-align:right;font-weight:600;color:#324235}.total-amount[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#0d2617}.payment-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,2fr) minmax(280px,1fr);gap:1.5rem}.payment-methods[_ngcontent-%COMP%], .register-panel[_ngcontent-%COMP%]{border-radius:24px;border:1px solid rgba(17,36,23,.09);background:var(--surface, #fff);box-shadow:var(--shadow-soft);padding:1.5rem}.section-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#14271a}.section-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.35rem 0 1rem;color:#5a685d}.payment-splits[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.payment-split[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr)) auto;gap:.75rem;align-items:end}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.35rem;color:#415045}.payment-select[_ngcontent-%COMP%], .amount-input[_ngcontent-%COMP%]{width:100%;border-radius:16px;border:1px solid rgba(17,36,23,.18);padding:.85rem 1rem;background:rgba(255,255,255,.9);font-size:.95rem}.btn-remove-split[_ngcontent-%COMP%]{background:rgba(192,57,43,.12);color:#c0392b;border:none;border-radius:12px;width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.payment-summary[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1rem;padding:.9rem 1.1rem;border-radius:16px;background:rgba(32,117,53,.08);color:#1d3925}.payment-summary.error[_ngcontent-%COMP%]{background:rgba(192,57,43,.12);color:#c0392b}.payment-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:flex-end}.btn-add-split[_ngcontent-%COMP%]{border:1px dashed rgba(17,36,23,.3);border-radius:999px;padding:.65rem 1.1rem;background:transparent;font-weight:600;cursor:pointer;display:inline-flex;gap:.4rem;align-items:center}.btn-add-split[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.register-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;justify-content:space-between}.total-highlight[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.8rem;letter-spacing:.06em;color:#6a776c}.total-highlight[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.4rem 0 0;font-size:2rem;color:#0b2317}.btn-register[_ngcontent-%COMP%]{border:none;border-radius:18px;padding:.95rem 1.2rem;font-size:1rem;font-weight:600;color:#fff;background:linear-gradient(120deg,#2f8f44,#62c370);cursor:pointer;display:inline-flex;gap:.5rem;align-items:center;justify-content:center}.btn-register[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.error-message[_ngcontent-%COMP%]{margin:0;color:#c0392b}.empty-cart[_ngcontent-%COMP%]{border-radius:20px;border:1px dashed rgba(17,36,23,.25);padding:2rem;text-align:center;color:#5a685d}@media (max-width: 900px){.payment-section[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]}),n})();var Hee=Z(8505);let Hf=(()=>{const e=class{constructor(r,i){this.authService=r,this.router=i}canActivate(){return this.authService.isAdmin().pipe((0,$E.q)(1),(0,Hee.b)(r=>{r||(console.warn("Access denied - Admin rights required"),this.router.navigate(["/"]))}))}};let n=e;return e.\u0275fac=function(i){return new(i||e)(s.LFG(Hl),s.LFG(k.F0))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();const $ee=[{path:"",component:Yw},{path:"productos",component:Su},{path:"productos/:id",component:C3},{path:"contacto",component:rg},{path:"carrito",component:vS},{path:"login",component:xZ},{path:"gestionar-productos",component:kS,canActivate:[Hf]},{path:"agregar-producto",component:vZ,canActivate:[Hf]},{path:"gestionar-categorias",component:DZ,canActivate:[Hf]},{path:"ventas",component:sj,canActivate:[Hf]},{path:"venta-actual",component:qee,canActivate:[Hf]},{path:"historial-ventas",component:dee,canActivate:[Hf]},{path:"metodos-pago",component:vee,canActivate:[Hf]},{path:"caja",component:Ree,canActivate:[Hf]},{path:"lista-precios-mayorista",loadChildren:()=>Z.e(829).then(Z.bind(Z,2829)).then(n=>n.WholesalePriceListModule),canActivate:[Hf]}];let zee=(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[k.Bz.forRoot($ee),k.Bz]}),n})(),Gee=(()=>{const e=class{};let n=e;return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=s.oAB({type:e,bootstrap:[k1]}),e.\u0275inj=s.cJS({providers:[kc.T,ol.M,nm,zd,Hl,Kd,dh,Mx,r1,te.JJ,te.uU],imports:[A.b2,vi,k.Bz,zee,GT,te.ez]}),n})();A.q6().bootstrapModule(Gee).catch(n=>console.error(n))},6397:(Jt,Ne,Z)=>{"use strict";Z.r(Ne),Z.d(Ne,{Headers:()=>ie,Request:()=>re,Response:()=>we,default:()=>me,fetch:()=>te});var s=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const te=s.fetch,me=s.fetch.bind(s),ie=s.Headers,re=s.Request,we=s.Response},3369:function(Jt,Ne,Z){"use strict";var A=Z(7156).default,s=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(Ne,"__esModule",{value:!0});const te=s(Z(6397)),me=s(Z(839));Ne.default=class ie{constructor(we){this.shouldThrowOnError=!1,this.method=we.method,this.url=we.url,this.headers=we.headers,this.schema=we.schema,this.body=we.body,this.shouldThrowOnError=we.shouldThrowOnError,this.signal=we.signal,this.isMaybeSingle=we.isMaybeSingle,this.fetch=we.fetch?we.fetch:typeof fetch>"u"?te.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(we,Ie){return this.headers=Object.assign({},this.headers),this.headers[we]=Ie,this}then(we,Ie){var Se=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let Ce=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var ve=A(function*(Oe){var Pe,nt,gt;let Ft=null,ln=null,Wt=null,Tt=Oe.status,Xe=Oe.statusText;if(Oe.ok){if("HEAD"!==Se.method){const Fe=yield Oe.text();""===Fe||(ln="text/csv"===Se.headers.Accept||Se.headers.Accept&&Se.headers.Accept.includes("application/vnd.pgrst.plan+text")?Fe:JSON.parse(Fe))}const qt=null===(Pe=Se.headers.Prefer)||void 0===Pe?void 0:Pe.match(/count=(exact|planned|estimated)/),Mt=null===(nt=Oe.headers.get("content-range"))||void 0===nt?void 0:nt.split("/");qt&&Mt&&Mt.length>1&&(Wt=parseInt(Mt[1])),Se.isMaybeSingle&&"GET"===Se.method&&Array.isArray(ln)&&(ln.length>1?(Ft={code:"PGRST116",details:`Results contain ${ln.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},ln=null,Wt=null,Tt=406,Xe="Not Acceptable"):ln=1===ln.length?ln[0]:null)}else{const qt=yield Oe.text();try{Ft=JSON.parse(qt),Array.isArray(Ft)&&404===Oe.status&&(ln=[],Ft=null,Tt=200,Xe="OK")}catch{404===Oe.status&&""===qt?(Tt=204,Xe="No Content"):Ft={message:qt}}if(Ft&&Se.isMaybeSingle&&!(null===(gt=Ft?.details)||void 0===gt)&&gt.includes("0 rows")&&(Ft=null,Tt=200,Xe="OK"),Ft&&Se.shouldThrowOnError)throw new me.default(Ft)}return{error:Ft,data:ln,count:Wt,status:Tt,statusText:Xe}});return function(Oe){return ve.apply(this,arguments)}}());return this.shouldThrowOnError||(Ce=Ce.catch(ve=>{var Oe,Pe,nt;return{error:{message:`${null!==(Oe=ve?.name)&&void 0!==Oe?Oe:"FetchError"}: ${ve?.message}`,details:`${null!==(Pe=ve?.stack)&&void 0!==Pe?Pe:""}`,hint:"",code:`${null!==(nt=ve?.code)&&void 0!==nt?nt:""}`},data:null,count:null,status:0,statusText:""}})),Ce.then(we,Ie)}}},7851:function(Jt,Ne,Z){"use strict";var A=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(Ne,"__esModule",{value:!0});const s=A(Z(241)),te=A(Z(4105)),me=Z(1239);class ie{constructor(we,{headers:Ie={},schema:Se,fetch:Ue}={}){this.url=we,this.headers=Object.assign(Object.assign({},me.DEFAULT_HEADERS),Ie),this.schemaName=Se,this.fetch=Ue}from(we){const Ie=new URL(`${this.url}/${we}`);return new s.default(Ie,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(we){return new ie(this.url,{headers:this.headers,schema:we,fetch:this.fetch})}rpc(we,Ie={},{head:Se=!1,get:Ue=!1,count:Ce}={}){let ve;const Oe=new URL(`${this.url}/rpc/${we}`);let Pe;Se||Ue?(ve=Se?"HEAD":"GET",Object.entries(Ie).filter(([gt,Ft])=>void 0!==Ft).map(([gt,Ft])=>[gt,Array.isArray(Ft)?`{${Ft.join(",")}}`:`${Ft}`]).forEach(([gt,Ft])=>{Oe.searchParams.append(gt,Ft)})):(ve="POST",Pe=Ie);const nt=Object.assign({},this.headers);return Ce&&(nt.Prefer=`count=${Ce}`),new te.default({method:ve,url:Oe,headers:nt,schema:this.schemaName,body:Pe,fetch:this.fetch,allowEmpty:!1})}}Ne.default=ie},839:(Jt,Ne)=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});class Z extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}Ne.default=Z},4105:function(Jt,Ne,Z){"use strict";var A=this&&this.__importDefault||function(me){return me&&me.__esModule?me:{default:me}};Object.defineProperty(Ne,"__esModule",{value:!0});const s=A(Z(2594));Ne.default=class te extends s.default{eq(ie,re){return this.url.searchParams.append(ie,`eq.${re}`),this}neq(ie,re){return this.url.searchParams.append(ie,`neq.${re}`),this}gt(ie,re){return this.url.searchParams.append(ie,`gt.${re}`),this}gte(ie,re){return this.url.searchParams.append(ie,`gte.${re}`),this}lt(ie,re){return this.url.searchParams.append(ie,`lt.${re}`),this}lte(ie,re){return this.url.searchParams.append(ie,`lte.${re}`),this}like(ie,re){return this.url.searchParams.append(ie,`like.${re}`),this}likeAllOf(ie,re){return this.url.searchParams.append(ie,`like(all).{${re.join(",")}}`),this}likeAnyOf(ie,re){return this.url.searchParams.append(ie,`like(any).{${re.join(",")}}`),this}ilike(ie,re){return this.url.searchParams.append(ie,`ilike.${re}`),this}ilikeAllOf(ie,re){return this.url.searchParams.append(ie,`ilike(all).{${re.join(",")}}`),this}ilikeAnyOf(ie,re){return this.url.searchParams.append(ie,`ilike(any).{${re.join(",")}}`),this}is(ie,re){return this.url.searchParams.append(ie,`is.${re}`),this}in(ie,re){const we=Array.from(new Set(re)).map(Ie=>"string"==typeof Ie&&new RegExp("[,()]").test(Ie)?`"${Ie}"`:`${Ie}`).join(",");return this.url.searchParams.append(ie,`in.(${we})`),this}contains(ie,re){return"string"==typeof re?this.url.searchParams.append(ie,`cs.${re}`):Array.isArray(re)?this.url.searchParams.append(ie,`cs.{${re.join(",")}}`):this.url.searchParams.append(ie,`cs.${JSON.stringify(re)}`),this}containedBy(ie,re){return"string"==typeof re?this.url.searchParams.append(ie,`cd.${re}`):Array.isArray(re)?this.url.searchParams.append(ie,`cd.{${re.join(",")}}`):this.url.searchParams.append(ie,`cd.${JSON.stringify(re)}`),this}rangeGt(ie,re){return this.url.searchParams.append(ie,`sr.${re}`),this}rangeGte(ie,re){return this.url.searchParams.append(ie,`nxl.${re}`),this}rangeLt(ie,re){return this.url.searchParams.append(ie,`sl.${re}`),this}rangeLte(ie,re){return this.url.searchParams.append(ie,`nxr.${re}`),this}rangeAdjacent(ie,re){return this.url.searchParams.append(ie,`adj.${re}`),this}overlaps(ie,re){return this.url.searchParams.append(ie,"string"==typeof re?`ov.${re}`:`ov.{${re.join(",")}}`),this}textSearch(ie,re,{config:we,type:Ie}={}){let Se="";return"plain"===Ie?Se="pl":"phrase"===Ie?Se="ph":"websearch"===Ie&&(Se="w"),this.url.searchParams.append(ie,`${Se}fts${void 0===we?"":`(${we})`}.${re}`),this}match(ie){return Object.entries(ie).forEach(([re,we])=>{this.url.searchParams.append(re,`eq.${we}`)}),this}not(ie,re,we){return this.url.searchParams.append(ie,`not.${re}.${we}`),this}or(ie,{foreignTable:re,referencedTable:we=re}={}){return this.url.searchParams.append(we?`${we}.or`:"or",`(${ie})`),this}filter(ie,re,we){return this.url.searchParams.append(ie,`${re}.${we}`),this}}},241:function(Jt,Ne,Z){"use strict";var A=this&&this.__importDefault||function(me){return me&&me.__esModule?me:{default:me}};Object.defineProperty(Ne,"__esModule",{value:!0});const s=A(Z(4105));Ne.default=class te{constructor(ie,{headers:re={},schema:we,fetch:Ie}){this.url=ie,this.headers=re,this.schema=we,this.fetch=Ie}select(ie,{head:re=!1,count:we}={}){const Ie=re?"HEAD":"GET";let Se=!1;const Ue=(ie??"*").split("").map(Ce=>/\s/.test(Ce)&&!Se?"":('"'===Ce&&(Se=!Se),Ce)).join("");return this.url.searchParams.set("select",Ue),we&&(this.headers.Prefer=`count=${we}`),new s.default({method:Ie,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(ie,{count:re,defaultToNull:we=!0}={}){const Se=[];if(this.headers.Prefer&&Se.push(this.headers.Prefer),re&&Se.push(`count=${re}`),we||Se.push("missing=default"),this.headers.Prefer=Se.join(","),Array.isArray(ie)){const Ue=ie.reduce((Ce,ve)=>Ce.concat(Object.keys(ve)),[]);if(Ue.length>0){const Ce=[...new Set(Ue)].map(ve=>`"${ve}"`);this.url.searchParams.set("columns",Ce.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:ie,fetch:this.fetch,allowEmpty:!1})}upsert(ie,{onConflict:re,ignoreDuplicates:we=!1,count:Ie,defaultToNull:Se=!0}={}){const Ce=[`resolution=${we?"ignore":"merge"}-duplicates`];if(void 0!==re&&this.url.searchParams.set("on_conflict",re),this.headers.Prefer&&Ce.push(this.headers.Prefer),Ie&&Ce.push(`count=${Ie}`),Se||Ce.push("missing=default"),this.headers.Prefer=Ce.join(","),Array.isArray(ie)){const ve=ie.reduce((Oe,Pe)=>Oe.concat(Object.keys(Pe)),[]);if(ve.length>0){const Oe=[...new Set(ve)].map(Pe=>`"${Pe}"`);this.url.searchParams.set("columns",Oe.join(","))}}return new s.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:ie,fetch:this.fetch,allowEmpty:!1})}update(ie,{count:re}={}){const Ie=[];return this.headers.Prefer&&Ie.push(this.headers.Prefer),re&&Ie.push(`count=${re}`),this.headers.Prefer=Ie.join(","),new s.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:ie,fetch:this.fetch,allowEmpty:!1})}delete({count:ie}={}){const we=[];return ie&&we.push(`count=${ie}`),this.headers.Prefer&&we.unshift(this.headers.Prefer),this.headers.Prefer=we.join(","),new s.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},2594:function(Jt,Ne,Z){"use strict";var A=this&&this.__importDefault||function(me){return me&&me.__esModule?me:{default:me}};Object.defineProperty(Ne,"__esModule",{value:!0});const s=A(Z(3369));Ne.default=class te extends s.default{select(ie){let re=!1;const we=(ie??"*").split("").map(Ie=>/\s/.test(Ie)&&!re?"":('"'===Ie&&(re=!re),Ie)).join("");return this.url.searchParams.set("select",we),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(ie,{ascending:re=!0,nullsFirst:we,foreignTable:Ie,referencedTable:Se=Ie}={}){const Ue=Se?`${Se}.order`:"order",Ce=this.url.searchParams.get(Ue);return this.url.searchParams.set(Ue,`${Ce?`${Ce},`:""}${ie}.${re?"asc":"desc"}${void 0===we?"":we?".nullsfirst":".nullslast"}`),this}limit(ie,{foreignTable:re,referencedTable:we=re}={}){return this.url.searchParams.set(typeof we>"u"?"limit":`${we}.limit`,`${ie}`),this}range(ie,re,{foreignTable:we,referencedTable:Ie=we}={}){const Ue=typeof Ie>"u"?"limit":`${Ie}.limit`;return this.url.searchParams.set(typeof Ie>"u"?"offset":`${Ie}.offset`,`${ie}`),this.url.searchParams.set(Ue,""+(re-ie+1)),this}abortSignal(ie){return this.signal=ie,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="GET"===this.method?"application/json":"application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:ie=!1,verbose:re=!1,settings:we=!1,buffers:Ie=!1,wal:Se=!1,format:Ue="text"}={}){var Ce;const ve=[ie?"analyze":null,re?"verbose":null,we?"settings":null,Ie?"buffers":null,Se?"wal":null].filter(Boolean).join("|"),Oe=null!==(Ce=this.headers.Accept)&&void 0!==Ce?Ce:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${Ue}; for="${Oe}"; options=${ve};`,this}rollback(){var ie;return(null!==(ie=this.headers.Prefer)&&void 0!==ie?ie:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}},1239:(Jt,Ne,Z)=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.DEFAULT_HEADERS=void 0;const A=Z(4800);Ne.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${A.version}`}},8358:function(Jt,Ne,Z){"use strict";var A=this&&this.__importDefault||function(Ie){return Ie&&Ie.__esModule?Ie:{default:Ie}};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.PostgrestError=Ne.PostgrestBuilder=Ne.PostgrestTransformBuilder=Ne.PostgrestFilterBuilder=Ne.PostgrestQueryBuilder=Ne.PostgrestClient=void 0;const s=A(Z(7851));Ne.PostgrestClient=s.default;const te=A(Z(241));Ne.PostgrestQueryBuilder=te.default;const me=A(Z(4105));Ne.PostgrestFilterBuilder=me.default;const ie=A(Z(2594));Ne.PostgrestTransformBuilder=ie.default;const re=A(Z(3369));Ne.PostgrestBuilder=re.default;const we=A(Z(839));Ne.PostgrestError=we.default,Ne.default={PostgrestClient:s.default,PostgrestQueryBuilder:te.default,PostgrestFilterBuilder:me.default,PostgrestTransformBuilder:ie.default,PostgrestBuilder:re.default,PostgrestError:we.default}},4800:(Jt,Ne)=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.version=void 0,Ne.version="0.0.0-automated"},7123:function(Jt){Jt.exports=function(Ne){function Z(s){if(A[s])return A[s].exports;var te=A[s]={exports:{},id:s,loaded:!1};return Ne[s].call(te.exports,te,te.exports,Z),te.loaded=!0,te.exports}var A={};return Z.m=Ne,Z.c=A,Z.p="dist/",Z(0)}([function(Ne,Z,A){"use strict";function s(He){return He&&He.__esModule?He:{default:He}}var te=Object.assign||function(He){for(var kt=1;kt<arguments.length;kt++){var pn=arguments[kt];for(var mn in pn)Object.prototype.hasOwnProperty.call(pn,mn)&&(He[mn]=pn[mn])}return He},ie=(s(A(1)),A(6)),re=s(ie),Ie=s(A(7)),Ue=s(A(8)),ve=s(A(9)),Pe=s(A(10)),gt=s(A(11)),ln=s(A(14)),Wt=[],Tt=!1,Xe={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},Et=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(Tt=!0),Tt)return Wt=(0,gt.default)(Wt,Xe),(0,Pe.default)(Wt,Xe.once),Wt},qt=function(){Wt=(0,ln.default)(),Et()};Ne.exports={init:function(He){Xe=te(Xe,He),Wt=(0,ln.default)();var kt=document.all&&!window.atob;return function(He){return!0===He||"mobile"===He&&ve.default.mobile()||"phone"===He&&ve.default.phone()||"tablet"===He&&ve.default.tablet()||"function"==typeof He&&!0===He()}(Xe.disable)||kt?void Wt.forEach(function(He,kt){He.node.removeAttribute("data-aos"),He.node.removeAttribute("data-aos-easing"),He.node.removeAttribute("data-aos-duration"),He.node.removeAttribute("data-aos-delay")}):(Xe.disableMutationObserver||Ue.default.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),Xe.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",Xe.easing),document.querySelector("body").setAttribute("data-aos-duration",Xe.duration),document.querySelector("body").setAttribute("data-aos-delay",Xe.delay),"DOMContentLoaded"===Xe.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1?Et(!0):"load"===Xe.startEvent?window.addEventListener(Xe.startEvent,function(){Et(!0)}):document.addEventListener(Xe.startEvent,function(){Et(!0)}),window.addEventListener("resize",(0,Ie.default)(Et,Xe.debounceDelay,!0)),window.addEventListener("orientationchange",(0,Ie.default)(Et,Xe.debounceDelay,!0)),window.addEventListener("scroll",(0,re.default)(function(){(0,Pe.default)(Wt,Xe.once)},Xe.throttleDelay)),Xe.disableMutationObserver||Ue.default.ready("[data-aos]",qt),Wt)},refresh:Et,refreshHard:qt}},function(Ne,Z){},,,,,function(Ne,Z){(function(A){"use strict";function s(Fe,_t,He){function kt(jt){var Fr=$e,Bn=it;return $e=it=void 0,En=jt,vt=Fe.apply(Bn,Fr)}function nn(jt){var Fr=jt-fn;return void 0===fn||Fr>=_t||Fr<0||In&&jt-En>=st}function Or(){var jt=Mt();return nn(jt)?Ur(jt):void(pt=setTimeout(Or,function mn(jt){var rr=_t-(jt-fn);return In?qt(rr,st-(jt-En)):rr}(jt)))}function Ur(jt){return pt=void 0,yt&&$e?kt(jt):($e=it=void 0,vt)}function qe(){var jt=Mt(),Fr=nn(jt);if($e=arguments,it=this,fn=jt,Fr){if(void 0===pt)return function pn(jt){return En=jt,pt=setTimeout(Or,_t),er?kt(jt):vt}(fn);if(In)return pt=setTimeout(Or,_t),kt(fn)}return void 0===pt&&(pt=setTimeout(Or,_t)),vt}var $e,it,st,vt,pt,fn,En=0,er=!1,In=!1,yt=!0;if("function"!=typeof Fe)throw new TypeError(Se);return _t=we(_t)||0,me(He)&&(er=!!He.leading,st=(In="maxWait"in He)?Et(we(He.maxWait)||0,_t):st,yt="trailing"in He?!!He.trailing:yt),qe.cancel=function gi(){void 0!==pt&&clearTimeout(pt),En=0,$e=fn=it=pt=void 0},qe.flush=function Tr(){return void 0===pt?vt:Ur(Mt())},qe}function me(Fe){var _t=typeof Fe>"u"?"undefined":Ie(Fe);return!!Fe&&("object"==_t||"function"==_t)}function re(Fe){return"symbol"==(typeof Fe>"u"?"undefined":Ie(Fe))||function ie(Fe){return!!Fe&&"object"==(typeof Fe>"u"?"undefined":Ie(Fe))}(Fe)&&Xe.call(Fe)==Ce}function we(Fe){if("number"==typeof Fe)return Fe;if(re(Fe))return Ue;if(me(Fe)){var _t="function"==typeof Fe.valueOf?Fe.valueOf():Fe;Fe=me(_t)?_t+"":_t}if("string"!=typeof Fe)return 0===Fe?Fe:+Fe;Fe=Fe.replace(ve,"");var He=Pe.test(Fe);return He||nt.test(Fe)?gt(Fe.slice(2),He?2:8):Oe.test(Fe)?Ue:+Fe}var Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Fe){return typeof Fe}:function(Fe){return Fe&&"function"==typeof Symbol&&Fe.constructor===Symbol&&Fe!==Symbol.prototype?"symbol":typeof Fe},Se="Expected a function",Ue=NaN,Ce="[object Symbol]",ve=/^\s+|\s+$/g,Oe=/^[-+]0x[0-9a-f]+$/i,Pe=/^0b[01]+$/i,nt=/^0o[0-7]+$/i,gt=parseInt,Ft="object"==(typeof A>"u"?"undefined":Ie(A))&&A&&A.Object===Object&&A,ln="object"==(typeof self>"u"?"undefined":Ie(self))&&self&&self.Object===Object&&self,Wt=Ft||ln||Function("return this")(),Xe=Object.prototype.toString,Et=Math.max,qt=Math.min,Mt=function(){return Wt.Date.now()};Ne.exports=function te(Fe,_t,He){var kt=!0,pn=!0;if("function"!=typeof Fe)throw new TypeError(Se);return me(He)&&(kt="leading"in He?!!He.leading:kt,pn="trailing"in He?!!He.trailing:pn),s(Fe,_t,{leading:kt,maxWait:_t,trailing:pn})}}).call(Z,function(){return this}())},function(Ne,Z){(function(A){"use strict";function te(Mt){var Fe=typeof Mt>"u"?"undefined":we(Mt);return!!Mt&&("object"==Fe||"function"==Fe)}function ie(Mt){return"symbol"==(typeof Mt>"u"?"undefined":we(Mt))||function me(Mt){return!!Mt&&"object"==(typeof Mt>"u"?"undefined":we(Mt))}(Mt)&&Tt.call(Mt)==Ue}function re(Mt){if("number"==typeof Mt)return Mt;if(ie(Mt))return Se;if(te(Mt)){var Fe="function"==typeof Mt.valueOf?Mt.valueOf():Mt;Mt=te(Fe)?Fe+"":Fe}if("string"!=typeof Mt)return 0===Mt?Mt:+Mt;Mt=Mt.replace(Ce,"");var _t=Oe.test(Mt);return _t||Pe.test(Mt)?nt(Mt.slice(2),_t?2:8):ve.test(Mt)?Se:+Mt}var we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Mt){return typeof Mt}:function(Mt){return Mt&&"function"==typeof Symbol&&Mt.constructor===Symbol&&Mt!==Symbol.prototype?"symbol":typeof Mt},Ie="Expected a function",Se=NaN,Ue="[object Symbol]",Ce=/^\s+|\s+$/g,ve=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Pe=/^0o[0-7]+$/i,nt=parseInt,gt="object"==(typeof A>"u"?"undefined":we(A))&&A&&A.Object===Object&&A,Ft="object"==(typeof self>"u"?"undefined":we(self))&&self&&self.Object===Object&&self,ln=gt||Ft||Function("return this")(),Tt=Object.prototype.toString,Xe=Math.max,Et=Math.min,qt=function(){return ln.Date.now()};Ne.exports=function s(Mt,Fe,_t){function He(yt){var jt=qe,Fr=$e;return qe=$e=void 0,fn=yt,st=Mt.apply(Fr,jt)}function mn(yt){var jt=yt-pt;return void 0===pt||jt>=Fe||jt<0||er&&yt-fn>=it}function nn(){var yt=qt();return mn(yt)?Or(yt):void(vt=setTimeout(nn,function pn(yt){var Bn=Fe-(yt-pt);return er?Et(Bn,it-(yt-fn)):Bn}(yt)))}function Or(yt){return vt=void 0,In&&qe?He(yt):(qe=$e=void 0,st)}function Tr(){var yt=qt(),jt=mn(yt);if(qe=arguments,$e=this,pt=yt,jt){if(void 0===vt)return function kt(yt){return fn=yt,vt=setTimeout(nn,Fe),En?He(yt):st}(pt);if(er)return vt=setTimeout(nn,Fe),He(pt)}return void 0===vt&&(vt=setTimeout(nn,Fe)),st}var qe,$e,it,st,vt,pt,fn=0,En=!1,er=!1,In=!0;if("function"!=typeof Mt)throw new TypeError(Ie);return Fe=re(Fe)||0,te(_t)&&(En=!!_t.leading,it=(er="maxWait"in _t)?Xe(re(_t.maxWait)||0,Fe):it,In="trailing"in _t?!!_t.trailing:In),Tr.cancel=function Ur(){void 0!==vt&&clearTimeout(vt),fn=0,qe=pt=$e=vt=void 0},Tr.flush=function gi(){return void 0===vt?st:Or(qt())},Tr}}).call(Z,function(){return this}())},function(Ne,Z){"use strict";function A(we){var Ie=void 0,Se=void 0;for(Ie=0;Ie<we.length;Ie+=1)if((Se=we[Ie]).dataset&&Se.dataset.aos||Se.children&&A(Se.children))return!0;return!1}function s(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function ie(we){we&&we.forEach(function(Ie){var Se=Array.prototype.slice.call(Ie.addedNodes),Ue=Array.prototype.slice.call(Ie.removedNodes);if(A(Se.concat(Ue)))return re()})}Object.defineProperty(Z,"__esModule",{value:!0});var re=function(){};Z.default={isSupported:function te(){return!!s()},ready:function me(we,Ie){var Se=window.document,Ce=new(s())(ie);re=Ie,Ce.observe(Se.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}}},function(Ne,Z){"use strict";function s(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(Z,"__esModule",{value:!0});var te=function(){function Se(Ue,Ce){for(var ve=0;ve<Ce.length;ve++){var Oe=Ce[ve];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(Ue,Oe.key,Oe)}}return function(Ue,Ce,ve){return Ce&&Se(Ue.prototype,Ce),ve&&Se(Ue,ve),Ue}}(),me=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,ie=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,re=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,we=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Ie=function(){function Se(){!function A(Se,Ue){if(!(Se instanceof Ue))throw new TypeError("Cannot call a class as a function")}(this,Se)}return te(Se,[{key:"phone",value:function(){var Ue=s();return!(!me.test(Ue)&&!ie.test(Ue.substr(0,4)))}},{key:"mobile",value:function(){var Ue=s();return!(!re.test(Ue)&&!we.test(Ue.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),Se}();Z.default=new Ie},function(Ne,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.default=function(te,me){var ie=window.pageYOffset,re=window.innerHeight;te.forEach(function(we,Ie){!function(te,me,ie){var re=te.node.getAttribute("data-aos-once");me>te.position?te.node.classList.add("aos-animate"):typeof re<"u"&&("false"===re||!ie&&"true"!==re)&&te.node.classList.remove("aos-animate")}(we,re+ie,me)})}},function(Ne,Z,A){"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var me=function s(re){return re&&re.__esModule?re:{default:re}}(A(12));Z.default=function(re,we){return re.forEach(function(Ie,Se){Ie.node.classList.add("aos-init"),Ie.position=(0,me.default)(Ie.node,we.offset)}),re}},function(Ne,Z,A){"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var me=function s(re){return re&&re.__esModule?re:{default:re}}(A(13));Z.default=function(re,we){var Ie=0,Se=0,Ue=window.innerHeight,Ce={offset:re.getAttribute("data-aos-offset"),anchor:re.getAttribute("data-aos-anchor"),anchorPlacement:re.getAttribute("data-aos-anchor-placement")};switch(Ce.offset&&!isNaN(Ce.offset)&&(Se=parseInt(Ce.offset)),Ce.anchor&&document.querySelectorAll(Ce.anchor)&&(re=document.querySelectorAll(Ce.anchor)[0]),Ie=(0,me.default)(re).top,Ce.anchorPlacement){case"top-bottom":break;case"center-bottom":Ie+=re.offsetHeight/2;break;case"bottom-bottom":Ie+=re.offsetHeight;break;case"top-center":Ie+=Ue/2;break;case"bottom-center":Ie+=Ue/2+re.offsetHeight;break;case"center-center":Ie+=Ue/2+re.offsetHeight/2;break;case"top-top":Ie+=Ue;break;case"bottom-top":Ie+=re.offsetHeight+Ue;break;case"center-top":Ie+=re.offsetHeight/2+Ue}return Ce.anchorPlacement||Ce.offset||isNaN(we)||(Se=we),Ie+Se}},function(Ne,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=function(s){for(var te=0,me=0;s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop);)te+=s.offsetLeft-("BODY"!=s.tagName?s.scrollLeft:0),me+=s.offsetTop-("BODY"!=s.tagName?s.scrollTop:0),s=s.offsetParent;return{top:me,left:te}}},function(Ne,Z){"use strict";Object.defineProperty(Z,"__esModule",{value:!0}),Z.default=function(s){return s=s||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(s,function(te){return{node:te}})}}])},1135:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{X:()=>s});var A=Z(7579);class s extends A.x{constructor(me){super(),this._value=me}get value(){return this.getValue()}_subscribe(me){const ie=super._subscribe(me);return!ie.closed&&me.next(this._value),ie}getValue(){const{hasError:me,thrownError:ie,_value:re}=this;if(me)throw ie;return this._throwIfClosed(),re}next(me){super.next(this._value=me)}}},9751:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{y:()=>Ie});var A=Z(930),s=Z(727),te=Z(8822),me=Z(9635),ie=Z(2416),re=Z(576),we=Z(2806);let Ie=(()=>{class ve{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const nt=new ve;return nt.source=this,nt.operator=Pe,nt}subscribe(Pe,nt,gt){const Ft=function Ce(ve){return ve&&ve instanceof A.Lv||function Ue(ve){return ve&&(0,re.m)(ve.next)&&(0,re.m)(ve.error)&&(0,re.m)(ve.complete)}(ve)&&(0,s.Nn)(ve)}(Pe)?Pe:new A.Hp(Pe,nt,gt);return(0,we.x)(()=>{const{operator:ln,source:Wt}=this;Ft.add(ln?ln.call(Ft,Wt):Wt?this._subscribe(Ft):this._trySubscribe(Ft))}),Ft}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(nt){Pe.error(nt)}}forEach(Pe,nt){return new(nt=Se(nt))((gt,Ft)=>{const ln=new A.Hp({next:Wt=>{try{Pe(Wt)}catch(Tt){Ft(Tt),ln.unsubscribe()}},error:Ft,complete:gt});this.subscribe(ln)})}_subscribe(Pe){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(Pe)}[te.L](){return this}pipe(...Pe){return(0,me.U)(Pe)(this)}toPromise(Pe){return new(Pe=Se(Pe))((nt,gt)=>{let Ft;this.subscribe(ln=>Ft=ln,ln=>gt(ln),()=>nt(Ft))})}}return ve.create=Oe=>new ve(Oe),ve})();function Se(ve){var Oe;return null!==(Oe=ve??ie.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{x:()=>we});var A=Z(9751),s=Z(727);const me=(0,Z(3888).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=Z(8737),re=Z(2806);let we=(()=>{class Se extends A.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ce){const ve=new Ie(this,this);return ve.operator=Ce,ve}_throwIfClosed(){if(this.closed)throw new me}next(Ce){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(Ce)}})}error(Ce){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ce;const{observers:ve}=this;for(;ve.length;)ve.shift().error(Ce)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ce;return(null===(Ce=this.observers)||void 0===Ce?void 0:Ce.length)>0}_trySubscribe(Ce){return this._throwIfClosed(),super._trySubscribe(Ce)}_subscribe(Ce){return this._throwIfClosed(),this._checkFinalizedStatuses(Ce),this._innerSubscribe(Ce)}_innerSubscribe(Ce){const{hasError:ve,isStopped:Oe,observers:Pe}=this;return ve||Oe?s.Lc:(this.currentObservers=null,Pe.push(Ce),new s.w0(()=>{this.currentObservers=null,(0,ie.P)(Pe,Ce)}))}_checkFinalizedStatuses(Ce){const{hasError:ve,thrownError:Oe,isStopped:Pe}=this;ve?Ce.error(Oe):Pe&&Ce.complete()}asObservable(){const Ce=new A.y;return Ce.source=this,Ce}}return Se.create=(Ue,Ce)=>new Ie(Ue,Ce),Se})();class Ie extends we{constructor(Ue,Ce){super(),this.destination=Ue,this.source=Ce}next(Ue){var Ce,ve;null===(ve=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.next)||void 0===ve||ve.call(Ce,Ue)}error(Ue){var Ce,ve;null===(ve=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.error)||void 0===ve||ve.call(Ce,Ue)}complete(){var Ue,Ce;null===(Ce=null===(Ue=this.destination)||void 0===Ue?void 0:Ue.complete)||void 0===Ce||Ce.call(Ue)}_subscribe(Ue){var Ce,ve;return null!==(ve=null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(Ue))&&void 0!==ve?ve:s.Lc}}},930:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{Hp:()=>gt,Lv:()=>ve});var A=Z(576),s=Z(727),te=Z(2416),me=Z(7849),ie=Z(5032);const re=Se("C",void 0,void 0);function Se(Xe,Et,qt){return{kind:Xe,value:Et,error:qt}}var Ue=Z(3410),Ce=Z(2806);class ve extends s.w0{constructor(Et){super(),this.isStopped=!1,Et?(this.destination=Et,(0,s.Nn)(Et)&&Et.add(this)):this.destination=Tt}static create(Et,qt,Mt){return new gt(Et,qt,Mt)}next(Et){this.isStopped?Wt(function Ie(Xe){return Se("N",Xe,void 0)}(Et),this):this._next(Et)}error(Et){this.isStopped?Wt(function we(Xe){return Se("E",void 0,Xe)}(Et),this):(this.isStopped=!0,this._error(Et))}complete(){this.isStopped?Wt(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Et){this.destination.next(Et)}_error(Et){try{this.destination.error(Et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Pe(Xe,Et){return Oe.call(Xe,Et)}class nt{constructor(Et){this.partialObserver=Et}next(Et){const{partialObserver:qt}=this;if(qt.next)try{qt.next(Et)}catch(Mt){Ft(Mt)}}error(Et){const{partialObserver:qt}=this;if(qt.error)try{qt.error(Et)}catch(Mt){Ft(Mt)}else Ft(Et)}complete(){const{partialObserver:Et}=this;if(Et.complete)try{Et.complete()}catch(qt){Ft(qt)}}}class gt extends ve{constructor(Et,qt,Mt){let Fe;if(super(),(0,A.m)(Et)||!Et)Fe={next:Et??void 0,error:qt??void 0,complete:Mt??void 0};else{let _t;this&&te.v.useDeprecatedNextContext?(_t=Object.create(Et),_t.unsubscribe=()=>this.unsubscribe(),Fe={next:Et.next&&Pe(Et.next,_t),error:Et.error&&Pe(Et.error,_t),complete:Et.complete&&Pe(Et.complete,_t)}):Fe=Et}this.destination=new nt(Fe)}}function Ft(Xe){te.v.useDeprecatedSynchronousErrorHandling?(0,Ce.O)(Xe):(0,me.h)(Xe)}function Wt(Xe,Et){const{onStoppedNotification:qt}=te.v;qt&&Ue.z.setTimeout(()=>qt(Xe,Et))}const Tt={closed:!0,next:ie.Z,error:function ln(Xe){throw Xe},complete:ie.Z}},727:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{Lc:()=>re,w0:()=>ie,Nn:()=>we});var A=Z(576);const te=(0,Z(3888).d)(Se=>function(Ce){Se(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((ve,Oe)=>`${Oe+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce});var me=Z(8737);class ie{constructor(Ue){this.initialTeardown=Ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ue;if(!this.closed){this.closed=!0;const{_parentage:Ce}=this;if(Ce)if(this._parentage=null,Array.isArray(Ce))for(const Pe of Ce)Pe.remove(this);else Ce.remove(this);const{initialTeardown:ve}=this;if((0,A.m)(ve))try{ve()}catch(Pe){Ue=Pe instanceof te?Pe.errors:[Pe]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Pe of Oe)try{Ie(Pe)}catch(nt){Ue=Ue??[],nt instanceof te?Ue=[...Ue,...nt.errors]:Ue.push(nt)}}if(Ue)throw new te(Ue)}}add(Ue){var Ce;if(Ue&&Ue!==this)if(this.closed)Ie(Ue);else{if(Ue instanceof ie){if(Ue.closed||Ue._hasParent(this))return;Ue._addParent(this)}(this._finalizers=null!==(Ce=this._finalizers)&&void 0!==Ce?Ce:[]).push(Ue)}}_hasParent(Ue){const{_parentage:Ce}=this;return Ce===Ue||Array.isArray(Ce)&&Ce.includes(Ue)}_addParent(Ue){const{_parentage:Ce}=this;this._parentage=Array.isArray(Ce)?(Ce.push(Ue),Ce):Ce?[Ce,Ue]:Ue}_removeParent(Ue){const{_parentage:Ce}=this;Ce===Ue?this._parentage=null:Array.isArray(Ce)&&(0,me.P)(Ce,Ue)}remove(Ue){const{_finalizers:Ce}=this;Ce&&(0,me.P)(Ce,Ue),Ue instanceof ie&&Ue._removeParent(this)}}ie.EMPTY=(()=>{const Se=new ie;return Se.closed=!0,Se})();const re=ie.EMPTY;function we(Se){return Se instanceof ie||Se&&"closed"in Se&&(0,A.m)(Se.remove)&&(0,A.m)(Se.add)&&(0,A.m)(Se.unsubscribe)}function Ie(Se){(0,A.m)(Se)?Se():Se.unsubscribe()}},2416:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{v:()=>A});const A={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{a:()=>Ue});var A=Z(9751),s=Z(4742),te=Z(2076),me=Z(4671),ie=Z(3268),re=Z(3269),we=Z(1810),Ie=Z(5403),Se=Z(9672);function Ue(...Oe){const Pe=(0,re.yG)(Oe),nt=(0,re.jO)(Oe),{args:gt,keys:Ft}=(0,s.D)(Oe);if(0===gt.length)return(0,te.D)([],Pe);const ln=new A.y(function Ce(Oe,Pe,nt=me.y){return gt=>{ve(Pe,()=>{const{length:Ft}=Oe,ln=new Array(Ft);let Wt=Ft,Tt=Ft;for(let Xe=0;Xe<Ft;Xe++)ve(Pe,()=>{const Et=(0,te.D)(Oe[Xe],Pe);let qt=!1;Et.subscribe((0,Ie.x)(gt,Mt=>{ln[Xe]=Mt,qt||(qt=!0,Tt--),Tt||gt.next(nt(ln.slice()))},()=>{--Wt||gt.complete()}))},gt)},gt)}}(gt,Pe,Ft?Wt=>(0,we.n)(Ft,Wt):me.y));return nt?ln.pipe((0,ie.Z)(nt)):ln}function ve(Oe,Pe,nt){Oe?(0,Se.f)(nt,Oe,Pe):Pe()}},7272:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{z:()=>ie});var A=Z(8189),te=Z(3269),me=Z(2076);function ie(...re){return function s(){return(0,A.J)(1)}()((0,me.D)(re,(0,te.yG)(re)))}},515:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{E:()=>s});const s=new(Z(9751).y)(ie=>ie.complete())},4128:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{D:()=>Ie});var A=Z(9751),s=Z(4742),te=Z(8421),me=Z(3269),ie=Z(5403),re=Z(3268),we=Z(1810);function Ie(...Se){const Ue=(0,me.jO)(Se),{args:Ce,keys:ve}=(0,s.D)(Se),Oe=new A.y(Pe=>{const{length:nt}=Ce;if(!nt)return void Pe.complete();const gt=new Array(nt);let Ft=nt,ln=nt;for(let Wt=0;Wt<nt;Wt++){let Tt=!1;(0,te.Xf)(Ce[Wt]).subscribe((0,ie.x)(Pe,Xe=>{Tt||(Tt=!0,ln--),gt[Wt]=Xe},()=>Ft--,void 0,()=>{(!Ft||!Tt)&&(ln||Pe.next(ve?(0,we.n)(ve,gt):gt),Pe.complete())}))}});return Ue?Oe.pipe((0,re.Z)(Ue)):Oe}},2076:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{D:()=>Mt});var A=Z(8421),s=Z(9672),te=Z(4482),me=Z(5403);function ie(Fe,_t=0){return(0,te.e)((He,kt)=>{He.subscribe((0,me.x)(kt,pn=>(0,s.f)(kt,Fe,()=>kt.next(pn),_t),()=>(0,s.f)(kt,Fe,()=>kt.complete(),_t),pn=>(0,s.f)(kt,Fe,()=>kt.error(pn),_t)))})}function re(Fe,_t=0){return(0,te.e)((He,kt)=>{kt.add(Fe.schedule(()=>He.subscribe(kt),_t))})}var Se=Z(9751),Ce=Z(2202),ve=Z(576);function Pe(Fe,_t){if(!Fe)throw new Error("Iterable cannot be null");return new Se.y(He=>{(0,s.f)(He,_t,()=>{const kt=Fe[Symbol.asyncIterator]();(0,s.f)(He,_t,()=>{kt.next().then(pn=>{pn.done?He.complete():He.next(pn.value)})},0,!0)})})}var nt=Z(3670),gt=Z(8239),Ft=Z(1144),ln=Z(6495),Wt=Z(2206),Tt=Z(4532),Xe=Z(3260);function Mt(Fe,_t){return _t?function qt(Fe,_t){if(null!=Fe){if((0,nt.c)(Fe))return function we(Fe,_t){return(0,A.Xf)(Fe).pipe(re(_t),ie(_t))}(Fe,_t);if((0,Ft.z)(Fe))return function Ue(Fe,_t){return new Se.y(He=>{let kt=0;return _t.schedule(function(){kt===Fe.length?He.complete():(He.next(Fe[kt++]),He.closed||this.schedule())})})}(Fe,_t);if((0,gt.t)(Fe))return function Ie(Fe,_t){return(0,A.Xf)(Fe).pipe(re(_t),ie(_t))}(Fe,_t);if((0,Wt.D)(Fe))return Pe(Fe,_t);if((0,ln.T)(Fe))return function Oe(Fe,_t){return new Se.y(He=>{let kt;return(0,s.f)(He,_t,()=>{kt=Fe[Ce.h](),(0,s.f)(He,_t,()=>{let pn,mn;try{({value:pn,done:mn}=kt.next())}catch(nn){return void He.error(nn)}mn?He.complete():He.next(pn)},0,!0)}),()=>(0,ve.m)(kt?.return)&&kt.return()})}(Fe,_t);if((0,Xe.L)(Fe))return function Et(Fe,_t){return Pe((0,Xe.Q)(Fe),_t)}(Fe,_t)}throw(0,Tt.z)(Fe)}(Fe,_t):(0,A.Xf)(Fe)}},8421:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{Xf:()=>Oe});var A=Z(7582),s=Z(1144),te=Z(8239),me=Z(9751),ie=Z(3670),re=Z(2206),we=Z(4532),Ie=Z(6495),Se=Z(3260),Ue=Z(576),Ce=Z(7849),ve=Z(8822);function Oe(Xe){if(Xe instanceof me.y)return Xe;if(null!=Xe){if((0,ie.c)(Xe))return function Pe(Xe){return new me.y(Et=>{const qt=Xe[ve.L]();if((0,Ue.m)(qt.subscribe))return qt.subscribe(Et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Xe);if((0,s.z)(Xe))return function nt(Xe){return new me.y(Et=>{for(let qt=0;qt<Xe.length&&!Et.closed;qt++)Et.next(Xe[qt]);Et.complete()})}(Xe);if((0,te.t)(Xe))return function gt(Xe){return new me.y(Et=>{Xe.then(qt=>{Et.closed||(Et.next(qt),Et.complete())},qt=>Et.error(qt)).then(null,Ce.h)})}(Xe);if((0,re.D)(Xe))return ln(Xe);if((0,Ie.T)(Xe))return function Ft(Xe){return new me.y(Et=>{for(const qt of Xe)if(Et.next(qt),Et.closed)return;Et.complete()})}(Xe);if((0,Se.L)(Xe))return function Wt(Xe){return ln((0,Se.Q)(Xe))}(Xe)}throw(0,we.z)(Xe)}function ln(Xe){return new me.y(Et=>{(function Tt(Xe,Et){var qt,Mt,Fe,_t;return(0,A.mG)(this,void 0,void 0,function*(){try{for(qt=(0,A.KL)(Xe);!(Mt=yield qt.next()).done;)if(Et.next(Mt.value),Et.closed)return}catch(He){Fe={error:He}}finally{try{Mt&&!Mt.done&&(_t=qt.return)&&(yield _t.call(qt))}finally{if(Fe)throw Fe.error}}Et.complete()})})(Xe,Et).catch(qt=>Et.error(qt))})}},9646:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{of:()=>te});var A=Z(3269),s=Z(2076);function te(...me){const ie=(0,A.yG)(me);return(0,s.D)(me,ie)}},2843:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{_:()=>te});var A=Z(9751),s=Z(576);function te(me,ie){const re=(0,s.m)(me)?me:()=>me,we=Ie=>Ie.error(re());return new A.y(ie?Ie=>ie.schedule(we,0,Ie):we)}},2805:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{H:()=>ie});var A=Z(9751),s=Z(1566),te=Z(3532),me=Z(1165);function ie(re=0,we,Ie=s.P){let Se=-1;return null!=we&&((0,te.K)(we)?Ie=we:Se=we),new A.y(Ue=>{let Ce=(0,me.q)(re)?+re-Ie.now():re;Ce<0&&(Ce=0);let ve=0;return Ie.schedule(function(){Ue.closed||(Ue.next(ve++),0<=Se?this.schedule(void 0,Se):Ue.complete())},Ce)})}},5403:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{x:()=>s});var A=Z(930);function s(me,ie,re,we,Ie){return new te(me,ie,re,we,Ie)}class te extends A.Lv{constructor(ie,re,we,Ie,Se,Ue){super(ie),this.onFinalize=Se,this.shouldUnsubscribe=Ue,this._next=re?function(Ce){try{re(Ce)}catch(ve){ie.error(ve)}}:super._next,this._error=Ie?function(Ce){try{Ie(Ce)}catch(ve){ie.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(Ce){ie.error(Ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},262:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{K:()=>me});var A=Z(8421),s=Z(5403),te=Z(4482);function me(ie){return(0,te.e)((re,we)=>{let Ue,Ie=null,Se=!1;Ie=re.subscribe((0,s.x)(we,void 0,void 0,Ce=>{Ue=(0,A.Xf)(ie(Ce,me(ie)(re))),Ie?(Ie.unsubscribe(),Ie=null,Ue.subscribe(we)):Se=!0})),Se&&(Ie.unsubscribe(),Ie=null,Ue.subscribe(we))})}},8746:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{x:()=>s});var A=Z(4482);function s(te){return(0,A.e)((me,ie)=>{try{me.subscribe(ie)}finally{ie.add(te)}})}},4004:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{U:()=>te});var A=Z(4482),s=Z(5403);function te(me,ie){return(0,A.e)((re,we)=>{let Ie=0;re.subscribe((0,s.x)(we,Se=>{we.next(me.call(ie,Se,Ie++))}))})}},9718:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{h:()=>s});var A=Z(4004);function s(te){return(0,A.U)(()=>te)}},8189:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{J:()=>te});var A=Z(5577),s=Z(4671);function te(me=1/0){return(0,A.z)(s.y,me)}},5577:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{z:()=>Ie});var A=Z(4004),s=Z(8421),te=Z(4482),me=Z(9672),ie=Z(5403),we=Z(576);function Ie(Se,Ue,Ce=1/0){return(0,we.m)(Ue)?Ie((ve,Oe)=>(0,A.U)((Pe,nt)=>Ue(ve,Pe,Oe,nt))((0,s.Xf)(Se(ve,Oe))),Ce):("number"==typeof Ue&&(Ce=Ue),(0,te.e)((ve,Oe)=>function re(Se,Ue,Ce,ve,Oe,Pe,nt,gt){const Ft=[];let ln=0,Wt=0,Tt=!1;const Xe=()=>{Tt&&!Ft.length&&!ln&&Ue.complete()},Et=Mt=>ln<ve?qt(Mt):Ft.push(Mt),qt=Mt=>{Pe&&Ue.next(Mt),ln++;let Fe=!1;(0,s.Xf)(Ce(Mt,Wt++)).subscribe((0,ie.x)(Ue,_t=>{Oe?.(_t),Pe?Et(_t):Ue.next(_t)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(ln--;Ft.length&&ln<ve;){const _t=Ft.shift();nt?(0,me.f)(Ue,nt,()=>qt(_t)):qt(_t)}Xe()}catch(_t){Ue.error(_t)}}))};return Se.subscribe((0,ie.x)(Ue,Et,()=>{Tt=!0,Xe()})),()=>{gt?.()}}(ve,Oe,Se,Ce)))}},5625:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{X:()=>re});var A=Z(4482),s=Z(5403),te=Z(4671),me=Z(2805),ie=Z(8421);function re(we=1/0){let Ie;Ie=we&&"object"==typeof we?we:{count:we};const{count:Se=1/0,delay:Ue,resetOnSuccess:Ce=!1}=Ie;return Se<=0?te.y:(0,A.e)((ve,Oe)=>{let nt,Pe=0;const gt=()=>{let Ft=!1;nt=ve.subscribe((0,s.x)(Oe,ln=>{Ce&&(Pe=0),Oe.next(ln)},void 0,ln=>{if(Pe++<Se){const Wt=()=>{nt?(nt.unsubscribe(),nt=null,gt()):Ft=!0};if(null!=Ue){const Tt="number"==typeof Ue?(0,me.H)(Ue):(0,ie.Xf)(Ue(ln,Pe)),Xe=(0,s.x)(Oe,()=>{Xe.unsubscribe(),Wt()},()=>{Oe.complete()});Tt.subscribe(Xe)}else Wt()}else Oe.error(ln)})),Ft&&(nt.unsubscribe(),nt=null,gt())};gt()})}},3900:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{w:()=>me});var A=Z(8421),s=Z(4482),te=Z(5403);function me(ie,re){return(0,s.e)((we,Ie)=>{let Se=null,Ue=0,Ce=!1;const ve=()=>Ce&&!Se&&Ie.complete();we.subscribe((0,te.x)(Ie,Oe=>{Se?.unsubscribe();let Pe=0;const nt=Ue++;(0,A.Xf)(ie(Oe,nt)).subscribe(Se=(0,te.x)(Ie,gt=>Ie.next(re?re(Oe,gt,nt,Pe++):gt),()=>{Se=null,ve()}))},()=>{Ce=!0,ve()}))})}},5698:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{q:()=>me});var A=Z(515),s=Z(4482),te=Z(5403);function me(ie){return ie<=0?()=>A.E:(0,s.e)((re,we)=>{let Ie=0;re.subscribe((0,te.x)(we,Se=>{++Ie<=ie&&(we.next(Se),ie<=Ie&&we.complete())}))})}},8505:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{b:()=>ie});var A=Z(576),s=Z(4482),te=Z(5403),me=Z(4671);function ie(re,we,Ie){const Se=(0,A.m)(re)||we||Ie?{next:re,error:we,complete:Ie}:re;return Se?(0,s.e)((Ue,Ce)=>{var ve;null===(ve=Se.subscribe)||void 0===ve||ve.call(Se);let Oe=!0;Ue.subscribe((0,te.x)(Ce,Pe=>{var nt;null===(nt=Se.next)||void 0===nt||nt.call(Se,Pe),Ce.next(Pe)},()=>{var Pe;Oe=!1,null===(Pe=Se.complete)||void 0===Pe||Pe.call(Se),Ce.complete()},Pe=>{var nt;Oe=!1,null===(nt=Se.error)||void 0===nt||nt.call(Se,Pe),Ce.error(Pe)},()=>{var Pe,nt;Oe&&(null===(Pe=Se.unsubscribe)||void 0===Pe||Pe.call(Se)),null===(nt=Se.finalize)||void 0===nt||nt.call(Se)}))}):me.y}},1566:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{P:()=>Ue,z:()=>Se});var A=Z(727);class s extends A.w0{constructor(ve,Oe){super()}schedule(ve,Oe=0){return this}}const te={setInterval(Ce,ve,...Oe){const{delegate:Pe}=te;return Pe?.setInterval?Pe.setInterval(Ce,ve,...Oe):setInterval(Ce,ve,...Oe)},clearInterval(Ce){const{delegate:ve}=te;return(ve?.clearInterval||clearInterval)(Ce)},delegate:void 0};var me=Z(8737);const re={now:()=>(re.delegate||Date).now(),delegate:void 0};class we{constructor(ve,Oe=we.now){this.schedulerActionCtor=ve,this.now=Oe}schedule(ve,Oe=0,Pe){return new this.schedulerActionCtor(this,ve).schedule(Pe,Oe)}}we.now=re.now;const Se=new class Ie extends we{constructor(ve,Oe=we.now){super(ve,Oe),this.actions=[],this._active=!1}flush(ve){const{actions:Oe}=this;if(this._active)return void Oe.push(ve);let Pe;this._active=!0;do{if(Pe=ve.execute(ve.state,ve.delay))break}while(ve=Oe.shift());if(this._active=!1,Pe){for(;ve=Oe.shift();)ve.unsubscribe();throw Pe}}}(class ie extends s{constructor(ve,Oe){super(ve,Oe),this.scheduler=ve,this.work=Oe,this.pending=!1}schedule(ve,Oe=0){var Pe;if(this.closed)return this;this.state=ve;const nt=this.id,gt=this.scheduler;return null!=nt&&(this.id=this.recycleAsyncId(gt,nt,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(Pe=this.id)&&void 0!==Pe?Pe:this.requestAsyncId(gt,this.id,Oe),this}requestAsyncId(ve,Oe,Pe=0){return te.setInterval(ve.flush.bind(ve,this),Pe)}recycleAsyncId(ve,Oe,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return Oe;null!=Oe&&te.clearInterval(Oe)}execute(ve,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(ve,Oe);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Oe){let nt,Pe=!1;try{this.work(ve)}catch(gt){Pe=!0,nt=gt||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),nt}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Oe}=this,{actions:Pe}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,me.P)(Pe,this),null!=ve&&(this.id=this.recycleAsyncId(Oe,ve,null)),this.delay=null,super.unsubscribe()}}}),Ue=Se},3410:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{z:()=>A});const A={setTimeout(s,te,...me){const{delegate:ie}=A;return ie?.setTimeout?ie.setTimeout(s,te,...me):setTimeout(s,te,...me)},clearTimeout(s){const{delegate:te}=A;return(te?.clearTimeout||clearTimeout)(s)},delegate:void 0}},2202:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{h:()=>s});const s=function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{L:()=>A});const A="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{K:()=>s});const s=(0,Z(3888).d)(te=>function(){te(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{_6:()=>re,jO:()=>me,yG:()=>ie});var A=Z(576),s=Z(3532);function te(we){return we[we.length-1]}function me(we){return(0,A.m)(te(we))?we.pop():void 0}function ie(we){return(0,s.K)(te(we))?we.pop():void 0}function re(we,Ie){return"number"==typeof te(we)?we.pop():Ie}},4742:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{D:()=>ie});const{isArray:A}=Array,{getPrototypeOf:s,prototype:te,keys:me}=Object;function ie(we){if(1===we.length){const Ie=we[0];if(A(Ie))return{args:Ie,keys:null};if(function re(we){return we&&"object"==typeof we&&s(we)===te}(Ie)){const Se=me(Ie);return{args:Se.map(Ue=>Ie[Ue]),keys:Se}}}return{args:we,keys:null}}},8737:(Jt,Ne,Z)=>{"use strict";function A(s,te){if(s){const me=s.indexOf(te);0<=me&&s.splice(me,1)}}Z.d(Ne,{P:()=>A})},3888:(Jt,Ne,Z)=>{"use strict";function A(s){const me=s(ie=>{Error.call(ie),ie.stack=(new Error).stack});return me.prototype=Object.create(Error.prototype),me.prototype.constructor=me,me}Z.d(Ne,{d:()=>A})},1810:(Jt,Ne,Z)=>{"use strict";function A(s,te){return s.reduce((me,ie,re)=>(me[ie]=te[re],me),{})}Z.d(Ne,{n:()=>A})},2806:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{O:()=>me,x:()=>te});var A=Z(2416);let s=null;function te(ie){if(A.v.useDeprecatedSynchronousErrorHandling){const re=!s;if(re&&(s={errorThrown:!1,error:null}),ie(),re){const{errorThrown:we,error:Ie}=s;if(s=null,we)throw Ie}}else ie()}function me(ie){A.v.useDeprecatedSynchronousErrorHandling&&s&&(s.errorThrown=!0,s.error=ie)}},9672:(Jt,Ne,Z)=>{"use strict";function A(s,te,me,ie=0,re=!1){const we=te.schedule(function(){me(),re?s.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(s.add(we),!re)return we}Z.d(Ne,{f:()=>A})},4671:(Jt,Ne,Z)=>{"use strict";function A(s){return s}Z.d(Ne,{y:()=>A})},1144:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{z:()=>A});const A=s=>s&&"number"==typeof s.length&&"function"!=typeof s},2206:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{D:()=>s});var A=Z(576);function s(te){return Symbol.asyncIterator&&(0,A.m)(te?.[Symbol.asyncIterator])}},1165:(Jt,Ne,Z)=>{"use strict";function A(s){return s instanceof Date&&!isNaN(s)}Z.d(Ne,{q:()=>A})},576:(Jt,Ne,Z)=>{"use strict";function A(s){return"function"==typeof s}Z.d(Ne,{m:()=>A})},3670:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{c:()=>te});var A=Z(8822),s=Z(576);function te(me){return(0,s.m)(me[A.L])}},6495:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{T:()=>te});var A=Z(2202),s=Z(576);function te(me){return(0,s.m)(me?.[A.h])}},8239:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{t:()=>s});var A=Z(576);function s(te){return(0,A.m)(te?.then)}},3260:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{L:()=>me,Q:()=>te});var A=Z(7582),s=Z(576);function te(ie){return(0,A.FC)(this,arguments,function*(){const we=ie.getReader();try{for(;;){const{value:Ie,done:Se}=yield(0,A.qq)(we.read());if(Se)return yield(0,A.qq)(void 0);yield yield(0,A.qq)(Ie)}}finally{we.releaseLock()}})}function me(ie){return(0,s.m)(ie?.getReader)}},3532:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{K:()=>s});var A=Z(576);function s(te){return te&&(0,A.m)(te.schedule)}},4482:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{A:()=>s,e:()=>te});var A=Z(576);function s(me){return(0,A.m)(me?.lift)}function te(me){return ie=>{if(s(ie))return ie.lift(function(re){try{return me(re,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{Z:()=>me});var A=Z(4004);const{isArray:s}=Array;function me(ie){return(0,A.U)(re=>function te(ie,re){return s(re)?ie(...re):ie(re)}(ie,re))}},5032:(Jt,Ne,Z)=>{"use strict";function A(){}Z.d(Ne,{Z:()=>A})},9635:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{U:()=>te,z:()=>s});var A=Z(4671);function s(...me){return te(me)}function te(me){return 0===me.length?A.y:1===me.length?me[0]:function(re){return me.reduce((we,Ie)=>Ie(we),re)}}},7849:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{h:()=>te});var A=Z(2416),s=Z(3410);function te(me){s.z.setTimeout(()=>{const{onUnhandledError:ie}=A.v;if(!ie)throw me;ie(me)})}},4532:(Jt,Ne,Z)=>{"use strict";function A(s){return new TypeError(`You provided ${null!==s&&"object"==typeof s?"an invalid object":`'${s}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}Z.d(Ne,{z:()=>A})},7156:Jt=>{function Ne(A,s,te,me,ie,re,we){try{var Ie=A[re](we),Se=Ie.value}catch(Ue){return void te(Ue)}Ie.done?s(Se):Promise.resolve(Se).then(me,ie)}Jt.exports=function Z(A){return function(){var s=this,te=arguments;return new Promise(function(me,ie){var re=A.apply(s,te);function we(Se){Ne(re,me,ie,we,Ie,"next",Se)}function Ie(Se){Ne(re,me,ie,we,Ie,"throw",Se)}we(void 0)})}},Jt.exports.__esModule=!0,Jt.exports.default=Jt.exports},6895:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{Do:()=>Wt,EM:()=>so,H9:()=>bc,HT:()=>me,JF:()=>Zs,JJ:()=>Is,K0:()=>re,Mx:()=>Kc,O5:()=>Fn,OU:()=>Bi,Ov:()=>Xi,S$:()=>gt,V_:()=>Se,Ye:()=>Tt,b0:()=>ln,bD:()=>Ec,ez:()=>ta,gd:()=>Xo,mk:()=>mi,q:()=>te,sg:()=>Ji,uU:()=>io,w_:()=>ie});var A=Z(8256);let s=null;function te(){return s}function me(P){s||(s=P)}class ie{}const re=new A.OlP("DocumentToken");let we=(()=>{class P{historyGo(F){throw new Error("Not implemented")}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275prov=A.Yz7({token:P,factory:function(){return function Ie(){return(0,A.LFG)(Ue)}()},providedIn:"platform"}),P})();const Se=new A.OlP("Location Initialized");let Ue=(()=>{class P extends we{constructor(F){super(),this._doc=F,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(F){const K=te().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",F,!1),()=>K.removeEventListener("popstate",F)}onHashChange(F){const K=te().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",F,!1),()=>K.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,K,fe){Ce()?this._history.pushState(F,K,fe):this._location.hash=fe}replaceState(F,K,fe){Ce()?this._history.replaceState(F,K,fe):this._location.hash=fe}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return P.\u0275fac=function(F){return new(F||P)(A.LFG(re))},P.\u0275prov=A.Yz7({token:P,factory:function(){return function ve(){return new Ue((0,A.LFG)(re))}()},providedIn:"platform"}),P})();function Ce(){return!!window.history.pushState}function Oe(P,V){if(0==P.length)return V;if(0==V.length)return P;let F=0;return P.endsWith("/")&&F++,V.startsWith("/")&&F++,2==F?P+V.substring(1):1==F?P+V:P+"/"+V}function Pe(P){const V=P.match(/#|\?|$/),F=V&&V.index||P.length;return P.slice(0,F-("/"===P[F-1]?1:0))+P.slice(F)}function nt(P){return P&&"?"!==P[0]?"?"+P:P}let gt=(()=>{class P{historyGo(F){throw new Error("Not implemented")}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275prov=A.Yz7({token:P,factory:function(){return(0,A.f3M)(ln)},providedIn:"root"}),P})();const Ft=new A.OlP("appBaseHref");let ln=(()=>{class P extends gt{constructor(F,K){super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=K??this._platformLocation.getBaseHrefFromDOM()??(0,A.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return Oe(this._baseHref,F)}path(F=!1){const K=this._platformLocation.pathname+nt(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&F?`${K}${fe}`:K}pushState(F,K,fe,We){const ct=this.prepareExternalUrl(fe+nt(We));this._platformLocation.pushState(F,K,ct)}replaceState(F,K,fe,We){const ct=this.prepareExternalUrl(fe+nt(We));this._platformLocation.replaceState(F,K,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}}return P.\u0275fac=function(F){return new(F||P)(A.LFG(we),A.LFG(Ft,8))},P.\u0275prov=A.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Wt=(()=>{class P extends gt{constructor(F,K){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(F){const K=Oe(this._baseHref,F);return K.length>0?"#"+K:K}pushState(F,K,fe,We){let ct=this.prepareExternalUrl(fe+nt(We));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(F,K,ct)}replaceState(F,K,fe,We){let ct=this.prepareExternalUrl(fe+nt(We));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(F,K,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}}return P.\u0275fac=function(F){return new(F||P)(A.LFG(we),A.LFG(Ft,8))},P.\u0275prov=A.Yz7({token:P,factory:P.\u0275fac}),P})(),Tt=(()=>{class P{constructor(F){this._subject=new A.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const K=this._locationStrategy.getBaseHref();this._basePath=function Mt(P){if(new RegExp("^(https?:)?//").test(P)){const[,F]=P.split(/\/\/[^\/]+/);return F}return P}(Pe(qt(K))),this._locationStrategy.onPopState(fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:fe.state,type:fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,K=""){return this.path()==this.normalize(F+nt(K))}normalize(F){return P.stripTrailingSlash(function Et(P,V){if(!P||!V.startsWith(P))return V;const F=V.substring(P.length);return""===F||["/",";","?","#"].includes(F[0])?F:V}(this._basePath,qt(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,K="",fe=null){this._locationStrategy.pushState(fe,"",F,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+nt(K)),fe)}replaceState(F,K="",fe=null){this._locationStrategy.replaceState(fe,"",F,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+nt(K)),fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)})),()=>{const K=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice(K,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",K){this._urlChangeListeners.forEach(fe=>fe(F,K))}subscribe(F,K,fe){return this._subject.subscribe({next:F,error:K,complete:fe})}}return P.normalizeQueryParams=nt,P.joinWithSlash=Oe,P.stripTrailingSlash=Pe,P.\u0275fac=function(F){return new(F||P)(A.LFG(gt))},P.\u0275prov=A.Yz7({token:P,factory:function(){return function Xe(){return new Tt((0,A.LFG)(gt))}()},providedIn:"root"}),P})();function qt(P){return P.replace(/\/index.html$/,"")}const Fe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var _t=(()=>((_t=_t||{})[_t.Decimal=0]="Decimal",_t[_t.Percent=1]="Percent",_t[_t.Currency=2]="Currency",_t[_t.Scientific=3]="Scientific",_t))(),kt=(()=>((kt=kt||{})[kt.Format=0]="Format",kt[kt.Standalone=1]="Standalone",kt))(),pn=(()=>((pn=pn||{})[pn.Narrow=0]="Narrow",pn[pn.Abbreviated=1]="Abbreviated",pn[pn.Wide=2]="Wide",pn[pn.Short=3]="Short",pn))(),mn=(()=>((mn=mn||{})[mn.Short=0]="Short",mn[mn.Medium=1]="Medium",mn[mn.Long=2]="Long",mn[mn.Full=3]="Full",mn))(),nn=(()=>((nn=nn||{})[nn.Decimal=0]="Decimal",nn[nn.Group=1]="Group",nn[nn.List=2]="List",nn[nn.PercentSign=3]="PercentSign",nn[nn.PlusSign=4]="PlusSign",nn[nn.MinusSign=5]="MinusSign",nn[nn.Exponential=6]="Exponential",nn[nn.SuperscriptingExponent=7]="SuperscriptingExponent",nn[nn.PerMille=8]="PerMille",nn[nn.Infinity=9]="Infinity",nn[nn.NaN=10]="NaN",nn[nn.TimeSeparator=11]="TimeSeparator",nn[nn.CurrencyDecimal=12]="CurrencyDecimal",nn[nn.CurrencyGroup=13]="CurrencyGroup",nn))();function vt(P,V){return ti((0,A.cg1)(P)[A.wAp.DateFormat],V)}function pt(P,V){return ti((0,A.cg1)(P)[A.wAp.TimeFormat],V)}function fn(P,V){return ti((0,A.cg1)(P)[A.wAp.DateTimeFormat],V)}function En(P,V){const F=(0,A.cg1)(P),K=F[A.wAp.NumberSymbols][V];if(typeof K>"u"){if(V===nn.CurrencyDecimal)return F[A.wAp.NumberSymbols][nn.Decimal];if(V===nn.CurrencyGroup)return F[A.wAp.NumberSymbols][nn.Group]}return K}function er(P,V){return(0,A.cg1)(P)[A.wAp.NumberFormats][V]}function rr(P){if(!P[A.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[A.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ti(P,V){for(let F=V;F>-1;F--)if(typeof P[F]<"u")return P[F];throw new Error("Locale data API: locale data undefined")}function or(P){const[V,F]=P.split(":");return{hours:+V,minutes:+F}}const jr=2,lo=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,uo={},Ea=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var wr=(()=>((wr=wr||{})[wr.Short=0]="Short",wr[wr.ShortGMT=1]="ShortGMT",wr[wr.Long=2]="Long",wr[wr.Extended=3]="Extended",wr))(),Pt=(()=>((Pt=Pt||{})[Pt.FullYear=0]="FullYear",Pt[Pt.Month=1]="Month",Pt[Pt.Date=2]="Date",Pt[Pt.Hours=3]="Hours",Pt[Pt.Minutes=4]="Minutes",Pt[Pt.Seconds=5]="Seconds",Pt[Pt.FractionalSeconds=6]="FractionalSeconds",Pt[Pt.Day=7]="Day",Pt))(),Dn=(()=>((Dn=Dn||{})[Dn.DayPeriods=0]="DayPeriods",Dn[Dn.Days=1]="Days",Dn[Dn.Months=2]="Months",Dn[Dn.Eras=3]="Eras",Dn))();function du(P,V,F,K){let fe=function Aa(P){if(Ke(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[fe,We=1,ct=1]=P.split("-").map(hn=>+hn);return Wr(fe,We-1,ct)}const F=parseFloat(P);if(!isNaN(P-F))return new Date(F);let K;if(K=P.match(lo))return function Wa(P){const V=new Date(0);let F=0,K=0;const fe=P[8]?V.setUTCFullYear:V.setFullYear,We=P[8]?V.setUTCHours:V.setHours;P[9]&&(F=Number(P[9]+P[10]),K=Number(P[9]+P[11])),fe.call(V,Number(P[1]),Number(P[2])-1,Number(P[3]));const ct=Number(P[4]||0)-F,hn=Number(P[5]||0)-K,Cr=Number(P[6]||0),Er=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return We.call(V,ct,hn,Cr,Er),V}(K)}const V=new Date(P);if(!Ke(V))throw new Error(`Unable to convert "${P}" into a date`);return V}(P);V=bi(F,V)||V;let hn,ct=[];for(;V;){if(hn=Ea.exec(V),!hn){ct.push(V);break}{ct=ct.concat(hn.slice(1));const hr=ct.pop();if(!hr)break;V=hr}}let Cr=fe.getTimezoneOffset();K&&(Cr=Ko(K,Cr),fe=function Sa(P,V,F){const K=F?-1:1,fe=P.getTimezoneOffset();return function yc(P,V){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+V),P}(P,K*(Ko(V,fe)-fe))}(fe,K,!0));let Er="";return ct.forEach(hr=>{const Ln=function Nr(P){if(Wo[P])return Wo[P];let V;switch(P){case"G":case"GG":case"GGG":V=Yn(Dn.Eras,pn.Abbreviated);break;case"GGGG":V=Yn(Dn.Eras,pn.Wide);break;case"GGGGG":V=Yn(Dn.Eras,pn.Narrow);break;case"y":V=Rr(Pt.FullYear,1,0,!1,!0);break;case"yy":V=Rr(Pt.FullYear,2,0,!0,!0);break;case"yyy":V=Rr(Pt.FullYear,3,0,!1,!0);break;case"yyyy":V=Rr(Pt.FullYear,4,0,!1,!0);break;case"Y":V=Yi(1);break;case"YY":V=Yi(2,!0);break;case"YYY":V=Yi(3);break;case"YYYY":V=Yi(4);break;case"M":case"L":V=Rr(Pt.Month,1,1);break;case"MM":case"LL":V=Rr(Pt.Month,2,1);break;case"MMM":V=Yn(Dn.Months,pn.Abbreviated);break;case"MMMM":V=Yn(Dn.Months,pn.Wide);break;case"MMMMM":V=Yn(Dn.Months,pn.Narrow);break;case"LLL":V=Yn(Dn.Months,pn.Abbreviated,kt.Standalone);break;case"LLLL":V=Yn(Dn.Months,pn.Wide,kt.Standalone);break;case"LLLLL":V=Yn(Dn.Months,pn.Narrow,kt.Standalone);break;case"w":V=Ro(1);break;case"ww":V=Ro(2);break;case"W":V=Ro(1,!0);break;case"d":V=Rr(Pt.Date,1);break;case"dd":V=Rr(Pt.Date,2);break;case"c":case"cc":V=Rr(Pt.Day,1);break;case"ccc":V=Yn(Dn.Days,pn.Abbreviated,kt.Standalone);break;case"cccc":V=Yn(Dn.Days,pn.Wide,kt.Standalone);break;case"ccccc":V=Yn(Dn.Days,pn.Narrow,kt.Standalone);break;case"cccccc":V=Yn(Dn.Days,pn.Short,kt.Standalone);break;case"E":case"EE":case"EEE":V=Yn(Dn.Days,pn.Abbreviated);break;case"EEEE":V=Yn(Dn.Days,pn.Wide);break;case"EEEEE":V=Yn(Dn.Days,pn.Narrow);break;case"EEEEEE":V=Yn(Dn.Days,pn.Short);break;case"a":case"aa":case"aaa":V=Yn(Dn.DayPeriods,pn.Abbreviated);break;case"aaaa":V=Yn(Dn.DayPeriods,pn.Wide);break;case"aaaaa":V=Yn(Dn.DayPeriods,pn.Narrow);break;case"b":case"bb":case"bbb":V=Yn(Dn.DayPeriods,pn.Abbreviated,kt.Standalone,!0);break;case"bbbb":V=Yn(Dn.DayPeriods,pn.Wide,kt.Standalone,!0);break;case"bbbbb":V=Yn(Dn.DayPeriods,pn.Narrow,kt.Standalone,!0);break;case"B":case"BB":case"BBB":V=Yn(Dn.DayPeriods,pn.Abbreviated,kt.Format,!0);break;case"BBBB":V=Yn(Dn.DayPeriods,pn.Wide,kt.Format,!0);break;case"BBBBB":V=Yn(Dn.DayPeriods,pn.Narrow,kt.Format,!0);break;case"h":V=Rr(Pt.Hours,1,-12);break;case"hh":V=Rr(Pt.Hours,2,-12);break;case"H":V=Rr(Pt.Hours,1);break;case"HH":V=Rr(Pt.Hours,2);break;case"m":V=Rr(Pt.Minutes,1);break;case"mm":V=Rr(Pt.Minutes,2);break;case"s":V=Rr(Pt.Seconds,1);break;case"ss":V=Rr(Pt.Seconds,2);break;case"S":V=Rr(Pt.FractionalSeconds,1);break;case"SS":V=Rr(Pt.FractionalSeconds,2);break;case"SSS":V=Rr(Pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":V=Fi(wr.Short);break;case"ZZZZZ":V=Fi(wr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":V=Fi(wr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":V=Fi(wr.Long);break;default:return null}return Wo[P]=V,V}(hr);Er+=Ln?Ln(fe,F,Cr):"''"===hr?"'":hr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Er}function Wr(P,V,F){const K=new Date(0);return K.setFullYear(P,V,F),K.setHours(0,0,0),K}function bi(P,V){const F=function Ur(P){return(0,A.cg1)(P)[A.wAp.LocaleId]}(P);if(uo[F]=uo[F]||{},uo[F][V])return uo[F][V];let K="";switch(V){case"shortDate":K=vt(P,mn.Short);break;case"mediumDate":K=vt(P,mn.Medium);break;case"longDate":K=vt(P,mn.Long);break;case"fullDate":K=vt(P,mn.Full);break;case"shortTime":K=pt(P,mn.Short);break;case"mediumTime":K=pt(P,mn.Medium);break;case"longTime":K=pt(P,mn.Long);break;case"fullTime":K=pt(P,mn.Full);break;case"short":const fe=bi(P,"shortTime"),We=bi(P,"shortDate");K=Gi(fn(P,mn.Short),[fe,We]);break;case"medium":const ct=bi(P,"mediumTime"),hn=bi(P,"mediumDate");K=Gi(fn(P,mn.Medium),[ct,hn]);break;case"long":const Cr=bi(P,"longTime"),Er=bi(P,"longDate");K=Gi(fn(P,mn.Long),[Cr,Er]);break;case"full":const hr=bi(P,"fullTime"),Ln=bi(P,"fullDate");K=Gi(fn(P,mn.Full),[hr,Ln])}return K&&(uo[F][V]=K),K}function Gi(P,V){return V&&(P=P.replace(/\{([^}]+)}/g,function(F,K){return null!=V&&K in V?V[K]:F})),P}function Kn(P,V,F="-",K,fe){let We="";(P<0||fe&&P<=0)&&(fe?P=1-P:(P=-P,We=F));let ct=String(P);for(;ct.length<V;)ct="0"+ct;return K&&(ct=ct.slice(ct.length-V)),We+ct}function Rr(P,V,F=0,K=!1,fe=!1){return function(We,ct){let hn=function Wi(P,V){switch(P){case Pt.FullYear:return V.getFullYear();case Pt.Month:return V.getMonth();case Pt.Date:return V.getDate();case Pt.Hours:return V.getHours();case Pt.Minutes:return V.getMinutes();case Pt.Seconds:return V.getSeconds();case Pt.FractionalSeconds:return V.getMilliseconds();case Pt.Day:return V.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,We);if((F>0||hn>-F)&&(hn+=F),P===Pt.Hours)0===hn&&-12===F&&(hn=12);else if(P===Pt.FractionalSeconds)return function jn(P,V){return Kn(P,3).substring(0,V)}(hn,V);const Cr=En(ct,nn.MinusSign);return Kn(hn,V,Cr,K,fe)}}function Yn(P,V,F=kt.Format,K=!1){return function(fe,We){return function Ta(P,V,F,K,fe,We){switch(F){case Dn.Months:return function qe(P,V,F){const K=(0,A.cg1)(P),We=ti([K[A.wAp.MonthsFormat],K[A.wAp.MonthsStandalone]],V);return ti(We,F)}(V,fe,K)[P.getMonth()];case Dn.Days:return function Tr(P,V,F){const K=(0,A.cg1)(P),We=ti([K[A.wAp.DaysFormat],K[A.wAp.DaysStandalone]],V);return ti(We,F)}(V,fe,K)[P.getDay()];case Dn.DayPeriods:const ct=P.getHours(),hn=P.getMinutes();if(We){const Er=function Wn(P){const V=(0,A.cg1)(P);return rr(V),(V[A.wAp.ExtraData][2]||[]).map(K=>"string"==typeof K?or(K):[or(K[0]),or(K[1])])}(V),hr=function Zr(P,V,F){const K=(0,A.cg1)(P);rr(K);const We=ti([K[A.wAp.ExtraData][0],K[A.wAp.ExtraData][1]],V)||[];return ti(We,F)||[]}(V,fe,K),Ln=Er.findIndex(tr=>{if(Array.isArray(tr)){const[Pr,oi]=tr,yo=ct>=Pr.hours&&hn>=Pr.minutes,Hs=ct<oi.hours||ct===oi.hours&&hn<oi.minutes;if(Pr.hours<oi.hours){if(yo&&Hs)return!0}else if(yo||Hs)return!0}else if(tr.hours===ct&&tr.minutes===hn)return!0;return!1});if(-1!==Ln)return hr[Ln]}return function gi(P,V,F){const K=(0,A.cg1)(P),We=ti([K[A.wAp.DayPeriodsFormat],K[A.wAp.DayPeriodsStandalone]],V);return ti(We,F)}(V,fe,K)[ct<12?0:1];case Dn.Eras:return function $e(P,V){return ti((0,A.cg1)(P)[A.wAp.Eras],V)}(V,K)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${F}`)}}(fe,We,P,V,F,K)}}function Fi(P){return function(V,F,K){const fe=-1*K,We=En(F,nn.MinusSign),ct=fe>0?Math.floor(fe/60):Math.ceil(fe/60);switch(P){case wr.Short:return(fe>=0?"+":"")+Kn(ct,2,We)+Kn(Math.abs(fe%60),2,We);case wr.ShortGMT:return"GMT"+(fe>=0?"+":"")+Kn(ct,1,We);case wr.Long:return"GMT"+(fe>=0?"+":"")+Kn(ct,2,We)+":"+Kn(Math.abs(fe%60),2,We);case wr.Extended:return 0===K?"Z":(fe>=0?"+":"")+Kn(ct,2,We)+":"+Kn(Math.abs(fe%60),2,We);default:throw new Error(`Unknown zone width "${P}"`)}}}const Ga=0,fo=4;function ho(P){return Wr(P.getFullYear(),P.getMonth(),P.getDate()+(fo-P.getDay()))}function Ro(P,V=!1){return function(F,K){let fe;if(V){const We=new Date(F.getFullYear(),F.getMonth(),1).getDay()-1,ct=F.getDate();fe=1+Math.floor((ct+We)/7)}else{const We=ho(F),ct=function Ki(P){const V=Wr(P,Ga,1).getDay();return Wr(P,0,1+(V<=fo?fo:fo+7)-V)}(We.getFullYear()),hn=We.getTime()-ct.getTime();fe=1+Math.round(hn/6048e5)}return Kn(fe,P,En(K,nn.MinusSign))}}function Yi(P,V=!1){return function(F,K){return Kn(ho(F).getFullYear(),P,En(K,nn.MinusSign),V)}}const Wo={};function Ko(P,V){P=P.replace(/:/g,"");const F=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(F)?V:F}function Ke(P){return P instanceof Date&&!isNaN(P.valueOf())}const De=/^(\d+)?\.((\d+)(-(\d+))?)?$/,le=22,je=".",lt="0",Kt=";",kn=",",Tn="#",Sr="\xa4";function Ri(P,V,F,K,fe,We,ct=!1){let hn="",Cr=!1;if(isFinite(P)){let Er=function Yo(P){let K,fe,We,ct,hn,V=Math.abs(P)+"",F=0;for((fe=V.indexOf(je))>-1&&(V=V.replace(je,"")),(We=V.search(/e/i))>0?(fe<0&&(fe=We),fe+=+V.slice(We+1),V=V.substring(0,We)):fe<0&&(fe=V.length),We=0;V.charAt(We)===lt;We++);if(We===(hn=V.length))K=[0],fe=1;else{for(hn--;V.charAt(hn)===lt;)hn--;for(fe-=We,K=[],ct=0;We<=hn;We++,ct++)K[ct]=Number(V.charAt(We))}return fe>le&&(K=K.splice(0,le-1),F=fe-1,fe=1),{digits:K,exponent:F,integerLen:fe}}(P);ct&&(Er=function md(P){if(0===P.digits[0])return P;const V=P.digits.length-P.integerLen;return P.exponent?P.exponent+=2:(0===V?P.digits.push(0,0):1===V&&P.digits.push(0),P.integerLen+=2),P}(Er));let hr=V.minInt,Ln=V.minFrac,tr=V.maxFrac;if(We){const oa=We.match(De);if(null===oa)throw new Error(`${We} is not a valid digit info`);const Sc=oa[1],Ps=oa[3],xo=oa[5];null!=Sc&&(hr=Da(Sc)),null!=Ps&&(Ln=Da(Ps)),null!=xo?tr=Da(xo):null!=Ps&&Ln>tr&&(tr=Ln)}!function Ja(P,V,F){if(V>F)throw new Error(`The minimum number of digits after fraction (${V}) is higher than the maximum (${F}).`);let K=P.digits,fe=K.length-P.integerLen;const We=Math.min(Math.max(V,fe),F);let ct=We+P.integerLen,hn=K[ct];if(ct>0){K.splice(Math.max(P.integerLen,ct));for(let Ln=ct;Ln<K.length;Ln++)K[Ln]=0}else{fe=Math.max(0,fe),P.integerLen=1,K.length=Math.max(1,ct=We+1),K[0]=0;for(let Ln=1;Ln<ct;Ln++)K[Ln]=0}if(hn>=5)if(ct-1<0){for(let Ln=0;Ln>ct;Ln--)K.unshift(0),P.integerLen++;K.unshift(1),P.integerLen++}else K[ct-1]++;for(;fe<Math.max(0,We);fe++)K.push(0);let Cr=0!==We;const Er=V+P.integerLen,hr=K.reduceRight(function(Ln,tr,Pr,oi){return oi[Pr]=(tr+=Ln)<10?tr:tr-10,Cr&&(0===oi[Pr]&&Pr>=Er?oi.pop():Cr=!1),tr>=10?1:0},0);hr&&(K.unshift(hr),P.integerLen++)}(Er,Ln,tr);let Pr=Er.digits,oi=Er.integerLen;const yo=Er.exponent;let Hs=[];for(Cr=Pr.every(oa=>!oa);oi<hr;oi++)Pr.unshift(0);for(;oi<0;oi++)Pr.unshift(0);oi>0?Hs=Pr.splice(oi,Pr.length):(Hs=Pr,Pr=[0]);const sa=[];for(Pr.length>=V.lgSize&&sa.unshift(Pr.splice(-V.lgSize,Pr.length).join(""));Pr.length>V.gSize;)sa.unshift(Pr.splice(-V.gSize,Pr.length).join(""));Pr.length&&sa.unshift(Pr.join("")),hn=sa.join(En(F,K)),Hs.length&&(hn+=En(F,fe)+Hs.join("")),yo&&(hn+=En(F,nn.Exponential)+"+"+yo)}else hn=En(F,nn.Infinity);return hn=P<0&&!Cr?V.negPre+hn+V.negSuf:V.posPre+hn+V.posSuf,hn}function Ya(P,V="-"){const F={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},K=P.split(Kt),fe=K[0],We=K[1],ct=-1!==fe.indexOf(je)?fe.split(je):[fe.substring(0,fe.lastIndexOf(lt)+1),fe.substring(fe.lastIndexOf(lt)+1)],hn=ct[0],Cr=ct[1]||"";F.posPre=hn.substring(0,hn.indexOf(Tn));for(let hr=0;hr<Cr.length;hr++){const Ln=Cr.charAt(hr);Ln===lt?F.minFrac=F.maxFrac=hr+1:Ln===Tn?F.maxFrac=hr+1:F.posSuf+=Ln}const Er=hn.split(kn);if(F.gSize=Er[1]?Er[1].length:0,F.lgSize=Er[2]||Er[1]?(Er[2]||Er[1]).length:0,We){const hr=fe.length-F.posPre.length-F.posSuf.length,Ln=We.indexOf(Tn);F.negPre=We.substring(0,Ln).replace(/'/g,""),F.negSuf=We.slice(Ln+hr).replace(/'/g,"")}else F.negPre=V+F.posPre,F.negSuf=F.posSuf;return F}function Da(P){const V=parseInt(P);if(isNaN(V))throw new Error("Invalid integer literal when parsing "+P);return V}function Kc(P,V){V=encodeURIComponent(V);for(const F of P.split(";")){const K=F.indexOf("="),[fe,We]=-1==K?[F,""]:[F.slice(0,K),F.slice(K+1)];if(fe.trim()===V)return decodeURIComponent(We)}return null}const ar=/\s+/,si=[];let mi=(()=>{class P{constructor(F,K,fe,We){this._iterableDiffers=F,this._keyValueDiffers=K,this._ngEl=fe,this._renderer=We,this.initialClasses=si,this.stateMap=new Map}set klass(F){this.initialClasses=null!=F?F.trim().split(ar):si}set ngClass(F){this.rawClass="string"==typeof F?F.trim().split(ar):F}ngDoCheck(){for(const K of this.initialClasses)this._updateState(K,!0);const F=this.rawClass;if(Array.isArray(F)||F instanceof Set)for(const K of F)this._updateState(K,!0);else if(null!=F)for(const K of Object.keys(F))this._updateState(K,Boolean(F[K]));this._applyStateDiff()}_updateState(F,K){const fe=this.stateMap.get(F);void 0!==fe?(fe.enabled!==K&&(fe.changed=!0,fe.enabled=K),fe.touched=!0):this.stateMap.set(F,{enabled:K,changed:!0,touched:!0})}_applyStateDiff(){for(const F of this.stateMap){const K=F[0],fe=F[1];fe.changed?(this._toggleClass(K,fe.enabled),fe.changed=!1):fe.touched||(fe.enabled&&this._toggleClass(K,!1),this.stateMap.delete(K)),fe.touched=!1}}_toggleClass(F,K){(F=F.trim()).length>0&&F.split(ar).forEach(fe=>{K?this._renderer.addClass(this._ngEl.nativeElement,fe):this._renderer.removeClass(this._ngEl.nativeElement,fe)})}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.ZZ4),A.Y36(A.aQg),A.Y36(A.SBq),A.Y36(A.Qsj))},P.\u0275dir=A.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),P})();class ro{constructor(V,F,K,fe){this.$implicit=V,this.ngForOf=F,this.index=K,this.count=fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ji=(()=>{class P{set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}constructor(F,K,fe){this._viewContainer=F,this._template=K,this._differs=fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const K=this._viewContainer;F.forEachOperation((fe,We,ct)=>{if(null==fe.previousIndex)K.createEmbeddedView(this._template,new ro(fe.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)K.remove(null===We?void 0:We);else if(null!==We){const hn=K.get(We);K.move(hn,ct),Vs(hn,fe)}});for(let fe=0,We=K.length;fe<We;fe++){const hn=K.get(fe).context;hn.index=fe,hn.count=We,hn.ngForOf=this._ngForOf}F.forEachIdentityChange(fe=>{Vs(K.get(fe.currentIndex),fe)})}static ngTemplateContextGuard(F,K){return!0}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.s_b),A.Y36(A.Rgc),A.Y36(A.ZZ4))},P.\u0275dir=A.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function Vs(P,V){P.context.$implicit=V.item}let Fn=(()=>{class P{constructor(F,K){this._viewContainer=F,this._context=new fr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){as("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){as("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,K){return!0}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.s_b),A.Y36(A.Rgc))},P.\u0275dir=A.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class fr{constructor(){this.$implicit=null,this.ngIf=null}}function as(P,V){if(V&&!V.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,A.AaK)(V)}'.`)}function xn(P,V){return new A.vHH(2100,!1)}class Li{createSubscription(V,F){return V.subscribe({next:F,error:K=>{throw K}})}dispose(V){V.unsubscribe()}}class go{createSubscription(V,F){return V.then(F,K=>{throw K})}dispose(V){}}const ka=new go,Qi=new Li;let Xi=(()=>{class P{constructor(F){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=F}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(F){return this._obj?F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue:(F&&this._subscribe(F),this._latestValue)}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,K=>this._updateLatestValue(F,K))}_selectStrategy(F){if((0,A.QGY)(F))return ka;if((0,A.F4k)(F))return Qi;throw xn()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,K){F===this._obj&&(this._latestValue=K,this._ref.markForCheck())}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.sBO,16))},P.\u0275pipe=A.Yjl({name:"async",type:P,pure:!1,standalone:!0}),P})(),Xo=(()=>{class P{transform(F){if(null==F)return null;if("string"!=typeof F)throw xn();return F.toUpperCase()}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275pipe=A.Yjl({name:"uppercase",type:P,pure:!0,standalone:!0}),P})();const Xa=new A.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Lo=new A.OlP("DATE_PIPE_DEFAULT_OPTIONS");let io=(()=>{class P{constructor(F,K,fe){this.locale=F,this.defaultTimezone=K,this.defaultOptions=fe}transform(F,K,fe,We){if(null==F||""===F||F!=F)return null;try{return du(F,K??this.defaultOptions?.dateFormat??"mediumDate",We||this.locale,fe??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(ct){throw xn()}}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.soG,16),A.Y36(Xa,24),A.Y36(Lo,24))},P.\u0275pipe=A.Yjl({name:"date",type:P,pure:!0,standalone:!0}),P})(),Is=(()=>{class P{constructor(F){this._locale=F}transform(F,K,fe){if(!Cc(F))return null;fe=fe||this._locale;try{return function Ka(P,V,F){return Ri(P,Ya(er(V,_t.Decimal),En(V,nn.MinusSign)),V,nn.Group,nn.Decimal,F)}(cs(F),fe,K)}catch(We){throw xn()}}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.soG,16))},P.\u0275pipe=A.Yjl({name:"number",type:P,pure:!0,standalone:!0}),P})(),bc=(()=>{class P{constructor(F,K="USD"){this._locale=F,this._defaultCurrencyCode=K}transform(F,K=this._defaultCurrencyCode,fe="symbol",We,ct){if(!Cc(F))return null;ct=ct||this._locale,"boolean"==typeof fe&&(fe=fe?"symbol":"code");let hn=K||this._defaultCurrencyCode;"code"!==fe&&(hn="symbol"===fe||"symbol-narrow"===fe?function to(P,V,F="en"){const K=function Fr(P){return(0,A.cg1)(P)[A.wAp.Currencies]}(F)[P]||Fe[P]||[],fe=K[1];return"narrow"===V&&"string"==typeof fe?fe:K[0]||P}(hn,"symbol"===fe?"wide":"narrow",ct):fe);try{return function Ia(P,V,F,K,fe){const ct=Ya(er(V,_t.Currency),En(V,nn.MinusSign));return ct.minFrac=function Ss(P){let V;const F=Fe[P];return F&&(V=F[2]),"number"==typeof V?V:jr}(K),ct.maxFrac=ct.minFrac,Ri(P,ct,V,nn.CurrencyGroup,nn.CurrencyDecimal,fe).replace(Sr,F).replace(Sr,"").trim()}(cs(F),ct,hn,K,We)}catch(Cr){throw xn()}}}return P.\u0275fac=function(F){return new(F||P)(A.Y36(A.soG,16),A.Y36(A.EJc,16))},P.\u0275pipe=A.Yjl({name:"currency",type:P,pure:!0,standalone:!0}),P})();function Cc(P){return!(null==P||""===P||P!=P)}function cs(P){if("string"==typeof P&&!isNaN(Number(P)-parseFloat(P)))return Number(P);if("number"!=typeof P)throw new Error(`${P} is not a number`);return P}let Bi=(()=>{class P{transform(F,K,fe){if(null==F)return null;if(!this.supports(F))throw xn();return F.slice(K,fe)}supports(F){return"string"==typeof F||Array.isArray(F)}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275pipe=A.Yjl({name:"slice",type:P,pure:!1,standalone:!0}),P})(),ta=(()=>{class P{}return P.\u0275fac=function(F){return new(F||P)},P.\u0275mod=A.oAB({type:P}),P.\u0275inj=A.cJS({}),P})();const Ec="browser";let so=(()=>{class P{}return P.\u0275prov=(0,A.Yz7)({token:P,providedIn:"root",factory:()=>new mo((0,A.LFG)(re),window)}),P})();class mo{constructor(V,F){this.document=V,this.window=F,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const F=function Wf(P,V){const F=P.getElementById(V)||P.getElementsByName(V)[0];if(F)return F;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const K=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let fe=K.currentNode;for(;fe;){const We=fe.shadowRoot;if(We){const ct=We.getElementById(V)||We.querySelector(`[name="${V}"]`);if(ct)return ct}fe=K.nextNode()}}return null}(this.document,V);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=V)}}scrollToElement(V){const F=V.getBoundingClientRect(),K=F.left+this.window.pageXOffset,fe=F.top+this.window.pageYOffset,We=this.offset();this.window.scrollTo(K-We[0],fe-We[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=Ul(this.window.history)||Ul(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ul(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class Zs{}},8256:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{QbO:()=>b2,tb:()=>k2,AFp:()=>Ny,ip1:()=>Tf,CZH:()=>t0,hGG:()=>F_,z2F:()=>Ku,sBO:()=>kM,Sil:()=>T2,_Vd:()=>gh,EJc:()=>C2,Xts:()=>j1,SBq:()=>um,lqb:()=>Jd,qLn:()=>fm,vpe:()=>Os,XFs:()=>Pt,OlP:()=>Dr,zs3:()=>Yl,ZZ4:()=>Ky,aQg:()=>u0,soG:()=>w_,YKP:()=>HC,h0i:()=>ts,PXZ:()=>F2,R0b:()=>ha,FiY:()=>qd,Lbi:()=>x_,g9A:()=>hi,Qsj:()=>L3,FYo:()=>BS,JOm:()=>Dc,tp0:()=>Gp,Rgc:()=>Gh,dDg:()=>I2,eoX:()=>Vy,GfV:()=>_b,s_b:()=>Kh,ifc:()=>Kt,MMx:()=>_y,Lck:()=>$C,eFA:()=>sp,Gpc:()=>Wt,f3M:()=>yc,$WT:()=>no,_c5:()=>Y2,c2e:()=>bM,zSh:()=>cm,wAp:()=>Rn,vHH:()=>Fe,lri:()=>rp,rWj:()=>o0,D6c:()=>ZM,cg1:()=>qm,kL8:()=>Ng,dqk:()=>Kn,Z0I:()=>or,eJc:()=>d_,CqO:()=>lf,QGY:()=>Rv,F4k:()=>sC,RDi:()=>dS,AaK:()=>gt,qOj:()=>bv,TTD:()=>Qc,_Bn:()=>gy,jDz:()=>GC,xp6:()=>Eb,uIk:()=>Av,Tol:()=>pC,ekj:()=>Hv,Suo:()=>ur,Xpm:()=>md,lG2:()=>No,Yz7:()=>Wn,cJS:()=>Ts,oAB:()=>Qa,Yjl:()=>Kc,Y36:()=>yh,_UZ:()=>Ov,BQk:()=>Cg,ynx:()=>bg,qZA:()=>xg,TgZ:()=>Ph,EpF:()=>Eg,n5z:()=>Nd,LFG:()=>Nr,$8M:()=>Bd,$Z:()=>Ob,NdJ:()=>Nv,CRH:()=>Br,oxw:()=>Dh,ALo:()=>ru,lcZ:()=>Hg,xi3:()=>$g,Dn7:()=>zh,gM2:()=>o2,Q6J:()=>Dv,MGl:()=>df,DdM:()=>r_,VKq:()=>ks,kEZ:()=>nu,iGM:()=>u2,MAs:()=>Pv,KtG:()=>ds,evT:()=>vb,Jf7:()=>jS,CHM:()=>us,LSH:()=>Z1,P3R:()=>om,Udp:()=>hf,YNc:()=>Mh,W1O:()=>My,_uU:()=>yC,Oqu:()=>Yv,hij:()=>pf,AsE:()=>gf,lnq:()=>Nh,Gf:()=>Ay});var A=Z(7579),s=Z(727),te=Z(9751),me=Z(8189),ie=Z(8421),re=Z(515),we=Z(3269),Ie=Z(2076),Ue=Z(930),Ce=Z(4482);function Oe(c,l,...u){if(!0===l)return void c();if(!1===l)return;const f=new Ue.Hp({next:()=>{f.unsubscribe(),c()}});return l(...u).subscribe(f)}function Pe(c){for(let l in c)if(c[l]===Pe)return l;throw Error("Could not find renamed property on target object.")}function nt(c,l){for(const u in l)l.hasOwnProperty(u)&&!c.hasOwnProperty(u)&&(c[u]=l[u])}function gt(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(gt).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const l=c.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Ft(c,l){return null==c||""===c?null===l?"":l:null==l||""===l?c:c+" "+l}const ln=Pe({__forward_ref__:Pe});function Wt(c){return c.__forward_ref__=Wt,c.toString=function(){return gt(this())},c}function Tt(c){return Xe(c)?c():c}function Xe(c){return"function"==typeof c&&c.hasOwnProperty(ln)&&c.__forward_ref__===Wt}function Et(c){return c&&!!c.\u0275providers}const Mt="https://g.co/ng/security#xss";class Fe extends Error{constructor(l,u){super(_t(l,u)),this.code=l}}function _t(c,l){return`NG0${Math.abs(c)}${l?": "+l.trim():""}`}function He(c){return"string"==typeof c?c:null==c?"":String(c)}function Or(c,l){throw new Fe(-201,!1)}function yt(c,l){null==c&&function jt(c,l,u,f){throw new Error(`ASSERTION ERROR: ${c}`+(null==f?"":` [Expected=> ${u} ${f} ${l} <=Actual]`))}(l,c,null,"!=")}function Wn(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Ts(c){return{providers:c.providers||[],imports:c.imports||[]}}function ti(c){return to(c,lo)||to(c,Ea)}function or(c){return null!==ti(c)}function to(c,l){return c.hasOwnProperty(l)?c[l]:null}function Ss(c){return c&&(c.hasOwnProperty(uo)||c.hasOwnProperty(wr))?c[uo]:null}const lo=Pe({\u0275prov:Pe}),uo=Pe({\u0275inj:Pe}),Ea=Pe({ngInjectableDef:Pe}),wr=Pe({ngInjectorDef:Pe});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let Dn;function Wr(c){const l=Dn;return Dn=c,l}function bi(c,l,u){const f=ti(c);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&Pt.Optional?null:void 0!==l?l:void Or(gt(c))}const Kn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yn={},Ta="__NG_DI_FLAG__",Fi="ngTempTokenPath",Ga="ngTokenPath",fo=/\n/gm,Ki="\u0275",ho="__source";let Ro;function Yi(c){const l=Ro;return Ro=c,l}function Wo(c,l=Pt.Default){if(void 0===Ro)throw new Fe(-203,!1);return null===Ro?bi(c,void 0,l):Ro.get(c,l&Pt.Optional?null:void 0,l)}function Nr(c,l=Pt.Default){return(function du(){return Dn}()||Wo)(Tt(c),l)}function yc(c,l=Pt.Default){return Nr(c,Sa(l))}function Sa(c){return typeof c>"u"||"number"==typeof c?c:0|(c.optional&&8)|(c.host&&1)|(c.self&&2)|(c.skipSelf&&4)}function Aa(c){const l=[];for(let u=0;u<c.length;u++){const f=Tt(c[u]);if(Array.isArray(f)){if(0===f.length)throw new Fe(900,!1);let g,_=Pt.Default;for(let x=0;x<f.length;x++){const S=f[x],O=Ke(S);"number"==typeof O?-1===O?g=S.token:_|=O:g=S}l.push(Nr(g,_))}else l.push(Nr(f))}return l}function Wa(c,l){return c[Ta]=l,c.prototype[Ta]=l,c}function Ke(c){return c[Ta]}function je(c){return{toString:c}.toString()}var lt=(()=>((lt=lt||{})[lt.OnPush=0]="OnPush",lt[lt.Default=1]="Default",lt))(),Kt=(()=>{return(c=Kt||(Kt={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",Kt;var c})();const kn={},Tn=[],Sr=Pe({\u0275cmp:Pe}),Ma=Pe({\u0275dir:Pe}),Ri=Pe({\u0275pipe:Pe}),Ia=Pe({\u0275mod:Pe}),Pa=Pe({\u0275fac:Pe}),Ka=Pe({__NG_ELEMENT_ID__:Pe});let Ya=0;function md(c){return je(()=>{const l=Rl(c),u={...l,decls:c.decls,vars:c.vars,template:c.template,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,onPush:c.changeDetection===lt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:l.standalone&&c.dependencies||null,getStandaloneInjector:null,data:c.data||{},encapsulation:c.encapsulation||Kt.Emulated,id:"c"+Ya++,styles:c.styles||Tn,_:null,schemas:c.schemas||null,tView:null};ro(u);const f=c.dependencies;return u.directiveDefs=Ji(f,!1),u.pipeDefs=Ji(f,!0),u})}function Ja(c){return ar(c)||si(c)}function Da(c){return null!==c}function Qa(c){return je(()=>({type:c.type,bootstrap:c.bootstrap||Tn,declarations:c.declarations||Tn,imports:c.imports||Tn,exports:c.exports||Tn,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function Jo(c,l){if(null==c)return kn;const u={};for(const f in c)if(c.hasOwnProperty(f)){let g=c[f],_=g;Array.isArray(g)&&(_=g[1],g=g[0]),u[g]=f,l&&(l[g]=_)}return u}function No(c){return je(()=>{const l=Rl(c);return ro(l),l})}function Kc(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function ar(c){return c[Sr]||null}function si(c){return c[Ma]||null}function mi(c){return c[Ri]||null}function no(c){const l=ar(c)||si(c)||mi(c);return null!==l&&l.standalone}function Kr(c,l){const u=c[Ia]||null;if(!u&&!0===l)throw new Error(`Type ${gt(c)} does not have '\u0275mod' property.`);return u}function Rl(c){const l={};return{type:c.type,providersResolver:null,factory:null,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:l,exportAs:c.exportAs||null,standalone:!0===c.standalone,selectors:c.selectors||Tn,viewQuery:c.viewQuery||null,features:c.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Jo(c.inputs,l),outputs:Jo(c.outputs)}}function ro(c){c.features?.forEach(l=>l(c))}function Ji(c,l){if(!c)return null;const u=l?mi:Ja;return()=>("function"==typeof c?c():c).map(f=>u(f)).filter(Da)}const Vs=0,an=1,Fn=2,fr=3,as=4,Ni=5,Hr=6,Qo=7,$r=8,Yc=9,po=10,Vn=11,fu=12,xc=13,As=14,xn=15,Li=16,go=17,ka=18,Qi=19,Xi=20,hu=21,br=22,Xo=1,Ll=2,Xa=7,Lo=8,io=9,Ir=10;function Ui(c){return Array.isArray(c)&&"object"==typeof c[Xo]}function _i(c){return Array.isArray(c)&&!0===c[Xo]}function wc(c){return 0!=(4&c.flags)}function Ms(c){return c.componentOffset>-1}function ea(c){return 1==(1&c.flags)}function Is(c){return!!c.template}function $n(c){return 0!=(256&c[Fn])}function Zs(c,l){return c.hasOwnProperty(Pa)?c[Pa]:null}class _u{constructor(l,u,f){this.previousValue=l,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function Qc(){return vu}function vu(c){return c.type.prototype.ngOnChanges&&(c.setInput=Xc),xd}function xd(){const c=nc(this),l=c?.current;if(l){const u=c.previous;if(u===kn)c.previous=l;else for(let f in l)u[f]=l[f];c.current=null,this.ngOnChanges(l)}}function Xc(c,l,u,f){const g=this.declaredInputs[u],_=nc(c)||function el(c,l){return c[tc]=l}(c,{previous:kn,current:null}),x=_.current||(_.current={}),S=_.previous,O=S[g];x[g]=new _u(O&&O.currentValue,l,S===kn),c[f]=l}Qc.ngInherit=!0;const tc="__ngSimpleChanges__";function nc(c){return c[tc]||null}const Yr=function(c,l,u){};function Vi(c){for(;Array.isArray(c);)c=c[Vs];return c}function tl(c,l){return Vi(l[c])}function ls(c,l){return Vi(l[c.index])}function Ed(c,l){return c.data[l]}function _o(c,l){return c[l]}function vi(c,l){const u=l[c];return Ui(u)?u:u[Vs]}function k(c){return 64==(64&c[Fn])}function E(c,l){return null==l?null:c[l]}function N(c){c[ka]=0}function j(c,l){c[Ni]+=l;let u=c,f=c[fr];for(;null!==f&&(1===l&&1===u[Ni]||-1===l&&0===u[Ni]);)f[Ni]+=l,u=f,f=f[fr]}const H={lFrame:Lp(null),bindingsEnabled:!0};function vn(){return H.bindingsEnabled}function ot(){return H.lFrame.lView}function yn(){return H.lFrame.tView}function us(c){return H.lFrame.contextLView=c,c[$r]}function ds(c){return H.lFrame.contextLView=null,c}function _r(){let c=js();for(;null!==c&&64===c.type;)c=c.parent;return c}function js(){return H.lFrame.currentTNode}function Zi(c,l){const u=H.lFrame;u.currentTNode=c,u.isParent=l}function ia(){return H.lFrame.isParent}function Td(){H.lFrame.isParent=!1}function fs(){const c=H.lFrame;let l=c.bindingRootIndex;return-1===l&&(l=c.bindingRootIndex=c.tView.bindingStartIndex),l}function vo(){return H.lFrame.bindingIndex}function Bl(){return H.lFrame.bindingIndex++}function ic(c){const l=H.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+c,u}function Fp(c,l){const u=H.lFrame;u.bindingIndex=u.bindingRootIndex=c,Vl(l)}function Vl(c){H.lFrame.currentDirectiveIndex=c}function Qf(){return H.lFrame.currentQueryIndex}function nl(c){H.lFrame.currentQueryIndex=c}function Xf(c){const l=c[an];return 2===l.type?l.declTNode:1===l.type?c[Hr]:null}function Np(c,l,u){if(u&Pt.SkipSelf){let g=l,_=c;for(;!(g=g.parent,null!==g||u&Pt.Host||(g=Xf(_),null===g||(_=_[xn],10&g.type))););if(null===g)return!1;l=g,c=_}const f=H.lFrame=eh();return f.currentTNode=l,f.lView=c,!0}function Id(c){const l=eh(),u=c[an];H.lFrame=l,l.currentTNode=u.firstChild,l.lView=c,l.tView=u,l.contextLView=c,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function eh(){const c=H.lFrame,l=null===c?null:c.child;return null===l?Lp(c):l}function Lp(c){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=l),l}function Up(){const c=H.lFrame;return H.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const th=Up;function nh(){const c=Up();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function qs(){return H.lFrame.selectedIndex}function rl(c){H.lFrame.selectedIndex=c}function ni(){const c=H.lFrame;return Ed(c.tView,c.selectedIndex)}function We(c,l){for(let u=l.directiveStart,f=l.directiveEnd;u<f;u++){const _=c.data[u].type.prototype,{ngAfterContentInit:x,ngAfterContentChecked:S,ngAfterViewInit:O,ngAfterViewChecked:B,ngOnDestroy:G}=_;x&&(c.contentHooks??(c.contentHooks=[])).push(-u,x),S&&((c.contentHooks??(c.contentHooks=[])).push(u,S),(c.contentCheckHooks??(c.contentCheckHooks=[])).push(u,S)),O&&(c.viewHooks??(c.viewHooks=[])).push(-u,O),B&&((c.viewHooks??(c.viewHooks=[])).push(u,B),(c.viewCheckHooks??(c.viewCheckHooks=[])).push(u,B)),null!=G&&(c.destroyHooks??(c.destroyHooks=[])).push(u,G)}}function ct(c,l,u){Er(c,l,3,u)}function hn(c,l,u,f){(3&c[Fn])===u&&Er(c,l,u,f)}function Cr(c,l){let u=c[Fn];(3&u)===l&&(u&=2047,u+=1,c[Fn]=u)}function Er(c,l,u,f){const _=f??-1,x=l.length-1;let S=0;for(let O=void 0!==f?65535&c[ka]:0;O<x;O++)if("number"==typeof l[O+1]){if(S=l[O],null!=f&&S>=f)break}else l[O]<0&&(c[ka]+=65536),(S<_||-1==_)&&(hr(c,u,l,O),c[ka]=(4294901760&c[ka])+O+2),O++}function hr(c,l,u,f){const g=u[f]<0,_=u[f+1],S=c[g?-u[f]:u[f]];if(g){if(c[Fn]>>11<c[ka]>>16&&(3&c[Fn])===l){c[Fn]+=2048,Yr(4,S,_);try{_.call(S)}finally{Yr(5,S,_)}}}else{Yr(4,S,_);try{_.call(S)}finally{Yr(5,S,_)}}}const Ln=-1;class tr{constructor(l,u,f){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function xo(c,l,u){let f=0;for(;f<u.length;){const g=u[f];if("number"==typeof g){if(0!==g)break;f++;const _=u[f++],x=u[f++],S=u[f++];c.setAttribute(l,x,S,_)}else{const _=g,x=u[++f];j0(_)?c.setProperty(l,_,x):c.setAttribute(l,_,x),f++}}return f}function Bp(c){return 3===c||4===c||6===c}function j0(c){return 64===c.charCodeAt(0)}function Pd(c,l){if(null!==l&&0!==l.length)if(null===c||0===c.length)c=l.slice();else{let u=-1;for(let f=0;f<l.length;f++){const g=l[f];"number"==typeof g?u=g:0===u||Vp(c,u,g,null,-1===u||2===u?l[++f]:null)}}return c}function Vp(c,l,u,f,g){let _=0,x=c.length;if(-1===l)x=-1;else for(;_<c.length;){const S=c[_++];if("number"==typeof S){if(S===l){x=-1;break}if(S>l){x=_-1;break}}}for(;_<c.length;){const S=c[_];if("number"==typeof S)break;if(S===u){if(null===f)return void(null!==g&&(c[_+1]=g));if(f===c[_+1])return void(c[_+2]=g)}_++,null!==f&&_++,null!==g&&_++}-1!==x&&(c.splice(x,0,l),_=x+1),c.splice(_++,0,u),null!==f&&c.splice(_++,0,f),null!==g&&c.splice(_++,0,g)}function Zp(c){return c!==Ln}function jp(c){return 32767&c}function Ac(c,l){let u=function q0(c){return c>>16}(c),f=l;for(;u>0;)f=f[xn],u--;return f}let qp=!0;function Dd(c){const l=qp;return qp=c,l}const rh=255,kd=5;let ih=0;const Uo={};function yu(c,l){const u=Od(c,l);if(-1!==u)return u;const f=l[an];f.firstCreatePass&&(c.injectorIndex=l.length,wo(f.data,c),wo(l,null),wo(f.blueprint,null));const g=xu(c,l),_=c.injectorIndex;if(Zp(g)){const x=jp(g),S=Ac(g,l),O=S[an].data;for(let B=0;B<8;B++)l[_+B]=S[x+B]|O[x+B]}return l[_+8]=g,_}function wo(c,l){c.push(0,0,0,0,0,0,0,0,l)}function Od(c,l){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===l[c.injectorIndex+8]?-1:c.injectorIndex}function xu(c,l){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let u=0,f=null,g=l;for(;null!==g;){if(f=Ud(g),null===f)return Ln;if(u++,g=g[xn],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return Ln}function sh(c,l,u){!function oo(c,l,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(Ka)&&(f=u[Ka]),null==f&&(f=u[Ka]=ih++);const g=f&rh;l.data[c+(g>>kd)]|=1<<g}(c,l,u)}function $0(c,l,u){if(u&Pt.Optional||void 0!==c)return c;Or()}function z0(c,l,u,f){if(u&Pt.Optional&&void 0===f&&(f=null),!(u&(Pt.Self|Pt.Host))){const g=c[Yc],_=Wr(void 0);try{return g?g.get(l,f,u&Pt.Optional):bi(l,f,u&Pt.Optional)}finally{Wr(_)}}return $0(f,0,u)}function Fd(c,l,u,f=Pt.Default,g){if(null!==c){if(1024&l[Fn]){const x=function W0(c,l,u,f,g){let _=c,x=l;for(;null!==_&&null!==x&&1024&x[Fn]&&!(256&x[Fn]);){const S=sc(_,x,u,f|Pt.Self,Uo);if(S!==Uo)return S;let O=_.parent;if(!O){const B=x[hu];if(B){const G=B.get(u,Uo,f);if(G!==Uo)return G}O=Ud(x),x=x[xn]}_=O}return g}(c,l,u,f,Uo);if(x!==Uo)return x}const _=sc(c,l,u,f,Uo);if(_!==Uo)return _}return z0(l,u,f,g)}function sc(c,l,u,f,g){const _=function wu(c){if("string"==typeof c)return c.charCodeAt(0)||0;const l=c.hasOwnProperty(Ka)?c[Ka]:void 0;return"number"==typeof l?l>=0?l&rh:G0:l}(u);if("function"==typeof _){if(!Np(l,c,f))return f&Pt.Host?$0(g,0,f):z0(l,u,f,g);try{const x=_(f);if(null!=x||f&Pt.Optional)return x;Or()}finally{th()}}else if("number"==typeof _){let x=null,S=Od(c,l),O=Ln,B=f&Pt.Host?l[Li][Hr]:null;for((-1===S||f&Pt.SkipSelf)&&(O=-1===S?xu(c,l):l[S+8],O!==Ln&&Mc(f,!1)?(x=l[an],S=jp(O),l=Ac(O,l)):S=-1);-1!==S;){const G=l[an];if(jl(_,S,G.data)){const oe=bo(S,l,u,x,f,B);if(oe!==Uo)return oe}O=l[S+8],O!==Ln&&Mc(f,l[an].data[S+8]===B)&&jl(_,S,l)?(x=G,S=jp(O),l=Ac(O,l)):S=-1}}return g}function bo(c,l,u,f,g,_){const x=l[an],S=x.data[c+8],G=Rd(S,x,u,null==f?Ms(S)&&qp:f!=x&&0!=(3&S.type),g&Pt.Host&&_===S);return null!==G?Ei(l,x,G,S):Uo}function Rd(c,l,u,f,g){const _=c.providerIndexes,x=l.data,S=1048575&_,O=c.directiveStart,G=_>>20,Te=g?S+G:c.directiveEnd;for(let Ze=f?S:S+G;Ze<Te;Ze++){const ut=x[Ze];if(Ze<O&&u===ut||Ze>=O&&ut.type===u)return Ze}if(g){const Ze=x[O];if(Ze&&Is(Ze)&&Ze.type===u)return O}return null}function Ei(c,l,u,f){let g=c[u];const _=l.data;if(function Pr(c){return c instanceof tr}(g)){const x=g;x.resolving&&function pn(c,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${c}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${c}${u}`)}(function kt(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():He(c)}(_[u]));const S=Dd(x.canSeeViewProviders);x.resolving=!0;const O=x.injectImpl?Wr(x.injectImpl):null;Np(c,f,Pt.Default);try{g=c[u]=x.factory(void 0,_,c,f),l.firstCreatePass&&u>=f.directiveStart&&function fe(c,l,u){const{ngOnChanges:f,ngOnInit:g,ngDoCheck:_}=l.type.prototype;if(f){const x=vu(l);(u.preOrderHooks??(u.preOrderHooks=[])).push(c,x),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(c,x)}g&&(u.preOrderHooks??(u.preOrderHooks=[])).push(0-c,g),_&&((u.preOrderHooks??(u.preOrderHooks=[])).push(c,_),(u.preOrderCheckHooks??(u.preOrderCheckHooks=[])).push(c,_))}(u,_[u],l)}finally{null!==O&&Wr(O),Dd(S),x.resolving=!1,th()}}return g}function jl(c,l,u){return!!(u[l+(c>>kd)]&1<<c)}function Mc(c,l){return!(c&Pt.Self||c&Pt.Host&&l)}class oc{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,f){return Fd(this._tNode,this._lView,l,Sa(f),u)}}function G0(){return new oc(_r(),ot())}function Nd(c){return je(()=>{const l=c.prototype.constructor,u=l[Pa]||Ld(l),f=Object.prototype;let g=Object.getPrototypeOf(c.prototype).constructor;for(;g&&g!==f;){const _=g[Pa]||Ld(g);if(_&&_!==u)return _;g=Object.getPrototypeOf(g)}return _=>new _})}function Ld(c){return Xe(c)?()=>{const l=Ld(Tt(c));return l&&l()}:Zs(c)}function Ud(c){const l=c[an],u=l.type;return 2===u?l.declTNode:1===u?c[Hr]:null}function Bd(c){return function oh(c,l){if("class"===l)return c.classes;if("style"===l)return c.styles;const u=c.attrs;if(u){const f=u.length;let g=0;for(;g<f;){const _=u[g];if(Bp(_))break;if(0===_)g+=2;else if("number"==typeof _)for(g++;g<f&&"string"==typeof u[g];)g++;else{if(_===l)return u[g+1];g+=2}}}return null}(_r(),c)}const Cu="__parameters__";function il(c,l,u){return je(()=>{const f=function Eu(c){return function(...u){if(c){const f=c(...u);for(const g in f)this[g]=f[g]}}}(l);function g(..._){if(this instanceof g)return f.apply(this,_),this;const x=new g(..._);return S.annotation=x,S;function S(O,B,G){const oe=O.hasOwnProperty(Cu)?O[Cu]:Object.defineProperty(O,Cu,{value:[]})[Cu];for(;oe.length<=G;)oe.push(null);return(oe[G]=oe[G]||[]).push(x),O}}return u&&(g.prototype=Object.create(u.prototype)),g.prototype.ngMetadataName=c,g.annotationCls=g,g})}class Dr{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Wn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function v(c,l){c.forEach(u=>Array.isArray(u)?v(u,l):l(u))}function I(c,l,u){l>=c.length?c.push(u):c.splice(l,0,u)}function L(c,l){return l>=c.length-1?c.pop():c.splice(l,1)[0]}function Ht(c,l,u){let f=ai(c,l);return f>=0?c[1|f]=u:(f=~f,function ft(c,l,u,f){let g=c.length;if(g==l)c.push(u,f);else if(1===g)c.push(f,c[0]),c[0]=u;else{for(g--,c.push(c[g-1],c[g]);g>l;)c[g]=c[g-2],g--;c[l]=u,c[l+1]=f}}(c,f,l,u)),f}function lr(c,l){const u=ai(c,l);if(u>=0)return c[1|u]}function ai(c,l){return function ac(c,l,u){let f=0,g=c.length>>u;for(;g!==f;){const _=f+(g-f>>1),x=c[_<<u];if(l===x)return _<<u;x>l?g=_:f=_+1}return~(g<<u)}(c,l,1)}const qd=Wa(il("Optional"),8),Gp=Wa(il("SkipSelf"),4);var Dc=(()=>((Dc=Dc||{})[Dc.Important=1]="Important",Dc[Dc.DashCase=2]="DashCase",Dc))();const P1=new Map;let D1=0;const em="__ngContext__";function Co(c,l){Ui(l)?(c[em]=l[Xi],function Mw(c){P1.set(c[Xi],c)}(l)):c[em]=l}let Nw;function Lw(c,l){return Nw(c,l)}function be(c){const l=c[fr];return _i(l)?l[fr]:l}function kc(c){return ri(c[xc])}function Hl(c){return ri(c[as])}function ri(c){for(;null!==c&&!_i(c);)c=c[as];return c}function $l(c,l,u,f,g){if(null!=f){let _,x=!1;_i(f)?_=f:Ui(f)&&(x=!0,f=f[Vs]);const S=Vi(f);0===c&&null!==u?null==g?Zw(l,u,S):Wd(l,u,S,g||null,!0):1===c&&null!==u?Wd(l,u,S,g||null,!0):2===c?function R1(c,l,u){const f=rm(c,l);f&&function nS(c,l,u,f){c.removeChild(l,u,f)}(c,f,l,u)}(l,S,x):3===c&&l.destroyNode(S),null!=_&&function sS(c,l,u,f,g){const _=u[Xa];_!==Vi(u)&&$l(l,c,f,_,g);for(let S=Ir;S<u.length;S++){const O=u[S];tg(O[an],O,c,l,f,_)}}(l,c,_,u,g)}}function dh(c,l,u){return c.createElement(l,u)}function Uw(c,l){const u=c[io],f=u.indexOf(l),g=l[fr];512&l[Fn]&&(l[Fn]&=-513,j(g,-1)),u.splice(f,1)}function k1(c,l){if(c.length<=Ir)return;const u=Ir+l,f=c[u];if(f){const g=f[go];null!==g&&g!==c&&Uw(g,f),l>0&&(c[u-1][as]=f[as]);const _=L(c,Ir+l);!function WT(c,l){tg(c,l,l[Vn],2,null,null),l[Vs]=null,l[Hr]=null}(f[an],f);const x=_[Qi];null!==x&&x.detachView(_[an]),f[fr]=null,f[as]=null,f[Fn]&=-65}return f}function ol(c,l){if(!(128&l[Fn])){const u=l[Vn];u.destroyNode&&tg(c,l,u,3,null,null),function JT(c){let l=c[xc];if(!l)return O1(c[an],c);for(;l;){let u=null;if(Ui(l))u=l[xc];else{const f=l[Ir];f&&(u=f)}if(!u){for(;l&&!l[as]&&l!==c;)Ui(l)&&O1(l[an],l),l=l[fr];null===l&&(l=c),Ui(l)&&O1(l[an],l),u=l&&l[as]}l=u}}(l)}}function O1(c,l){if(!(128&l[Fn])){l[Fn]&=-65,l[Fn]|=128,function tS(c,l){let u;if(null!=c&&null!=(u=c.destroyHooks))for(let f=0;f<u.length;f+=2){const g=l[u[f]];if(!(g instanceof tr)){const _=u[f+1];if(Array.isArray(_))for(let x=0;x<_.length;x+=2){const S=g[_[x]],O=_[x+1];Yr(4,S,O);try{O.call(S)}finally{Yr(5,S,O)}}else{Yr(4,g,_);try{_.call(g)}finally{Yr(5,g,_)}}}}}(c,l),function eS(c,l){const u=c.cleanup,f=l[Qo];let g=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const x=u[_+3];x>=0?f[g=x]():f[g=-x].unsubscribe(),_+=2}else{const x=f[g=u[_+1]];u[_].call(x)}if(null!==f){for(let _=g+1;_<f.length;_++)(0,f[_])();l[Qo]=null}}(c,l),1===l[an].type&&l[Vn].destroy();const u=l[go];if(null!==u&&_i(l[fr])){u!==l[fr]&&Uw(u,l);const f=l[Qi];null!==f&&f.detachView(c)}!function qT(c){P1.delete(c[Xi])}(l)}}function Bw(c,l,u){return function Vw(c,l,u){let f=l;for(;null!==f&&40&f.type;)f=(l=f).parent;if(null===f)return u[Vs];{const{componentOffset:g}=f;if(g>-1){const{encapsulation:_}=c.data[f.directiveStart+g];if(_===Kt.None||_===Kt.Emulated)return null}return ls(f,u)}}(c,l.parent,u)}function Wd(c,l,u,f,g){c.insertBefore(l,u,f,g)}function Zw(c,l,u){c.appendChild(l,u)}function jw(c,l,u,f,g){null!==f?Wd(c,l,u,f,g):Zw(c,l,u)}function rm(c,l){return c.parentNode(l)}let F1,Yd,sm,$w=function Hw(c,l,u){return 40&c.type?ls(c,u):null};function fh(c,l,u,f){const g=Bw(c,f,l),_=l[Vn],S=function qw(c,l,u){return $w(c,l,u)}(f.parent||l[Hr],f,l);if(null!=g)if(Array.isArray(u))for(let O=0;O<u.length;O++)jw(_,g,u[O],S,!1);else jw(_,g,u,S,!1);void 0!==F1&&F1(_,f,l,u,g)}function im(c,l){if(null!==l){const u=l.type;if(3&u)return ls(l,c);if(4&u)return Kd(-1,c[l.index]);if(8&u){const f=l.child;if(null!==f)return im(c,f);{const g=c[l.index];return _i(g)?Kd(-1,g):Vi(g)}}if(32&u)return Lw(l,c)()||Vi(c[l.index]);{const f=Gw(c,l);return null!==f?Array.isArray(f)?f[0]:im(be(c[Li]),f):im(c,l.next)}}return null}function Gw(c,l){return null!==l?c[Li][Hr].projection[l.projection]:null}function Kd(c,l){const u=Ir+c+1;if(u<l.length){const f=l[u],g=f[an].firstChild;if(null!==g)return im(f,g)}return l[Xa]}function N1(c,l,u,f,g,_,x){for(;null!=u;){const S=f[u.index],O=u.type;if(x&&0===l&&(S&&Co(Vi(S),f),u.flags|=2),32!=(32&u.flags))if(8&O)N1(c,l,u.child,f,g,_,!1),$l(l,c,g,S,_);else if(32&O){const B=Lw(u,f);let G;for(;G=B();)$l(l,c,g,G,_);$l(l,c,g,S,_)}else 16&O?Ww(c,l,f,u,g,_):$l(l,c,g,S,_);u=x?u.projectionNext:u.next}}function tg(c,l,u,f,g,_){N1(u,f,c.firstChild,l,g,_,!1)}function Ww(c,l,u,f,g,_){const x=u[Li],O=x[Hr].projection[f.projection];if(Array.isArray(O))for(let B=0;B<O.length;B++)$l(l,c,g,O[B],_);else N1(c,l,O,x[fr],g,_,!0)}function Kw(c,l,u){""===u?c.removeAttribute(l,"class"):c.setAttribute(l,"class",u)}function Yw(c,l,u){const{mergedAttrs:f,classes:g,styles:_}=u;null!==f&&xo(c,l,f),null!==g&&Kw(c,l,g),null!==_&&function aS(c,l,u){c.setAttribute(l,"style",u)}(c,l,_)}function dS(c){Yd=c}function eb(c){return function L1(){if(void 0===sm&&(sm=null,Kn.trustedTypes))try{sm=Kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch{}return sm}()?.createScriptURL(c)||c}class tb{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mt})`}}function Su(c){return c instanceof tb?c.changingThisBreaksApplicationSecurity:c}function rg(c,l){const u=function nb(c){return c instanceof tb&&c.getTypeName()||null}(c);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see ${Mt})`)}return u===l}const xS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ps=(()=>((ps=ps||{})[ps.NONE=0]="NONE",ps[ps.HTML=1]="HTML",ps[ps.STYLE=2]="STYLE",ps[ps.SCRIPT=3]="SCRIPT",ps[ps.URL=4]="URL",ps[ps.RESOURCE_URL=5]="RESOURCE_URL",ps))();function Z1(c){const l=hh();return l?l.sanitize(ps.URL,c)||"":rg(c,"URL")?Su(c):function U1(c){return(c=String(c)).match(xS)?c:"unsafe:"+c}(He(c))}function lb(c){const l=hh();if(l)return eb(l.sanitize(ps.RESOURCE_URL,c)||"");if(rg(c,"ResourceURL"))return eb(Su(c));throw new Fe(904,!1)}function om(c,l,u){return function kS(c,l){return"src"===l&&("embed"===c||"frame"===c||"iframe"===c||"media"===c||"script"===c)||"href"===l&&("base"===c||"link"===c)?lb:Z1}(l,u)(c)}function hh(){const c=ot();return c&&c[fu]}const j1=new Dr("ENVIRONMENT_INITIALIZER"),q1=new Dr("INJECTOR",-1),ub=new Dr("INJECTOR_DEF_TYPES");class db{get(l,u=Yn){if(u===Yn){const f=new Error(`NullInjectorError: No provider for ${gt(l)}!`);throw f.name="NullInjectorError",f}return u}}function am(...c){return{\u0275providers:OS(0,c),\u0275fromNgModule:!0}}function OS(c,...l){const u=[],f=new Set;let g;return v(l,_=>{const x=_;z1(x,u,[],f)&&(g||(g=[]),g.push(x))}),void 0!==g&&$1(g,u),u}function $1(c,l){for(let u=0;u<c.length;u++){const{providers:g}=c[u];G1(g,_=>{l.push(_)})}}function z1(c,l,u,f){if(!(c=Tt(c)))return!1;let g=null,_=Ss(c);const x=!_&&ar(c);if(_||x){if(x&&!x.standalone)return!1;g=c}else{const O=c.ngModule;if(_=Ss(O),!_)return!1;g=O}const S=f.has(g);if(x){if(S)return!1;if(f.add(g),x.dependencies){const O="function"==typeof x.dependencies?x.dependencies():x.dependencies;for(const B of O)z1(B,l,u,f)}}else{if(!_)return!1;{if(null!=_.imports&&!S){let B;f.add(g);try{v(_.imports,G=>{z1(G,l,u,f)&&(B||(B=[]),B.push(G))})}finally{}void 0!==B&&$1(B,l)}if(!S){const B=Zs(g)||(()=>new g);l.push({provide:g,useFactory:B,deps:Tn},{provide:ub,useValue:g,multi:!0},{provide:j1,useValue:()=>Nr(g),multi:!0})}const O=_.providers;null==O||S||G1(O,G=>{l.push(G)})}}return g!==c&&void 0!==c.providers}function G1(c,l){for(let u of c)Et(u)&&(u=u.\u0275providers),Array.isArray(u)?G1(u,l):l(u)}const FS=Pe({provide:String,useValue:Pe});function W1(c){return null!==c&&"object"==typeof c&&FS in c}function Au(c){return"function"==typeof c}const cm=new Dr("Set Injector scope."),og={},hb={};let Ti;function lm(){return void 0===Ti&&(Ti=new db),Ti}class Jd{}class RS extends Jd{get destroyed(){return this._destroyed}constructor(l,u,f,g){super(),this.parent=u,this.source=f,this.scopes=g,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,J1(l,x=>this.processProvider(x)),this.records.set(q1,ag(void 0,this)),g.has("environment")&&this.records.set(Jd,ag(void 0,this));const _=this.records.get(cm);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(ub.multi,Tn,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const u=Yi(this),f=Wr(void 0);try{return l()}finally{Yi(u),Wr(f)}}get(l,u=Yn,f=Pt.Default){this.assertNotDestroyed(),f=Sa(f);const g=Yi(this),_=Wr(void 0);try{if(!(f&Pt.SkipSelf)){let S=this.records.get(l);if(void 0===S){const O=function gb(c){return"function"==typeof c||"object"==typeof c&&c instanceof Dr}(l)&&ti(l);S=O&&this.injectableDefInScope(O)?ag(Y1(l),og):null,this.records.set(l,S)}if(null!=S)return this.hydrate(l,S)}return(f&Pt.Self?lm():this.parent).get(l,u=f&Pt.Optional&&u===Yn?null:u)}catch(x){if("NullInjectorError"===x.name){if((x[Fi]=x[Fi]||[]).unshift(gt(l)),g)throw x;return function De(c,l,u,f){const g=c[Fi];throw l[ho]&&g.unshift(l[ho]),c.message=function le(c,l,u,f=null){c=c&&"\n"===c.charAt(0)&&c.charAt(1)==Ki?c.slice(2):c;let g=gt(l);if(Array.isArray(l))g=l.map(gt).join(" -> ");else if("object"==typeof l){let _=[];for(let x in l)if(l.hasOwnProperty(x)){let S=l[x];_.push(x+":"+("string"==typeof S?JSON.stringify(S):gt(S)))}g=`{${_.join(", ")}}`}return`${u}${f?"("+f+")":""}[${g}]: ${c.replace(fo,"\n  ")}`}("\n"+c.message,g,u,f),c[Ga]=g,c[Fi]=null,c}(x,l,"R3InjectorError",this.source)}throw x}finally{Wr(_),Yi(g)}}resolveInjectorInitializers(){const l=Yi(this),u=Wr(void 0);try{const f=this.get(j1.multi,Tn,Pt.Self);for(const g of f)g()}finally{Yi(l),Wr(u)}}toString(){const l=[],u=this.records;for(const f of u.keys())l.push(gt(f));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,!1)}processProvider(l){let u=Au(l=Tt(l))?l:Tt(l&&l.provide);const f=function D3(c){return W1(c)?ag(void 0,c.useValue):ag(pb(c),og)}(l);if(Au(l)||!0!==l.multi)this.records.get(u);else{let g=this.records.get(u);g||(g=ag(void 0,og,!0),g.factory=()=>Aa(g.multi),this.records.set(u,g)),u=l,g.multi.push(l)}this.records.set(u,f)}hydrate(l,u){return u.value===og&&(u.value=hb,u.value=u.factory()),"object"==typeof u.value&&u.value&&function LS(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=Tt(l.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Y1(c){const l=ti(c),u=null!==l?l.factory:Zs(c);if(null!==u)return u;if(c instanceof Dr)throw new Fe(204,!1);if(c instanceof Function)return function NS(c){const l=c.length;if(l>0)throw function z(c,l){const u=[];for(let f=0;f<c;f++)u.push(l);return u}(l,"?"),new Fe(204,!1);const u=function jr(c){return c&&(c[lo]||c[Ea])||null}(c);return null!==u?()=>u.factory(c):()=>new c}(c);throw new Fe(204,!1)}function pb(c,l,u){let f;if(Au(c)){const g=Tt(c);return Zs(g)||Y1(g)}if(W1(c))f=()=>Tt(c.useValue);else if(function K1(c){return!(!c||!c.useFactory)}(c))f=()=>c.useFactory(...Aa(c.deps||[]));else if(function sg(c){return!(!c||!c.useExisting)}(c))f=()=>Nr(Tt(c.useExisting));else{const g=Tt(c&&(c.useClass||c.provide));if(!function k3(c){return!!c.deps}(c))return Zs(g)||Y1(g);f=()=>new g(...Aa(c.deps))}return f}function ag(c,l,u=!1){return{factory:c,value:l,multi:u?[]:void 0}}function J1(c,l){for(const u of c)Array.isArray(u)?J1(u,l):u&&Et(u)?J1(u.\u0275providers,l):l(u)}class O3{}class mb{}class US{resolveComponentFactory(l){throw function al(c){const l=Error(`No component factory found for ${gt(c)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=c,l}(l)}}let gh=(()=>{class c{}return c.NULL=new US,c})();function R3(){return Wl(_r(),ot())}function Wl(c,l){return new um(ls(c,l))}let um=(()=>{class c{constructor(u){this.nativeElement=u}}return c.__NG_ELEMENT_ID__=R3,c})();function N3(c){return c instanceof um?c.nativeElement:c}class BS{}let L3=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function U3(){const c=ot(),u=vi(_r().index,c);return(Ui(u)?u:c)[Vn]}(),c})(),B3=(()=>{class c{}return c.\u0275prov=Wn({token:c,providedIn:"root",factory:()=>null}),c})();class _b{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const V3=new _b("15.2.10"),mh={},dm="ngOriginalError";function _h(c){return c[dm]}class fm{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l);this._console.error("ERROR",l),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&_h(l);for(;u&&_h(u);)u=_h(u);return u||null}}function jS(c){return c.ownerDocument.defaultView}function vb(c){return c.ownerDocument}function Oc(c){return c instanceof Function?c():c}function yb(c,l,u){let f=c.length;for(;;){const g=c.indexOf(l,u);if(-1===g)return g;if(0===g||c.charCodeAt(g-1)<=32){const _=l.length;if(g+_===f||c.charCodeAt(g+_)<=32)return g}u=g+1}}const xb="ng-template";function HS(c,l,u){let f=0,g=!0;for(;f<c.length;){let _=c[f++];if("string"==typeof _&&g){const x=c[f++];if(u&&"class"===_&&-1!==yb(x.toLowerCase(),l,0))return!0}else{if(1===_){for(;f<c.length&&"string"==typeof(_=c[f++]);)if(_.toLowerCase()===l)return!0;return!1}"number"==typeof _&&(g=!1)}}return!1}function wb(c){return 4===c.type&&c.value!==xb}function z3(c,l,u){return l===(4!==c.type||u?c.value:xb)}function G3(c,l,u){let f=4;const g=c.attrs||[],_=function $S(c){for(let l=0;l<c.length;l++)if(Bp(c[l]))return l;return c.length}(g);let x=!1;for(let S=0;S<l.length;S++){const O=l[S];if("number"!=typeof O){if(!x)if(4&f){if(f=2|1&f,""!==O&&!z3(c,O,u)||""===O&&1===l.length){if(Fc(f))return!1;x=!0}}else{const B=8&f?O:l[++S];if(8&f&&null!==c.attrs){if(!HS(c.attrs,B,u)){if(Fc(f))return!1;x=!0}continue}const oe=Eo(8&f?"class":O,g,wb(c),u);if(-1===oe){if(Fc(f))return!1;x=!0;continue}if(""!==B){let Te;Te=oe>_?"":g[oe+1].toLowerCase();const Ze=8&f?Te:null;if(Ze&&-1!==yb(Ze,B,0)||2&f&&B!==Te){if(Fc(f))return!1;x=!0}}}}else{if(!x&&!Fc(f)&&!Fc(O))return!1;if(x&&Fc(O))continue;x=!1,f=O|1&f}}return Fc(f)||x}function Fc(c){return 0==(1&c)}function Eo(c,l,u,f){if(null===l)return-1;let g=0;if(f||!u){let _=!1;for(;g<l.length;){const x=l[g];if(x===c)return g;if(3===x||6===x)_=!0;else{if(1===x||2===x){let S=l[++g];for(;"string"==typeof S;)S=l[++g];continue}if(4===x)break;if(0===x){g+=4;continue}}g+=_?1:2}return-1}return function zS(c,l){let u=c.indexOf(4);if(u>-1)for(u++;u<c.length;){const f=c[u];if("number"==typeof f)return-1;if(f===l)return u;u++}return-1}(l,c)}function Kl(c,l,u=!1){for(let f=0;f<l.length;f++)if(G3(c,l[f],u))return!0;return!1}function bb(c,l){return c?":not("+l.trim()+")":l}function X1(c){let l=c[0],u=1,f=2,g="",_=!1;for(;u<c.length;){let x=c[u];if("string"==typeof x)if(2&f){const S=c[++u];g+="["+x+(S.length>0?'="'+S+'"':"")+"]"}else 8&f?g+="."+x:4&f&&(g+=" "+x);else""!==g&&!Fc(x)&&(l+=bb(_,g),g=""),f=x,_=_||!Fc(f);u++}return""!==g&&(l+=bb(_,g)),l}const zn={};function Eb(c){Tb(yn(),ot(),qs()+c,!1)}function Tb(c,l,u,f){if(!f)if(3==(3&l[Fn])){const _=c.preOrderCheckHooks;null!==_&&ct(l,_,u)}else{const _=c.preOrderHooks;null!==_&&hn(l,_,0,u)}rl(u)}function pm(c,l=null,u=null,f){const g=tv(c,l,u,f);return g.resolveInjectorInitializers(),g}function tv(c,l=null,u=null,f,g=new Set){const _=[u||Tn,am(c)];return f=f||("object"==typeof c?void 0:gt(c)),new RS(_,l||lm(),f||null,g)}let Yl=(()=>{class c{static create(u,f){if(Array.isArray(u))return pm({name:""},f,u,"");{const g=u.name??"";return pm({name:g},u.parent,u.providers,g)}}}return c.THROW_IF_NOT_FOUND=Yn,c.NULL=new db,c.\u0275prov=Wn({token:c,providedIn:"any",factory:()=>Nr(q1)}),c.__NG_ELEMENT_ID__=-1,c})();function yh(c,l=Pt.Default){const u=ot();return null===u?Nr(c,l):Fd(_r(),u,Tt(c),l)}function Ob(){throw new Error("invalid")}function Fb(c,l){const u=c.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const _=u[f+1];if(-1!==_){const x=c.data[_];nl(u[f]),x.contentQueries(2,l[_],_)}}}function _m(c,l,u,f,g,_,x,S,O,B,G){const oe=l.blueprint.slice();return oe[Vs]=g,oe[Fn]=76|f,(null!==G||c&&1024&c[Fn])&&(oe[Fn]|=1024),N(oe),oe[fr]=oe[xn]=c,oe[$r]=u,oe[po]=x||c&&c[po],oe[Vn]=S||c&&c[Vn],oe[fu]=O||c&&c[fu]||null,oe[Yc]=B||c&&c[Yc]||null,oe[Hr]=_,oe[Xi]=function jT(){return D1++}(),oe[hu]=G,oe[Li]=2==l.type?c[Li]:oe,oe}function xh(c,l,u,f,g){let _=c.data[l];if(null===_)_=function lv(c,l,u,f,g){const _=js(),x=ia(),O=c.data[l]=function dg(c,l,u,f,g,_){return{type:u,index:f,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,x?_:_&&_.parent,u,l,f,g);return null===c.firstChild&&(c.firstChild=O),null!==_&&(x?null==_.child&&null!==O.parent&&(_.child=O):null===_.next&&(_.next=O,O.prev=_)),O}(c,l,u,f,g),function U0(){return H.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=f,_.attrs=g;const x=function Ci(){const c=H.lFrame,l=c.currentTNode;return c.isParent?l:l.parent}();_.injectorIndex=null===x?-1:x.injectorIndex}return Zi(_,!0),_}function ug(c,l,u,f){if(0===u)return-1;const g=l.length;for(let _=0;_<u;_++)l.push(f),c.blueprint.push(f),c.data.push(null);return g}function uv(c,l,u){Id(l);try{const f=c.viewQuery;null!==f&&Eh(1,f,u);const g=c.template;null!==g&&Rb(c,l,g,1,u),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Fb(c,l),c.staticViewQueries&&Eh(2,c.viewQuery,u);const _=c.components;null!==_&&function sA(c,l){for(let u=0;u<l.length;u++)yA(c,l[u])}(l,_)}catch(f){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),f}finally{l[Fn]&=-5,nh()}}function vm(c,l,u,f){const g=l[Fn];if(128!=(128&g)){Id(l);try{N(l),function Ad(c){return H.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==u&&Rb(c,l,u,2,f);const x=3==(3&g);if(x){const B=c.preOrderCheckHooks;null!==B&&ct(l,B,null)}else{const B=c.preOrderHooks;null!==B&&hn(l,B,0,null),Cr(l,0)}if(function _A(c){for(let l=kc(c);null!==l;l=Hl(l)){if(!l[Ll])continue;const u=l[io];for(let f=0;f<u.length;f++){const g=u[f];512&g[Fn]||j(g[fr],1),g[Fn]|=512}}}(l),function jb(c){for(let l=kc(c);null!==l;l=Hl(l))for(let u=Ir;u<l.length;u++){const f=l[u],g=f[an];k(f)&&vm(g,f,g.template,f[$r])}}(l),null!==c.contentQueries&&Fb(c,l),x){const B=c.contentCheckHooks;null!==B&&ct(l,B)}else{const B=c.contentHooks;null!==B&&hn(l,B,1),Cr(l,1)}!function rA(c,l){const u=c.hostBindingOpCodes;if(null!==u)try{for(let f=0;f<u.length;f++){const g=u[f];if(g<0)rl(~g);else{const _=g,x=u[++f],S=u[++f];Fp(x,_),S(2,l[_])}}}finally{rl(-1)}}(c,l);const S=c.components;null!==S&&function iA(c,l){for(let u=0;u<l.length;u++)vA(c,l[u])}(l,S);const O=c.viewQuery;if(null!==O&&Eh(2,O,f),x){const B=c.viewCheckHooks;null!==B&&ct(l,B)}else{const B=c.viewHooks;null!==B&&hn(l,B,2),Cr(l,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),l[Fn]&=-41,512&l[Fn]&&(l[Fn]&=-513,j(l[fr],-1))}finally{nh()}}}function Rb(c,l,u,f,g){const _=qs(),x=2&f;try{rl(-1),x&&l.length>br&&Tb(c,l,br,!1),Yr(x?2:0,g),u(f,g)}finally{rl(_),Yr(x?3:1,g)}}function dv(c,l,u){if(wc(l)){const g=l.directiveEnd;for(let _=l.directiveStart;_<g;_++){const x=c.data[_];x.contentQueries&&x.contentQueries(1,u[_],_)}}}function wh(c,l,u){vn()&&(function iF(c,l,u,f){const g=u.directiveStart,_=u.directiveEnd;Ms(u)&&function Vb(c,l,u){const f=ls(l,c),g=Iu(u),_=c[po],x=ua(c,_m(c,g,null,u.onPush?32:16,f,l,_,_.createRenderer(f,u),null,null,null));c[l.index]=x}(l,u,c.data[g+u.componentOffset]),c.firstCreatePass||yu(u,l),Co(f,l);const x=u.initialInputs;for(let S=g;S<_;S++){const O=c.data[S],B=Ei(l,c,S,u);Co(B,l),null!==x&&gA(0,S-g,B,O,0,x),Is(O)&&(vi(u.index,l)[$r]=Ei(l,c,S,u))}}(c,l,u,ls(u,l)),64==(64&u.flags)&&dA(c,l,u))}function fv(c,l,u=ls){const f=l.localNames;if(null!==f){let g=l.index+1;for(let _=0;_<f.length;_+=2){const x=f[_+1],S=-1===x?u(l,c):c[x];c[g++]=S}}}function Iu(c){const l=c.tView;return null===l||l.incompleteFirstPass?c.tView=bh(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):l}function bh(c,l,u,f,g,_,x,S,O,B){const G=br+f,oe=G+g,Te=function oA(c,l){const u=[];for(let f=0;f<l;f++)u.push(f<c?null:zn);return u}(G,oe),Ze="function"==typeof B?B():B;return Te[an]={type:c,blueprint:Te,template:u,queries:null,viewQuery:S,declTNode:l,data:Te.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof x?x():x,firstChild:null,schemas:O,consts:Ze,incompleteFirstPass:!1}}function Pu(c,l,u,f){const g=qb(l);null===u?g.push(f):(g.push(u),c.firstCreatePass&&bm(c).push(f,g.length-1))}function aA(c,l,u,f){for(let g in c)if(c.hasOwnProperty(g)){u=null===u?{}:u;const _=c[g];null===f?cA(u,l,g,_):f.hasOwnProperty(g)&&cA(u,l,f[g],_)}return u}function cA(c,l,u,f){c.hasOwnProperty(u)?c[u].push(l,f):c[u]=[l,f]}function Fa(c,l,u,f,g,_,x,S){const O=ls(l,u);let G,B=l.inputs;!S&&null!=B&&(G=B[f])?(mv(c,u,G,f,g),Ms(l)&&function ef(c,l){const u=vi(l,c);16&u[Fn]||(u[Fn]|=32)}(u,l.index)):3&l.type&&(f=function Jl(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(f),g=null!=x?x(g,l.value||"",f):g,_.setProperty(O,f,g))}function Ub(c,l,u,f){if(vn()){const g=null===f?null:{"":-1},_=function hA(c,l){const u=c.directiveRegistry;let f=null,g=null;if(u)for(let _=0;_<u.length;_++){const x=u[_];if(Kl(l,x.selectors,!1))if(f||(f=[]),Is(x))if(null!==x.findHostDirectiveDefs){const S=[];g=g||new Map,x.findHostDirectiveDefs(x,S,g),f.unshift(...S,x),tf(c,l,S.length)}else f.unshift(x),tf(c,l,0);else g=g||new Map,x.findHostDirectiveDefs?.(x,f,g),f.push(x)}return null===f?null:[f,g]}(c,u);let x,S;null===_?x=S=null:[x,S]=_,null!==x&&uA(c,l,u,x,g,S),g&&function pv(c,l,u){if(l){const f=c.localNames=[];for(let g=0;g<l.length;g+=2){const _=u[l[g+1]];if(null==_)throw new Fe(-301,!1);f.push(l[g],_)}}}(u,f,g)}u.mergedAttrs=Pd(u.mergedAttrs,u.attrs)}function uA(c,l,u,f,g,_){for(let B=0;B<f.length;B++)sh(yu(u,l),c,f[B].type);!function pA(c,l,u){c.flags|=1,c.directiveStart=l,c.directiveEnd=l+u,c.providerIndexes=l}(u,c.data.length,f.length);for(let B=0;B<f.length;B++){const G=f[B];G.providersResolver&&G.providersResolver(G)}let x=!1,S=!1,O=ug(c,l,f.length,null);for(let B=0;B<f.length;B++){const G=f[B];u.mergedAttrs=Pd(u.mergedAttrs,G.hostAttrs),gv(c,u,l,O,G),Bb(O,G,g),null!==G.contentQueries&&(u.flags|=4),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(u.flags|=64);const oe=G.type.prototype;!x&&(oe.ngOnChanges||oe.ngOnInit||oe.ngDoCheck)&&((c.preOrderHooks??(c.preOrderHooks=[])).push(u.index),x=!0),!S&&(oe.ngOnChanges||oe.ngDoCheck)&&((c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(u.index),S=!0),O++}!function lA(c,l,u){const g=l.directiveEnd,_=c.data,x=l.attrs,S=[];let O=null,B=null;for(let G=l.directiveStart;G<g;G++){const oe=_[G],Te=u?u.get(oe):null,ut=Te?Te.outputs:null;O=aA(oe.inputs,G,O,Te?Te.inputs:null),B=aA(oe.outputs,G,B,ut);const Nt=null===O||null===x||wb(l)?null:mA(O,G,x);S.push(Nt)}null!==O&&(O.hasOwnProperty("class")&&(l.flags|=8),O.hasOwnProperty("style")&&(l.flags|=16)),l.initialInputs=S,l.inputs=O,l.outputs=B}(c,u,_)}function dA(c,l,u){const f=u.directiveStart,g=u.directiveEnd,_=u.index,x=function Rp(){return H.lFrame.currentDirectiveIndex}();try{rl(_);for(let S=f;S<g;S++){const O=c.data[S],B=l[S];Vl(S),(null!==O.hostBindings||0!==O.hostVars||null!==O.hostAttrs)&&fA(O,B)}}finally{rl(-1),Vl(x)}}function fA(c,l){null!==c.hostBindings&&c.hostBindings(1,l)}function tf(c,l,u){l.componentOffset=u,(c.components??(c.components=[])).push(l.index)}function Bb(c,l,u){if(u){if(l.exportAs)for(let f=0;f<l.exportAs.length;f++)u[l.exportAs[f]]=c;Is(l)&&(u[""]=c)}}function gv(c,l,u,f,g){c.data[f]=g;const _=g.factory||(g.factory=Zs(g.type)),x=new tr(_,Is(g),yh);c.blueprint[f]=x,u[f]=x,function hv(c,l,u,f,g){const _=g.hostBindings;if(_){let x=c.hostBindingOpCodes;null===x&&(x=c.hostBindingOpCodes=[]);const S=~l.index;(function cl(c){let l=c.length;for(;l>0;){const u=c[--l];if("number"==typeof u&&u<0)return u}return 0})(x)!=S&&x.push(S),x.push(u,f,_)}}(c,l,f,ug(c,u,g.hostVars,zn),g)}function lc(c,l,u,f,g,_){const x=ls(c,l);!function ym(c,l,u,f,g,_,x){if(null==_)c.removeAttribute(l,g,u);else{const S=null==x?He(_):x(_,f||"",g);c.setAttribute(l,g,S,u)}}(l[Vn],x,_,c.value,u,f,g)}function gA(c,l,u,f,g,_){const x=_[l];if(null!==x){const S=f.setInput;for(let O=0;O<x.length;){const B=x[O++],G=x[O++],oe=x[O++];null!==S?f.setInput(u,oe,B,G):u[G]=oe}}}function mA(c,l,u){let f=null,g=0;for(;g<u.length;){const _=u[g];if(0!==_)if(5!==_){if("number"==typeof _)break;if(c.hasOwnProperty(_)){null===f&&(f=[]);const x=c[_];for(let S=0;S<x.length;S+=2)if(x[S]===l){f.push(_,x[S+1],u[g+1]);break}}g+=2}else g+=2;else g+=4}return f}function Zb(c,l,u,f){return[c,!0,!1,l,null,0,f,u,null,null]}function vA(c,l){const u=vi(l,c);if(k(u)){const f=u[an];48&u[Fn]?vm(f,u,f.template,u[$r]):u[Ni]>0&&xm(u)}}function xm(c){for(let f=kc(c);null!==f;f=Hl(f))for(let g=Ir;g<f.length;g++){const _=f[g];if(k(_))if(512&_[Fn]){const x=_[an];vm(x,_,x.template,_[$r])}else _[Ni]>0&&xm(_)}const u=c[an].components;if(null!==u)for(let f=0;f<u.length;f++){const g=vi(u[f],c);k(g)&&g[Ni]>0&&xm(g)}}function yA(c,l){const u=vi(l,c),f=u[an];(function xA(c,l){for(let u=l.length;u<c.blueprint.length;u++)l.push(c.blueprint[u])})(f,u),uv(f,u,u[$r])}function ua(c,l){return c[xc]?c[As][as]=l:c[xc]=l,c[As]=l,l}function cn(c){for(;c;){c[Fn]|=32;const l=be(c);if($n(c)&&!l)return c;c=l}return null}function Ch(c,l,u,f=!0){const g=l[po];g.begin&&g.begin();try{vm(c,l,c.template,u)}catch(x){throw f&&$b(l,x),x}finally{g.end&&g.end()}}function Eh(c,l,u){nl(0),l(c,u)}function qb(c){return c[Qo]||(c[Qo]=[])}function bm(c){return c.cleanup||(c.cleanup=[])}function $b(c,l){const u=c[Yc],f=u?u.get(fm,null):null;f&&f.handleError(l)}function mv(c,l,u,f,g){for(let _=0;_<u.length;){const x=u[_++],S=u[_++],O=l[x],B=c.data[x];null!==B.setInput?B.setInput(O,g,f,S):O[S]=g}}function yi(c,l,u){const f=tl(l,c);!function ci(c,l,u){c.setValue(l,u)}(c[Vn],f,u)}function nf(c,l,u){let f=u?c.styles:null,g=u?c.classes:null,_=0;if(null!==l)for(let x=0;x<l.length;x++){const S=l[x];"number"==typeof S?_=S:1==_?g=Ft(g,S):2==_&&(f=Ft(f,S+": "+l[++x]+";"))}u?c.styles=f:c.stylesWithoutHost=f,u?c.classes=g:c.classesWithoutHost=g}function es(c,l,u,f,g=!1){for(;null!==u;){const _=l[u.index];if(null!==_&&f.push(Vi(_)),_i(_))for(let S=Ir;S<_.length;S++){const O=_[S],B=O[an].firstChild;null!==B&&es(O[an],O,B,f)}const x=u.type;if(8&x)es(c,l,u.child,f);else if(32&x){const S=Lw(u,l);let O;for(;O=S();)f.push(O)}else if(16&x){const S=Gw(l,u);if(Array.isArray(S))f.push(...S);else{const O=be(l[Li]);es(O[an],O,S,f,!0)}}u=g?u.projectionNext:u.next}return f}class uc{get rootNodes(){const l=this._lView,u=l[an];return es(u,l,u.firstChild,[])}constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$r]}set context(l){this._lView[$r]=l}get destroyed(){return 128==(128&this._lView[Fn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[fr];if(_i(l)){const u=l[Lo],f=u?u.indexOf(this):-1;f>-1&&(k1(l,f),L(u,f))}this._attachedToViewContainer=!1}ol(this._lView[an],this._lView)}onDestroy(l){Pu(this._lView[an],this._lView,null,l)}markForCheck(){cn(this._cdRefInjectingView||this._lView)}detach(){this._lView[Fn]&=-65}reattach(){this._lView[Fn]|=64}detectChanges(){Ch(this._lView[an],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YT(c,l){tg(c,l,l[Vn],2,null,null)}(this._lView[an],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Fe(902,!1);this._appRef=l}}class wA extends uc{constructor(l){super(l),this._view=l}detectChanges(){const l=this._view;Ch(l[an],l,l[$r],!1)}checkNoChanges(){}get context(){return null}}class _v extends gh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=ar(l);return new fg(u,this.ngModule)}}function Cm(c){const l=[];for(let u in c)c.hasOwnProperty(u)&&l.push({propName:c[u],templateName:u});return l}class To{constructor(l,u){this.injector=l,this.parentInjector=u}get(l,u,f){f=Sa(f);const g=this.injector.get(l,mh,f);return g!==mh||u===mh?g:this.parentInjector.get(l,u,f)}}class fg extends mb{get inputs(){return Cm(this.componentDef.inputs)}get outputs(){return Cm(this.componentDef.outputs)}constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function vr(c){return c.map(X1).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}create(l,u,f,g){let _=(g=g||this.ngModule)instanceof Jd?g:g?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const x=_?new To(l,_):l,S=x.get(BS,null);if(null===S)throw new Fe(407,!1);const O=x.get(B3,null),B=S.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",oe=f?function rF(c,l,u){return c.selectRootElement(l,u===Kt.ShadowDom)}(B,f,this.componentDef.encapsulation):dh(B,G,function zb(c){const l=c.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(G)),Te=this.componentDef.onPush?288:272,Ze=bh(0,null,null,1,0,null,null,null,null,null),ut=_m(null,Ze,null,Te,null,null,S,B,O,x,null);let Nt,en;Id(ut);try{const gn=this.componentDef;let On,Ot=null;gn.findHostDirectiveDefs?(On=[],Ot=new Map,gn.findHostDirectiveDefs(gn,On,Ot),On.push(gn)):On=[gn];const qn=function ll(c,l){const u=c[an],f=br;return c[f]=l,xh(u,f,2,"#host",null)}(ut,oe),xi=function yv(c,l,u,f,g,_,x,S){const O=g[an];!function bA(c,l,u,f){for(const g of c)l.mergedAttrs=Pd(l.mergedAttrs,g.hostAttrs);null!==l.mergedAttrs&&(nf(l,l.mergedAttrs,!0),null!==u&&Yw(f,u,l))}(f,c,l,x);const B=_.createRenderer(l,u),G=_m(g,Iu(u),null,u.onPush?32:16,g[c.index],c,_,B,S||null,null,null);return O.firstCreatePass&&tf(O,c,f.length-1),ua(g,G),g[c.index]=G}(qn,oe,gn,On,ut,S,B);en=Ed(Ze,br),oe&&function Th(c,l,u,f){if(f)xo(c,u,["ng-version",V3.full]);else{const{attrs:g,classes:_}=function Cb(c){const l=[],u=[];let f=1,g=2;for(;f<c.length;){let _=c[f];if("string"==typeof _)2===g?""!==_&&l.push(_,c[++f]):8===g&&u.push(_);else{if(!Fc(g))break;g=_}f++}return{attrs:l,classes:u}}(l.selectors[0]);g&&xo(c,u,g),_&&_.length>0&&Kw(c,u,_.join(" "))}}(B,gn,oe,f),void 0!==u&&function Gb(c,l,u){const f=c.projection=[];for(let g=0;g<l.length;g++){const _=u[g];f.push(null!=_?Array.from(_):null)}}(en,this.ngContentSelectors,u),Nt=function CA(c,l,u,f,g,_){const x=_r(),S=g[an],O=ls(x,g);uA(S,g,x,u,null,f);for(let G=0;G<u.length;G++)Co(Ei(g,S,x.directiveStart+G,x),g);dA(S,g,x),O&&Co(O,g);const B=Ei(g,S,x.directiveStart+x.componentOffset,x);if(c[$r]=g[$r]=B,null!==_)for(const G of _)G(B,l);return dv(S,x,c),B}(xi,gn,On,Ot,ut,[xv]),uv(Ze,ut,null)}finally{nh()}return new hg(this.componentType,Nt,Wl(en,ut),ut,en)}}class hg extends O3{constructor(l,u,f,g,_){super(),this.location=f,this._rootLView=g,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new wA(g),this.componentType=l}setInput(l,u){const f=this._tNode.inputs;let g;if(null!==f&&(g=f[l])){const _=this._rootLView;mv(_[an],_,g,l,u),cn(vi(this._tNode.index,_))}}get injector(){return new oc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function xv(){const c=_r();We(ot()[an],c)}function bv(c){let l=function wv(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),u=!0;const f=[c];for(;l;){let g;if(Is(c))g=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Fe(903,!1);g=l.\u0275dir}if(g){if(u){f.push(g);const x=c;x.inputs=pg(c.inputs),x.declaredInputs=pg(c.declaredInputs),x.outputs=pg(c.outputs);const S=g.hostBindings;S&&Tv(c,S);const O=g.viewQuery,B=g.contentQueries;if(O&&Cv(c,O),B&&Ev(c,B),nt(c.inputs,g.inputs),nt(c.declaredInputs,g.declaredInputs),nt(c.outputs,g.outputs),Is(g)&&g.data.animation){const G=c.data;G.animation=(G.animation||[]).concat(g.data.animation)}}const _=g.features;if(_)for(let x=0;x<_.length;x++){const S=_[x];S&&S.ngInherit&&S(c),S===bv&&(u=!1)}}l=Object.getPrototypeOf(l)}!function Wb(c){let l=0,u=null;for(let f=c.length-1;f>=0;f--){const g=c[f];g.hostVars=l+=g.hostVars,g.hostAttrs=Pd(g.hostAttrs,u=Pd(u,g.hostAttrs))}}(f)}function pg(c){return c===kn?{}:c===Tn?[]:c}function Cv(c,l){const u=c.viewQuery;c.viewQuery=u?(f,g)=>{l(f,g),u(f,g)}:l}function Ev(c,l){const u=c.contentQueries;c.contentQueries=u?(f,g,_)=>{l(f,g,_),u(f,g,_)}:l}function Tv(c,l){const u=c.hostBindings;c.hostBindings=u?(f,g)=>{l(f,g),u(f,g)}:l}function Em(c){return!!Tm(c)&&(Array.isArray(c)||!(c instanceof Map)&&Symbol.iterator in c)}function Tm(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function dc(c,l,u){return c[l]=u}function $s(c,l,u){return!Object.is(c[l],u)&&(c[l]=u,!0)}function Ql(c,l,u,f){const g=$s(c,l,u);return $s(c,l+1,f)||g}function _g(c,l,u,f,g){const _=Ql(c,l,u,f);return $s(c,l+2,g)||_}function Av(c,l,u,f){const g=ot();return $s(g,Bl(),l)&&(yn(),lc(ni(),g,c,l,u,f)),Av}function af(c,l,u,f){return $s(c,Bl(),u)?l+He(u)+f:zn}function Mh(c,l,u,f,g,_,x,S){const O=ot(),B=yn(),G=c+br,oe=B.firstCreatePass?function yg(c,l,u,f,g,_,x,S,O){const B=l.consts,G=xh(l,c,4,x||null,E(B,S));Ub(l,u,G,E(B,O)),We(l,G);const oe=G.tView=bh(2,G,f,g,_,l.directiveRegistry,l.pipeRegistry,null,l.schemas,B);return null!==l.queries&&(l.queries.template(l,G),oe.queries=l.queries.embeddedTView(G)),G}(G,B,O,l,u,f,g,_,x):B.data[G];Zi(oe,!1);const Te=O[Vn].createComment("");fh(B,O,Te,oe),Co(Te,O),ua(O,O[G]=Zb(Te,O,Te,oe)),ea(oe)&&wh(B,O,oe),null!=x&&fv(O,oe,S)}function Pv(c){return _o(function Yf(){return H.lFrame.contextLView}(),br+c)}function Dv(c,l,u){const f=ot();return $s(f,Bl(),l)&&Fa(yn(),ni(),f,c,l,f[Vn],u,!1),Dv}function Ih(c,l,u,f,g){const x=g?"class":"style";mv(c,u,l.inputs[x],x,f)}function Ph(c,l,u,f){const g=ot(),_=yn(),x=br+c,S=g[Vn],O=_.firstCreatePass?function kv(c,l,u,f,g,_){const x=l.consts,O=xh(l,c,2,f,E(x,g));return Ub(l,u,O,E(x,_)),null!==O.attrs&&nf(O,O.attrs,!1),null!==O.mergedAttrs&&nf(O,O.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,O),O}(x,_,g,l,u,f):_.data[x],B=g[x]=dh(S,l,function K(){return H.lFrame.currentNamespace}()),G=ea(O);return Zi(O,!0),Yw(S,B,O),32!=(32&O.flags)&&fh(_,g,B,O),0===function Me(){return H.lFrame.elementDepthCount}()&&Co(B,g),function _e(){H.lFrame.elementDepthCount++}(),G&&(wh(_,g,O),dv(_,O,g)),null!==f&&fv(g,O),Ph}function xg(){let c=_r();ia()?Td():(c=c.parent,Zi(c,!1));const l=c;!function xt(){H.lFrame.elementDepthCount--}();const u=yn();return u.firstCreatePass&&(We(u,c),wc(c)&&u.queries.elementEnd(c)),null!=l.classesWithoutHost&&function sa(c){return 0!=(8&c.flags)}(l)&&Ih(u,l,ot(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function oa(c){return 0!=(16&c.flags)}(l)&&Ih(u,l,ot(),l.stylesWithoutHost,!1),xg}function Ov(c,l,u,f){return Ph(c,l,u,f),xg(),Ov}function bg(c,l,u){const f=ot(),g=yn(),_=c+br,x=g.firstCreatePass?function wg(c,l,u,f,g){const _=l.consts,x=E(_,f),S=xh(l,c,8,"ng-container",x);return null!==x&&nf(S,x,!0),Ub(l,u,S,E(_,g)),null!==l.queries&&l.queries.elementStart(l,S),S}(_,g,f,l,u):g.data[_];Zi(x,!0);const S=f[_]=f[Vn].createComment("");return fh(g,f,S,x),Co(S,f),ea(x)&&(wh(g,f,x),dv(g,x,f)),null!=u&&fv(f,x),bg}function Cg(){let c=_r();const l=yn();return ia()?Td():(c=c.parent,Zi(c,!1)),l.firstCreatePass&&(We(l,c),wc(c)&&l.queries.elementEnd(c)),Cg}function Eg(){return ot()}function Rv(c){return!!c&&"function"==typeof c.then}function sC(c){return!!c&&"function"==typeof c.subscribe}const lf=sC;function Nv(c,l,u,f){const g=ot(),_=yn(),x=_r();return function Lv(c,l,u,f,g,_,x){const S=ea(f),B=c.firstCreatePass&&bm(c),G=l[$r],oe=qb(l);let Te=!0;if(3&f.type||x){const Nt=ls(f,l),en=x?x(Nt):Nt,gn=oe.length,On=x?qn=>x(Vi(qn[f.index])):f.index;let Ot=null;if(!x&&S&&(Ot=function uf(c,l,u,f){const g=c.cleanup;if(null!=g)for(let _=0;_<g.length-1;_+=2){const x=g[_];if(x===u&&g[_+1]===f){const S=l[Qo],O=g[_+2];return S.length>O?S[O]:null}"string"==typeof x&&(_+=2)}return null}(c,l,g,f.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=_,Ot.__ngLastListenerFn__=_,Te=!1;else{_=Uv(f,l,G,_,!1);const qn=u.listen(en,g,_);oe.push(_,qn),B&&B.push(g,On,gn,gn+1)}}else _=Uv(f,l,G,_,!1);const Ze=f.outputs;let ut;if(Te&&null!==Ze&&(ut=Ze[g])){const Nt=ut.length;if(Nt)for(let en=0;en<Nt;en+=2){const xi=l[ut[en]][ut[en+1]].subscribe(_),$i=oe.length;oe.push(_,xi),B&&B.push(g,f.index,$i,-($i+1))}}}(_,g,g[Vn],x,c,l,f),Nv}function Tg(c,l,u,f){try{return Yr(6,l,u),!1!==u(f)}catch(g){return $b(c,g),!1}finally{Yr(7,l,u)}}function Uv(c,l,u,f,g){return function _(x){if(x===Function)return f;cn(c.componentOffset>-1?vi(c.index,l):l);let O=Tg(l,u,f,x),B=_.__ngNextListenerFn__;for(;B;)O=Tg(l,u,B,x)&&O,B=B.__ngNextListenerFn__;return g&&!1===O&&(x.preventDefault(),x.returnValue=!1),O}}function Dh(c=1){return function B0(c){return(H.lFrame.contextLView=function V0(c,l){for(;c>0;)l=l[xn],c--;return l}(c,H.lFrame.contextLView))[$r]}(c)}function df(c,l,u,f,g){const _=ot(),x=af(_,l,u,f);return x!==zn&&Fa(yn(),ni(),_,c,x,_[Vn],g,!1),df}function ff(c,l){return c<<17|l<<2}function fc(c){return c>>17&32767}function Sg(c){return 2|c}function ul(c){return(131068&c)>>2}function Ag(c,l){return-131069&c|l<<2}function km(c){return 1|c}function Ig(c,l,u,f,g){const _=c[u+1],x=null===l;let S=f?fc(_):ul(_),O=!1;for(;0!==S&&(!1===O||x);){const G=c[S+1];Pg(c[S],l)&&(O=!0,c[S+1]=f?km(G):Sg(G)),S=f?fc(G):ul(G)}O&&(c[u+1]=f?Sg(_):km(_))}function Pg(c,l){return null===c||null==l||(Array.isArray(c)?c[1]:c)===l||!(!Array.isArray(c)||"string"!=typeof l)&&ai(c,l)>=0}const li={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Om(c){return c.substring(li.key,li.keyEnd)}function jv(c,l){const u=li.textEnd;return u===l?-1:(l=li.keyEnd=function Fm(c,l,u){for(;l<u&&c.charCodeAt(l)>32;)l++;return l}(c,li.key=l,u),da(c,l,u))}function da(c,l,u){for(;l<u&&c.charCodeAt(l)<=32;)l++;return l}function hf(c,l,u){return Nc(c,l,u,!1),hf}function Hv(c,l){return Nc(c,l,null,!0),Hv}function pC(c){!function Vo(c,l,u,f){const g=yn(),_=ic(2);g.firstUpdatePass&&$v(g,null,_,f);const x=ot();if(u!==zn&&$s(x,_,u)){const S=g.data[qs()];if(vC(S,f)&&!Xl(g,_)){let O=f?S.classesWithoutHost:S.stylesWithoutHost;null!==O&&(u=Ft(O,u||"")),Ih(g,S,x,u,f)}else!function Wv(c,l,u,f,g,_,x,S){g===zn&&(g=Tn);let O=0,B=0,G=0<g.length?g[0]:null,oe=0<_.length?_[0]:null;for(;null!==G||null!==oe;){const Te=O<g.length?g[O+1]:void 0,Ze=B<_.length?_[B+1]:void 0;let Nt,ut=null;G===oe?(O+=2,B+=2,Te!==Ze&&(ut=oe,Nt=Ze)):null===oe||null!==G&&G<oe?(O+=2,ut=G):(B+=2,ut=oe,Nt=Ze),null!==ut&&Lm(c,l,u,f,ut,Nt,x,S),G=O<g.length?g[O]:null,oe=B<_.length?_[B]:null}}(g,S,x,x[Vn],x[_+1],x[_+1]=function OA(c,l,u){if(null==u||""===u)return Tn;const f=[],g=Su(u);if(Array.isArray(g))for(let _=0;_<g.length;_++)c(f,g[_],!0);else if("object"==typeof g)for(const _ in g)g.hasOwnProperty(_)&&c(f,_,g[_]);else"string"==typeof g&&l(f,g);return f}(c,l,u),f,_)}}(_C,dl,c,!0)}function dl(c,l){for(let u=function PA(c){return function Ru(c){li.key=0,li.keyEnd=0,li.value=0,li.valueEnd=0,li.textEnd=c.length}(c),jv(c,da(c,0,li.textEnd))}(l);u>=0;u=jv(l,u))Ht(c,Om(l),!0)}function Nc(c,l,u,f){const g=ot(),_=yn(),x=ic(2);_.firstUpdatePass&&$v(_,c,x,f),l!==zn&&$s(g,x,l)&&Lm(_,_.data[qs()],g,g[Vn],c,g[x+1]=function FA(c,l){return null==c||""===c||("string"==typeof l?c+=l:"object"==typeof c&&(c=gt(Su(c)))),c}(l,u),f,x)}function Xl(c,l){return l>=c.expandoStartIndex}function $v(c,l,u,f){const g=c.data;if(null===g[u+1]){const _=g[qs()],x=Xl(c,u);vC(_,f)&&null===l&&!x&&(l=!1),l=function gC(c,l,u,f){const g=function Zl(c){const l=H.lFrame.currentDirectiveIndex;return-1===l?null:c[l]}(c);let _=f?l.residualClasses:l.residualStyles;if(null===g)0===(f?l.classBindings:l.styleBindings)&&(u=Rh(u=zv(null,c,l,u,f),l.attrs,f),_=null);else{const x=l.directiveStylingLast;if(-1===x||c[x]!==g)if(u=zv(g,c,l,u,f),null===_){let O=function mC(c,l,u){const f=u?l.classBindings:l.styleBindings;if(0!==ul(f))return c[fc(f)]}(c,l,f);void 0!==O&&Array.isArray(O)&&(O=zv(null,c,l,O[1],f),O=Rh(O,l.attrs,f),function Fh(c,l,u,f){c[fc(u?l.classBindings:l.styleBindings)]=f}(c,l,f,O))}else _=function kA(c,l,u){let f;const g=l.directiveEnd;for(let _=1+l.directiveStylingLast;_<g;_++)f=Rh(f,c[_].hostAttrs,u);return Rh(f,l.attrs,u)}(c,l,f)}return void 0!==_&&(f?l.residualClasses=_:l.residualStyles=_),u}(g,_,l,f),function Mg(c,l,u,f,g,_){let x=_?l.classBindings:l.styleBindings,S=fc(x),O=ul(x);c[f]=u;let G,B=!1;if(Array.isArray(u)?(G=u[1],(null===G||ai(u,G)>0)&&(B=!0)):G=u,g)if(0!==O){const Te=fc(c[S+1]);c[f+1]=ff(Te,S),0!==Te&&(c[Te+1]=Ag(c[Te+1],f)),c[S+1]=function AA(c,l){return 131071&c|l<<17}(c[S+1],f)}else c[f+1]=ff(S,0),0!==S&&(c[S+1]=Ag(c[S+1],f)),S=f;else c[f+1]=ff(O,0),0===S?S=f:c[O+1]=Ag(c[O+1],f),O=f;B&&(c[f+1]=Sg(c[f+1])),Ig(c,G,f,!0),Ig(c,G,f,!1),function dC(c,l,u,f,g){const _=g?c.residualClasses:c.residualStyles;null!=_&&"string"==typeof l&&ai(_,l)>=0&&(u[f+1]=km(u[f+1]))}(l,G,c,f,_),x=ff(S,O),_?l.classBindings=x:l.styleBindings=x}(g,_,l,u,x,f)}}function zv(c,l,u,f,g){let _=null;const x=u.directiveEnd;let S=u.directiveStylingLast;for(-1===S?S=u.directiveStart:S++;S<x&&(_=l[S],f=Rh(f,_.hostAttrs,g),_!==c);)S++;return null!==c&&(u.directiveStylingLast=S),f}function Rh(c,l,u){const f=u?1:2;let g=-1;if(null!==l)for(let _=0;_<l.length;_++){const x=l[_];"number"==typeof x?g=x:g===f&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),Ht(c,x,!!u||l[++_]))}return void 0===c?null:c}function _C(c,l,u){const f=String(l);""!==f&&!f.includes(" ")&&Ht(c,f,u)}function Lm(c,l,u,f,g,_,x,S){if(!(3&l.type))return;const O=c.data,B=O[S+1],G=function uC(c){return 1==(1&c)}(B)?Kv(O,l,u,g,ul(B),x):void 0;kg(G)||(kg(_)||function lC(c){return 2==(2&c)}(B)&&(_=Kv(O,null,u,g,S,x)),function oS(c,l,u,f,g){if(l)g?c.addClass(u,f):c.removeClass(u,f);else{let _=-1===f.indexOf("-")?void 0:Dc.DashCase;null==g?c.removeStyle(u,f,_):("string"==typeof g&&g.endsWith("!important")&&(g=g.slice(0,-10),_|=Dc.Important),c.setStyle(u,f,g,_))}}(f,x,tl(qs(),u),g,_))}function Kv(c,l,u,f,g,_){const x=null===l;let S;for(;g>0;){const O=c[g],B=Array.isArray(O),G=B?O[1]:O,oe=null===G;let Te=u[g+1];Te===zn&&(Te=oe?Tn:void 0);let Ze=oe?lr(Te,f):G===f?Te:void 0;if(B&&!kg(Ze)&&(Ze=lr(O,f)),kg(Ze)&&(S=Ze,x))return S;const ut=c[g+1];g=x?fc(ut):ul(ut)}if(null!==l){let O=_?l.residualClasses:l.residualStyles;null!=O&&(S=lr(O,f))}return S}function kg(c){return void 0!==c}function vC(c,l){return 0!=(c.flags&(l?8:16))}function yC(c,l=""){const u=ot(),f=yn(),g=c+br,_=f.firstCreatePass?xh(f,g,1,l,null):f.data[g],x=u[g]=function Gd(c,l){return c.createText(l)}(u[Vn],l);fh(f,u,x,_),Zi(_,!1)}function Yv(c){return pf("",c,""),Yv}function pf(c,l,u){const f=ot(),g=af(f,c,l,u);return g!==zn&&yi(f,qs(),g),pf}function gf(c,l,u,f,g){const _=ot(),x=function Du(c,l,u,f,g,_){const S=Ql(c,vo(),u,g);return ic(2),S?l+He(u)+f+He(g)+_:zn}(_,c,l,u,f,g);return x!==zn&&yi(_,qs(),x),gf}function Nh(c,l,u,f,g,_,x){const S=ot(),O=function cf(c,l,u,f,g,_,x,S){const B=_g(c,vo(),u,g,x);return ic(3),B?l+He(u)+f+He(g)+_+He(x)+S:zn}(S,c,l,u,f,g,_,x);return O!==zn&&yi(S,qs(),O),Nh}const Nu=void 0;var mf=["en",[["a","p"],["AM","PM"],Nu],[["AM","PM"],Nu,Nu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nu,"{1} 'at' {0}",Nu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function PC(c){const u=Math.floor(Math.abs(c)),f=c.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===f?1:5}];let _f={};function qm(c){const l=function Vh(c){return c.toLowerCase().replace(/_/g,"-")}(c);let u=fa(l);if(u)return u;const f=l.split("-")[0];if(u=fa(f),u)return u;if("en"===f)return mf;throw new Fe(701,!1)}function Ng(c){return qm(c)[Rn.PluralCase]}function fa(c){return c in _f||(_f[c]=Kn.ng&&Kn.ng.common&&Kn.ng.common.locales&&Kn.ng.common.locales[c]),_f[c]}var Rn=(()=>((Rn=Rn||{})[Rn.LocaleId=0]="LocaleId",Rn[Rn.DayPeriodsFormat=1]="DayPeriodsFormat",Rn[Rn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rn[Rn.DaysFormat=3]="DaysFormat",Rn[Rn.DaysStandalone=4]="DaysStandalone",Rn[Rn.MonthsFormat=5]="MonthsFormat",Rn[Rn.MonthsStandalone=6]="MonthsStandalone",Rn[Rn.Eras=7]="Eras",Rn[Rn.FirstDayOfWeek=8]="FirstDayOfWeek",Rn[Rn.WeekendRange=9]="WeekendRange",Rn[Rn.DateFormat=10]="DateFormat",Rn[Rn.TimeFormat=11]="TimeFormat",Rn[Rn.DateTimeFormat=12]="DateTimeFormat",Rn[Rn.NumberSymbols=13]="NumberSymbols",Rn[Rn.NumberFormats=14]="NumberFormats",Rn[Rn.CurrencyCode=15]="CurrencyCode",Rn[Rn.CurrencySymbol=16]="CurrencySymbol",Rn[Rn.CurrencyName=17]="CurrencyName",Rn[Rn.Currencies=18]="Currencies",Rn[Rn.Directionality=19]="Directionality",Rn[Rn.PluralCase=20]="PluralCase",Rn[Rn.ExtraData=21]="ExtraData",Rn))();const Lu="en-US";let $m=Lu;function eu(c,l,u,f,g){if(c=Tt(c),Array.isArray(c))for(let _=0;_<c.length;_++)eu(c[_],l,u,f,g);else{const _=yn(),x=ot();let S=Au(c)?c:Tt(c.provide),O=pb(c);const B=_r(),G=1048575&B.providerIndexes,oe=B.directiveStart,Te=B.providerIndexes>>20;if(Au(c)||!c.multi){const Ze=new tr(O,g,yh),ut=py(S,l,g?G:G+Te,oe);-1===ut?(sh(yu(B,x),_,S),t_(_,c,l.length),l.push(S),B.directiveStart++,B.directiveEnd++,g&&(B.providerIndexes+=1048576),u.push(Ze),x.push(Ze)):(u[ut]=Ze,x[ut]=Ze)}else{const Ze=py(S,l,G+Te,oe),ut=py(S,l,G,G+Te),en=ut>=0&&u[ut];if(g&&!en||!g&&!(Ze>=0&&u[Ze])){sh(yu(B,x),_,S);const gn=function qg(c,l,u,f,g){const _=new tr(c,u,yh);return _.multi=[],_.index=l,_.componentProviders=0,n_(_,g,f&&!u),_}(g?Ua:eM,u.length,g,f,O);!g&&en&&(u[ut].providerFactory=gn),t_(_,c,l.length,0),l.push(S),B.directiveStart++,B.directiveEnd++,g&&(B.providerIndexes+=1048576),u.push(gn),x.push(gn)}else t_(_,c,Ze>-1?Ze:ut,n_(u[g?ut:Ze],O,!g&&f));!g&&f&&en&&u[ut].componentProviders++}}}function t_(c,l,u,f){const g=Au(l),_=function fb(c){return!!c.useClass}(l);if(g||_){const O=(_?Tt(l.useClass):l).prototype.ngOnDestroy;if(O){const B=c.destroyHooks||(c.destroyHooks=[]);if(!g&&l.multi){const G=B.indexOf(u);-1===G?B.push(u,[f,O]):B[G+1].push(f,O)}else B.push(u,O)}}}function n_(c,l,u){return u&&c.componentProviders++,c.multi.push(l)-1}function py(c,l,u,f){for(let g=u;g<f;g++)if(l[g]===c)return g;return-1}function eM(c,l,u,f){return wf(this.multi,[])}function Ua(c,l,u,f){const g=this.multi;let _;if(this.providerFactory){const x=this.providerFactory.componentProviders,S=Ei(u,u[an],this.providerFactory.index,f);_=S.slice(0,x),wf(g,_);for(let O=x;O<S.length;O++)_.push(S[O])}else _=[],wf(g,_);return _}function wf(c,l){for(let u=0;u<c.length;u++)l.push((0,c[u])());return l}function gy(c,l=[]){return u=>{u.providersResolver=(f,g)=>function XA(c,l,u){const f=yn();if(f.firstCreatePass){const g=Is(c);eu(u,f.data,f.blueprint,g,!0),eu(l,f.data,f.blueprint,g,!1)}}(f,g?g(c):c,l)}}class ts{}class HC{}function $C(c,l){return new my(c,l??null)}class my extends ts{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _v(this);const f=Kr(l);this._bootstrapComponents=Oc(f.bootstrap),this._r3Injector=tv(l,u,[{provide:ts,useValue:this},{provide:gh,useValue:this.componentFactoryResolver}],gt(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class $h extends HC{constructor(l){super(),this.moduleType=l}create(l){return new my(this.moduleType,l)}}class zC extends ts{constructor(l,u,f){super(),this.componentFactoryResolver=new _v(this),this.instance=null;const g=new RS([...l,{provide:ts,useValue:this},{provide:gh,useValue:this.componentFactoryResolver}],u||lm(),f,new Set(["environment"]));this.injector=g,g.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function _y(c,l,u=null){return new zC(c,l,u).injector}let tM=(()=>{class c{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const f=OS(0,u.type),g=f.length>0?_y([f],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,g)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=Wn({token:c,providedIn:"environment",factory:()=>new c(Nr(Jd))}),c})();function GC(c){c.getStandaloneInjector=l=>l.get(tM).getOrCreateStandaloneInjector(c)}function r_(c,l,u){const f=fs()+c,g=ot();return g[f]===zn?dc(g,f,u?l.call(u):l()):function rf(c,l){return c[l]}(g,f)}function ks(c,l,u,f){return Zo(ot(),fs(),c,l,u,f)}function nu(c,l,u,f,g,_){return lM(ot(),fs(),c,l,u,f,g,_)}function gl(c,l){const u=c[l];return u===zn?void 0:u}function Zo(c,l,u,f,g,_){const x=l+u;return $s(c,x,g)?dc(c,x+1,_?f.call(_,g):f(g)):gl(c,x+1)}function lM(c,l,u,f,g,_,x,S){const O=l+u;return _g(c,O,g,_,x)?dc(c,O+3,S?f.call(S,g,_,x):f(g,_,x)):gl(c,O+3)}function ms(c,l,u,f,g,_,x,S,O){const B=l+u;return function Ra(c,l,u,f,g,_){const x=Ql(c,l,u,f);return Ql(c,l+2,g,_)||x}(c,B,g,_,x,S)?dc(c,B+4,O?f.call(O,g,_,x,S):f(g,_,x,S)):gl(c,B+4)}function ru(c,l){const u=yn();let f;const g=c+br;u.firstCreatePass?(f=function Hi(c,l){if(l)for(let u=l.length-1;u>=0;u--){const f=l[u];if(c===f.name)return f}}(l,u.pipeRegistry),u.data[g]=f,f.onDestroy&&(u.destroyHooks??(u.destroyHooks=[])).push(g,f.onDestroy)):f=u.data[g];const _=f.factory||(f.factory=Zs(f.type)),x=Wr(yh);try{const S=Dd(!1),O=_();return Dd(S),function Iv(c,l,u,f){u>=c.data.length&&(c.data[u]=null,c.blueprint[u]=null),l[u]=f}(u,ot(),g,O),O}finally{Wr(x)}}function Hg(c,l,u){const f=c+br,g=ot(),_=_o(g,f);return hc(g,f)?Zo(g,fs(),l,_.transform,u,_):_.transform(u)}function $g(c,l,u,f){const g=c+br,_=ot(),x=_o(_,g);return hc(_,g)?function yy(c,l,u,f,g,_,x){const S=l+u;return Ql(c,S,g,_)?dc(c,S+2,x?f.call(x,g,_):f(g,_)):gl(c,S+2)}(_,fs(),l,x.transform,u,f,x):x.transform(u,f)}function zh(c,l,u,f,g){const _=c+br,x=ot(),S=_o(x,_);return hc(x,_)?lM(x,fs(),l,S.transform,u,f,g,S):S.transform(u,f,g)}function o2(c,l,u,f,g,_){const x=c+br,S=ot(),O=_o(S,x);return hc(S,x)?ms(S,fs(),l,O.transform,u,f,g,_,O):O.transform(u,f,g,_)}function hc(c,l){return c[an].data[l].pure}function ml(c){return l=>{setTimeout(c,void 0,l)}}const Os=class s_ extends A.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,f){let g=l,_=u||(()=>null),x=f;if(l&&"object"==typeof l){const O=l;g=O.next?.bind(O),_=O.error?.bind(O),x=O.complete?.bind(O)}this.__isAsync&&(_=ml(_),g&&(g=ml(g)),x&&(x=ml(x)));const S=super.subscribe({next:g,error:_,complete:x});return l instanceof s.w0&&l.add(S),S}};function zg(){return this._results[Symbol.iterator]()}class _l{get changes(){return this._changes||(this._changes=new Os)}constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=_l.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=zg)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const f=this;f.dirty=!1;const g=function C(c){return c.flat(Number.POSITIVE_INFINITY)}(l);(this._changesDetected=!function w(c,l,u){if(c.length!==l.length)return!1;for(let f=0;f<c.length;f++){let g=c[f],_=l[f];if(u&&(g=u(g),_=u(_)),_!==g)return!1}return!0}(f._results,g,u))&&(f._results=g,f.length=g.length,f.last=g[this.length-1],f.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Gh=(()=>{class c{}return c.__NG_ELEMENT_ID__=o_,c})();const Wh=Gh,xy=class extends Wh{constructor(l,u,f){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=f}createEmbeddedView(l,u){const f=this._declarationTContainer.tView,g=_m(this._declarationLView,f,l,16,null,f.declTNode,null,null,null,null,u||null);g[go]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[Qi];return null!==x&&(g[Qi]=x.createEmbeddedView(f)),uv(f,g,l),new uc(g)}};function o_(){return vl(_r(),ot())}function vl(c,l){return 4&c.type?new xy(l,c,Wl(c,l)):null}let Kh=(()=>{class c{}return c.__NG_ELEMENT_ID__=Gg,c})();function Gg(){return by(_r(),ot())}const a2=Kh,wy=class extends a2{constructor(l,u,f){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=f}get element(){return Wl(this._hostTNode,this._hostLView)}get injector(){return new oc(this._hostTNode,this._hostLView)}get parentInjector(){const l=xu(this._hostTNode,this._hostLView);if(Zp(l)){const u=Ac(l,this._hostLView),f=jp(l);return new oc(u[an].data[f+8],u)}return new oc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Wg(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-Ir}createEmbeddedView(l,u,f){let g,_;"number"==typeof f?g=f:null!=f&&(g=f.index,_=f.injector);const x=l.createEmbeddedView(u||{},_);return this.insert(x,g),x}createComponent(l,u,f,g,_){const x=l&&!function Zd(c){return"function"==typeof c}(l);let S;if(x)S=u;else{const oe=u||{};S=oe.index,f=oe.injector,g=oe.projectableNodes,_=oe.environmentInjector||oe.ngModuleRef}const O=x?l:new fg(ar(l)),B=f||this.parentInjector;if(!_&&null==O.ngModule){const Te=(x?B:this.parentInjector).get(Jd,null);Te&&(_=Te)}const G=O.create(B,g,void 0,_);return this.insert(G.hostView,S),G}insert(l,u){const f=l._lView,g=f[an];if(function b(c){return _i(c[fr])}(f)){const G=this.indexOf(l);if(-1!==G)this.detach(G);else{const oe=f[fr],Te=new wy(oe,oe[Hr],oe[fr]);Te.detach(Te.indexOf(l))}}const _=this._adjustIndex(u),x=this._lContainer;!function QT(c,l,u,f){const g=Ir+f,_=u.length;f>0&&(u[g-1][as]=l),f<_-Ir?(l[as]=u[g],I(u,Ir+f,l)):(u.push(l),l[as]=null),l[fr]=u;const x=l[go];null!==x&&u!==x&&function XT(c,l){const u=c[io];l[Li]!==l[fr][fr][Li]&&(c[Ll]=!0),null===u?c[io]=[l]:u.push(l)}(x,l);const S=l[Qi];null!==S&&S.insertView(c),l[Fn]|=64}(g,f,x,_);const S=Kd(_,x),O=f[Vn],B=rm(O,x[Xa]);return null!==B&&function KT(c,l,u,f,g,_){f[Vs]=g,f[Hr]=l,tg(c,f,u,1,g,_)}(g,x[Hr],O,f,B,S),l.attachToViewContainerRef(),I(Cf(x),_,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Wg(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),f=k1(this._lContainer,u);f&&(L(Cf(this._lContainer),u),ol(f[an],f))}detach(l){const u=this._adjustIndex(l,-1),f=k1(this._lContainer,u);return f&&null!=L(Cf(this._lContainer),u)?new uc(f):null}_adjustIndex(l,u=0){return l??this.length+u}};function Wg(c){return c[Lo]}function Cf(c){return c[Lo]||(c[Lo]=[])}function by(c,l){let u;const f=l[c.index];if(_i(f))u=f;else{let g;if(8&c.type)g=Vi(f);else{const _=l[Vn];g=_.createComment("");const x=ls(c,l);Wd(_,rm(_,x),g,function rS(c,l){return c.nextSibling(l)}(_,x),!1)}l[c.index]=u=Zb(f,l,g,c),ua(l,u)}return new wy(u,c,l)}class Cy{constructor(l){this.queryList=l,this.matches=null}clone(){return new Cy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ey{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const f=null!==l.contentQueries?l.contentQueries[0]:u.length,g=[];for(let _=0;_<f;_++){const x=u.getByIndex(_);g.push(this.queries[x.indexInDeclarationView].clone())}return new Ey(g)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==u_(l,u).matches&&this.queries[u].setDirty()}}class Ty{constructor(l,u,f=null){this.predicate=l,this.flags=u,this.read=f}}class a_{constructor(l=[]){this.queries=l}elementStart(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let f=0;f<this.length;f++){const g=null!==u?u.length:0,_=this.getByIndex(f).embeddedTView(l,g);_&&(_.indexInDeclarationView=f,null!==u?u.push(_):u=[_])}return null!==u?new a_(u):null}template(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Fs{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Fs(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=l.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let g=0;g<f.length;g++){const _=f[g];this.matchTNodeWithReadOption(l,u,c2(u,_)),this.matchTNodeWithReadOption(l,u,Rd(u,l,_,!1,!1))}else f===Gh?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Rd(u,l,f,!1,!1))}matchTNodeWithReadOption(l,u,f){if(null!==f){const g=this.metadata.read;if(null!==g)if(g===um||g===Kh||g===Gh&&4&u.type)this.addMatch(u.index,-2);else{const _=Rd(u,l,g,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,f)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function c2(c,l){const u=c.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===l)return u[f+1];return null}function Hu(c,l,u,f){return-1===u?function fi(c,l){return 11&c.type?Wl(c,l):4&c.type?vl(c,l):null}(l,c):-2===u?function l2(c,l,u){return u===um?Wl(l,c):u===Gh?vl(l,c):u===Kh?by(l,c):void 0}(c,l,f):Ei(c,c[an],u,l)}function Sy(c,l,u,f){const g=l[Qi].queries[f];if(null===g.matches){const _=c.data,x=u.matches,S=[];for(let O=0;O<x.length;O+=2){const B=x[O];S.push(B<0?null:Hu(l,_[B],x[O+1],u.metadata.read))}g.matches=S}return g.matches}function $u(c,l,u,f){const g=c.queries.getByIndex(u),_=g.matches;if(null!==_){const x=Sy(c,l,g,u);for(let S=0;S<_.length;S+=2){const O=_[S];if(O>0)f.push(x[S/2]);else{const B=_[S+1],G=l[-O];for(let oe=Ir;oe<G.length;oe++){const Te=G[oe];Te[go]===Te[fr]&&$u(Te[an],Te,B,f)}if(null!==G[io]){const oe=G[io];for(let Te=0;Te<oe.length;Te++){const Ze=oe[Te];$u(Ze[an],Ze,B,f)}}}}}return f}function u2(c){const l=ot(),u=yn(),f=Qf();nl(f+1);const g=u_(u,f);if(c.dirty&&function q(c){return 4==(4&c[Fn])}(l)===(2==(2&g.metadata.flags))){if(null===g.matches)c.reset([]);else{const _=g.crossesNgTemplate?$u(u,l,f,[]):Sy(u,l,g,f);c.reset(_,N3),c.notifyOnChanges()}return!0}return!1}function Ay(c,l,u){const f=yn();f.firstCreatePass&&(l_(f,new Ty(c,l,u),-1),2==(2&l)&&(f.staticViewQueries=!0)),c_(f,ot(),l)}function ur(c,l,u,f){const g=yn();if(g.firstCreatePass){const _=_r();l_(g,new Ty(l,u,f),_.index),function d2(c,l){const u=c.contentQueries||(c.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(c.queries.length-1,l)}(g,c),2==(2&u)&&(g.staticContentQueries=!0)}c_(g,ot(),u)}function Br(){return function Yh(c,l){return c[Qi].queries[l].queryList}(ot(),Qf())}function c_(c,l,u){const f=new _l(4==(4&u));Pu(c,l,f,f.destroy),null===l[Qi]&&(l[Qi]=new Ey),l[Qi].queries.push(new Cy(f))}function l_(c,l,u){null===c.queries&&(c.queries=new a_),c.queries.track(new Fs(l,u))}function u_(c,l){return c.queries.getByIndex(l)}function My(c,l){return vl(c,l)}function d_(c){return!!Kr(c)}function wl(...c){}const Tf=new Dr("Application Initializer");let t0=(()=>{class c{constructor(u){this.appInits=u,this.resolve=wl,this.reject=wl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,g)=>{this.resolve=f,this.reject=g})}runInitializers(){if(this.initialized)return;const u=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const _=this.appInits[g]();if(Rv(_))u.push(_);else if(lf(_)){const x=new Promise((S,O)=>{_.subscribe({complete:S,error:O})});u.push(x)}}Promise.all(u).then(()=>{f()}).catch(g=>{this.reject(g)}),0===u.length&&f(),this.initialized=!0}}return c.\u0275fac=function(u){return new(u||c)(Nr(Tf,8))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Ny=new Dr("AppId",{providedIn:"root",factory:function ep(){return`${Ly()}${Ly()}${Ly()}`}});function Ly(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hi=new Dr("Platform Initializer"),x_=new Dr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),b2=new Dr("AnimationModuleType");let bM=(()=>{class c{log(u){console.log(u)}warn(u){console.warn(u)}}return c.\u0275fac=function(u){return new(u||c)},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const w_=new Dr("LocaleId",{providedIn:"root",factory:()=>yc(w_,Pt.Optional|Pt.SkipSelf)||function n0(){return typeof $localize<"u"&&$localize.locale||Lu}()}),C2=new Dr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class E2{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let T2=(()=>{class c{compileModuleSync(u){return new $h(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const f=this.compileModuleSync(u),_=Oc(Kr(u).declarations).reduce((x,S)=>{const O=ar(S);return O&&x.push(new fg(O)),x},[]);return new E2(f,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return c.\u0275fac=function(u){return new(u||c)},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const _s=(()=>Promise.resolve(0))();function gr(c){typeof Zone>"u"?_s.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class ha{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Os(!1),this.onMicrotaskEmpty=new Os(!1),this.onStable=new Os(!1),this.onError=new Os(!1),typeof Zone>"u")throw new Fe(908,!1);Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!f&&u,g.shouldCoalesceRunChangeDetection=f,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function A2(){let c=Kn.requestAnimationFrame,l=Kn.cancelAnimationFrame;if(typeof Zone<"u"&&c&&l){const u=c[Zone.__symbol__("OriginalDelegate")];u&&(c=u);const f=l[Zone.__symbol__("OriginalDelegate")];f&&(l=f)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function M2(c){const l=()=>{!function TM(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(Kn,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,S_(c),c.isCheckStableRunning=!0,T_(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),S_(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,g,_,x,S)=>{try{return A_(c),u.invokeTask(g,_,x,S)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||c.shouldCoalesceRunChangeDetection)&&l(),np(c)}},onInvoke:(u,f,g,_,x,S,O)=>{try{return A_(c),u.invoke(g,_,x,S,O)}finally{c.shouldCoalesceRunChangeDetection&&l(),np(c)}},onHasTask:(u,f,g,_)=>{u.hasTask(g,_),f===g&&("microTask"==_.change?(c._hasPendingMicrotasks=_.microTask,S_(c),T_(c)):"macroTask"==_.change&&(c.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,f,g,_)=>(u.handleError(g,_),c.runOutsideAngular(()=>c.onError.emit(_)),!1)})}(g)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ha.isInAngularZone())throw new Fe(909,!1)}static assertNotInAngularZone(){if(ha.isInAngularZone())throw new Fe(909,!1)}run(l,u,f){return this._inner.run(l,u,f)}runTask(l,u,f,g){const _=this._inner,x=_.scheduleEventTask("NgZoneEvent: "+g,l,E_,wl,wl);try{return _.runTask(x,u,f)}finally{_.cancelTask(x)}}runGuarded(l,u,f){return this._inner.runGuarded(l,u,f)}runOutsideAngular(l){return this._outer.run(l)}}const E_={};function T_(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function S_(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function A_(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function np(c){c._nesting--,T_(c)}class s0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Os,this.onMicrotaskEmpty=new Os,this.onStable=new Os,this.onError=new Os}run(l,u,f){return l.apply(u,f)}runGuarded(l,u,f){return l.apply(u,f)}runOutsideAngular(l){return l()}runTask(l,u,f,g){return l.apply(u,f)}}const rp=new Dr(""),o0=new Dr("");let Zy,I2=(()=>{class c{constructor(u,f,g){this._ngZone=u,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zy||(function P2(c){Zy=c}(g),g.addToWindow(f)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ha.assertNotInAngularZone(),gr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gr(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,g){let _=-1;f&&f>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(x=>x.timeoutId!==_),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:g})}whenStable(u,f,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,f,g){return[]}}return c.\u0275fac=function(u){return new(u||c)(Nr(ha),Nr(Vy),Nr(o0))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac}),c})(),Vy=(()=>{class c{constructor(){this._applications=new Map}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return Zy?.findTestabilityInTree(this,u,f)??null}}return c.\u0275fac=function(u){return new(u||c)},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const bl=!1;let iu=null;const D2=new Dr("AllowMultipleToken"),jy=new Dr("PlatformDestroyListeners"),k2=new Dr("appBootstrapListener");class F2{constructor(l,u){this.name=l,this.token=u}}function sp(c,l,u=[]){const f=`Platform: ${l}`,g=new Dr(f);return(_=[])=>{let x=Sf();if(!x||x.injector.get(D2,!1)){const S=[...u,..._,{provide:g,useValue:!0}];c?c(S):function AM(c){if(iu&&!iu.get(D2,!1))throw new Fe(400,!1);iu=c;const l=c.get(qy);(function M_(c){const l=c.get(hi,null);l&&l.forEach(u=>u())})(c)}(function I_(c=[],l){return Yl.create({name:l,providers:[{provide:cm,useValue:"platform"},{provide:jy,useValue:new Set([()=>iu=null])},...c]})}(S,f))}return function Cl(c){const l=Sf();if(!l)throw new Fe(401,!1);return l}()}}function Sf(){return iu?.get(qy)??null}let qy=(()=>{class c{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const g=function $y(c,l){let u;return u="noop"===c?new s0:("zone.js"===c?void 0:c)||new ha(l),u}(f?.ngZone,function Hy(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(f)),_=[{provide:ha,useValue:g}];return g.run(()=>{const x=Yl.create({providers:_,parent:this.injector,name:u.moduleType.name}),S=u.create(x),O=S.injector.get(fm,null);if(!O)throw new Fe(402,!1);return g.runOutsideAngular(()=>{const B=g.onError.subscribe({next:G=>{O.handleError(G)}});S.onDestroy(()=>{op(this._modules,S),B.unsubscribe()})}),function R2(c,l,u){try{const f=u();return Rv(f)?f.catch(g=>{throw l.runOutsideAngular(()=>c.handleError(g)),g}):f}catch(f){throw l.runOutsideAngular(()=>c.handleError(f)),f}}(O,g,()=>{const B=S.injector.get(t0);return B.runInitializers(),B.donePromise.then(()=>(function vf(c){yt(c,"Expected localeId to be defined"),"string"==typeof c&&($m=c.toLowerCase().replace(/_/g,"-"))}(S.injector.get(w_,Lu)||Lu),this._moduleDoBootstrap(S),S))})})}bootstrapModule(u,f=[]){const g=N2({},f);return function SM(c,l,u){const f=new $h(u);return Promise.resolve(f)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,g))}_moduleDoBootstrap(u){const f=u.injector.get(Ku);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(g=>f.bootstrap(g));else{if(!u.instance.ngDoBootstrap)throw new Fe(-403,!1);u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const u=this._injector.get(jy,null);u&&(u.forEach(f=>f()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(u){return new(u||c)(Nr(Yl))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function N2(c,l){return Array.isArray(l)?l.reduce(N2,c):{...c,...l}}let Ku=(()=>{class c{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,f,g){this._zone=u,this._injector=f,this._exceptionHandler=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new te.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),x=new te.y(S=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{ha.assertNotInAngularZone(),gr(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{ha.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{O.unsubscribe(),B.unsubscribe()}});this.isStable=function Se(...c){const l=(0,we.yG)(c),u=(0,we._6)(c,1/0),f=c;return f.length?1===f.length?(0,ie.Xf)(f[0]):(0,me.J)(u)((0,Ie.D)(f,l)):re.E}(_,x.pipe(function ve(c={}){const{connector:l=(()=>new A.x),resetOnError:u=!0,resetOnComplete:f=!0,resetOnRefCountZero:g=!0}=c;return _=>{let x,S,O,B=0,G=!1,oe=!1;const Te=()=>{S?.unsubscribe(),S=void 0},Ze=()=>{Te(),x=O=void 0,G=oe=!1},ut=()=>{const Nt=x;Ze(),Nt?.unsubscribe()};return(0,Ce.e)((Nt,en)=>{B++,!oe&&!G&&Te();const gn=O=O??l();en.add(()=>{B--,0===B&&!oe&&!G&&(S=Oe(ut,g))}),gn.subscribe(en),!x&&B>0&&(x=new Ue.Hp({next:On=>gn.next(On),error:On=>{oe=!0,Te(),S=Oe(Ze,u,On),gn.error(On)},complete:()=>{G=!0,Te(),S=Oe(Ze,f),gn.complete()}}),(0,ie.Xf)(Nt).subscribe(x))})(_)}}()))}bootstrap(u,f){const g=u instanceof mb;if(!this._injector.get(t0).done){!g&&no(u);throw new Fe(405,bl)}let x;x=g?u:this._injector.get(gh).resolveComponentFactory(u),this.componentTypes.push(x.componentType);const S=function ip(c){return c.isBoundToModule}(x)?void 0:this._injector.get(ts),B=x.create(Yl.NULL,[],f||x.selector,S),G=B.location.nativeElement,oe=B.injector.get(rp,null);return oe?.registerApplication(G),B.onDestroy(()=>{this.detachView(B.hostView),op(this.components,B),oe?.unregisterApplication(G)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new Fe(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;op(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const f=this._injector.get(k2,[]);f.push(...this._bootstrapListeners),f.forEach(g=>g(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>op(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Fe(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(u){return new(u||c)(Nr(ha),Nr(Jd),Nr(fm))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function op(c,l){const u=c.indexOf(l);u>-1&&c.splice(u,1)}let kM=(()=>{class c{}return c.__NG_ELEMENT_ID__=OM,c})();function OM(c){return function Yu(c,l,u){if(Ms(c)&&!u){const f=vi(c.index,l);return new uc(f,f)}return 47&c.type?new uc(l[Li],l):null}(_r(),ot(),16==(16&c))}class ap{constructor(){}supports(l){return Em(l)}create(l){return new UM(l)}}const Mf=(c,l)=>l;class UM{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Mf}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,f=this._removalsHead,g=0,_=null;for(;u||f;){const x=!f||u&&u.currentIndex<$2(f,g,_)?u:f,S=$2(x,g,_),O=x.currentIndex;if(x===f)g--,f=f._nextRemoved;else if(u=u._next,null==x.previousIndex)g++;else{_||(_=[]);const B=S-g,G=O-g;if(B!=G){for(let Te=0;Te<B;Te++){const Ze=Te<_.length?_[Te]:_[Te]=0,ut=Ze+Te;G<=ut&&ut<B&&(_[Te]=Ze+1)}_[x.previousIndex]=G-B}}S!==O&&l(x,S,O)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Em(l))throw new Fe(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let g,_,x,u=this._itHead,f=!1;if(Array.isArray(l)){this.length=l.length;for(let S=0;S<this.length;S++)_=l[S],x=this._trackByFn(S,_),null!==u&&Object.is(u.trackById,x)?(f&&(u=this._verifyReinsertion(u,_,x,S)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,x,S),f=!0),u=u._next}else g=0,function Xb(c,l){if(Array.isArray(c))for(let u=0;u<c.length;u++)l(c[u]);else{const u=c[Symbol.iterator]();let f;for(;!(f=u.next()).done;)l(f.value)}}(l,S=>{x=this._trackByFn(g,S),null!==u&&Object.is(u.trackById,x)?(f&&(u=this._verifyReinsertion(u,S,x,g)),Object.is(u.item,S)||this._addIdentityChange(u,S)):(u=this._mismatch(u,S,x,g),f=!0),u=u._next,g++}),this.length=g;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,f,g){let _;return null===l?_=this._itTail:(_=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,_,g)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(f,g))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,_,g)):l=this._addAfter(new q2(u,f),_,g),l}_verifyReinsertion(l,u,f,g){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==_?l=this._reinsertAfter(_,l._prev,g):l.currentIndex!=g&&(l.currentIndex=g,this._addToMoves(l,g)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const g=l._prevRemoved,_=l._nextRemoved;return null===g?this._removalsHead=_:g._nextRemoved=_,null===_?this._removalsTail=g:_._prevRemoved=g,this._insertAfter(l,u,f),this._addToMoves(l,f),l}_moveAfter(l,u,f){return this._unlink(l),this._insertAfter(l,u,f),this._addToMoves(l,f),l}_addAfter(l,u,f){return this._insertAfter(l,u,f),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,f){const g=null===u?this._itHead:u._next;return l._next=g,l._prev=u,null===g?this._itTail=l:g._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new H2),this._linkedRecords.put(l),l.currentIndex=f,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,f=l._next;return null===u?this._itHead=f:u._next=f,null===f?this._itTail=u:f._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new H2),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class q2{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BM{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===u||u<=f.currentIndex)&&Object.is(f.trackById,l))return f;return null}remove(l){const u=l._prevDup,f=l._nextDup;return null===u?this._head=f:u._nextDup=f,null===f?this._tail=u:f._prevDup=u,null===this._head}}class H2{constructor(){this.map=new Map}put(l){const u=l.trackById;let f=this.map.get(u);f||(f=new BM,this.map.set(u,f)),f.add(l)}get(l,u){const g=this.map.get(l);return g?g.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $2(c,l,u){const f=c.previousIndex;if(null===f)return f;let g=0;return u&&f<u.length&&(g=u[f]),f+l+g}class cp{constructor(){}supports(l){return l instanceof Map||Tm(l)}create(){return new If}}class If{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Tm(l)))throw new Fe(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(f,g)=>{if(u&&u.key===g)this._maybeAddToChanges(u,f),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(g,f);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let f=u;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const f=l._prev;return u._next=l,u._prev=f,l._prev=u,f&&(f._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const g=this._records.get(l);this._maybeAddToChanges(g,u);const _=g._prev,x=g._next;return _&&(_._next=x),x&&(x._prev=_),g._next=null,g._prev=null,g}const f=new ed(l);return this._records.set(l,f),f.currentValue=u,this._addToAdditions(f),f}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(f=>u(l[f],f))}}class ed{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Wy(){return new Ky([new ap])}let Ky=(()=>{class c{constructor(u){this.factories=u}static create(u,f){if(null!=f){const g=f.factories.slice();u=u.concat(g)}return new c(u)}static extend(u){return{provide:c,useFactory:f=>c.create(u,f||Wy()),deps:[[c,new Gp,new qd]]}}find(u){const f=this.factories.find(g=>g.supports(u));if(null!=f)return f;throw new Fe(901,!1)}}return c.\u0275prov=Wn({token:c,providedIn:"root",factory:Wy}),c})();function z2(){return new u0([new cp])}let u0=(()=>{class c{constructor(u){this.factories=u}static create(u,f){if(f){const g=f.factories.slice();u=u.concat(g)}return new c(u)}static extend(u){return{provide:c,useFactory:f=>c.create(u,f||z2()),deps:[[c,new Gp,new qd]]}}find(u){const f=this.factories.find(g=>g.supports(u));if(f)return f;throw new Fe(901,!1)}}return c.\u0275prov=Wn({token:c,providedIn:"root",factory:z2}),c})();const Y2=sp(null,"core",[]);let F_=(()=>{class c{constructor(u){}}return c.\u0275fac=function(u){return new(u||c)(Nr(Ku))},c.\u0275mod=Qa({type:c}),c.\u0275inj=Ts({}),c})();function ZM(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}},1481:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{Dx:()=>wr,b2:()=>jr,q6:()=>Ts,se:()=>nn});var A=Z(6895),s=Z(8256);class te extends A.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class me extends te{static makeCurrent(){(0,A.HT)(new me)}onAndCancel(De,le,je){return De.addEventListener(le,je,!1),()=>{De.removeEventListener(le,je,!1)}}dispatchEvent(De,le){De.dispatchEvent(le)}remove(De){De.parentNode&&De.parentNode.removeChild(De)}createElement(De,le){return(le=le||this.getDefaultDocument()).createElement(De)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(De){return De.nodeType===Node.ELEMENT_NODE}isShadowRoot(De){return De instanceof DocumentFragment}getGlobalEventTarget(De,le){return"window"===le?window:"document"===le?De:"body"===le?De.body:null}getBaseHref(De){const le=function re(){return ie=ie||document.querySelector("base"),ie?ie.getAttribute("href"):null}();return null==le?null:function Ie(Ke){we=we||document.createElement("a"),we.setAttribute("href",Ke);const De=we.pathname;return"/"===De.charAt(0)?De:`/${De}`}(le)}resetBaseElement(){ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(De){return(0,A.Mx)(document.cookie,De)}}let we,ie=null;const Se=new s.OlP("TRANSITION_ID"),Ce=[{provide:s.ip1,useFactory:function Ue(Ke,De,le){return()=>{le.get(s.CZH).donePromise.then(()=>{const je=(0,A.q)(),lt=De.querySelectorAll(`style[ng-transition="${Ke}"]`);for(let Kt=0;Kt<lt.length;Kt++)je.remove(lt[Kt])})}},deps:[Se,A.K0,s.zs3],multi:!0}];let Oe=(()=>{class Ke{build(){return new XMLHttpRequest}}return Ke.\u0275fac=function(le){return new(le||Ke)},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const Pe=new s.OlP("EventManagerPlugins");let nt=(()=>{class Ke{constructor(le,je){this._zone=je,this._eventNameToPlugin=new Map,le.forEach(lt=>{lt.manager=this}),this._plugins=le.slice().reverse()}addEventListener(le,je,lt){return this._findPluginFor(je).addEventListener(le,je,lt)}addGlobalEventListener(le,je,lt){return this._findPluginFor(je).addGlobalEventListener(le,je,lt)}getZone(){return this._zone}_findPluginFor(le){const je=this._eventNameToPlugin.get(le);if(je)return je;const lt=this._plugins;for(let Kt=0;Kt<lt.length;Kt++){const kn=lt[Kt];if(kn.supports(le))return this._eventNameToPlugin.set(le,kn),kn}throw new Error(`No event manager plugin found for event ${le}`)}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(Pe),s.LFG(s.R0b))},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();class gt{constructor(De){this._doc=De}addGlobalEventListener(De,le,je){const lt=(0,A.q)().getGlobalEventTarget(this._doc,De);if(!lt)throw new Error(`Unsupported event target ${lt} for event ${le}`);return this.addEventListener(lt,le,je)}}let Ft=(()=>{class Ke{constructor(){this.usageCount=new Map}addStyles(le){for(const je of le)1===this.changeUsageCount(je,1)&&this.onStyleAdded(je)}removeStyles(le){for(const je of le)0===this.changeUsageCount(je,-1)&&this.onStyleRemoved(je)}onStyleRemoved(le){}onStyleAdded(le){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(le,je){const lt=this.usageCount;let Kt=lt.get(le)??0;return Kt+=je,Kt>0?lt.set(le,Kt):lt.delete(le),Kt}ngOnDestroy(){for(const le of this.getAllStyles())this.onStyleRemoved(le);this.usageCount.clear()}}return Ke.\u0275fac=function(le){return new(le||Ke)},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})(),ln=(()=>{class Ke extends Ft{constructor(le){super(),this.doc=le,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(le){for(const je of this.hostNodes)this.addStyleToHost(je,le)}onStyleRemoved(le){const je=this.styleRef;je.get(le)?.forEach(Kt=>Kt.remove()),je.delete(le)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(le){this.hostNodes.add(le);for(const je of this.getAllStyles())this.addStyleToHost(le,je)}removeHost(le){this.hostNodes.delete(le)}addStyleToHost(le,je){const lt=this.doc.createElement("style");lt.textContent=je,le.appendChild(lt);const Kt=this.styleRef.get(je);Kt?Kt.push(lt):this.styleRef.set(je,[lt])}resetHostNodes(){const le=this.hostNodes;le.clear(),le.add(this.doc.head)}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(A.K0))},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const Wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tt=/%COMP%/g,_t=new s.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function pn(Ke,De){return De.flat(100).map(le=>le.replace(Tt,Ke))}function mn(Ke){return De=>{if("__ngUnwrap__"===De)return Ke;!1===Ke(De)&&(De.preventDefault(),De.returnValue=!1)}}let nn=(()=>{class Ke{constructor(le,je,lt,Kt){this.eventManager=le,this.sharedStylesHost=je,this.appId=lt,this.removeStylesOnCompDestory=Kt,this.rendererByCompId=new Map,this.defaultRenderer=new Or(le)}createRenderer(le,je){if(!le||!je)return this.defaultRenderer;const lt=this.getOrCreateRenderer(le,je);return lt instanceof it?lt.applyToHost(le):lt instanceof $e&&lt.applyStyles(),lt}getOrCreateRenderer(le,je){const lt=this.rendererByCompId;let Kt=lt.get(je.id);if(!Kt){const kn=this.eventManager,Tn=this.sharedStylesHost,Sr=this.removeStylesOnCompDestory;switch(je.encapsulation){case s.ifc.Emulated:Kt=new it(kn,Tn,je,this.appId,Sr);break;case s.ifc.ShadowDom:return new qe(kn,Tn,le,je);default:Kt=new $e(kn,Tn,je,Sr)}Kt.onDestroy=()=>lt.delete(je.id),lt.set(je.id,Kt)}return Kt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(nt),s.LFG(ln),s.LFG(s.AFp),s.LFG(_t))},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();class Or{constructor(De){this.eventManager=De,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(De,le){return le?document.createElementNS(Wt[le]||le,De):document.createElement(De)}createComment(De){return document.createComment(De)}createText(De){return document.createTextNode(De)}appendChild(De,le){(Tr(De)?De.content:De).appendChild(le)}insertBefore(De,le,je){De&&(Tr(De)?De.content:De).insertBefore(le,je)}removeChild(De,le){De&&De.removeChild(le)}selectRootElement(De,le){let je="string"==typeof De?document.querySelector(De):De;if(!je)throw new Error(`The selector "${De}" did not match any elements`);return le||(je.textContent=""),je}parentNode(De){return De.parentNode}nextSibling(De){return De.nextSibling}setAttribute(De,le,je,lt){if(lt){le=lt+":"+le;const Kt=Wt[lt];Kt?De.setAttributeNS(Kt,le,je):De.setAttribute(le,je)}else De.setAttribute(le,je)}removeAttribute(De,le,je){if(je){const lt=Wt[je];lt?De.removeAttributeNS(lt,le):De.removeAttribute(`${je}:${le}`)}else De.removeAttribute(le)}addClass(De,le){De.classList.add(le)}removeClass(De,le){De.classList.remove(le)}setStyle(De,le,je,lt){lt&(s.JOm.DashCase|s.JOm.Important)?De.style.setProperty(le,je,lt&s.JOm.Important?"important":""):De.style[le]=je}removeStyle(De,le,je){je&s.JOm.DashCase?De.style.removeProperty(le):De.style[le]=""}setProperty(De,le,je){De[le]=je}setValue(De,le){De.nodeValue=le}listen(De,le,je){return"string"==typeof De?this.eventManager.addGlobalEventListener(De,le,mn(je)):this.eventManager.addEventListener(De,le,mn(je))}}function Tr(Ke){return"TEMPLATE"===Ke.tagName&&void 0!==Ke.content}class qe extends Or{constructor(De,le,je,lt){super(De),this.sharedStylesHost=le,this.hostEl=je,this.shadowRoot=je.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Kt=pn(lt.id,lt.styles);for(const kn of Kt){const Tn=document.createElement("style");Tn.textContent=kn,this.shadowRoot.appendChild(Tn)}}nodeOrShadowRoot(De){return De===this.hostEl?this.shadowRoot:De}appendChild(De,le){return super.appendChild(this.nodeOrShadowRoot(De),le)}insertBefore(De,le,je){return super.insertBefore(this.nodeOrShadowRoot(De),le,je)}removeChild(De,le){return super.removeChild(this.nodeOrShadowRoot(De),le)}parentNode(De){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(De)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $e extends Or{constructor(De,le,je,lt,Kt=je.id){super(De),this.sharedStylesHost=le,this.removeStylesOnCompDestory=lt,this.rendererUsageCount=0,this.styles=pn(Kt,je.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class it extends $e{constructor(De,le,je,lt,Kt){const kn=lt+"-"+je.id;super(De,le,je,Kt,kn),this.contentAttr=function He(Ke){return"_ngcontent-%COMP%".replace(Tt,Ke)}(kn),this.hostAttr=function kt(Ke){return"_nghost-%COMP%".replace(Tt,Ke)}(kn)}applyToHost(De){this.applyStyles(),this.setAttribute(De,this.hostAttr,"")}createElement(De,le){const je=super.createElement(De,le);return super.setAttribute(je,this.contentAttr,""),je}}let st=(()=>{class Ke extends gt{constructor(le){super(le)}supports(le){return!0}addEventListener(le,je,lt){return le.addEventListener(je,lt,!1),()=>this.removeEventListener(le,je,lt)}removeEventListener(le,je,lt){return le.removeEventListener(je,lt)}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(A.K0))},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const vt=["alt","control","meta","shift"],pt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fn={alt:Ke=>Ke.altKey,control:Ke=>Ke.ctrlKey,meta:Ke=>Ke.metaKey,shift:Ke=>Ke.shiftKey};let En=(()=>{class Ke extends gt{constructor(le){super(le)}supports(le){return null!=Ke.parseEventName(le)}addEventListener(le,je,lt){const Kt=Ke.parseEventName(je),kn=Ke.eventCallback(Kt.fullKey,lt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,A.q)().onAndCancel(le,Kt.domEventName,kn))}static parseEventName(le){const je=le.toLowerCase().split("."),lt=je.shift();if(0===je.length||"keydown"!==lt&&"keyup"!==lt)return null;const Kt=Ke._normalizeKey(je.pop());let kn="",Tn=je.indexOf("code");if(Tn>-1&&(je.splice(Tn,1),kn="code."),vt.forEach(Ma=>{const Ri=je.indexOf(Ma);Ri>-1&&(je.splice(Ri,1),kn+=Ma+".")}),kn+=Kt,0!=je.length||0===Kt.length)return null;const Sr={};return Sr.domEventName=lt,Sr.fullKey=kn,Sr}static matchEventFullKeyCode(le,je){let lt=pt[le.key]||le.key,Kt="";return je.indexOf("code.")>-1&&(lt=le.code,Kt="code."),!(null==lt||!lt)&&(lt=lt.toLowerCase()," "===lt?lt="space":"."===lt&&(lt="dot"),vt.forEach(kn=>{kn!==lt&&(0,fn[kn])(le)&&(Kt+=kn+".")}),Kt+=lt,Kt===je)}static eventCallback(le,je,lt){return Kt=>{Ke.matchEventFullKeyCode(Kt,le)&&lt.runGuarded(()=>je(Kt))}}static _normalizeKey(le){return"esc"===le?"escape":le}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(A.K0))},Ke.\u0275prov=s.Yz7({token:Ke,factory:Ke.\u0275fac}),Ke})();const Ts=(0,s.eFA)(s._c5,"browser",[{provide:s.Lbi,useValue:A.bD},{provide:s.g9A,useValue:function Bn(){me.makeCurrent()},multi:!0},{provide:A.K0,useFactory:function Wn(){return(0,s.RDi)(document),document},deps:[]}]),ti=new s.OlP(""),or=[{provide:s.rWj,useClass:class ve{addToWindow(De){s.dqk.getAngularTestability=(je,lt=!0)=>{const Kt=De.findTestabilityInTree(je,lt);if(null==Kt)throw new Error("Could not find testability for element.");return Kt},s.dqk.getAllAngularTestabilities=()=>De.getAllTestabilities(),s.dqk.getAllAngularRootElements=()=>De.getAllRootElements(),s.dqk.frameworkStabilizers||(s.dqk.frameworkStabilizers=[]),s.dqk.frameworkStabilizers.push(je=>{const lt=s.dqk.getAllAngularTestabilities();let Kt=lt.length,kn=!1;const Tn=function(Sr){kn=kn||Sr,Kt--,0==Kt&&je(kn)};lt.forEach(function(Sr){Sr.whenStable(Tn)})})}findTestabilityInTree(De,le,je){return null==le?null:De.getTestability(le)??(je?(0,A.q)().isShadowRoot(le)?this.findTestabilityInTree(De,le.host,!0):this.findTestabilityInTree(De,le.parentElement,!0):null)}},deps:[]},{provide:s.lri,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]},{provide:s.dDg,useClass:s.dDg,deps:[s.R0b,s.eoX,s.rWj]}],to=[{provide:s.zSh,useValue:"root"},{provide:s.qLn,useFactory:function rr(){return new s.qLn},deps:[]},{provide:Pe,useClass:st,multi:!0,deps:[A.K0,s.R0b,s.Lbi]},{provide:Pe,useClass:En,multi:!0,deps:[A.K0]},{provide:nn,useClass:nn,deps:[nt,ln,s.AFp,_t]},{provide:s.FYo,useExisting:nn},{provide:Ft,useExisting:ln},{provide:ln,useClass:ln,deps:[A.K0]},{provide:nt,useClass:nt,deps:[Pe,s.R0b]},{provide:A.JF,useClass:Oe,deps:[]},[]];let jr=(()=>{class Ke{constructor(le){}static withServerTransition(le){return{ngModule:Ke,providers:[{provide:s.AFp,useValue:le.appId},{provide:Se,useExisting:s.AFp},Ce]}}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(ti,12))},Ke.\u0275mod=s.oAB({type:Ke}),Ke.\u0275inj=s.cJS({providers:[...to,...or],imports:[A.ez,s.hGG]}),Ke})(),wr=(()=>{class Ke{constructor(le){this._doc=le}getTitle(){return this._doc.title}setTitle(le){this._doc.title=le||""}}return Ke.\u0275fac=function(le){return new(le||Ke)(s.LFG(A.K0))},Ke.\u0275prov=s.Yz7({token:Ke,factory:function(le){let je=null;return je=le?new le:function Ea(){return new wr((0,s.LFG)(A.K0))}(),je},providedIn:"root"}),Ke})();typeof window<"u"&&window},6785:(Jt,Ne,Z)=>{"use strict";Z.d(Ne,{gz:()=>Ms,F0:()=>oo,rH:()=>wo,Od:()=>Od,Bz:()=>mw,lC:()=>Ul});var A=Z(8256),s=Z(2076),te=Z(9646),me=Z(1135),ie=Z(6805),re=Z(9841),we=Z(7272),Ie=Z(9751),Se=Z(8421);function Ue(w){return new Ie.y(C=>{(0,Se.Xf)(w()).subscribe(C)})}var Ce=Z(9635),ve=Z(2843),Oe=Z(515),Pe=Z(727),nt=Z(4482),gt=Z(5403);function Ft(){return(0,nt.e)((w,C)=>{let v=null;w._refCount++;const I=(0,gt.x)(C,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(v=null);const L=w._connection,z=v;v=null,L&&(!z||L===z)&&L.unsubscribe(),C.unsubscribe()});w.subscribe(I),I.closed||(v=w.connect())})}class ln extends Ie.y{constructor(C,v){super(),this.source=C,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,nt.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new Pe.w0;const v=this.getSubject();C.add(this.source.subscribe((0,gt.x)(v,void 0,()=>{this._teardown(),v.complete()},I=>{this._teardown(),v.error(I)},()=>this._teardown()))),C.closed&&(this._connection=null,C=Pe.w0.EMPTY)}return C}refCount(){return Ft()(this)}}var Wt=Z(7579),Tt=Z(6895),Xe=Z(4004),Et=Z(3900),qt=Z(5698),Mt=Z(3269);function _t(w,C){return(0,nt.e)((v,I)=>{let L=0;v.subscribe((0,gt.x)(I,z=>w.call(C,z,L++)&&I.next(z)))})}var He=Z(5577);function kt(w){return(0,nt.e)((C,v)=>{let I=!1;C.subscribe((0,gt.x)(v,L=>{I=!0,v.next(L)},()=>{I||v.next(w),v.complete()}))})}function pn(w=mn){return(0,nt.e)((C,v)=>{let I=!1;C.subscribe((0,gt.x)(v,L=>{I=!0,v.next(L)},()=>I?v.complete():v.error(w())))})}function mn(){return new ie.K}var nn=Z(4671);function Or(w,C){const v=arguments.length>=2;return I=>I.pipe(w?_t((L,z)=>w(L,z,I)):nn.y,(0,qt.q)(1),v?kt(C):pn(()=>new ie.K))}var Ur=Z(576);function gi(w,C){return(0,Ur.m)(C)?(0,He.z)(w,C,1):(0,He.z)(w,1)}var Tr=Z(8505),qe=Z(262);function it(w,C){return(0,nt.e)(function $e(w,C,v,I,L){return(z,Q)=>{let Le=v,ft=C,rn=0;z.subscribe((0,gt.x)(Q,Ht=>{const lr=rn++;ft=Le?w(ft,Ht,lr):(Le=!0,Ht),I&&Q.next(ft)},L&&(()=>{Le&&Q.next(ft),Q.complete()})))}}(w,C,arguments.length>=2,!0))}function st(w){return w<=0?()=>Oe.E:(0,nt.e)((C,v)=>{let I=[];C.subscribe((0,gt.x)(v,L=>{I.push(L),w<I.length&&I.shift()},()=>{for(const L of I)v.next(L);v.complete()},void 0,()=>{I=null}))})}function vt(w,C){const v=arguments.length>=2;return I=>I.pipe(w?_t((L,z)=>w(L,z,I)):nn.y,st(1),v?kt(C):pn(()=>new ie.K))}var fn=Z(9718),En=Z(8746),er=Z(8189),In=Z(1481);const yt="primary",jt=Symbol("RouteTitle");class Fr{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v[0]:v}return null}getAll(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Bn(w){return new Fr(w)}function rr(w,C,v){const I=v.path.split("/");if(I.length>w.length||"full"===v.pathMatch&&(C.hasChildren()||I.length<w.length))return null;const L={};for(let z=0;z<I.length;z++){const Q=I[z],Le=w[z];if(Q.startsWith(":"))L[Q.substring(1)]=Le;else if(Q!==Le.path)return null}return{consumed:w.slice(0,I.length),posParams:L}}function Zr(w,C){const v=w?Object.keys(w):void 0,I=C?Object.keys(C):void 0;if(!v||!I||v.length!=I.length)return!1;let L;for(let z=0;z<v.length;z++)if(L=v[z],!Ts(w[L],C[L]))return!1;return!0}function Ts(w,C){if(Array.isArray(w)&&Array.isArray(C)){if(w.length!==C.length)return!1;const v=[...w].sort(),I=[...C].sort();return v.every((L,z)=>I[z]===L)}return w===C}function ti(w){return Array.prototype.concat.apply([],w)}function or(w){return w.length>0?w[w.length-1]:null}function jr(w,C){for(const v in w)w.hasOwnProperty(v)&&C(w[v],v)}function Ss(w){return(0,A.CqO)(w)?w:(0,A.QGY)(w)?(0,s.D)(Promise.resolve(w)):(0,te.of)(w)}const lo=!1,uo={exact:function Dn(w,C,v){if(!Yn(w.segments,C.segments)||!Gi(w.segments,C.segments,v)||w.numberOfChildren!==C.numberOfChildren)return!1;for(const I in C.children)if(!w.children[I]||!Dn(w.children[I],C.children[I],v))return!1;return!0},subset:Wr},Ea={exact:function Pt(w,C){return Zr(w,C)},subset:function du(w,C){return Object.keys(C).length<=Object.keys(w).length&&Object.keys(C).every(v=>Ts(w[v],C[v]))},ignored:()=>!0};function wr(w,C,v){return uo[v.paths](w.root,C.root,v.matrixParams)&&Ea[v.queryParams](w.queryParams,C.queryParams)&&!("exact"===v.fragment&&w.fragment!==C.fragment)}function Wr(w,C,v){return bi(w,C,C.segments,v)}function bi(w,C,v,I){if(w.segments.length>v.length){const L=w.segments.slice(0,v.length);return!(!Yn(L,v)||C.hasChildren()||!Gi(L,v,I))}if(w.segments.length===v.length){if(!Yn(w.segments,v)||!Gi(w.segments,v,I))return!1;for(const L in C.children)if(!w.children[L]||!Wr(w.children[L],C.children[L],I))return!1;return!0}{const L=v.slice(0,w.segments.length),z=v.slice(w.segments.length);return!!(Yn(w.segments,L)&&Gi(w.segments,L,I)&&w.children[yt])&&bi(w.children[yt],C,z,I)}}function Gi(w,C,v){return C.every((I,L)=>Ea[v](w[L].parameters,I.parameters))}class Kn{constructor(C=new jn([],{}),v={},I=null){this.root=C,this.queryParams=v,this.fragment=I}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bn(this.queryParams)),this._queryParamMap}toString(){return fo.serialize(this)}}class jn{constructor(C,v){this.segments=C,this.children=v,this.parent=null,jr(v,(I,L)=>I.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ki(this)}}class Rr{constructor(C,v){this.path=C,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Bn(this.parameters)),this._parameterMap}toString(){return Sa(this)}}function Yn(w,C){return w.length===C.length&&w.every((v,I)=>v.path===C[I].path)}let Fi=(()=>{class w{}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:function(){return new Ga},providedIn:"root"}),w})();class Ga{parse(C){const v=new kn(C);return new Kn(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(C){const v=`/${ho(C.root,!0)}`,I=function Wa(w){const C=Object.keys(w).map(v=>{const I=w[v];return Array.isArray(I)?I.map(L=>`${Yi(v)}=${Yi(L)}`).join("&"):`${Yi(v)}=${Yi(I)}`}).filter(v=>!!v);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${v}${I}${"string"==typeof C.fragment?`#${function Wo(w){return encodeURI(w)}(C.fragment)}`:""}`}}const fo=new Ga;function Ki(w){return w.segments.map(C=>Sa(C)).join("/")}function ho(w,C){if(!w.hasChildren())return Ki(w);if(C){const v=w.children[yt]?ho(w.children[yt],!1):"",I=[];return jr(w.children,(L,z)=>{z!==yt&&I.push(`${z}:${ho(L,!1)}`)}),I.length>0?`${v}(${I.join("//")})`:v}{const v=function Ta(w,C){let v=[];return jr(w.children,(I,L)=>{L===yt&&(v=v.concat(C(I,L)))}),jr(w.children,(I,L)=>{L!==yt&&(v=v.concat(C(I,L)))}),v}(w,(I,L)=>L===yt?[ho(w.children[yt],!1)]:[`${L}:${ho(I,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[yt]?`${Ki(w)}/${v[0]}`:`${Ki(w)}/(${v.join("//")})`}}function Ro(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yi(w){return Ro(w).replace(/%3B/gi,";")}function Nr(w){return Ro(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ko(w){return decodeURIComponent(w)}function yc(w){return Ko(w.replace(/\+/g,"%20"))}function Sa(w){return`${Nr(w.path)}${function Aa(w){return Object.keys(w).map(C=>`;${Nr(C)}=${Nr(w[C])}`).join("")}(w.parameters)}`}const Ke=/^[^\/()?;=#]+/;function De(w){const C=w.match(Ke);return C?C[0]:""}const le=/^[^=?&#]+/,lt=/^[^&#]+/;class kn{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jn([],{}):new jn([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let I={};return this.peekStartsWith("(")&&(I=this.parseParens(!1)),(C.length>0||Object.keys(v).length>0)&&(I[yt]=new jn(C,v)),I}parseSegment(){const C=De(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new A.vHH(4009,lo);return this.capture(C),new Rr(Ko(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const v=De(this.remaining);if(!v)return;this.capture(v);let I="";if(this.consumeOptional("=")){const L=De(this.remaining);L&&(I=L,this.capture(I))}C[Ko(v)]=Ko(I)}parseQueryParam(C){const v=function je(w){const C=w.match(le);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let I="";if(this.consumeOptional("=")){const Q=function Kt(w){const C=w.match(lt);return C?C[0]:""}(this.remaining);Q&&(I=Q,this.capture(I))}const L=yc(v),z=yc(I);if(C.hasOwnProperty(L)){let Q=C[L];Array.isArray(Q)||(Q=[Q],C[L]=Q),Q.push(z)}else C[L]=z}parseParens(C){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const I=De(this.remaining),L=this.remaining[I.length];if("/"!==L&&")"!==L&&";"!==L)throw new A.vHH(4010,lo);let z;I.indexOf(":")>-1?(z=I.slice(0,I.indexOf(":")),this.capture(z),this.capture(":")):C&&(z=yt);const Q=this.parseChildren();v[z]=1===Object.keys(Q).length?Q[yt]:new jn([],Q),this.consumeOptional("//")}return v}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new A.vHH(4011,lo)}}function Tn(w){return w.segments.length>0?new jn([],{[yt]:w}):w}function Sr(w){const C={};for(const I of Object.keys(w.children)){const z=Sr(w.children[I]);(z.segments.length>0||z.hasChildren())&&(C[I]=z)}return function Ma(w){if(1===w.numberOfChildren&&w.children[yt]){const C=w.children[yt];return new jn(w.segments.concat(C.segments),C.children)}return w}(new jn(w.segments,C))}function Ri(w){return w instanceof Kn}const Ia=!1;function md(w,C,v,I,L){if(0===v.length)return Da(C.root,C.root,C.root,I,L);const z=function Jo(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new os(!0,0,w);let C=0,v=!1;const I=w.reduce((L,z,Q)=>{if("object"==typeof z&&null!=z){if(z.outlets){const Le={};return jr(z.outlets,(ft,rn)=>{Le[rn]="string"==typeof ft?ft.split("/"):ft}),[...L,{outlets:Le}]}if(z.segmentPath)return[...L,z.segmentPath]}return"string"!=typeof z?[...L,z]:0===Q?(z.split("/").forEach((Le,ft)=>{0==ft&&"."===Le||(0==ft&&""===Le?v=!0:".."===Le?C++:""!=Le&&L.push(Le))}),L):[...L,z]},[]);return new os(v,C,I)}(v);return z.toRoot()?Da(C.root,C.root,new jn([],{}),I,L):function Q(ft){const rn=function ar(w,C,v,I){if(w.isAbsolute)return new No(C.root,!0,0);if(-1===I)return new No(v,v===C.root,0);return function si(w,C,v){let I=w,L=C,z=v;for(;z>L;){if(z-=L,I=I.parent,!I)throw new A.vHH(4005,Ia&&"Invalid number of '../'");L=I.segments.length}return new No(I,!1,L-z)}(v,I+(Yo(w.commands[0])?0:1),w.numberOfDoubleDots)}(z,C,w.snapshot?._urlSegment,ft),Ht=rn.processChildren?Kr(rn.segmentGroup,rn.index,z.commands):no(rn.segmentGroup,rn.index,z.commands);return Da(C.root,rn.segmentGroup,Ht,I,L)}(w.snapshot?._lastPathIndex)}function Yo(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Ja(w){return"object"==typeof w&&null!=w&&w.outlets}function Da(w,C,v,I,L){let Q,z={};I&&jr(I,(ft,rn)=>{z[rn]=Array.isArray(ft)?ft.map(Ht=>`${Ht}`):`${ft}`}),Q=w===C?v:Qa(w,C,v);const Le=Tn(Sr(Q));return new Kn(Le,z,L)}function Qa(w,C,v){const I={};return jr(w.children,(L,z)=>{I[z]=L===C?v:Qa(L,C,v)}),new jn(w.segments,I)}class os{constructor(C,v,I){if(this.isAbsolute=C,this.numberOfDoubleDots=v,this.commands=I,C&&I.length>0&&Yo(I[0]))throw new A.vHH(4003,Ia&&"Root segment cannot have matrix parameters");const L=I.find(Ja);if(L&&L!==or(I))throw new A.vHH(4004,Ia&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class No{constructor(C,v,I){this.segmentGroup=C,this.processChildren=v,this.index=I}}function no(w,C,v){if(w||(w=new jn([],{})),0===w.segments.length&&w.hasChildren())return Kr(w,C,v);const I=function Rl(w,C,v){let I=0,L=C;const z={match:!1,pathIndex:0,commandIndex:0};for(;L<w.segments.length;){if(I>=v.length)return z;const Q=w.segments[L],Le=v[I];if(Ja(Le))break;const ft=`${Le}`,rn=I<v.length-1?v[I+1]:null;if(L>0&&void 0===ft)break;if(ft&&rn&&"object"==typeof rn&&void 0===rn.outlets){if(!an(ft,rn,Q))return z;I+=2}else{if(!an(ft,{},Q))return z;I++}L++}return{match:!0,pathIndex:L,commandIndex:I}}(w,C,v),L=v.slice(I.commandIndex);if(I.match&&I.pathIndex<w.segments.length){const z=new jn(w.segments.slice(0,I.pathIndex),{});return z.children[yt]=new jn(w.segments.slice(I.pathIndex),w.children),Kr(z,0,L)}return I.match&&0===L.length?new jn(w.segments,{}):I.match&&!w.hasChildren()?ro(w,C,v):I.match?Kr(w,0,L):ro(w,C,v)}function Kr(w,C,v){if(0===v.length)return new jn(w.segments,{});{const I=function mi(w){return Ja(w[0])?w[0].outlets:{[yt]:w}}(v),L={};if(!I[yt]&&w.children[yt]&&1===w.numberOfChildren&&0===w.children[yt].segments.length){const z=Kr(w.children[yt],C,v);return new jn(w.segments,z.children)}return jr(I,(z,Q)=>{"string"==typeof z&&(z=[z]),null!==z&&(L[Q]=no(w.children[Q],C,z))}),jr(w.children,(z,Q)=>{void 0===I[Q]&&(L[Q]=z)}),new jn(w.segments,L)}}function ro(w,C,v){const I=w.segments.slice(0,C);let L=0;for(;L<v.length;){const z=v[L];if(Ja(z)){const ft=Ji(z.outlets);return new jn(I,ft)}if(0===L&&Yo(v[0])){I.push(new Rr(w.segments[C].path,Vs(v[0]))),L++;continue}const Q=Ja(z)?z.outlets[yt]:`${z}`,Le=L<v.length-1?v[L+1]:null;Q&&Le&&Yo(Le)?(I.push(new Rr(Q,Vs(Le))),L+=2):(I.push(new Rr(Q,{})),L++)}return new jn(I,{})}function Ji(w){const C={};return jr(w,(v,I)=>{"string"==typeof v&&(v=[v]),null!==v&&(C[I]=ro(new jn([],{}),0,v))}),C}function Vs(w){const C={};return jr(w,(v,I)=>C[I]=`${v}`),C}function an(w,C,v){return w==v.path&&Zr(C,v.parameters)}const Fn="imperative";class fr{constructor(C,v){this.id=C,this.url=v}}class as extends fr{constructor(C,v,I="imperative",L=null){super(C,v),this.type=0,this.navigationTrigger=I,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends fr{constructor(C,v,I){super(C,v),this.urlAfterRedirects=I,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hr extends fr{constructor(C,v,I,L){super(C,v),this.reason=I,this.code=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qo extends fr{constructor(C,v,I,L){super(C,v),this.reason=I,this.code=L,this.type=16}}class $r extends fr{constructor(C,v,I,L){super(C,v),this.error=I,this.target=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Yc extends fr{constructor(C,v,I,L){super(C,v),this.urlAfterRedirects=I,this.state=L,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class po extends fr{constructor(C,v,I,L){super(C,v),this.urlAfterRedirects=I,this.state=L,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vn extends fr{constructor(C,v,I,L,z){super(C,v),this.urlAfterRedirects=I,this.state=L,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fu extends fr{constructor(C,v,I,L){super(C,v),this.urlAfterRedirects=I,this.state=L,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xc extends fr{constructor(C,v,I,L){super(C,v),this.urlAfterRedirects=I,this.state=L,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class As{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xn{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Li{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class go{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ka{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qi{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xi{constructor(C,v,I){this.routerEvent=C,this.position=v,this.anchor=I,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Nl=(()=>{class w{createUrlTree(v,I,L,z,Q,Le){return md(v||I.root,L,z,Q,Le)}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac}),w})(),Ll=(()=>{class w{}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:function(C){return Nl.\u0275fac(C)},providedIn:"root"}),w})();class Xa{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const v=this.pathFromRoot(C);return v.length>1?v[v.length-2]:null}children(C){const v=Lo(C,this._root);return v?v.children.map(I=>I.value):[]}firstChild(C){const v=Lo(C,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(C){const v=io(C,this._root);return v.length<2?[]:v[v.length-2].children.map(L=>L.value).filter(L=>L!==C)}pathFromRoot(C){return io(C,this._root).map(v=>v.value)}}function Lo(w,C){if(w===C.value)return C;for(const v of C.children){const I=Lo(w,v);if(I)return I}return null}function io(w,C){if(w===C.value)return[C];for(const v of C.children){const I=io(w,v);if(I.length)return I.unshift(C),I}return[]}class Ir{constructor(C,v){this.value=C,this.children=v}toString(){return`TreeNode(${this.value})`}}function Jc(w){const C={};return w&&w.children.forEach(v=>C[v.value.outlet]=v),C}class Ui extends Xa{constructor(C,v){super(C),this.snapshot=v,Cc(this,C)}toString(){return this.snapshot.toString()}}function _i(w,C){const v=function wc(w,C){const Q=new $n([],{},{},"",{},yt,C,null,w.root,-1,{});return new bc("",new Ir(Q,[]))}(w,C),I=new me.X([new Rr("",{})]),L=new me.X({}),z=new me.X({}),Q=new me.X({}),Le=new me.X(""),ft=new Ms(I,L,Q,Le,z,yt,C,v.root);return ft.snapshot=v.root,new Ui(new Ir(ft,[]),v)}class Ms{constructor(C,v,I,L,z,Q,Le,ft){this.url=C,this.params=v,this.queryParams=I,this.fragment=L,this.data=z,this.outlet=Q,this.component=Le,this.title=this.data?.pipe((0,Xe.U)(rn=>rn[jt]))??(0,te.of)(void 0),this._futureSnapshot=ft}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(C=>Bn(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(C=>Bn(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ea(w,C="emptyOnly"){const v=w.pathFromRoot;let I=0;if("always"!==C)for(I=v.length-1;I>=1;){const L=v[I],z=v[I-1];if(L.routeConfig&&""===L.routeConfig.path)I--;else{if(z.component)break;I--}}return function Is(w){return w.reduce((C,v)=>({params:{...C.params,...v.params},data:{...C.data,...v.data},resolve:{...v.data,...C.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(I))}class $n{get title(){return this.data?.[jt]}constructor(C,v,I,L,z,Q,Le,ft,rn,Ht,lr){this.url=C,this.params=v,this.queryParams=I,this.fragment=L,this.data=z,this.outlet=Q,this.component=Le,this.routeConfig=ft,this._urlSegment=rn,this._lastPathIndex=Ht,this._resolve=lr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(I=>I.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bc extends Xa{constructor(C,v){super(v),this.url=C,Cc(this,v)}toString(){return cs(this._root)}}function Cc(w,C){C.value._routerState=w,C.children.forEach(v=>Cc(w,v))}function cs(w){const C=w.children.length>0?` { ${w.children.map(cs).join(", ")} } `:"";return`${w.value}${C}`}function Bi(w){if(w.snapshot){const C=w.snapshot,v=w._futureSnapshot;w.snapshot=v,Zr(C.queryParams,v.queryParams)||w.queryParams.next(v.queryParams),C.fragment!==v.fragment&&w.fragment.next(v.fragment),Zr(C.params,v.params)||w.params.next(v.params),function Wn(w,C){if(w.length!==C.length)return!1;for(let v=0;v<w.length;++v)if(!Zr(w[v],C[v]))return!1;return!0}(C.url,v.url)||w.url.next(v.url),Zr(C.data,v.data)||w.data.next(v.data)}else w.snapshot=w._futureSnapshot,w.data.next(w._futureSnapshot.data)}function pu(w,C){const v=Zr(w.params,C.params)&&function Wi(w,C){return Yn(w,C)&&w.every((v,I)=>Zr(v.parameters,C[I].parameters))}(w.url,C.url);return v&&!(!w.parent!=!C.parent)&&(!w.parent||pu(w.parent,C.parent))}function Ec(w,C,v){if(v&&w.shouldReuseRoute(C.value,v.value.snapshot)){const I=v.value;I._futureSnapshot=C.value;const L=function Op(w,C,v){return C.children.map(I=>{for(const L of v.children)if(w.shouldReuseRoute(I.value,L.value.snapshot))return Ec(w,I,L);return Ec(w,I)})}(w,C,v);return new Ir(I,L)}{if(w.shouldAttach(C.value)){const z=w.retrieve(C.value);if(null!==z){const Q=z.route;return Q.value._futureSnapshot=C.value,Q.children=C.children.map(Le=>Ec(w,Le)),Q}}const I=function gu(w){return new Ms(new me.X(w.url),new me.X(w.params),new me.X(w.queryParams),new me.X(w.fragment),new me.X(w.data),w.outlet,w.component,w)}(C.value),L=C.children.map(z=>Ec(w,z));return new Ir(I,L)}}const na="ngNavigationCancelingError";function _d(w,C){const{redirectTo:v,navigationBehaviorOptions:I}=Ri(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,L=vd(!1,0,C);return L.url=v,L.navigationBehaviorOptions=I,L}function vd(w,C,v){const I=new Error("NavigationCancelingError: "+(w||""));return I[na]=!0,I.cancellationCode=C,v&&(I.url=v),I}function ec(w){return yd(w)&&Ri(w.url)}function yd(w){return w&&w[na]}class mu{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new so,this.attachRef=null}}let so=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(v,I){const L=this.getOrCreateContext(v);L.outlet=I,this.contexts.set(v,L)}onChildOutletDestroyed(v){const I=this.getContext(v);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let I=this.getContext(v);return I||(I=new mu,this.contexts.set(v,I)),I}getContext(v){return this.contexts.get(v)||null}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const mo=!1;let Ul=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=yt,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.attachEvents=new A.vpe,this.detachEvents=new A.vpe,this.parentContexts=(0,A.f3M)(so),this.location=(0,A.f3M)(A.s_b),this.changeDetector=(0,A.f3M)(A.sBO),this.environmentInjector=(0,A.f3M)(A.lqb)}ngOnChanges(v){if(v.name){const{firstChange:I,previousValue:L}=v.name;if(I)return;this.isTrackedInParentContexts(L)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(L)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A.vHH(4012,mo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A.vHH(4012,mo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A.vHH(4012,mo);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,I){this.activated=v,this._activatedRoute=I,this.location.insert(v.hostView),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,I){if(this.isActivated)throw new A.vHH(4013,mo);this._activatedRoute=v;const L=this.location,Q=v.snapshot.component,Le=this.parentContexts.getOrCreateContext(this.name).children,ft=new Wf(v,Le,L.injector);if(I&&function ra(w){return!!w.resolveComponentFactory}(I)){const rn=I.resolveComponentFactory(Q);this.activated=L.createComponent(rn,L.length,ft)}else this.activated=L.createComponent(Q,{index:L.length,injector:ft,environmentInjector:I??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275dir=A.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[A.TTD]}),w})();class Wf{constructor(C,v,I){this.route=C,this.childContexts=v,this.parent=I}get(C,v){return C===Ms?this.route:C===so?this.childContexts:this.parent.get(C,v)}}let Zs=(()=>{class w{}return w.\u0275fac=function(v){return new(v||w)},w.\u0275cmp=A.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[A.jDz],decls:1,vars:0,template:function(v,I){1&v&&A._UZ(0,"router-outlet")},dependencies:[Ul],encapsulation:2}),w})();function _u(w,C){return w.providers&&!w._injector&&(w._injector=(0,A.MMx)(w.providers,C,`Route: ${w.path}`)),w._injector??C}function wd(w){const C=w.children&&w.children.map(wd),v=C?{...w,children:C}:{...w};return!v.component&&!v.loadComponent&&(C||v.loadChildren)&&v.outlet&&v.outlet!==yt&&(v.component=Zs),v}function Yr(w){return w.outlet||yt}function bd(w,C){const v=w.filter(I=>Yr(I)===C);return v.push(...w.filter(I=>Yr(I)!==C)),v}function rc(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let C=w.parent;C;C=C.parent){const v=C.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Kf{constructor(C,v,I,L){this.routeReuseStrategy=C,this.futureState=v,this.currState=I,this.forwardEvent=L}activate(C){const v=this.futureState._root,I=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,I,C),Bi(this.futureState.root),this.activateChildRoutes(v,I,C)}deactivateChildRoutes(C,v,I){const L=Jc(v);C.children.forEach(z=>{const Q=z.value.outlet;this.deactivateRoutes(z,L[Q],I),delete L[Q]}),jr(L,(z,Q)=>{this.deactivateRouteAndItsChildren(z,I)})}deactivateRoutes(C,v,I){const L=C.value,z=v?v.value:null;if(L===z)if(L.component){const Q=I.getContext(L.outlet);Q&&this.deactivateChildRoutes(C,v,Q.children)}else this.deactivateChildRoutes(C,v,I);else z&&this.deactivateRouteAndItsChildren(v,I)}deactivateRouteAndItsChildren(C,v){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,v):this.deactivateRouteAndOutlet(C,v)}detachAndStoreRouteSubtree(C,v){const I=v.getContext(C.value.outlet),L=I&&C.value.component?I.children:v,z=Jc(C);for(const Q of Object.keys(z))this.deactivateRouteAndItsChildren(z[Q],L);if(I&&I.outlet){const Q=I.outlet.detach(),Le=I.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:Q,route:C,contexts:Le})}}deactivateRouteAndOutlet(C,v){const I=v.getContext(C.value.outlet),L=I&&C.value.component?I.children:v,z=Jc(C);for(const Q of Object.keys(z))this.deactivateRouteAndItsChildren(z[Q],L);I&&(I.outlet&&(I.outlet.deactivate(),I.children.onOutletDeactivated()),I.attachRef=null,I.resolver=null,I.route=null)}activateChildRoutes(C,v,I){const L=Jc(v);C.children.forEach(z=>{this.activateRoutes(z,L[z.value.outlet],I),this.forwardEvent(new Qi(z.value.snapshot))}),C.children.length&&this.forwardEvent(new go(C.value.snapshot))}activateRoutes(C,v,I){const L=C.value,z=v?v.value:null;if(Bi(L),L===z)if(L.component){const Q=I.getOrCreateContext(L.outlet);this.activateChildRoutes(C,v,Q.children)}else this.activateChildRoutes(C,v,I);else if(L.component){const Q=I.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const Le=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),Q.children.onOutletReAttached(Le.contexts),Q.attachRef=Le.componentRef,Q.route=Le.route.value,Q.outlet&&Q.outlet.attach(Le.componentRef,Le.route.value),Bi(Le.route.value),this.activateChildRoutes(C,null,Q.children)}else{const Le=rc(L.snapshot),ft=Le?.get(A._Vd)??null;Q.attachRef=null,Q.route=L,Q.resolver=ft,Q.injector=Le,Q.outlet&&Q.outlet.activateWith(L,Q.injector),this.activateChildRoutes(C,null,Q.children)}}else this.activateChildRoutes(C,null,I)}}class tl{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class ls{constructor(C,v){this.component=C,this.route=v}}function Cd(w,C,v){const I=w._root;return vi(I,C?C._root:null,v,[I.value])}function _o(w,C){const v=Symbol(),I=C.get(w,v);return I===v?"function"!=typeof w||(0,A.Z0I)(w)?C.get(w):w:I}function vi(w,C,v,I,L={canDeactivateChecks:[],canActivateChecks:[]}){const z=Jc(C);return w.children.forEach(Q=>{(function q(w,C,v,I,L={canDeactivateChecks:[],canActivateChecks:[]}){const z=w.value,Q=C?C.value:null,Le=v?v.getContext(w.value.outlet):null;if(Q&&z.routeConfig===Q.routeConfig){const ft=function k(w,C,v){if("function"==typeof v)return v(w,C);switch(v){case"pathParamsChange":return!Yn(w.url,C.url);case"pathParamsOrQueryParamsChange":return!Yn(w.url,C.url)||!Zr(w.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pu(w,C)||!Zr(w.queryParams,C.queryParams);default:return!pu(w,C)}}(Q,z,z.routeConfig.runGuardsAndResolvers);ft?L.canActivateChecks.push(new tl(I)):(z.data=Q.data,z._resolvedData=Q._resolvedData),vi(w,C,z.component?Le?Le.children:null:v,I,L),ft&&Le&&Le.outlet&&Le.outlet.isActivated&&L.canDeactivateChecks.push(new ls(Le.outlet.component,Q))}else Q&&b(C,Le,L),L.canActivateChecks.push(new tl(I)),vi(w,null,z.component?Le?Le.children:null:v,I,L)})(Q,z[Q.value.outlet],v,I.concat([Q.value]),L),delete z[Q.value.outlet]}),jr(z,(Q,Le)=>b(Q,v.getContext(Le),L)),L}function b(w,C,v){const I=Jc(w),L=w.value;jr(I,(z,Q)=>{b(z,L.component?C?C.children.getContext(Q):null:C,v)}),v.canDeactivateChecks.push(new ls(L.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,L))}function E(w){return"function"==typeof w}function vn(w){return w instanceof ie.K||"EmptyError"===w?.name}const Sn=Symbol("INITIAL_VALUE");function Cn(){return(0,Et.w)(w=>(0,re.a)(w.map(C=>C.pipe((0,qt.q)(1),function Fe(...w){const C=(0,Mt.yG)(w);return(0,nt.e)((v,I)=>{(C?(0,we.z)(w,v,C):(0,we.z)(w,v)).subscribe(I)})}(Sn)))).pipe((0,Xe.U)(C=>{for(const v of C)if(!0!==v){if(v===Sn)return Sn;if(!1===v||v instanceof Kn)return v}return!0}),_t(C=>C!==Sn),(0,qt.q)(1)))}function Td(w){return(0,Ce.z)((0,Tr.b)(C=>{if(Ri(C))throw _d(0,C)}),(0,Xe.U)(C=>!0===C))}const Sd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jf(w,C,v,I,L){const z=fs(w,C,v);return z.matched?function Yf(w,C,v,I){const L=C.canMatch;if(!L||0===L.length)return(0,te.of)(!0);const z=L.map(Q=>{const Le=_o(Q,w);return Ss(function Me(w){return w&&E(w.canMatch)}(Le)?Le.canMatch(C,v):w.runInContext(()=>Le(C,v)))});return(0,te.of)(z).pipe(Cn(),Td())}(I=_u(C,I),C,v).pipe((0,Xe.U)(Q=>!0===Q?z:{...Sd})):(0,te.of)(z)}function fs(w,C,v){if(""===C.path)return"full"===C.pathMatch&&(w.hasChildren()||v.length>0)?{...Sd}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const L=(C.matcher||rr)(v,w,C);if(!L)return{...Sd};const z={};jr(L.posParams,(Le,ft)=>{z[ft]=Le.path});const Q=L.consumed.length>0?{...z,...L.consumed[L.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:L.consumed,remainingSegments:v.slice(L.consumed.length),parameters:Q,positionalParamSegments:L.posParams??{}}}function vo(w,C,v,I){if(v.length>0&&function ic(w,C,v){return v.some(I=>Md(w,C,I)&&Yr(I)!==yt)}(w,v,I)){const z=new jn(C,function Bl(w,C,v,I){const L={};L[yt]=I,I._sourceSegment=w,I._segmentIndexShift=C.length;for(const z of v)if(""===z.path&&Yr(z)!==yt){const Q=new jn([],{});Q._sourceSegment=w,Q._segmentIndexShift=C.length,L[Yr(z)]=Q}return L}(w,C,I,new jn(v,w.children)));return z._sourceSegment=w,z._segmentIndexShift=C.length,{segmentGroup:z,slicedSegments:[]}}if(0===v.length&&function U0(w,C,v){return v.some(I=>Md(w,C,I))}(w,v,I)){const z=new jn(w.segments,function Ad(w,C,v,I,L){const z={};for(const Q of I)if(Md(w,v,Q)&&!L[Yr(Q)]){const Le=new jn([],{});Le._sourceSegment=w,Le._segmentIndexShift=C.length,z[Yr(Q)]=Le}return{...L,...z}}(w,C,v,I,w.children));return z._sourceSegment=w,z._segmentIndexShift=C.length,{segmentGroup:z,slicedSegments:v}}const L=new jn(w.segments,w.children);return L._sourceSegment=w,L._segmentIndexShift=C.length,{segmentGroup:L,slicedSegments:v}}function Md(w,C,v){return(!(w.hasChildren()||C.length>0)||"full"!==v.pathMatch)&&""===v.path}function Fp(w,C,v,I){return!!(Yr(w)===I||I!==yt&&Md(C,v,w))&&("**"===w.path||fs(C,w,v).matched)}function Rp(w,C,v){return 0===C.length&&!w.children[v]}const Vl=!1;class Zl{constructor(C){this.segmentGroup=C||null}}class Qf{constructor(C){this.urlTree=C}}function nl(w){return(0,ve._)(new Zl(w))}function Xf(w){return(0,ve._)(new Qf(w))}class Lp{constructor(C,v,I,L,z){this.injector=C,this.configLoader=v,this.urlSerializer=I,this.urlTree=L,this.config=z,this.allowRedirects=!0}apply(){const C=vo(this.urlTree.root,[],[],this.config).segmentGroup,v=new jn(C.segments,C.children);return this.expandSegmentGroup(this.injector,this.config,v,yt).pipe((0,Xe.U)(z=>this.createUrlTree(Sr(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,qe.K)(z=>{if(z instanceof Qf)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof Zl?this.noMatchError(z):z}))}match(C){return this.expandSegmentGroup(this.injector,this.config,C.root,yt).pipe((0,Xe.U)(L=>this.createUrlTree(Sr(L),C.queryParams,C.fragment))).pipe((0,qe.K)(L=>{throw L instanceof Zl?this.noMatchError(L):L}))}noMatchError(C){return new A.vHH(4002,Vl)}createUrlTree(C,v,I){const L=Tn(C);return new Kn(L,v,I)}expandSegmentGroup(C,v,I,L){return 0===I.segments.length&&I.hasChildren()?this.expandChildren(C,v,I).pipe((0,Xe.U)(z=>new jn([],z))):this.expandSegment(C,I,v,I.segments,L,!0)}expandChildren(C,v,I){const L=[];for(const z of Object.keys(I.children))"primary"===z?L.unshift(z):L.push(z);return(0,s.D)(L).pipe(gi(z=>{const Q=I.children[z],Le=bd(v,z);return this.expandSegmentGroup(C,Le,Q,z).pipe((0,Xe.U)(ft=>({segment:ft,outlet:z})))}),it((z,Q)=>(z[Q.outlet]=Q.segment,z),{}),vt())}expandSegment(C,v,I,L,z,Q){return(0,s.D)(I).pipe(gi(Le=>this.expandSegmentAgainstRoute(C,v,I,Le,L,z,Q).pipe((0,qe.K)(rn=>{if(rn instanceof Zl)return(0,te.of)(null);throw rn}))),Or(Le=>!!Le),(0,qe.K)((Le,ft)=>{if(vn(Le))return Rp(v,L,z)?(0,te.of)(new jn([],{})):nl(v);throw Le}))}expandSegmentAgainstRoute(C,v,I,L,z,Q,Le){return Fp(L,v,z,Q)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(C,v,L,z,Q):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,v,I,L,z,Q):nl(v):nl(v)}expandSegmentAgainstRouteUsingRedirect(C,v,I,L,z,Q){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,I,L,Q):this.expandRegularSegmentAgainstRouteUsingRedirect(C,v,I,L,z,Q)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,v,I,L){const z=this.applyRedirectCommands([],I.redirectTo,{});return I.redirectTo.startsWith("/")?Xf(z):this.lineralizeSegments(I,z).pipe((0,He.z)(Q=>{const Le=new jn(Q,{});return this.expandSegment(C,Le,v,Q,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,v,I,L,z,Q){const{matched:Le,consumedSegments:ft,remainingSegments:rn,positionalParamSegments:Ht}=fs(v,L,z);if(!Le)return nl(v);const lr=this.applyRedirectCommands(ft,L.redirectTo,Ht);return L.redirectTo.startsWith("/")?Xf(lr):this.lineralizeSegments(L,lr).pipe((0,He.z)(ai=>this.expandSegment(C,v,I,ai.concat(rn),Q,!1)))}matchSegmentAgainstRoute(C,v,I,L,z){return"**"===I.path?(C=_u(I,C),I.loadChildren?(I._loadedRoutes?(0,te.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):this.configLoader.loadChildren(C,I)).pipe((0,Xe.U)(Le=>(I._loadedRoutes=Le.routes,I._loadedInjector=Le.injector,new jn(L,{})))):(0,te.of)(new jn(L,{}))):Jf(v,I,L,C).pipe((0,Et.w)(({matched:Q,consumedSegments:Le,remainingSegments:ft})=>Q?this.getChildConfig(C=I._injector??C,I,L).pipe((0,He.z)(Ht=>{const lr=Ht.injector??C,ai=Ht.routes,{segmentGroup:ql,slicedSegments:ac}=vo(v,Le,ft,ai),Ic=new jn(ql.segments,ql.children);if(0===ac.length&&Ic.hasChildren())return this.expandChildren(lr,ai,Ic).pipe((0,Xe.U)(ch=>new jn(Le,ch)));if(0===ai.length&&0===ac.length)return(0,te.of)(new jn(Le,{}));const Oa=Yr(I)===z;return this.expandSegment(lr,Ic,ai,ac,Oa?yt:z,!0).pipe((0,Xe.U)(jd=>new jn(Le.concat(jd.segments),jd.children)))})):nl(v)))}getChildConfig(C,v,I){return v.children?(0,te.of)({routes:v.children,injector:C}):v.loadChildren?void 0!==v._loadedRoutes?(0,te.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function ia(w,C,v,I){const L=C.canLoad;if(void 0===L||0===L.length)return(0,te.of)(!0);const z=L.map(Q=>{const Le=_o(Q,w);return Ss(function j(w){return w&&E(w.canLoad)}(Le)?Le.canLoad(C,v):w.runInContext(()=>Le(C,v)))});return(0,te.of)(z).pipe(Cn(),Td())}(C,v,I).pipe((0,He.z)(L=>L?this.configLoader.loadChildren(C,v).pipe((0,Tr.b)(z=>{v._loadedRoutes=z.routes,v._loadedInjector=z.injector})):function Id(w){return(0,ve._)(vd(Vl,3))}())):(0,te.of)({routes:[],injector:C})}lineralizeSegments(C,v){let I=[],L=v.root;for(;;){if(I=I.concat(L.segments),0===L.numberOfChildren)return(0,te.of)(I);if(L.numberOfChildren>1||!L.children[yt])return C.redirectTo,(0,ve._)(new A.vHH(4e3,Vl));L=L.children[yt]}}applyRedirectCommands(C,v,I){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),C,I)}applyRedirectCreateUrlTree(C,v,I,L){const z=this.createSegmentGroup(C,v.root,I,L);return new Kn(z,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(C,v){const I={};return jr(C,(L,z)=>{if("string"==typeof L&&L.startsWith(":")){const Le=L.substring(1);I[z]=v[Le]}else I[z]=L}),I}createSegmentGroup(C,v,I,L){const z=this.createSegments(C,v.segments,I,L);let Q={};return jr(v.children,(Le,ft)=>{Q[ft]=this.createSegmentGroup(C,Le,I,L)}),new jn(z,Q)}createSegments(C,v,I,L){return v.map(z=>z.path.startsWith(":")?this.findPosParam(C,z,L):this.findOrReturn(z,I))}findPosParam(C,v,I){const L=I[v.path.substring(1)];if(!L)throw new A.vHH(4001,Vl);return L}findOrReturn(C,v){let I=0;for(const L of v){if(L.path===C.path)return v.splice(I),L;I++}return C}}class nh{}class qs{constructor(C,v,I,L,z,Q,Le){this.injector=C,this.rootComponentType=v,this.config=I,this.urlTree=L,this.url=z,this.paramsInheritanceStrategy=Q,this.urlSerializer=Le}recognize(){const C=vo(this.urlTree.root,[],[],this.config.filter(v=>void 0===v.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,yt).pipe((0,Xe.U)(v=>{if(null===v)return null;const I=new $n([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},yt,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new Ir(I,v),z=new bc(this.url,L);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(C){const v=C.value,I=ea(v,this.paramsInheritanceStrategy);v.params=Object.freeze(I.params),v.data=Object.freeze(I.data),C.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(C,v,I,L){return 0===I.segments.length&&I.hasChildren()?this.processChildren(C,v,I):this.processSegment(C,v,I,I.segments,L)}processChildren(C,v,I){return(0,s.D)(Object.keys(I.children)).pipe(gi(L=>{const z=I.children[L],Q=bd(v,L);return this.processSegmentGroup(C,Q,z,L)}),it((L,z)=>L&&z?(L.push(...z),L):null),function pt(w,C=!1){return(0,nt.e)((v,I)=>{let L=0;v.subscribe((0,gt.x)(I,z=>{const Q=w(z,L++);(Q||C)&&I.next(z),!Q&&I.complete()}))})}(L=>null!==L),kt(null),vt(),(0,Xe.U)(L=>{if(null===L)return null;const z=P(L);return function rl(w){w.sort((C,v)=>C.value.outlet===yt?-1:v.value.outlet===yt?1:C.value.outlet.localeCompare(v.value.outlet))}(z),z}))}processSegment(C,v,I,L,z){return(0,s.D)(v).pipe(gi(Q=>this.processSegmentAgainstRoute(Q._injector??C,Q,I,L,z)),Or(Q=>!!Q),(0,qe.K)(Q=>{if(vn(Q))return Rp(I,L,z)?(0,te.of)([]):(0,te.of)(null);throw Q}))}processSegmentAgainstRoute(C,v,I,L,z){if(v.redirectTo||!Fp(v,I,L,z))return(0,te.of)(null);let Q;if("**"===v.path){const Le=L.length>0?or(L).parameters:{},ft=K(I)+L.length,rn=new $n(L,Le,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,We(v),Yr(v),v.component??v._loadedComponent??null,v,F(I),ft,ct(v));Q=(0,te.of)({snapshot:rn,consumedSegments:[],remainingSegments:[]})}else Q=Jf(I,v,L,C).pipe((0,Xe.U)(({matched:Le,consumedSegments:ft,remainingSegments:rn,parameters:Ht})=>{if(!Le)return null;const lr=K(I)+ft.length;return{snapshot:new $n(ft,Ht,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,We(v),Yr(v),v.component??v._loadedComponent??null,v,F(I),lr,ct(v)),consumedSegments:ft,remainingSegments:rn}}));return Q.pipe((0,Et.w)(Le=>{if(null===Le)return(0,te.of)(null);const{snapshot:ft,consumedSegments:rn,remainingSegments:Ht}=Le;C=v._injector??C;const lr=v._loadedInjector??C,ai=function ni(w){return w.children?w.children:w.loadChildren?w._loadedRoutes:[]}(v),{segmentGroup:ql,slicedSegments:ac}=vo(I,rn,Ht,ai.filter(Oa=>void 0===Oa.redirectTo));if(0===ac.length&&ql.hasChildren())return this.processChildren(lr,ai,ql).pipe((0,Xe.U)(Oa=>null===Oa?null:[new Ir(ft,Oa)]));if(0===ai.length&&0===ac.length)return(0,te.of)([new Ir(ft,[])]);const Ic=Yr(v)===z;return this.processSegment(lr,ai,ql,ac,Ic?yt:z).pipe((0,Xe.U)(Oa=>null===Oa?null:[new Ir(ft,Oa)]))}))}}function Z0(w){const C=w.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function P(w){const C=[],v=new Set;for(const I of w){if(!Z0(I)){C.push(I);continue}const L=C.find(z=>I.value.routeConfig===z.value.routeConfig);void 0!==L?(L.children.push(...I.children),v.add(L)):C.push(I)}for(const I of v){const L=P(I.children);C.push(new Ir(I.value,L))}return C.filter(I=>!v.has(I))}function F(w){let C=w;for(;C._sourceSegment;)C=C._sourceSegment;return C}function K(w){let C=w,v=C._segmentIndexShift??0;for(;C._sourceSegment;)C=C._sourceSegment,v+=C._segmentIndexShift??0;return v-1}function We(w){return w.data||{}}function ct(w){return w.resolve||{}}function Pr(w){return"string"==typeof w.title||null===w.title}function oi(w){return(0,Et.w)(C=>{const v=w(C);return v?(0,s.D)(v).pipe((0,Xe.U)(()=>C)):(0,te.of)(C)})}const Hs=new A.OlP("ROUTES");let sa=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,A.f3M)(A.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,te.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const I=Ss(v.loadComponent()).pipe((0,Xe.U)(Sc),(0,Tr.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=z}),(0,En.x)(()=>{this.componentLoaders.delete(v)})),L=new ln(I,()=>new Wt.x).pipe(Ft());return this.componentLoaders.set(v,L),L}loadChildren(v,I){if(this.childrenLoaders.get(I))return this.childrenLoaders.get(I);if(I._loadedRoutes)return(0,te.of)({routes:I._loadedRoutes,injector:I._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(I);const z=this.loadModuleFactoryOrRoutes(I.loadChildren).pipe((0,Xe.U)(Le=>{this.onLoadEndListener&&this.onLoadEndListener(I);let ft,rn,Ht=!1;Array.isArray(Le)?rn=Le:(ft=Le.create(v).injector,rn=ti(ft.get(Hs,[],A.XFs.Self|A.XFs.Optional)));return{routes:rn.map(wd),injector:ft}}),(0,En.x)(()=>{this.childrenLoaders.delete(I)})),Q=new ln(z,()=>new Wt.x).pipe(Ft());return this.childrenLoaders.set(I,Q),Q}loadModuleFactoryOrRoutes(v){return Ss(v()).pipe((0,Xe.U)(Sc),(0,He.z)(I=>I instanceof A.YKP||Array.isArray(I)?(0,te.of)(I):(0,s.D)(this.compiler.compileModuleAsync(I))))}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Sc(w){return function oa(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let xo=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Wt.x,this.configLoader=(0,A.f3M)(sa),this.environmentInjector=(0,A.f3M)(A.lqb),this.urlSerializer=(0,A.f3M)(Fi),this.rootContexts=(0,A.f3M)(so),this.navigationId=0,this.afterPreactivation=()=>(0,te.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=L=>this.events.next(new xn(L)),this.configLoader.onLoadStartListener=L=>this.events.next(new As(L))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const I=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:I})}setupNavigations(v){return this.transitions=new me.X({id:0,targetPageId:0,currentUrlTree:v.currentUrlTree,currentRawUrl:v.currentUrlTree,extractedUrl:v.urlHandlingStrategy.extract(v.currentUrlTree),urlAfterRedirects:v.urlHandlingStrategy.extract(v.currentUrlTree),rawUrl:v.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fn,restoredState:null,currentSnapshot:v.routerState.snapshot,targetSnapshot:null,currentRouterState:v.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(I=>0!==I.id),(0,Xe.U)(I=>({...I,extractedUrl:v.urlHandlingStrategy.extract(I.rawUrl)})),(0,Et.w)(I=>{let L=!1,z=!1;return(0,te.of)(I).pipe((0,Tr.b)(Q=>{this.currentNavigation={id:Q.id,initialUrl:Q.rawUrl,extractedUrl:Q.extractedUrl,trigger:Q.source,extras:Q.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Et.w)(Q=>{const Le=v.browserUrlTree.toString(),ft=!v.navigated||Q.extractedUrl.toString()!==Le||Le!==v.currentUrlTree.toString();if(!ft&&"reload"!==(Q.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const Ht="";return this.events.next(new Qo(Q.id,v.serializeUrl(I.rawUrl),Ht,0)),v.rawUrlTree=Q.rawUrl,Q.resolve(null),Oe.E}if(v.urlHandlingStrategy.shouldProcessUrl(Q.rawUrl))return Bp(Q.source)&&(v.browserUrlTree=Q.extractedUrl),(0,te.of)(Q).pipe((0,Et.w)(Ht=>{const lr=this.transitions?.getValue();return this.events.next(new as(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),Ht.source,Ht.restoredState)),lr!==this.transitions?.getValue()?Oe.E:Promise.resolve(Ht)}),function Up(w,C,v,I){return(0,Et.w)(L=>function eh(w,C,v,I,L){return new Lp(w,C,v,I,L).apply()}(w,C,v,L.extractedUrl,I).pipe((0,Xe.U)(z=>({...L,urlAfterRedirects:z}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,v.config),(0,Tr.b)(Ht=>{this.currentNavigation={...this.currentNavigation,finalUrl:Ht.urlAfterRedirects},I.urlAfterRedirects=Ht.urlAfterRedirects}),function hn(w,C,v,I,L){return(0,He.z)(z=>function V0(w,C,v,I,L,z,Q="emptyOnly"){return new qs(w,C,v,I,L,Q,z).recognize().pipe((0,Et.w)(Le=>null===Le?function B0(w){return new Ie.y(C=>C.error(w))}(new nh):(0,te.of)(Le)))}(w,C,v,z.urlAfterRedirects,I.serialize(z.urlAfterRedirects),I,L).pipe((0,Xe.U)(Q=>({...z,targetSnapshot:Q}))))}(this.environmentInjector,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Tr.b)(Ht=>{if(I.targetSnapshot=Ht.targetSnapshot,"eager"===v.urlUpdateStrategy){if(!Ht.extras.skipLocationChange){const ai=v.urlHandlingStrategy.merge(Ht.urlAfterRedirects,Ht.rawUrl);v.setBrowserUrl(ai,Ht)}v.browserUrlTree=Ht.urlAfterRedirects}const lr=new Yc(Ht.id,this.urlSerializer.serialize(Ht.extractedUrl),this.urlSerializer.serialize(Ht.urlAfterRedirects),Ht.targetSnapshot);this.events.next(lr)}));if(ft&&v.urlHandlingStrategy.shouldProcessUrl(v.rawUrlTree)){const{id:Ht,extractedUrl:lr,source:ai,restoredState:ql,extras:ac}=Q,Ic=new as(Ht,this.urlSerializer.serialize(lr),ai,ql);this.events.next(Ic);const Oa=_i(lr,this.rootComponentType).snapshot;return I={...Q,targetSnapshot:Oa,urlAfterRedirects:lr,extras:{...ac,skipLocationChange:!1,replaceUrl:!1}},(0,te.of)(I)}{const Ht="";return this.events.next(new Qo(Q.id,v.serializeUrl(I.extractedUrl),Ht,1)),v.rawUrlTree=Q.rawUrl,Q.resolve(null),Oe.E}}),(0,Tr.b)(Q=>{const Le=new po(Q.id,this.urlSerializer.serialize(Q.extractedUrl),this.urlSerializer.serialize(Q.urlAfterRedirects),Q.targetSnapshot);this.events.next(Le)}),(0,Xe.U)(Q=>I={...Q,guards:Cd(Q.targetSnapshot,Q.currentSnapshot,this.rootContexts)}),function ot(w,C){return(0,He.z)(v=>{const{targetSnapshot:I,currentSnapshot:L,guards:{canActivateChecks:z,canDeactivateChecks:Q}}=v;return 0===Q.length&&0===z.length?(0,te.of)({...v,guardsResult:!0}):function yn(w,C,v,I){return(0,s.D)(w).pipe((0,He.z)(L=>function Zi(w,C,v,I,L){const z=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,te.of)(!0);const Q=z.map(Le=>{const ft=rc(C)??L,rn=_o(Le,ft);return Ss(function ge(w){return w&&E(w.canDeactivate)}(rn)?rn.canDeactivate(w,C,v,I):ft.runInContext(()=>rn(w,C,v,I))).pipe(Or())});return(0,te.of)(Q).pipe(Cn())}(L.component,L.route,v,C,I)),Or(L=>!0!==L,!0))}(Q,I,L,w).pipe((0,He.z)(Le=>Le&&function N(w){return"boolean"==typeof w}(Le)?function us(w,C,v,I){return(0,s.D)(C).pipe(gi(L=>(0,we.z)(function _r(w,C){return null!==w&&C&&C(new Li(w)),(0,te.of)(!0)}(L.route.parent,I),function ds(w,C){return null!==w&&C&&C(new ka(w)),(0,te.of)(!0)}(L.route,I),function Ci(w,C,v){const I=C[C.length-1],z=C.slice(0,C.length-1).reverse().map(Q=>function Ed(w){const C=w.routeConfig?w.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:w,guards:C}:null}(Q)).filter(Q=>null!==Q).map(Q=>Ue(()=>{const Le=Q.guards.map(ft=>{const rn=rc(Q.node)??v,Ht=_o(ft,rn);return Ss(function X(w){return w&&E(w.canActivateChild)}(Ht)?Ht.canActivateChild(I,w):rn.runInContext(()=>Ht(I,w))).pipe(Or())});return(0,te.of)(Le).pipe(Cn())}));return(0,te.of)(z).pipe(Cn())}(w,L.path,v),function js(w,C,v){const I=C.routeConfig?C.routeConfig.canActivate:null;if(!I||0===I.length)return(0,te.of)(!0);const L=I.map(z=>Ue(()=>{const Q=rc(C)??v,Le=_o(z,Q);return Ss(function H(w){return w&&E(w.canActivate)}(Le)?Le.canActivate(C,w):Q.runInContext(()=>Le(C,w))).pipe(Or())}));return(0,te.of)(L).pipe(Cn())}(w,L.route,v))),Or(L=>!0!==L,!0))}(I,z,w,C):(0,te.of)(Le)),(0,Xe.U)(Le=>({...v,guardsResult:Le})))})}(this.environmentInjector,Q=>this.events.next(Q)),(0,Tr.b)(Q=>{if(I.guardsResult=Q.guardsResult,Ri(Q.guardsResult))throw _d(0,Q.guardsResult);const Le=new Vn(Q.id,this.urlSerializer.serialize(Q.extractedUrl),this.urlSerializer.serialize(Q.urlAfterRedirects),Q.targetSnapshot,!!Q.guardsResult);this.events.next(Le)}),_t(Q=>!!Q.guardsResult||(v.restoreHistory(Q),this.cancelNavigationTransition(Q,"",3),!1)),oi(Q=>{if(Q.guards.canActivateChecks.length)return(0,te.of)(Q).pipe((0,Tr.b)(Le=>{const ft=new fu(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(ft)}),(0,Et.w)(Le=>{let ft=!1;return(0,te.of)(Le).pipe(function Cr(w,C){return(0,He.z)(v=>{const{targetSnapshot:I,guards:{canActivateChecks:L}}=v;if(!L.length)return(0,te.of)(v);let z=0;return(0,s.D)(L).pipe(gi(Q=>function Er(w,C,v,I){const L=w.routeConfig,z=w._resolve;return void 0!==L?.title&&!Pr(L)&&(z[jt]=L.title),function hr(w,C,v,I){const L=function Ln(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===L.length)return(0,te.of)({});const z={};return(0,s.D)(L).pipe((0,He.z)(Q=>function tr(w,C,v,I){const L=rc(C)??I,z=_o(w,L);return Ss(z.resolve?z.resolve(C,v):L.runInContext(()=>z(C,v)))}(w[Q],C,v,I).pipe(Or(),(0,Tr.b)(Le=>{z[Q]=Le}))),st(1),(0,fn.h)(z),(0,qe.K)(Q=>vn(Q)?Oe.E:(0,ve._)(Q)))}(z,w,C,I).pipe((0,Xe.U)(Q=>(w._resolvedData=Q,w.data=ea(w,v).resolve,L&&Pr(L)&&(w.data[jt]=L.title),null)))}(Q.route,I,w,C)),(0,Tr.b)(()=>z++),st(1),(0,He.z)(Q=>z===L.length?(0,te.of)(v):Oe.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Tr.b)({next:()=>ft=!0,complete:()=>{ft||(v.restoreHistory(Le),this.cancelNavigationTransition(Le,"",2))}}))}),(0,Tr.b)(Le=>{const ft=new xc(Le.id,this.urlSerializer.serialize(Le.extractedUrl),this.urlSerializer.serialize(Le.urlAfterRedirects),Le.targetSnapshot);this.events.next(ft)}))}),oi(Q=>{const Le=ft=>{const rn=[];ft.routeConfig?.loadComponent&&!ft.routeConfig._loadedComponent&&rn.push(this.configLoader.loadComponent(ft.routeConfig).pipe((0,Tr.b)(Ht=>{ft.component=Ht}),(0,Xe.U)(()=>{})));for(const Ht of ft.children)rn.push(...Le(Ht));return rn};return(0,re.a)(Le(Q.targetSnapshot.root)).pipe(kt(),(0,qt.q)(1))}),oi(()=>this.afterPreactivation()),(0,Xe.U)(Q=>{const Le=function ta(w,C,v){const I=Ec(w,C._root,v?v._root:void 0);return new Ui(I,C)}(v.routeReuseStrategy,Q.targetSnapshot,Q.currentRouterState);return I={...Q,targetRouterState:Le}}),(0,Tr.b)(Q=>{v.currentUrlTree=Q.urlAfterRedirects,v.rawUrlTree=v.urlHandlingStrategy.merge(Q.urlAfterRedirects,Q.rawUrl),v.routerState=Q.targetRouterState,"deferred"===v.urlUpdateStrategy&&(Q.extras.skipLocationChange||v.setBrowserUrl(v.rawUrlTree,Q),v.browserUrlTree=Q.urlAfterRedirects)}),((w,C,v)=>(0,Xe.U)(I=>(new Kf(C,I.targetRouterState,I.currentRouterState,v).activate(w),I)))(this.rootContexts,v.routeReuseStrategy,Q=>this.events.next(Q)),(0,qt.q)(1),(0,Tr.b)({next:Q=>{L=!0,this.lastSuccessfulNavigation=this.currentNavigation,v.navigated=!0,this.events.next(new Ni(Q.id,this.urlSerializer.serialize(Q.extractedUrl),this.urlSerializer.serialize(v.currentUrlTree))),v.titleStrategy?.updateTitle(Q.targetRouterState.snapshot),Q.resolve(!0)},complete:()=>{L=!0}}),(0,En.x)(()=>{L||z||this.cancelNavigationTransition(I,"",1),this.currentNavigation?.id===I.id&&(this.currentNavigation=null)}),(0,qe.K)(Q=>{if(z=!0,yd(Q)){ec(Q)||(v.navigated=!0,v.restoreHistory(I,!0));const Le=new Hr(I.id,this.urlSerializer.serialize(I.extractedUrl),Q.message,Q.cancellationCode);if(this.events.next(Le),ec(Q)){const ft=v.urlHandlingStrategy.merge(Q.url,v.rawUrlTree),rn={skipLocationChange:I.extras.skipLocationChange,replaceUrl:"eager"===v.urlUpdateStrategy||Bp(I.source)};v.scheduleNavigation(ft,Fn,null,rn,{resolve:I.resolve,reject:I.reject,promise:I.promise})}else I.resolve(!1)}else{v.restoreHistory(I,!0);const Le=new $r(I.id,this.urlSerializer.serialize(I.extractedUrl),Q,I.targetSnapshot??void 0);this.events.next(Le);try{I.resolve(v.errorHandler(Q))}catch(ft){I.reject(ft)}}return Oe.E}))}))}cancelNavigationTransition(v,I,L){const z=new Hr(v.id,this.urlSerializer.serialize(v.extractedUrl),I,L);this.events.next(z),v.resolve(!1)}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Bp(w){return w!==Fn}let j0=(()=>{class w{buildTitle(v){let I,L=v.root;for(;void 0!==L;)I=this.getResolvedTitleForRoute(L)??I,L=L.children.find(z=>z.outlet===yt);return I}getResolvedTitleForRoute(v){return v.data[jt]}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:function(){return(0,A.f3M)(Pd)},providedIn:"root"}),w})(),Pd=(()=>{class w extends j0{constructor(v){super(),this.title=v}updateTitle(v){const I=this.buildTitle(v);void 0!==I&&this.title.setTitle(I)}}return w.\u0275fac=function(v){return new(v||w)(A.LFG(In.Dx))},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),Vp=(()=>{class w{}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:function(){return(0,A.f3M)(jp)},providedIn:"root"}),w})();class Zp{shouldDetach(C){return!1}store(C,v){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,v){return C.routeConfig===v.routeConfig}}let jp=(()=>{class w extends Zp{}return w.\u0275fac=function(){let C;return function(I){return(C||(C=A.n5z(w)))(I||w)}}(),w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Ac=new A.OlP("",{providedIn:"root",factory:()=>({})});let qp=(()=>{class w{}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:function(){return(0,A.f3M)(Dd)},providedIn:"root"}),w})(),Dd=(()=>{class w{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,I){return v}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function rh(w){throw w}function kd(w,C,v){return C.parse("/")}const ih={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let oo=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,A.f3M)(A.c2e),this.isNgZoneEnabled=!1,this.options=(0,A.f3M)(Ac,{optional:!0})||{},this.errorHandler=this.options.errorHandler||rh,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||kd,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,A.f3M)(qp),this.routeReuseStrategy=(0,A.f3M)(Vp),this.urlCreationStrategy=(0,A.f3M)(Ll),this.titleStrategy=(0,A.f3M)(j0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ti((0,A.f3M)(Hs,{optional:!0})??[]),this.navigationTransitions=(0,A.f3M)(xo),this.urlSerializer=(0,A.f3M)(Fi),this.location=(0,A.f3M)(Tt.Ye),this.isNgZoneEnabled=(0,A.f3M)(A.R0b)instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=_i(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId??0},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Fn,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const I="popstate"===v.type?"popstate":"hashchange";"popstate"===I&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,I,v.state)},0)}))}navigateToSyncWithBrowser(v,I,L){const z={replaceUrl:!0},Q=L?.navigationId?L:null;if(L){const ft={...L};delete ft.navigationId,delete ft.\u0275routerPageId,0!==Object.keys(ft).length&&(z.state=ft)}const Le=this.parseUrl(v);this.scheduleNavigation(Le,I,Q,z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(v){this.config=v.map(wd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,I={}){const{relativeTo:L,queryParams:z,fragment:Q,queryParamsHandling:Le,preserveFragment:ft}=I,rn=ft?this.currentUrlTree.fragment:Q;let Ht=null;switch(Le){case"merge":Ht={...this.currentUrlTree.queryParams,...z};break;case"preserve":Ht=this.currentUrlTree.queryParams;break;default:Ht=z||null}return null!==Ht&&(Ht=this.removeEmptyProps(Ht)),this.urlCreationStrategy.createUrlTree(L,this.routerState,this.currentUrlTree,v,Ht,rn??null)}navigateByUrl(v,I={skipLocationChange:!1}){const L=Ri(v)?v:this.parseUrl(v),z=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(z,Fn,null,I)}navigate(v,I={skipLocationChange:!1}){return function yu(w){for(let C=0;C<w.length;C++){const v=w[C];if(null==v)throw new A.vHH(4008,false)}}(v),this.navigateByUrl(this.createUrlTree(v,I),I)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let I;try{I=this.urlSerializer.parse(v)}catch(L){I=this.malformedUriErrorHandler(L,this.urlSerializer,v)}return I}isActive(v,I){let L;if(L=!0===I?{...ih}:!1===I?{...Uo}:I,Ri(v))return wr(this.currentUrlTree,v,L);const z=this.parseUrl(v);return wr(this.currentUrlTree,z,L)}removeEmptyProps(v){return Object.keys(v).reduce((I,L)=>{const z=v[L];return null!=z&&(I[L]=z),I},{})}scheduleNavigation(v,I,L,z,Q){if(this.disposed)return Promise.resolve(!1);let Le,ft,rn,Ht;return Q?(Le=Q.resolve,ft=Q.reject,rn=Q.promise):rn=new Promise((lr,ai)=>{Le=lr,ft=ai}),Ht="computed"===this.canceledNavigationResolution?L&&L.\u0275routerPageId?L.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Ht,source:I,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:v,extras:z,resolve:Le,reject:ft,promise:rn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),rn.catch(lr=>Promise.reject(lr))}setBrowserUrl(v,I){const L=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(L)||I.extras.replaceUrl){const Q={...I.extras.state,...this.generateNgRouterState(I.id,this.browserPageId)};this.location.replaceState(L,"",Q)}else{const z={...I.extras.state,...this.generateNgRouterState(I.id,I.targetPageId)};this.location.go(L,"",z)}}restoreHistory(v,I=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-(this.browserPageId??this.currentPageId);0!==z?this.location.historyGo(z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===z&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(I&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,I){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:I}:{navigationId:v}}}return w.\u0275fac=function(v){return new(v||w)},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),wo=(()=>{class w{constructor(v,I,L,z,Q,Le){this.router=v,this.route=I,this.tabIndexAttribute=L,this.renderer=z,this.el=Q,this.locationStrategy=Le,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Wt.x;const ft=Q.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ft||"area"===ft,this.isAnchorElement?this.subscription=v.events.subscribe(rn=>{rn instanceof Ni&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(v){this._preserveFragment=(0,A.D6c)(v)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(v){this._skipLocationChange=(0,A.D6c)(v)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(v){this._replaceUrl=(0,A.D6c)(v)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(v){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",v)}ngOnChanges(v){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(v,I,L,z,Q){return!!(null===this.urlTree||this.isAnchorElement&&(0!==v||I||L||z||Q||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const v=null===this.href?null:(0,A.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",v)}applyAttributeValue(v,I){const L=this.renderer,z=this.el.nativeElement;null!==I?L.setAttribute(z,v,I):L.removeAttribute(z,v)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return w.\u0275fac=function(v){return new(v||w)(A.Y36(oo),A.Y36(Ms),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq),A.Y36(Tt.S$))},w.\u0275dir=A.lG2({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(v,I){1&v&&A.NdJ("click",function(z){return I.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&v&&A.uIk("target",I.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[A.TTD]}),w})(),Od=(()=>{class w{get isActive(){return this._isActive}constructor(v,I,L,z,Q){this.router=v,this.element=I,this.renderer=L,this.cdr=z,this.link=Q,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new A.vpe,this.routerEventsSubscription=v.events.subscribe(Le=>{Le instanceof Ni&&this.update()})}ngAfterContentInit(){(0,te.of)(this.links.changes,(0,te.of)(null)).pipe((0,er.J)()).subscribe(v=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const v=[...this.links.toArray(),this.link].filter(I=>!!I).map(I=>I.onChanges);this.linkInputChangesSubscription=(0,s.D)(v).pipe((0,er.J)()).subscribe(I=>{this._isActive!==this.isLinkActive(this.router)(I)&&this.update()})}set routerLinkActive(v){const I=Array.isArray(v)?v:v.split(" ");this.classes=I.filter(L=>!!L)}ngOnChanges(v){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const v=this.hasActiveLinks();this._isActive!==v&&(this._isActive=v,this.cdr.markForCheck(),this.classes.forEach(I=>{v?this.renderer.addClass(this.element.nativeElement,I):this.renderer.removeClass(this.element.nativeElement,I)}),v&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(v))})}isLinkActive(v){const I=function xu(w){return!!w.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return L=>!!L.urlTree&&v.isActive(L.urlTree,I)}hasActiveLinks(){const v=this.isLinkActive(this.router);return this.link&&v(this.link)||this.links.some(v)}}return w.\u0275fac=function(v){return new(v||w)(A.Y36(oo),A.Y36(A.SBq),A.Y36(A.Qsj),A.Y36(A.sBO),A.Y36(wo,8))},w.\u0275dir=A.lG2({type:w,selectors:[["","routerLinkActive",""]],contentQueries:function(v,I,L){if(1&v&&A.Suo(L,wo,5),2&v){let z;A.iGM(z=A.CRH())&&(I.links=z)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[A.TTD]}),w})();class sh{}let z0=(()=>{class w{constructor(v,I,L,z,Q){this.router=v,this.injector=L,this.preloadingStrategy=z,this.loader=Q}setUpPreloading(){this.subscription=this.router.events.pipe(_t(v=>v instanceof Ni),gi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,I){const L=[];for(const z of I){z.providers&&!z._injector&&(z._injector=(0,A.MMx)(z.providers,v,`Route: ${z.path}`));const Q=z._injector??v,Le=z._loadedInjector??Q;(z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent)&&L.push(this.preloadConfig(Q,z)),(z.children||z._loadedRoutes)&&L.push(this.processRoutes(Le,z.children??z._loadedRoutes))}return(0,s.D)(L).pipe((0,er.J)())}preloadConfig(v,I){return this.preloadingStrategy.preload(I,()=>{let L;L=I.loadChildren&&void 0===I.canLoad?this.loader.loadChildren(v,I):(0,te.of)(null);const z=L.pipe((0,He.z)(Q=>null===Q?(0,te.of)(void 0):(I._loadedRoutes=Q.routes,I._loadedInjector=Q.injector,this.processRoutes(Q.injector??v,Q.routes))));if(I.loadComponent&&!I._loadedComponent){const Q=this.loader.loadComponent(I);return(0,s.D)([z,Q]).pipe((0,er.J)())}return z})}}return w.\u0275fac=function(v){return new(v||w)(A.LFG(oo),A.LFG(A.Sil),A.LFG(A.lqb),A.LFG(sh),A.LFG(sa))},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Fd=new A.OlP("");let sc=(()=>{class w{constructor(v,I,L,z,Q={}){this.urlSerializer=v,this.transitions=I,this.viewportScroller=L,this.zone=z,this.options=Q,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Q.scrollPositionRestoration=Q.scrollPositionRestoration||"disabled",Q.anchorScrolling=Q.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof as?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Ni&&(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Xi&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,I){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xi(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,I))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return w.\u0275fac=function(v){A.$Z()},w.\u0275prov=A.Yz7({token:w,factory:w.\u0275fac}),w})();var bo=(()=>((bo=bo||{})[bo.COMPLETE=0]="COMPLETE",bo[bo.FAILED=1]="FAILED",bo[bo.REDIRECTING=2]="REDIRECTING",bo))();const Ei=!1;function Mc(w,C){return{\u0275kind:w,\u0275providers:C}}const oc=new A.OlP("",{providedIn:"root",factory:()=>!1});function W0(){const w=(0,A.f3M)(A.zs3);return C=>{const v=w.get(A.z2F);if(C!==v.components[0])return;const I=w.get(oo),L=w.get(Ud);1===w.get(Bd)&&I.initialNavigation(),w.get(ah,null,A.XFs.Optional)?.setUpPreloading(),w.get(Fd,null,A.XFs.Optional)?.init(),I.resetRootComponentType(v.componentTypes[0]),L.closed||(L.next(),L.complete(),L.unsubscribe())}}const Ud=new A.OlP(Ei?"bootstrap done indicator":"",{factory:()=>new Wt.x}),Bd=new A.OlP(Ei?"initial navigation":"",{providedIn:"root",factory:()=>1});function hs(){let w=[];return w=Ei?[{provide:A.Xts,multi:!0,useFactory:()=>{const C=(0,A.f3M)(oo);return()=>C.events.subscribe(v=>{console.group?.(`Router Event: ${v.constructor.name}`),console.log(function hu(w){if(!("type"in w))return`Unknown Router Event: ${w.constructor.name}`;switch(w.type){case 14:return`ActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${w.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${w.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state}, shouldActivate: ${w.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 2:return`NavigationCancel(id: ${w.id}, url: '${w.url}')`;case 16:return`NavigationSkipped(id: ${w.id}, url: '${w.url}')`;case 1:return`NavigationEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${w.id}, url: '${w.url}', error: ${w.error})`;case 0:return`NavigationStart(id: ${w.id}, url: '${w.url}')`;case 6:return`ResolveEnd(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 5:return`ResolveStart(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 10:return`RouteConfigLoadEnd(path: ${w.route.path})`;case 9:return`RouteConfigLoadStart(path: ${w.route.path})`;case 4:return`RoutesRecognized(id: ${w.id}, url: '${w.url}', urlAfterRedirects: '${w.urlAfterRedirects}', state: ${w.state})`;case 15:return`Scroll(anchor: '${w.anchor}', position: '${w.position?`${w.position[0]}, ${w.position[1]}`:null}')`}}(v)),console.log(v),console.groupEnd?.()})}}]:[],Mc(1,w)}const ah=new A.OlP(Ei?"router preloader":"");function Eu(w){return Mc(0,[{provide:ah,useExisting:z0},{provide:sh,useExisting:w}])}const Dr=!1,pw=new A.OlP(Dr?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Hp=[Tt.Ye,{provide:Fi,useClass:Ga},oo,so,{provide:Ms,useFactory:function jl(w){return w.routerState.root},deps:[oo]},sa,Dr?{provide:oc,useValue:!0}:[]];function gw(){return new A.PXZ("Router",oo)}let mw=(()=>{class w{constructor(v){}static forRoot(v,I){return{ngModule:w,providers:[Hp,Dr&&I?.enableTracing?hs().\u0275providers:[],{provide:Hs,multi:!0,useValue:v},{provide:pw,useFactory:b1,deps:[[oo,new A.FiY,new A.tp0]]},{provide:Ac,useValue:I||{}},I?.useHash?{provide:Tt.S$,useClass:Tt.Do}:{provide:Tt.S$,useClass:Tt.b0},{provide:Fd,useFactory:()=>{const w=(0,A.f3M)(Tt.EM),C=(0,A.f3M)(A.R0b),v=(0,A.f3M)(Ac),I=(0,A.f3M)(xo),L=(0,A.f3M)(Fi);return v.scrollOffset&&w.setOffset(v.scrollOffset),new sc(L,I,w,C,v)}},I?.preloadingStrategy?Eu(I.preloadingStrategy).\u0275providers:[],{provide:A.PXZ,multi:!0,useFactory:gw},I?.initialNavigation?C1(I):[],[{provide:ji,useFactory:W0},{provide:A.tb,multi:!0,useExisting:ji}]]}}static forChild(v){return{ngModule:w,providers:[{provide:Hs,multi:!0,useValue:v}]}}}return w.\u0275fac=function(v){return new(v||w)(A.LFG(pw,8))},w.\u0275mod=A.oAB({type:w}),w.\u0275inj=A.cJS({imports:[Zs]}),w})();function b1(w){if(Dr&&w)throw new A.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function C1(w){return["disabled"===w.initialNavigation?Mc(3,[{provide:A.ip1,multi:!0,useFactory:()=>{const C=(0,A.f3M)(oo);return()=>{C.setUpLocationChangeListener()}}},{provide:Bd,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?Mc(2,[{provide:Bd,useValue:0},{provide:A.ip1,multi:!0,deps:[A.zs3],useFactory:C=>{const v=C.get(Tt.V_,Promise.resolve());return()=>v.then(()=>new Promise(I=>{const L=C.get(oo),z=C.get(Ud);(function Rd(w,C){w.events.pipe(_t(v=>v instanceof Ni||v instanceof Hr||v instanceof $r||v instanceof Qo),(0,Xe.U)(v=>v instanceof Ni||v instanceof Qo?bo.COMPLETE:v instanceof Hr&&(0===v.code||1===v.code)?bo.REDIRECTING:bo.FAILED),_t(v=>v!==bo.REDIRECTING),(0,qt.q)(1)).subscribe(()=>{C()})})(L,()=>{I(!0)}),C.get(xo).afterPreactivation=()=>(I(!0),z.closed?(0,te.of)(void 0):z),L.initialNavigation()}))}}]).\u0275providers:[]]}const ji=new A.OlP(Dr?"Router Initializer":"")},5861:(Jt,Ne,Z)=>{"use strict";function A(te,me,ie,re,we,Ie,Se){try{var Ue=te[Ie](Se),Ce=Ue.value}catch(ve){return void ie(ve)}Ue.done?me(Ce):Promise.resolve(Ce).then(re,we)}function s(te){return function(){var me=this,ie=arguments;return new Promise(function(re,we){var Ie=te.apply(me,ie);function Se(Ce){A(Ie,re,we,Se,Ue,"next",Ce)}function Ue(Ce){A(Ie,re,we,Se,Ue,"throw",Ce)}Se(void 0)})}}Z.d(Ne,{Z:()=>s})},7582:(Jt,Ne,Z)=>{"use strict";function me(qe,$e){var it={};for(var st in qe)Object.prototype.hasOwnProperty.call(qe,st)&&$e.indexOf(st)<0&&(it[st]=qe[st]);if(null!=qe&&"function"==typeof Object.getOwnPropertySymbols){var vt=0;for(st=Object.getOwnPropertySymbols(qe);vt<st.length;vt++)$e.indexOf(st[vt])<0&&Object.prototype.propertyIsEnumerable.call(qe,st[vt])&&(it[st[vt]]=qe[st[vt]])}return it}function ve(qe,$e,it,st){return new(it||(it=Promise))(function(pt,fn){function En(yt){try{In(st.next(yt))}catch(jt){fn(jt)}}function er(yt){try{In(st.throw(yt))}catch(jt){fn(jt)}}function In(yt){yt.done?pt(yt.value):function vt(pt){return pt instanceof it?pt:new it(function(fn){fn(pt)})}(yt.value).then(En,er)}In((st=st.apply(qe,$e||[])).next())})}function Xe(qe){return this instanceof Xe?(this.v=qe,this):new Xe(qe)}function Et(qe,$e,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt,st=it.apply(qe,$e||[]),pt=[];return vt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),En("next"),En("throw"),En("return",function fn(Bn){return function(rr){return Promise.resolve(rr).then(Bn,jt)}}),vt[Symbol.asyncIterator]=function(){return this},vt;function En(Bn,rr){st[Bn]&&(vt[Bn]=function(Wn){return new Promise(function(Zr,Ts){pt.push([Bn,Wn,Zr,Ts])>1||er(Bn,Wn)})},rr&&(vt[Bn]=rr(vt[Bn])))}function er(Bn,rr){try{!function In(Bn){Bn.value instanceof Xe?Promise.resolve(Bn.value.v).then(yt,jt):Fr(pt[0][2],Bn)}(st[Bn](rr))}catch(Wn){Fr(pt[0][3],Wn)}}function yt(Bn){er("next",Bn)}function jt(Bn){er("throw",Bn)}function Fr(Bn,rr){Bn(rr),pt.shift(),pt.length&&er(pt[0][0],pt[0][1])}}function Mt(qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,$e=qe[Symbol.asyncIterator];return $e?$e.call(qe):(qe=function gt(qe){var $e="function"==typeof Symbol&&Symbol.iterator,it=$e&&qe[$e],st=0;if(it)return it.call(qe);if(qe&&"number"==typeof qe.length)return{next:function(){return qe&&st>=qe.length&&(qe=void 0),{value:qe&&qe[st++],done:!qe}}};throw new TypeError($e?"Object is not iterable.":"Symbol.iterator is not defined.")}(qe),it={},st("next"),st("throw"),st("return"),it[Symbol.asyncIterator]=function(){return this},it);function st(pt){it[pt]=qe[pt]&&function(fn){return new Promise(function(En,er){!function vt(pt,fn,En,er){Promise.resolve(er).then(function(In){pt({value:In,done:En})},fn)}(En,er,(fn=qe[pt](fn)).done,fn.value)})}}}Z.d(Ne,{FC:()=>Et,KL:()=>Mt,_T:()=>me,mG:()=>ve,qq:()=>Xe}),"function"==typeof SuppressedError&&SuppressedError}},Jt=>{Jt(Jt.s=2053)}]);